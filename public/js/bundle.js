/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t,e,n={1986:(t,e,n)=>{e.UINT32=n(734),e.UINT64=n(6924)},734:function(t,e){var n;!function(r){function i(t,e){return this instanceof i?(this._low=0,this._high=0,this.remainder=null,void 0===e?a.call(this,t):"string"==typeof t?s.call(this,t,e):void o.call(this,t,e)):new i(t,e)}function o(t,e){return this._low=0|t,this._high=0|e,this}function a(t){return this._low=65535&t,this._high=t>>>16,this}function s(t,e){var n=parseInt(t,e||10);return this._low=65535&n,this._high=n>>>16,this}i(Math.pow(36,5)),i(Math.pow(16,7)),i(Math.pow(10,9)),i(Math.pow(2,30)),i(36),i(16),i(10),i(2),i.prototype.fromBits=o,i.prototype.fromNumber=a,i.prototype.fromString=s,i.prototype.toNumber=function(){return 65536*this._high+this._low},i.prototype.toString=function(t){return this.toNumber().toString(t||10)},i.prototype.add=function(t){var e=this._low+t._low,n=e>>>16;return n+=this._high+t._high,this._low=65535&e,this._high=65535&n,this},i.prototype.subtract=function(t){return this.add(t.clone().negate())},i.prototype.multiply=function(t){var e,n,r=this._high,i=this._low,o=t._high,a=t._low;return e=(n=i*a)>>>16,e+=r*a,e&=65535,e+=i*o,this._low=65535&n,this._high=65535&e,this},i.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new i(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new i(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},i.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},i.prototype.greaterThan=i.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},i.prototype.lessThan=i.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},i.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},i.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},i.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},i.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},i.prototype.shiftRight=i.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},i.prototype.shiftLeft=i.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},i.prototype.rotateLeft=i.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.clone=function(){return new i(this._low,this._high)},void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},6924:function(t,e){var n;!function(r){var i={16:a(Math.pow(16,5)),10:a(Math.pow(10,5)),2:a(Math.pow(2,5))},o={16:a(16),10:a(10),2:a(2)};function a(t,e,n,r){return this instanceof a?(this.remainder=null,"string"==typeof t?u.call(this,t,e):void 0===e?l.call(this,t):void s.apply(this,arguments)):new a(t,e,n,r)}function s(t,e,n,r){return void 0===n?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|n,this._a48=0|r,this)}function l(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function u(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=i[e]||new a(Math.pow(e,5)),r=0,o=t.length;r<o;r+=5){var s=Math.min(5,o-r),l=parseInt(t.slice(r,r+s),e);this.multiply(s<5?new a(Math.pow(e,s)):n).add(new a(l))}return this}a.prototype.fromBits=s,a.prototype.fromNumber=l,a.prototype.fromString=u,a.prototype.toNumber=function(){return 65536*this._a16+this._a00},a.prototype.toString=function(t){var e=o[t=t||10]||new a(t);if(!this.gt(e))return this.toNumber().toString(t);for(var n=this.clone(),r=new Array(64),i=63;i>=0&&(n.div(e),r[i]=n.remainder.toNumber().toString(t),n.gt(e));i--);return r[i-1]=n.toNumber().toString(t),r.join("")},a.prototype.add=function(t){var e=this._a00+t._a00,n=e>>>16,r=(n+=this._a16+t._a16)>>>16,i=(r+=this._a32+t._a32)>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},a.prototype.subtract=function(t){return this.add(t.clone().negate())},a.prototype.multiply=function(t){var e=this._a00,n=this._a16,r=this._a32,i=this._a48,o=t._a00,a=t._a16,s=t._a32,l=e*o,u=l>>>16,c=(u+=e*a)>>>16;u&=65535,c+=(u+=n*o)>>>16;var h=(c+=e*s)>>>16;return c&=65535,h+=(c+=n*a)>>>16,c&=65535,h+=(c+=r*o)>>>16,h+=e*t._a48,h&=65535,h+=n*s,h&=65535,h+=r*a,h&=65535,h+=i*o,this._a00=65535&l,this._a16=65535&u,this._a32=65535&c,this._a48=65535&h,this},a.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new a(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new a(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},a.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},a.prototype.equals=a.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},a.prototype.greaterThan=a.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},a.prototype.lessThan=a.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},a.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},a.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},a.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},a.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},a.prototype.shiftRight=a.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},a.prototype.shiftLeft=a.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},a.prototype.rotateLeft=a.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<t|r>>>32-t,o=r<<t|n>>>32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},a.prototype.rotateRight=a.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>t|r<<32-t,o=r>>>t|n<<32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},a.prototype.clone=function(){return new a(this._a00,this._a16,this._a32,this._a48)},void 0===(n=function(){return a}.apply(e,[]))||(t.exports=n)}()},9887:function(t,e,n){var r;!function(i){"use strict";var o,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l=!0,u="[DecimalError] ",c=u+"Invalid argument: ",h=u+"Exponent out of range: ",f=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,v=7,g=9007199254740991,y=f(g/v),b={};function _(t,e){var n,r,i,o,a,s,u,c,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),l?C(e,f):e;if(u=t.d,c=e.d,a=t.e,i=e.e,u=u.slice(),o=a-i){for(o<0?(r=u,o=-o,s=c.length):(r=c,i=a,s=u.length),o>(s=(a=Math.ceil(f/v))>s?a+1:s+1)&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((s=u.length)-(o=c.length)<0&&(o=s,r=c,c=u,u=r),n=0;o;)n=(u[--o]=u[o]+c[o]+n)/m|0,u[o]%=m;for(n&&(u.unshift(n),++i),s=u.length;0==u[--s];)u.pop();return e.d=u,e.e=i,l?C(e,f):e}function x(t,e,n){if(t!==~~t||t<e||t>n)throw Error(c+t)}function w(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=v-r.length)&&(o+=A(n)),o+=r;a=t[e],(n=v-(r=a+"").length)&&(o+=A(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}b.absoluteValue=b.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t},b.comparedTo=b.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(e=0,n=(r=o.d.length)<(i=t.d.length)?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},b.decimalPlaces=b.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*v;if(e=t.d[e])for(;e%10==0;e/=10)n--;return n<0?0:n},b.dividedBy=b.div=function(t){return S(this,new this.constructor(t))},b.dividedToIntegerBy=b.idiv=function(t){var e=this.constructor;return C(S(this,new e(t),0,1),e.precision)},b.equals=b.eq=function(t){return!this.cmp(t)},b.exponent=function(){return M(this)},b.greaterThan=b.gt=function(t){return this.cmp(t)>0},b.greaterThanOrEqualTo=b.gte=function(t){return this.cmp(t)>=0},b.isInteger=b.isint=function(){return this.e>this.d.length-2},b.isNegative=b.isneg=function(){return this.s<0},b.isPositive=b.ispos=function(){return this.s>0},b.isZero=function(){return 0===this.s},b.lessThan=b.lt=function(t){return this.cmp(t)<0},b.lessThanOrEqualTo=b.lte=function(t){return this.cmp(t)<1},b.logarithm=b.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===t)t=new r(10);else if((t=new r(t)).s<1||t.eq(o))throw Error(u+"NaN");if(n.s<1)throw Error(u+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(l=!1,e=S(O(n,a),O(t,a),a),l=!0,C(e,i))},b.minus=b.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?k(e,t):_(e,(t.s=-t.s,t))},b.modulo=b.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(!(t=new r(t)).s)throw Error(u+"NaN");return n.s?(l=!1,e=S(n,t,0,1).times(t),l=!0,n.minus(e)):C(new r(n),i)},b.naturalExponential=b.exp=function(){return E(this)},b.naturalLogarithm=b.ln=function(){return O(this)},b.negated=b.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t},b.plus=b.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_(e,t):k(e,(t.s=-t.s,t))},b.precision=b.sd=function(t){var e,n,r,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(c+t);if(e=M(i)+1,n=(r=i.d.length-1)*v+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n},b.squareRoot=b.sqrt=function(){var t,e,n,r,i,o,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(u+"NaN")}for(t=M(s),l=!1,0==(i=Math.sqrt(+s))||i==1/0?(((e=w(s.d)).length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=f((t+1)/2)-(t<0||t%2),r=new c(e=i==1/0?"5e"+t:(e=i.toExponential()).slice(0,e.indexOf("e")+1)+t)):r=new c(i.toString()),i=a=(n=c.precision)+3;;)if(r=(o=r).plus(S(s,o,a+2)).times(.5),w(o.d).slice(0,a)===(e=w(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&"4999"==e){if(C(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if("9999"!=e)break;a+=4}return l=!0,C(r,n)},b.times=b.mul=function(t){var e,n,r,i,o,a,s,u,c,h=this,f=h.constructor,d=h.d,p=(t=new f(t)).d;if(!h.s||!t.s)return new f(0);for(t.s*=h.s,n=h.e+t.e,(u=d.length)<(c=p.length)&&(o=d,d=p,p=o,a=u,u=c,c=a),o=[],r=a=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=u+r;i>r;)s=o[i]+p[r]*d[i-r-1]+e,o[i--]=s%m|0,e=s/m|0;o[i]=(o[i]+e)%m|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,l?C(t,f.precision):t},b.toDecimalPlaces=b.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(x(t,0,a),void 0===e?e=r.rounding:x(e,0,8),C(n,t+M(n)+1,e))},b.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=R(r,!0):(x(t,0,a),void 0===e?e=i.rounding:x(e,0,8),n=R(r=C(new i(r),t+1,e),!0,t+1)),n},b.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?R(i):(x(t,0,a),void 0===e?e=o.rounding:x(e,0,8),n=R((r=C(new o(i),t+M(i)+1,e)).abs(),!1,t+M(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},b.toInteger=b.toint=function(){var t=this,e=t.constructor;return C(new e(t),M(t)+1,e.rounding)},b.toNumber=function(){return+this},b.toPower=b.pow=function(t){var e,n,r,i,a,s,c=this,h=c.constructor,d=+(t=new h(t));if(!t.s)return new h(o);if(!(c=new h(c)).s){if(t.s<1)throw Error(u+"Infinity");return c}if(c.eq(o))return c;if(r=h.precision,t.eq(o))return C(c,r);if(s=(e=t.e)>=(n=t.d.length-1),a=c.s,s){if((n=d<0?-d:d)<=g){for(i=new h(o),e=Math.ceil(r/v+4),l=!1;n%2&&N((i=i.times(c)).d,e),0!==(n=f(n/2));)N((c=c.times(c)).d,e);return l=!0,t.s<0?new h(o).div(i):C(i,r)}}else if(a<0)throw Error(u+"NaN");return a=a<0&&1&t.d[Math.max(e,n)]?-1:1,c.s=1,l=!1,i=t.times(O(c,r+12)),l=!0,(i=E(i)).s=a,i},b.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?r=R(i,(n=M(i))<=o.toExpNeg||n>=o.toExpPos):(x(t,1,a),void 0===e?e=o.rounding:x(e,0,8),r=R(i=C(new o(i),t,e),t<=(n=M(i))||n<=o.toExpNeg,t)),r},b.toSignificantDigits=b.tosd=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(x(t,1,a),void 0===e?e=n.rounding:x(e,0,8)),C(new n(this),t,e)},b.toString=b.valueOf=b.val=b.toJSON=function(){var t=this,e=M(t),n=t.constructor;return R(t,e<=n.toExpNeg||e>=n.toExpPos)};var S=function(){function t(t,e){var n,r=0,i=t.length;for(t=t.slice();i--;)n=t[i]*e+r,t[i]=n%m|0,r=n/m|0;return r&&t.unshift(r),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*m+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a){var s,l,c,h,f,d,p,g,y,b,_,x,w,S,E,T,A,O,P=r.constructor,k=r.s==i.s?1:-1,R=r.d,N=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(u+"Division by zero");for(l=r.e-i.e,A=N.length,E=R.length,g=(p=new P(k)).d=[],c=0;N[c]==(R[c]||0);)++c;if(N[c]>(R[c]||0)&&--l,(x=null==o?o=P.precision:a?o+(M(r)-M(i))+1:o)<0)return new P(0);if(x=x/v+2|0,c=0,1==A)for(h=0,N=N[0],x++;(c<E||h)&&x--;c++)w=h*m+(R[c]||0),g[c]=w/N|0,h=w%N|0;else{for((h=m/(N[0]+1)|0)>1&&(N=t(N,h),R=t(R,h),A=N.length,E=R.length),S=A,b=(y=R.slice(0,A)).length;b<A;)y[b++]=0;(O=N.slice()).unshift(0),T=N[0],N[1]>=m/2&&++T;do{h=0,(s=e(N,y,A,b))<0?(_=y[0],A!=b&&(_=_*m+(y[1]||0)),(h=_/T|0)>1?(h>=m&&(h=m-1),1==(s=e(f=t(N,h),y,d=f.length,b=y.length))&&(h--,n(f,A<d?O:N,d))):(0==h&&(s=h=1),f=N.slice()),(d=f.length)<b&&f.unshift(0),n(y,f,b),-1==s&&(s=e(N,y,A,b=y.length))<1&&(h++,n(y,A<b?O:N,b)),b=y.length):0===s&&(h++,y=[0]),g[c++]=h,s&&y[0]?y[b++]=R[S]||0:(y=[R[S]],b=1)}while((S++<E||void 0!==y[0])&&x--)}return g[0]||g.shift(),p.e=l,C(p,a?o+M(p)+1:o)}}();function E(t,e){var n,r,i,a,s,u=0,c=0,f=t.constructor,p=f.precision;if(M(t)>16)throw Error(h+M(t));if(!t.s)return new f(o);for(null==e?(l=!1,s=p):s=e,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(s+=Math.log(d(2,c))/Math.LN10*2+5|0,n=r=i=new f(o),f.precision=s;;){if(r=C(r.times(t),s),n=n.times(++u),w((a=i.plus(S(r,n,s))).d).slice(0,s)===w(i.d).slice(0,s)){for(;c--;)i=C(i.times(i),s);return f.precision=p,null==e?(l=!0,C(i,p)):i}i=a}}function M(t){for(var e=t.e*v,n=t.d[0];n>=10;n/=10)e++;return e}function T(t,e,n){if(e>t.LN10.sd())throw l=!0,n&&(t.precision=n),Error(u+"LN10 precision limit exceeded");return C(new t(t.LN10),e)}function A(t){for(var e="";t--;)e+="0";return e}function O(t,e){var n,r,i,a,s,c,h,f,d,p=1,m=t,v=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(u+(m.s?"NaN":"-Infinity"));if(m.eq(o))return new g(0);if(null==e?(l=!1,f=y):f=e,m.eq(10))return null==e&&(l=!0),T(g,f);if(f+=10,g.precision=f,r=(n=w(v)).charAt(0),a=M(m),!(Math.abs(a)<15e14))return h=T(g,f+2,y).times(a+""),m=O(new g(r+"."+n.slice(1)),f-10).plus(h),g.precision=y,null==e?(l=!0,C(m,y)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=w((m=m.times(t)).d)).charAt(0),p++;for(a=M(m),r>1?(m=new g("0."+n),a++):m=new g(r+"."+n.slice(1)),c=s=m=S(m.minus(o),m.plus(o),f),d=C(m.times(m),f),i=3;;){if(s=C(s.times(d),f),w((h=c.plus(S(s,new g(i),f))).d).slice(0,f)===w(c.d).slice(0,f))return c=c.times(2),0!==a&&(c=c.plus(T(g,f+2,y).times(a+""))),c=S(c,new g(p),f),g.precision=y,null==e?(l=!0,C(c,y)):c;c=h,i+=2}}function P(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);)++r;for(i=e.length;48===e.charCodeAt(i-1);)--i;if(e=e.slice(r,i)){if(i-=r,n=n-r-1,t.e=f(n/v),t.d=[],r=(n+1)%v,n<0&&(r+=v),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=v;r<i;)t.d.push(+e.slice(r,r+=v));e=e.slice(r),r=v-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),l&&(t.e>y||t.e<-y))throw Error(h+n)}else t.s=0,t.e=0,t.d=[0];return t}function C(t,e,n){var r,i,o,a,s,u,c,p,g=t.d;for(a=1,o=g[0];o>=10;o/=10)a++;if((r=e-a)<0)r+=v,i=e,c=g[p=0];else{if((p=Math.ceil((r+1)/v))>=(o=g.length))return t;for(c=o=g[p],a=1;o>=10;o/=10)a++;i=(r%=v)-v+a}if(void 0!==n&&(s=c/(o=d(10,a-i-1))%10|0,u=e<0||void 0!==g[p+1]||c%o,u=n<4?(s||u)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||u||6==n&&(r>0?i>0?c/d(10,a-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return u?(o=M(t),g.length=1,e=e-o-1,g[0]=d(10,(v-e%v)%v),t.e=f(-e/v)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(0==r?(g.length=p,o=1,p--):(g.length=p+1,o=d(10,v-r),g[p]=i>0?(c/d(10,a-i)%d(10,i)|0)*o:0),u)for(;;){if(0==p){(g[0]+=o)==m&&(g[0]=1,++t.e);break}if(g[p]+=o,g[p]!=m)break;g[p--]=0,o=1}for(r=g.length;0===g[--r];)g.pop();if(l&&(t.e>y||t.e<-y))throw Error(h+M(t));return t}function k(t,e){var n,r,i,o,a,s,u,c,h,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),l?C(e,p):e;if(u=t.d,f=e.d,r=e.e,c=t.e,u=u.slice(),a=c-r){for((h=a<0)?(n=u,a=-a,s=f.length):(n=f,r=c,s=u.length),a>(i=Math.max(Math.ceil(p/v),s)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=u.length)<(s=f.length))&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){h=u[i]<f[i];break}a=0}for(h&&(n=u,u=f,f=n,e.s=-e.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(o=i;o&&0===u[--o];)u[o]=m-1;--u[o],u[i]+=m}u[i]-=f[i]}for(;0===u[--s];)u.pop();for(;0===u[0];u.shift())--r;return u[0]?(e.d=u,e.e=r,l?C(e,p):e):new d(0)}function R(t,e,n){var r,i=M(t),o=w(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+A(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+A(-i-1)+o,n&&(r=n-a)>0&&(o+=A(r))):i>=a?(o+=A(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+A(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=A(r))),t.s<0?"-"+o:o}function N(t,e){if(t.length>e)return t.length=e,!0}function L(t){if(!t||"object"!=typeof t)throw Error(u+"Object expected");var e,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if(void 0!==(r=t[n=i[e]])){if(!(f(r)===r&&r>=i[e+1]&&r<=i[e+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=t[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}(s=function t(e){var n,r,i;function o(t){var e=this;if(!(e instanceof o))return new o(t);if(e.constructor=o,t instanceof o)return e.s=t.s,e.e=t.e,void(e.d=(t=t.d)?t.slice():t);if("number"==typeof t){if(0*t!=0)throw Error(c+t);if(t>0)e.s=1;else{if(!(t<0))return e.s=0,e.e=0,void(e.d=[0]);t=-t,e.s=-1}return t===~~t&&t<1e7?(e.e=0,void(e.d=[t])):P(e,t.toString())}if("string"!=typeof t)throw Error(c+t);if(45===t.charCodeAt(0)?(t=t.slice(1),e.s=-1):e.s=1,!p.test(t))throw Error(c+t);P(e,t)}if(o.prototype=b,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=t,o.config=o.set=L,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(s)).default=s.Decimal=s,o=new s(1),void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},8141:(t,e,n)=>{"use strict";var r=n(4836);e.__esModule=!0,e.default=function(t,e){t.classList?t.classList.add(e):(0,i.default)(t,e)||("string"==typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var i=r(n(404));t.exports=e.default},404:(t,e)=>{"use strict";e.__esModule=!0,e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},602:t=>{"use strict";function e(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,n){t.classList?t.classList.remove(n):"string"==typeof t.className?t.className=e(t.className,n):t.setAttribute("class",e(t.className&&t.className.baseVal||"",n))}},5243:function(t,e){!function(t){"use strict";function e(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var i=0;function o(t){return"_leaflet_id"in t||(t._leaflet_id=++i),t._leaflet_id}function a(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)},o}function s(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function l(){return!1}function u(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return c(t).split(/\s+/)}function f(t,e){for(var r in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[r]=e[r];return t.options}function d(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var p=/\{ *([\w_ -]+) *\}/g;function m(t,e){return t.replace(p,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function g(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-_));return _=e+n,window.setTimeout(t,n)}var w=window.requestAnimationFrame||b("RequestAnimationFrame")||x,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||w!==x)return w.call(window,r(t,e));t.call(e)}function M(t){t&&S.call(window,t)}var T={__proto__:null,extend:e,create:n,bind:r,get lastId(){return i},stamp:o,throttle:a,wrapNum:s,falseFn:l,formatNum:u,trim:c,splitWords:h,setOptions:f,getParamString:d,template:m,isArray:v,indexOf:g,emptyImageUrl:y,requestFn:w,cancelFn:S,requestAnimFrame:E,cancelAnimFrame:M};function A(){}A.extend=function(t){var r=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=r.__super__=this.prototype,o=n(i);for(var a in o.constructor=r,r.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(r[a]=this[a]);return t.statics&&e(r,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes))),e(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?n(i.options):{},e(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},r},A.include=function(t){var n=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},A.mergeOptions=function(t){return e(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var O={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else{t=h(t);for(var i=1===arguments.length,o=0,a=t.length;o<a;o++)i?this._off(t[o]):this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n,r){if("function"==typeof e){if(!1===this._listens(t,e,n)){n===this&&(n=void 0);var i={fn:e,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(i)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(1!==arguments.length)if("function"==typeof e){var a=this._listens(t,e,n);if(!1!==a){var s=r[a];this._firingCount&&(s.fn=l,this._events[t]=r=r.slice()),r.splice(a,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=l;delete this._events[t]}},fire:function(t,n,r){if(!this.listens(t,r))return this;var i=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a],u=l.fn;l.once&&this.off(t,u,l.ctx),u.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e,n,r){"string"!=typeof t&&console.warn('"string" type argument expected');var i=e;"function"!=typeof e&&(r=!!e,i=void 0,n=void 0);var o=this._events&&this._events[t];if(o&&o.length&&!1!==this._listens(t,i,n))return!0;if(r)for(var a in this._eventParents)if(this._eventParents[a].listens(t,e,n,r))return!0;return!1},_listens:function(t,e,n){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;n===this&&(n=void 0);for(var i=0,o=r.length;i<o;i++)if(r[i].fn===e&&r[i].ctx===n)return i;return!1},once:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e,!0);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var P=A.extend(O);function C(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var k=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof C?t:v(t)?new C(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new C(t.x,t.y):new C(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function I(t,e){return!t||t instanceof N?t:new N(t,e)}function D(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(t,e){return t instanceof D?t:new D(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function U(t,e,n){return t instanceof z?t:v(t)&&"object"!=typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,n)}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new C(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new C(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=k(this.x),this.y=k(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},N.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof C||"number"==typeof t[0]||"x"in t)e=n=R(t);else if(e=(t=I(t)).min,n=t.max,!e||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof C?R(t):I(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=I(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=I(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,r=Math.abs(e.x-n.x)*t,i=Math.abs(e.y-n.y)*t;return I(R(e.x-r,e.y-i),R(n.x+r,n.y+i))},equals:function(t){return!!t&&(t=I(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},D.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof z)e=t,n=t;else{if(!(t instanceof D))return t?this.extend(U(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new D(new z(e.lat-r,e.lng-i),new z(n.lat+r,n.lng+i))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof z||"lat"in t?U(t):j(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof D?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},z.prototype={equals:function(t,e){return!!t&&(t=U(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,U(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};var B,F={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new z(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new D(new z(o.lat-r,o.lng-i),new z(a.lat-r,a.lng-i))}},H=e({},F,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),W=6378137,V={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new C(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(B=W*Math.PI,new N([-B,-B],[B,B]))};function G(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function q(t,e,n,r){return new G(t,e,n,r)}G.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new C((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=e({},H,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return q(t,.5,-t,.5)}()}),Z=e({},X,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var n,r,i,o,a,s,l="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)l+=(r?"L":"M")+(s=a[r]).x+" "+s.y;l+=e?Lt.svg?"z":"x":""}return l||"M0 0"}var K,J=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=Nt("webkit"),rt=Nt("android"),it=Nt("android 2")||Nt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=rt&&Nt("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&Nt("chrome"),ut=Nt("gecko")&&!nt&&!st&&!Q,ct=!lt&&Nt("safari"),ht=Nt("phantom"),ft="OTransition"in J,dt=0===navigator.platform.indexOf("Win"),pt=Q&&"transition"in J,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,vt="MozPerspective"in J,gt=!window.L_DISABLE_3D&&(pt||mt||vt)&&!ft&&!ht,yt="undefined"!=typeof orientation||Nt("mobile"),bt=yt&&nt,_t=yt&&mt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),St="ontouchstart"in window||!!window.TouchEvent,Et=!window.L_NO_TOUCH&&(St||wt),Mt=yt&&st,Tt=yt&&ut,At=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ot=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Pt=!!document.createElement("canvas").getContext,Ct=!(!document.createElementNS||!Y("svg").createSVGRect),kt=!!Ct&&((K=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(K.firstChild&&K.firstChild.namespaceURI)),Rt=!Ct&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Lt={ie:Q,ielt9:tt,edge:et,webkit:nt,android:rt,android23:it,androidStock:at,opera:st,chrome:lt,gecko:ut,safari:ct,phantom:ht,opera12:ft,win:dt,ie3d:pt,webkit3d:mt,gecko3d:vt,any3d:gt,mobile:yt,mobileWebkit:bt,mobileWebkit3d:_t,msPointer:xt,pointer:wt,touch:Et,touchNative:St,mobileOpera:Mt,mobileGecko:Tt,retina:At,passiveEvents:Ot,canvas:Pt,svg:Ct,vml:Rt,inlineSvg:kt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},It=Lt.msPointer?"MSPointerDown":"pointerdown",Dt=Lt.msPointer?"MSPointerMove":"pointermove",jt=Lt.msPointer?"MSPointerUp":"pointerup",zt=Lt.msPointer?"MSPointerCancel":"pointercancel",Ut={touchstart:It,touchmove:Dt,touchend:jt,touchcancel:zt},Bt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ze(e),Xt(t,e)},touchmove:Xt,touchend:Xt,touchcancel:Xt},Ft={},Ht=!1;function Wt(t,e,n){return"touchstart"===e&&(Ht||(document.addEventListener(It,Vt,!0),document.addEventListener(Dt,Gt,!0),document.addEventListener(jt,qt,!0),document.addEventListener(zt,qt,!0),Ht=!0)),Bt[e]?(n=Bt[e].bind(this,n),t.addEventListener(Ut[e],n,!1),n):(console.warn("wrong event specified:",e),l)}function Vt(t){Ft[t.pointerId]=t}function Gt(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function qt(t){delete Ft[t.pointerId]}function Xt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Ft)e.touches.push(Ft[n]);e.changedTouches=[e],t(e)}}var Zt=200;var Yt,$t,Kt,Jt,Qt,te=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function re(t){return"string"==typeof t?document.getElementById(t):t}function ie(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function oe(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ue(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ce(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=pe(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function he(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!ce(t,e)){var o=pe(t);de(t,(o?o+" ":"")+e)}}function fe(t,e){void 0!==t.classList?t.classList.remove(e):de(t,c((" "+pe(t)+" ").replace(" "+e+" "," ")))}function de(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function pe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ge(t,e,n){var r=e||new C(0,0);t.style[te]=(Lt.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function ye(t,e){t._leaflet_pos=e,Lt.any3d?ge(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function be(t){return t._leaflet_pos||new C(0,0)}if("onselectstart"in document)Yt=function(){Oe(window,"selectstart",ze)},$t=function(){Ce(window,"selectstart",ze)};else{var _e=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yt=function(){if(_e){var t=document.documentElement.style;Kt=t[_e],t[_e]="none"}},$t=function(){_e&&(document.documentElement.style[_e]=Kt,Kt=void 0)}}function xe(){Oe(window,"dragstart",ze)}function we(){Ce(window,"dragstart",ze)}function Se(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ee(),Jt=t,Qt=t.style.outlineStyle,t.style.outlineStyle="none",Oe(window,"keydown",Ee))}function Ee(){Jt&&(Jt.style.outlineStyle=Qt,Jt=void 0,Qt=void 0,Ce(window,"keydown",Ee))}function Me(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ae={__proto__:null,TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ne,get:re,getStyle:ie,create:oe,remove:ae,empty:se,toFront:le,toBack:ue,hasClass:ce,addClass:he,removeClass:fe,setClass:de,getClass:pe,setOpacity:me,testProp:ve,setTransform:ge,setPosition:ye,getPosition:be,get disableTextSelection(){return Yt},get enableTextSelection(){return $t},disableImageDrag:xe,enableImageDrag:we,preventOutline:Se,restoreOutline:Ee,getSizedParentNode:Me,getScale:Te};function Oe(t,e,n,r){if(e&&"object"==typeof e)for(var i in e)Ne(t,i,e[i],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Ne(t,e[o],n,r);return this}var Pe="_leaflet_events";function Ce(t,e,n,r){if(1===arguments.length)ke(t),delete t[Pe];else if(e&&"object"==typeof e)for(var i in e)Le(t,i,e[i],n);else if(e=h(e),2===arguments.length)ke(t,(function(t){return-1!==g(e,t)}));else for(var o=0,a=e.length;o<a;o++)Le(t,e[o],n,r);return this}function ke(t,e){for(var n in t[Pe]){var r=n.split(/\d/)[0];e&&!e(r)||Le(t,r,null,null,n)}}var Re={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ne(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):"");if(t[Pe]&&t[Pe][i])return this;var a=function(e){return n.call(r||t,e||window.event)},s=a;!Lt.touchNative&&Lt.pointer&&0===e.indexOf("touch")?a=Wt(t,e,a):Lt.touch&&"dblclick"===e?a=function(t,e){t.addEventListener("dblclick",e);var n,r=0;function i(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var i=Be(t);if(!i.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||i.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var o=Date.now();o-r<=Zt?2==++n&&e(function(t){var e,n,r={};for(n in t)e=t[n],r[n]=e&&e.bind?e.bind(t):e;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}(t)):n=1,r=o}}}else n=t.detail}return t.addEventListener("click",i),{dblclick:e,simDblclick:i}}(t,a):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Re[e]||e,a,!!Lt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,Ve(t,e)&&s(e)},t.addEventListener(Re[e],a,!1)):t.addEventListener(e,s,!1):t.attachEvent("on"+e,a),t[Pe]=t[Pe]||{},t[Pe][i]=a}function Le(t,e,n,r,i){i=i||e+o(n)+(r?"_"+o(r):"");var a=t[Pe]&&t[Pe][i];if(!a)return this;!Lt.touchNative&&Lt.pointer&&0===e.indexOf("touch")?function(t,e,n){Ut[e]?t.removeEventListener(Ut[e],n,!1):console.warn("wrong event specified:",e)}(t,e,a):Lt.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,a):"removeEventListener"in t?t.removeEventListener(Re[e]||e,a,!1):t.detachEvent("on"+e,a),t[Pe][i]=null}function Ie(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function De(t){return Ne(t,"wheel",Ie),this}function je(t){return Oe(t,"mousedown touchstart dblclick contextmenu",Ie),t._leaflet_disable_click=!0,this}function ze(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ue(t){return ze(t),Ie(t),this}function Be(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function Fe(t,e){if(!e)return new C(t.clientX,t.clientY);var n=Te(e),r=n.boundingClientRect;return new C((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var He=Lt.linux&&Lt.chrome?window.devicePixelRatio:Lt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function We(t){return Lt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/He:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Ve(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ge={__proto__:null,on:Oe,off:Ce,stopPropagation:Ie,disableScrollPropagation:De,disableClickPropagation:je,preventDefault:ze,stop:Ue,getPropagationPath:Be,getMousePosition:Fe,getWheelDelta:We,isExternalTarget:Ve,addListener:Oe,removeListener:Ce},qe=P.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ye(this._el,n),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Xe=P.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&Lt.any3d&&!Lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(U(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=e({animate:r.animate},r.zoom),r.pan=e({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n,r.pan&&r.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof C?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=R(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){he(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!Lt.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=U(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),u=i.distanceTo(r)||1,c=1.42,h=c*c;function f(t){var e=(l*l-s*s+(t?-1:1)*h*h*u*u)/(2*(t?l:s)*h*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=f(0);function v(t){return s*(p(m)*(d(e=m+c*t)/p(e))-d(m))/h;var e}var g=Date.now(),y=(f(1)-m)/c,b=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-g)/b,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*y;o<=1?(this._flyToFrame=E(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(l)/u)),a),this.getScaleZoom(s/function(t){return s*(p(m)/p(m+c*t))}(l),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=j(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,j(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(t),a=this.getPixelBounds(),s=I([a.min.add(n),a.max.subtract(r)]),l=s.getSize();if(!s.contains(o)){this._enforcingBounds=!0;var u=o.subtract(s.getCenter()),c=s.extend(o).getSize().subtract(l);i.x+=u.x<0?-c.x:c.x,i.y+=u.y<0?-c.y:c.y,this.panTo(this.unproject(i),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=n.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new z(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=oe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new D(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=I(this.project(s,r),this.project(a,r)).getSize(),c=Lt.any3d?this.options.zoomSnap:1,h=l.x/u.x,f=l.y/u.y,d=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(d,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new C(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(U(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return Fe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=re(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Oe(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Lt.any3d,he(t,"leaflet-container"+(Lt.touch?" leaflet-touch":"")+(Lt.retina?" leaflet-retina":"")+(Lt.ielt9?" leaflet-oldie":"")+(Lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ie(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new C(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(t.markerPane,"leaflet-zoom-hide"),he(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ye(this._mapPane,new C(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,n)._move(t,e)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,r){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ye(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ce:Oe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Lt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=E((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ve(a,t))break;if(r.push(n),i)break}if(a===this._container)break;a=a.parentNode}return r.length||s||i||!this.listens(e,!0)||(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Se(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if("click"===t.type){var i=e({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(t,n);if(r){for(var a=[],s=0;s<r.length;s++)r[s].listens(n,!0)&&a.push(r[s]);o=a.concat(o)}if(o.length){"contextmenu"===n&&ze(t);var l=o[0],u={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);u.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=c?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(s=0;s<o.length;s++)if(o[s].fire(n,u,!0),u.originalEvent._stopped||!1===o[s].options.bubblingMouseEvents&&-1!==g(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return be(this._mapPane)||new C(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return I([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new N(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new N(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=I(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new C(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=Lt.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=te,n=this._proxy.style[e];ge(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ge(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(E((function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ze=A.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return he(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new Ze(t)};Xe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=oe("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=oe("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $e=Ze.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ze.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=oe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),je(e),De(e);var r=this._section=oe("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Oe(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=oe("a",t+"-toggle",e);i.href="#",i.title="Layers",i.setAttribute("role","button"),Oe(i,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){ze(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=oe("div",t+"-base",r),this._separator=oe("div",t+"-separator",r),this._overlaysList=oe("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(e),e.layerId=o(t.layer),Oe(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var a=document.createElement("span");return n.appendChild(a),a.appendChild(e),a.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Oe(t,"click",ze),this.expand();var e=this;setTimeout((function(){Ce(t,"click",ze),e._preventClick=!1}))}}),Ke=Ze.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=oe("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=oe("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),je(o),Oe(o,"click",Ue),Oe(o,"click",i,this),Oe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";fe(this._zoomInButton,e),fe(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(he(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(he(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Ke,this.addControl(this.zoomControl))}));var Je=Ze.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=oe("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=oe("div",e,n)),t.imperial&&(this._iScale=oe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Qe=Ze.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Lt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=oe("div","leaflet-control-attribution"),je(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook((function(){this.options.attributionControl&&(new Qe).addTo(this)}));Ze.Layers=$e,Ze.Zoom=Ke,Ze.Scale=Je,Ze.Attribution=Qe,Ye.layers=function(t,e,n){return new $e(t,e,n)},Ye.zoom=function(t){return new Ke(t)},Ye.scale=function(t){return new Je(t)},Ye.attribution=function(t){return new Qe(t)};var tn=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(t,e){return t.addHandler(e,this),this};var en={Events:O},nn=Lt.touch?"touchstart mousedown":"mousedown",rn=P.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Oe(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rn._dragging===this&&this.finishDrag(!0),Ce(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ce(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)rn._dragging===this&&this.finishDrag();else if(!(rn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(rn._dragging=this,this._preventOutline&&Se(this._element),xe(),Yt(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Me(this._element);this._startPoint=new C(e.clientX,e.clientY),this._startPos=be(this._element),this._parentScale=Te(n);var r="mousedown"===t.type;Oe(document,r?"mousemove":"touchmove",this._onMove,this),Oe(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new C(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,ze(t),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ye(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){fe(document.body,"leaflet-dragging"),this._lastTarget&&(fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ce(document,"mousemove touchmove",this._onMove,this),Ce(document,"mouseup touchend touchcancel",this._onUp,this),we(),$t();var e=this._moved&&this._moving;this._moving=!1,rn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function on(t,e,n){var r,i,o,a,s,l,u,c,h,f=[1,4,2,8];for(i=0,u=t.length;i<u;i++)t[i]._code=mn(t[i],e);for(a=0;a<4;a++){for(c=f[a],r=[],i=0,o=(u=t.length)-1;i<u;o=i++)s=t[i],l=t[o],s._code&c?l._code&c||((h=pn(l,s,c,e,n))._code=mn(h,e),r.push(h)):(l._code&c&&((h=pn(l,s,c,e,n))._code=mn(h,e),r.push(h)),r.push(s));t=r}return t}function an(t,e){var n,r,i,o,a,s,l,u,c;if(!t||0===t.length)throw new Error("latlngs not passed");yn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var h=U([0,0]),f=j(t);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(h=sn(t));var d=t.length,p=[];for(n=0;n<d;n++){var m=U(t[n]);p.push(e.project(U([m.lat-h.lat,m.lng-h.lng])))}for(s=l=u=0,n=0,r=d-1;n<d;r=n++)i=p[n],o=p[r],a=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*a,u+=(i.y+o.y)*a,s+=3*a;c=0===s?p[0]:[l/s,u/s];var v=e.unproject(R(c));return U([v.lat+h.lat,v.lng+h.lng])}function sn(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=U(t[i]);e+=o.lat,n+=o.lng,r++}return U([e/r,n/r])}var ln,un={__proto__:null,clipPolygon:on,polygonCenter:an,centroid:sn};function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,fn(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)vn(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(gn(t,e,n,!0))}function fn(t,e,n,r,i){var o,a,s,l=0;for(a=r+1;a<=i-1;a++)(s=gn(t[a],t[r],t[i],!0))>l&&(o=a,l=s);l>n&&(e[o]=1,fn(t,e,n,r,o),fn(t,e,n,o,i))}function dn(t,e,n,r,i){var o,a,s,l=r?ln:mn(t,n),u=mn(e,n);for(ln=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=mn(a=pn(t,e,o=l||u,n,i),n),o===l?(t=a,l=s):(e=a,u=s)}}function pn(t,e,n,r,i){var o,a,s=e.x-t.x,l=e.y-t.y,u=r.min,c=r.max;return 8&n?(o=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(o=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(o=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(o=u.x,a=t.y+l*(u.x-t.x)/s),new C(o,a,i)}function mn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function vn(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function gn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,l=n.y-a,u=s*s+l*l;return u>0&&((i=((t.x-o)*s+(t.y-a)*l)/u)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=l*i)),s=t.x-o,l=t.y-a,r?s*s+l*l:new C(o,a)}function yn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function bn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yn(t)}function _n(t,e){var n,r,i,o,a,s,l,u;if(!t||0===t.length)throw new Error("latlngs not passed");yn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=U([0,0]),h=j(t);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(c=sn(t));var f=t.length,d=[];for(n=0;n<f;n++){var p=U(t[n]);d.push(e.project(U([p.lat-c.lat,p.lng-c.lng])))}for(n=0,r=0;n<f-1;n++)r+=d[n].distanceTo(d[n+1])/2;if(0===r)u=d[0];else for(n=0,o=0;n<f-1;n++)if(a=d[n],s=d[n+1],(o+=i=a.distanceTo(s))>r){l=(o-r)/i,u=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}var m=e.unproject(R(u));return U([m.lat+c.lat,m.lng+c.lng])}var xn={__proto__:null,simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return gn(t,e,n)},clipSegment:dn,_getEdgeIntersection:pn,_getBitCode:mn,_sqClosestPointOnSegment:gn,isFlat:yn,_flat:bn,polylineCenter:_n},wn={project:function(t){return new C(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new N([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new C(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new z(s*n,t.x*n/r)}},En={__proto__:null,LonLat:wn,Mercator:Sn,SphericalMercator:V},Mn=e({},H,{code:"EPSG:3395",projection:Sn,transformation:function(){var t=.5/(Math.PI*Sn.R);return q(t,.5,-t,.5)}()}),Tn=e({},H,{code:"EPSG:4326",projection:wn,transformation:q(1/180,1,-1/180,.5)}),An=e({},F,{projection:wn,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});F.Earth=H,F.EPSG3395=Mn,F.EPSG3857=X,F.EPSG900913=Z,F.EPSG4326=Tn,F.Simple=An;var On=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=On.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Cn=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new D;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),kn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Lt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Rn=kn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Rn.imagePath&&(Rn.imagePath=this._detectIconPath()),(this.options.imagePath||Rn.imagePath)+kn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var r=e.exec(t);return r&&r[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=oe("div","leaflet-default-icon-path",document.body),e=ie(t,"background-image")||ie(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Nn=tn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=be(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=I(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!l.contains(o)){var u=R((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),ye(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=be(e._icon),i=e._map.layerPointToLatLng(r);n&&ye(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=On.extend({options:{icon:new Rn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),he(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(n,"focus",this._panOnFocus,this);var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(he(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(this._icon,"focus",this._panOnFocus,this),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?R(e.iconSize):R(0,0),r=e.iconAnchor?R(e.iconAnchor):R(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var In=On.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dn=In.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return In.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new N(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var jn=Dn.extend({initialize:function(t,n,r){if("number"==typeof n&&(n=e({},r,{radius:n})),f(this,n),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:In.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,o=this._mRadius/H.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(u*i))/(Math.cos(e*i)*Math.cos(u*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});var zn=In.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=gn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){var h=o(t,e=l[u-1],n=l[u],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _n(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new D,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return yn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=yn(t),r=0,i=t.length;r<i;r++)n?(e[r]=U(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new C(t,t);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof z,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,l=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=dn(s[n],s[n+1],t,n,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&hn(t,s[i],s[r])<=l)return!0;return!1}});zn._flat=bn;var Un=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return an(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=zn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){zn.prototype._setLatLngs.call(this,t),yn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new C(e,e);if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=on(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(l=(e=this._parts[i]).length)-1;o<l;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||zn.prototype._containsPoint.call(this,t,!0)}});var Bn=Cn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Fn(t,o);return a?(a.feature=Zn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Wn;if(!s&&!a)return null;switch(a.type){case"Point":return Hn(u,t,n=c(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),l.push(Hn(u,t,n,e));return new Cn(l);case"LineString":case"MultiLineString":return r=Vn(s,"LineString"===a.type?0:1,c),new zn(r,e);case"Polygon":case"MultiPolygon":return r=Vn(s,"Polygon"===a.type?1:2,c),new Un(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=Fn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Cn(l);case"FeatureCollection":for(i=0,o=a.features.length;i<o;i++){var f=Fn(a.features[i],e);f&&l.push(f)}return new Cn(l);default:throw new Error("Invalid GeoJSON object.")}}function Hn(t,e,n,r){return t?t(e,n):new Ln(n,r&&r.markersInheritOptions&&r)}function Wn(t){return new z(t[1],t[0],t[2])}function Vn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Vn(t[o],e-1,n):(n||Wn)(t[o]),i.push(r);return i}function Gn(t,e){return void 0!==(t=U(t)).alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function qn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?qn(t[o],yn(t[o])?0:e-1,n,r):Gn(t[o],r));return!e&&n&&i.length>0&&i.push(i[0].slice()),i}function Xn(t,n){return t.feature?e({},t.feature,{geometry:n}):Zn(n)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Yn={toGeoJSON:function(t){return Xn(this,{type:"Point",coordinates:Gn(this.getLatLng(),t)})}};function $n(t,e){return new Bn(t,e)}Ln.include(Yn),jn.include(Yn),Dn.include(Yn),zn.include({toGeoJSON:function(t){var e=!yn(this._latlngs);return Xn(this,{type:(e?"Multi":"")+"LineString",coordinates:qn(this._latlngs,e?1:0,!1,t)})}}),Un.include({toGeoJSON:function(t){var e=!yn(this._latlngs),n=e&&!yn(this._latlngs[0]),r=qn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Xn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Pn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Xn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Zn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?Xn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Kn=$n,Jn=On.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ue(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:oe("img");he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ge(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ye(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Qn=Jn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:oe("video");if(he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var s=oe("source");s.src=this._url[a],e.appendChild(s)}}}});var tr=Jn.extend({_initImage:function(){var t=this._image=this._url;he(t,"leaflet-image-layer"),this._zoomAnimated&&he(t,"leaflet-zoom-animated"),this.options.className&&he(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var er=On.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof z||v(t))?(this._latlng=U(t),f(this,e)):(f(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(r(ae,void 0,this._container),200)):ae(this._container),this.options.interactive&&(fe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ue(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Cn){e=null;var n=this._source._layers;for(var r in n)if(n[r]._map){e=n[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?ye(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});Xe.include({_initOverlay:function(t,e,n,r){var i=e;return i instanceof t||(i=new t(r).setContent(e)),n&&i.setLatLng(n),i}}),On.include({_initOverlay:function(t,e,n,r){var i=n;return i instanceof t?(f(i,r),i._source=this):(i=e&&!r?e:new t(r,this)).setContent(n),i}});var nr=er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,er.prototype.openOn.call(this,t)},onAdd:function(t){er.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof In||this._source.on("preclick",Ie))},onRemove:function(t){er.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof In||this._source.off("preclick",Ie))},getEvents:function(){var t=er.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=oe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=oe("div",t+"-content-wrapper",e);if(this._contentNode=oe("div",t+"-content",n),je(e),De(this._contentNode),Oe(e,"contextmenu",Ie),this._tipContainer=oe("div",t+"-tip-container",e),this._tip=oe("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=oe("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(r,"click",(function(t){ze(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",he(t,o)):fe(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ye(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(ie(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new C(this._containerLeft,-n-this._containerBottom);i._add(be(this._container));var o=t.layerPointToContainerPoint(i),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,h=0;o.x+r+l.x>u.x&&(c=o.x+r-u.x+l.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([c,h]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(t,e,n){return this._initOverlay(nr,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),On.include({bindPopup:function(t,e){return this._popup=this._initOverlay(nr,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Cn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Ue(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof In?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var rr=er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){er.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){er.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=er.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=oe("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(t),s=this.options.direction,l=i.offsetWidth,u=i.offsetHeight,c=R(this.options.offset),h=this._getAnchor();"top"===s?(e=l/2,n=u):"bottom"===s?(e=l/2,n=0):"center"===s?(e=l/2,n=u/2):"right"===s?(e=0,n=u/2):"left"===s?(e=l,n=u/2):a.x<o.x?(s="right",e=0,n=u/2):(s="left",e=l+2*(c.x+h.x),n=u/2),t=t.subtract(R(e,n,!0)).add(c).add(h),fe(i,"leaflet-tooltip-right"),fe(i,"leaflet-tooltip-left"),fe(i,"leaflet-tooltip-top"),fe(i,"leaflet-tooltip-bottom"),he(i,"leaflet-tooltip-"+s),ye(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Xe.include({openTooltip:function(t,e,n){return this._initOverlay(rr,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),On.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rr,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Cn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&(Oe(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),Oe(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",(function(){e._openOnceFlag=!1,e._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var ir=kn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(se(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});kn.Default=Rn;var or=On.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof C?t:new C(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Lt.ielt9){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);me(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(M(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new C(+i,+o);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new C(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();Lt.any3d?ge(t.el,i,r):ye(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new N(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,l=new N(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new C(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var d=new C(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new D(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new C(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){he(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Lt.ielt9&&this.options.opacity<1&&me(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(r(this._tileReady,this,t,null,o)),ye(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),M(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(he(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Lt.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new C(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var ar=or.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Lt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Oe(n,"load",r(this._tileOnLoad,this,e,n)),Oe(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Lt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return m(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Lt.ielt9?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=y;var n=this._tiles[t].coords;ae(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",y),or.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return or.prototype._tileReady.call(this,t,e,n)}});function sr(t,e){return new ar(t,e)}var lr=ar.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=e({},this.defaultWmsParams);for(var i in n)i in this.options||(r[i]=n[i]);var o=(n=f(this,n)).detectRetina&&Lt.retina?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ar.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=I(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Tn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=ar.prototype.getTileUrl.call(this,t);return s+d(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ar.WMS=lr,sr.wms=function(t,e){return new lr(t,e)};var ur=On.extend({options:{padding:.1},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,e),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(t,e));Lt.any3d?ge(this._container,o,n):ye(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cr=ur.extend({options:{tolerance:0},getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Oe(t,"mousemove",this._onMouseMove,this),Oe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,ae(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Lt.retina?2:1;ye(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(fe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(he(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function hr(t){return Lt.canvas?new cr(t):null}var fr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dr={_initContainer:function(){this._container=oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=fr("shape");he(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=fr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=fr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=fr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ue(t._container)}},pr=Lt.vml?fr:Y,mr=ur.extend({_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ye(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pr("path");t.options.className&&he(e,t.options.className),t.options.interactive&&he(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ue(t._path)}});function vr(t){return Lt.svg||Lt.vml?new mr(t):null}Lt.vml&&mr.include(dr),Xe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&hr(t)||vr(t)}});var gr=Un.extend({initialize:function(t,e){Un.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});mr.create=pr,mr.pointsToPath=$,Bn.geometryToLayer=Fn,Bn.coordsToLatLng=Wn,Bn.coordsToLatLngs=Vn,Bn.latLngToCoords=Gn,Bn.latLngsToCoords=qn,Bn.getFeature=Xn,Bn.asFeature=Zn,Xe.mergeOptions({boxZoom:!0});var yr=tn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Yt(),xe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Oe(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=oe("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),n=e.getSize();ye(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),fe(this._container,"leaflet-crosshair")),$t(),we(),Ce(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xe.addInitHook("addHandler","boxZoom",yr),Xe.mergeOptions({doubleClickZoom:!0});var br=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Xe.addInitHook("addHandler","doubleClickZoom",br),Xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _r=tn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fe(this._map._container,"leaflet-grab"),fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),E((function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Xe.addInitHook("addHandler","dragging",_r),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xr=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Oe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),r.options.maxBounds&&(e=r._limitOffset(R(e),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(e)));r.panTo(i)}else r.panBy(e)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ue(t)}}});Xe.addInitHook("addHandler","keyboard",xr),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wr=tn.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=We(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Ue(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Xe.addInitHook("addHandler","scrollWheelZoom",wr);Xe.mergeOptions({tapHold:Lt.touchNative&&Lt.safari&&Lt.mobile,tapTolerance:15});var Sr=tn.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new C(e.clientX,e.clientY),this._holdTimeout=setTimeout(r((function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",ze),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),600),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ce(document,"touchend",ze),Ce(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new C(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});Xe.addInitHook("addHandler","tapHold",Sr),Xe.mergeOptions({touchZoom:Lt.touch,bounceAtZoomLimits:!0});var Er=tn.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),ze(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(s,this,!0),ze(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,M(this._animRequest),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Xe.addInitHook("addHandler","touchZoom",Er),Xe.BoxZoom=yr,Xe.DoubleClickZoom=br,Xe.Drag=_r,Xe.Keyboard=xr,Xe.ScrollWheelZoom=wr,Xe.TapHold=Sr,Xe.TouchZoom=Er,t.Bounds=N,t.Browser=Lt,t.CRS=F,t.Canvas=cr,t.Circle=jn,t.CircleMarker=Dn,t.Class=A,t.Control=Ze,t.DivIcon=ir,t.DivOverlay=er,t.DomEvent=Ge,t.DomUtil=Ae,t.Draggable=rn,t.Evented=P,t.FeatureGroup=Cn,t.GeoJSON=Bn,t.GridLayer=or,t.Handler=tn,t.Icon=kn,t.ImageOverlay=Jn,t.LatLng=z,t.LatLngBounds=D,t.Layer=On,t.LayerGroup=Pn,t.LineUtil=xn,t.Map=Xe,t.Marker=Ln,t.Mixin=en,t.Path=In,t.Point=C,t.PolyUtil=un,t.Polygon=Un,t.Polyline=zn,t.Popup=nr,t.PosAnimation=qe,t.Projection=En,t.Rectangle=gr,t.Renderer=ur,t.SVG=mr,t.SVGOverlay=tr,t.TileLayer=ar,t.Tooltip=rr,t.Transformation=G,t.Util=T,t.VideoOverlay=Qn,t.bind=r,t.bounds=I,t.canvas=hr,t.circle=function(t,e,n){return new jn(t,e,n)},t.circleMarker=function(t,e){return new Dn(t,e)},t.control=Ye,t.divIcon=function(t){return new ir(t)},t.extend=e,t.featureGroup=function(t,e){return new Cn(t,e)},t.geoJSON=$n,t.geoJson=Kn,t.gridLayer=function(t){return new or(t)},t.icon=function(t){return new kn(t)},t.imageOverlay=function(t,e,n){return new Jn(t,e,n)},t.latLng=U,t.latLngBounds=j,t.layerGroup=function(t,e){return new Pn(t,e)},t.map=function(t,e){return new Xe(t,e)},t.marker=function(t,e){return new Ln(t,e)},t.point=R,t.polygon=function(t,e){return new Un(t,e)},t.polyline=function(t,e){return new zn(t,e)},t.popup=function(t,e){return new nr(t,e)},t.rectangle=function(t,e){return new gr(t,e)},t.setOptions=f,t.stamp=o,t.svg=vr,t.svgOverlay=function(t,e,n){return new tr(t,e,n)},t.tileLayer=sr,t.tooltip=function(t,e){return new rr(t,e)},t.transformation=q,t.version="1.9.4",t.videoOverlay=function(t,e,n){return new Qn(t,e,n)};var Mr=window.L;t.noConflict=function(){return window.L=Mr,this},window.L=t}(e)},8552:(t,e,n)=>{var r=n(852)(n(5639),"DataView");t.exports=r},1989:(t,e,n)=>{var r=n(1789),i=n(401),o=n(7667),a=n(1327),s=n(1866);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},8407:(t,e,n)=>{var r=n(7040),i=n(4125),o=n(2117),a=n(7518),s=n(4705);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},7071:(t,e,n)=>{var r=n(852)(n(5639),"Map");t.exports=r},3369:(t,e,n)=>{var r=n(4785),i=n(1285),o=n(6e3),a=n(9916),s=n(5265);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},3818:(t,e,n)=>{var r=n(852)(n(5639),"Promise");t.exports=r},8525:(t,e,n)=>{var r=n(852)(n(5639),"Set");t.exports=r},8668:(t,e,n)=>{var r=n(3369),i=n(619),o=n(2385);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},6384:(t,e,n)=>{var r=n(8407),i=n(7465),o=n(3779),a=n(7599),s=n(4758),l=n(4309);function u(t){var e=this.__data__=new r(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,t.exports=u},2705:(t,e,n)=>{var r=n(5639).Symbol;t.exports=r},1149:(t,e,n)=>{var r=n(5639).Uint8Array;t.exports=r},577:(t,e,n)=>{var r=n(852)(n(5639),"WeakMap");t.exports=r},6874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},6193:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},4963:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},7443:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},4636:(t,e,n)=>{var r=n(2545),i=n(5694),o=n(1469),a=n(4144),s=n(5776),l=n(6719),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&l(t),d=n||c||h||f,p=d?r(t.length,String):[],m=p.length;for(var v in t)!e&&!u.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},2488:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},4286:t=>{t.exports=function(t){return t.split("")}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},9881:(t,e,n)=>{var r=n(7816),i=n(9291)(r);t.exports=i},3239:(t,e,n)=>{var r=n(9881);t.exports=function(t,e){var n=!0;return r(t,(function(t,r,i){return n=!!e(t,r,i)})),n}},6029:(t,e,n)=>{var r=n(3448);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,u=a}return u}},1848:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},1078:(t,e,n)=>{var r=n(2488),i=n(7285);t.exports=function t(e,n,o,a,s){var l=-1,u=e.length;for(o||(o=i),s||(s=[]);++l<u;){var c=e[l];n>0&&o(c)?n>1?t(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},8483:(t,e,n)=>{var r=n(5063)();t.exports=r},7816:(t,e,n)=>{var r=n(8483),i=n(3674);t.exports=function(t,e){return t&&r(t,e,i)}},7786:(t,e,n)=>{var r=n(1811),i=n(327);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},8866:(t,e,n)=>{var r=n(2488),i=n(1469);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},4239:(t,e,n)=>{var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},3325:t=>{t.exports=function(t,e){return t>e}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2118:(t,e,n)=>{var r=n(1848),i=n(2722),o=n(2351);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},9454:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},939:(t,e,n)=>{var r=n(2492),i=n(7005);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},2492:(t,e,n)=>{var r=n(6384),i=n(7114),o=n(8351),a=n(6096),s=n(4160),l=n(1469),u=n(4144),c=n(6719),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,v,g){var y=l(t),b=l(e),_=y?f:s(t),x=b?f:s(e),w=(_=_==h?d:_)==d,S=(x=x==h?d:x)==d,E=_==x;if(E&&u(t)){if(!u(e))return!1;y=!0,w=!1}if(E&&!w)return g||(g=new r),y||c(t)?i(t,e,n,m,v,g):o(t,e,_,n,m,v,g);if(!(1&n)){var M=w&&p.call(t,"__wrapped__"),T=S&&p.call(e,"__wrapped__");if(M||T){var A=M?t.value():t,O=T?e.value():e;return g||(g=new r),v(A,O,n,m,g)}}return!!E&&(g||(g=new r),a(t,e,n,m,v,g))}},2958:(t,e,n)=>{var r=n(6384),i=n(939);t.exports=function(t,e,n,o){var a=n.length,s=a,l=!o;if(null==t)return!s;for(t=Object(t);a--;){var u=n[a];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var c=(u=n[a])[0],h=t[c],f=u[1];if(l&&u[2]){if(void 0===h&&!(c in t))return!1}else{var d=new r;if(o)var p=o(h,f,c,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},2722:t=>{t.exports=function(t){return t!=t}},8458:(t,e,n)=>{var r=n(3560),i=n(5346),o=n(3218),a=n(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},8749:(t,e,n)=>{var r=n(4239),i=n(1780),o=n(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},7206:(t,e,n)=>{var r=n(1573),i=n(6432),o=n(6557),a=n(1469),s=n(9601);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},280:(t,e,n)=>{var r=n(5726),i=n(6916),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},433:t=>{t.exports=function(t,e){return t<e}},9199:(t,e,n)=>{var r=n(9881),i=n(8612);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},1573:(t,e,n)=>{var r=n(2958),i=n(1499),o=n(2634);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},6432:(t,e,n)=>{var r=n(939),i=n(7361),o=n(9095),a=n(5403),s=n(9162),l=n(2634),u=n(327);t.exports=function(t,e){return a(t)&&s(e)?l(u(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},2689:(t,e,n)=>{var r=n(9932),i=n(7786),o=n(7206),a=n(9199),s=n(1131),l=n(1717),u=n(5022),c=n(6557),h=n(1469);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[c];var f=-1;e=r(e,l(o));var d=a(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++f,value:t}}));return s(d,(function(t,e){return u(t,e,n)}))}},371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},9152:(t,e,n)=>{var r=n(7786);t.exports=function(t){return function(e){return r(e,t)}}},98:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var a=-1,s=n(e((r-t)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=t,t+=i;return l}},5976:(t,e,n)=>{var r=n(6557),i=n(5357),o=n(61);t.exports=function(t,e){return o(i(t,e,r),t+"")}},6560:(t,e,n)=>{var r=n(5703),i=n(8777),o=n(6557),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},4259:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},5076:(t,e,n)=>{var r=n(9881);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},1131:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},2545:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},531:(t,e,n)=>{var r=n(2705),i=n(9932),o=n(1469),a=n(3448),s=r?r.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7561:(t,e,n)=>{var r=n(7990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},5652:(t,e,n)=>{var r=n(8668),i=n(7443),o=n(1196),a=n(4757),s=n(3593),l=n(1814);t.exports=function(t,e,n){var u=-1,c=i,h=t.length,f=!0,d=[],p=d;if(n)f=!1,c=o;else if(h>=200){var m=e?null:s(t);if(m)return l(m);f=!1,c=a,p=new r}else p=e?[]:d;t:for(;++u<h;){var v=t[u],g=e?e(v):v;if(v=n||0!==v?v:0,f&&g==g){for(var y=p.length;y--;)if(p[y]===g)continue t;e&&p.push(g),d.push(v)}else c(p,g,n)||(p!==d&&p.push(g),d.push(v))}return d}},4757:t=>{t.exports=function(t,e){return t.has(e)}},1811:(t,e,n)=>{var r=n(1469),i=n(5403),o=n(5514),a=n(9833);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},180:(t,e,n)=>{var r=n(4259);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},6393:(t,e,n)=>{var r=n(3448);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,l=null===e,u=e==e,c=r(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},5022:(t,e,n)=>{var r=n(6393);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}},4429:(t,e,n)=>{var r=n(5639)["__core-js_shared__"];t.exports=r},9291:(t,e,n)=>{var r=n(8612);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5063:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}},8805:(t,e,n)=>{var r=n(180),i=n(2036),o=n(3140),a=n(9833);t.exports=function(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return s[t]()+l}}},7740:(t,e,n)=>{var r=n(7206),i=n(8612),o=n(3674);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var l=r(n,3);e=o(e),n=function(t){return l(s[t],t,s)}}var u=t(e,n,a);return u>-1?s[l?e[u]:u]:void 0}}},7445:(t,e,n)=>{var r=n(98),i=n(6612),o=n(8601);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},3593:(t,e,n)=>{var r=n(8525),i=n(308),o=n(1814),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},8777:(t,e,n)=>{var r=n(852),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},7114:(t,e,n)=>{var r=n(8668),i=n(2908),o=n(4757);t.exports=function(t,e,n,a,s,l){var u=1&n,c=t.length,h=e.length;if(c!=h&&!(u&&h>c))return!1;var f=l.get(t),d=l.get(e);if(f&&d)return f==e&&d==t;var p=-1,m=!0,v=2&n?new r:void 0;for(l.set(t,e),l.set(e,t);++p<c;){var g=t[p],y=e[p];if(a)var b=u?a(y,g,p,e,t,l):a(g,y,p,t,e,l);if(void 0!==b){if(b)continue;m=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(g===t||s(g,t,n,a,l)))return v.push(e)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,a,l)){m=!1;break}}return l.delete(t),l.delete(e),m}},8351:(t,e,n)=>{var r=n(2705),i=n(1149),o=n(7813),a=n(7114),s=n(8776),l=n(1814),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(t,e,n,r,u,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var p=1&r;if(d||(d=l),t.size!=e.size&&!p)return!1;var m=f.get(t);if(m)return m==e;r|=2,f.set(t,e);var v=a(d(t),d(e),r,u,h,f);return f.delete(t),v;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},6096:(t,e,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var l=1&n,u=r(t),c=u.length;if(c!=r(e).length&&!l)return!1;for(var h=c;h--;){var f=u[h];if(!(l?f in e:i.call(e,f)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var v=l;++h<c;){var g=t[f=u[h]],y=e[f];if(o)var b=l?o(y,g,f,e,t,s):o(g,y,f,t,e,s);if(!(void 0===b?g===y||a(g,y,n,o,s):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(t),s.delete(e),m}},1957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},8234:(t,e,n)=>{var r=n(8866),i=n(9551),o=n(3674);t.exports=function(t){return r(t,o,i)}},5050:(t,e,n)=>{var r=n(7019);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},1499:(t,e,n)=>{var r=n(9162),i=n(3674);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},852:(t,e,n)=>{var r=n(8458),i=n(7801);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},9607:(t,e,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},9551:(t,e,n)=>{var r=n(4963),i=n(479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},4160:(t,e,n)=>{var r=n(8552),i=n(7071),o=n(3818),a=n(8525),s=n(577),l=n(4239),u=n(346),c="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",m=u(r),v=u(i),g=u(o),y=u(a),b=u(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=c||o&&_(o.resolve())!=h||a&&_(new a)!=f||s&&_(new s)!=d)&&(_=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return p;case v:return c;case g:return h;case y:return f;case b:return d}return e}),t.exports=_},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},222:(t,e,n)=>{var r=n(1811),i=n(5694),o=n(1469),a=n(5776),s=n(1780),l=n(327);t.exports=function(t,e,n){for(var u=-1,c=(e=r(e,t)).length,h=!1;++u<c;){var f=l(e[u]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++u!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},2036:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},1789:(t,e,n)=>{var r=n(4536);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},1327:(t,e,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},1866:(t,e,n)=>{var r=n(4536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},7285:(t,e,n)=>{var r=n(2705),i=n(5694),o=n(1469),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},5776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},6612:(t,e,n)=>{var r=n(7813),i=n(8612),o=n(5776),a=n(3218);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},5403:(t,e,n)=>{var r=n(1469),i=n(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},5726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9162:(t,e,n)=>{var r=n(3218);t.exports=function(t){return t==t&&!r(t)}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},4785:(t,e,n)=>{var r=n(1989),i=n(8407),o=n(7071);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(t,e,n)=>{var r=n(5050);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).get(t)}},9916:(t,e,n)=>{var r=n(5050);t.exports=function(t){return r(this,t).has(t)}},5265:(t,e,n)=>{var r=n(5050);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},8776:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},2634:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},4523:(t,e,n)=>{var r=n(8306);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},4536:(t,e,n)=>{var r=n(852)(Object,"create");t.exports=r},6916:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},1167:(t,e,n)=>{t=n.nmd(t);var r=n(1957),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5357:(t,e,n)=>{var r=n(6874),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=o[a];return u[e]=n(l),r(t,this,u)}}},5639:(t,e,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2385:t=>{t.exports=function(t){return this.__data__.has(t)}},1814:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},61:(t,e,n)=>{var r=n(6560),i=n(1275)(r);t.exports=i},1275:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},7465:(t,e,n)=>{var r=n(8407);t.exports=function(){this.__data__=new r,this.size=0}},3779:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},7599:t=>{t.exports=function(t){return this.__data__.get(t)}},4758:t=>{t.exports=function(t){return this.__data__.has(t)}},4309:(t,e,n)=>{var r=n(8407),i=n(7071),o=n(3369);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},2351:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},3140:(t,e,n)=>{var r=n(4286),i=n(2036),o=n(676);t.exports=function(t){return i(t)?o(t):r(t)}},5514:(t,e,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},327:(t,e,n)=>{var r=n(3448);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},676:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")?",u="[\\ufe0e\\ufe0f]?",c=u+l+"(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+l+")*",h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+c,"g");t.exports=function(t){return t.match(f)||[]}},5703:t=>{t.exports=function(t){return function(){return t}}},3279:(t,e,n)=>{var r=n(3218),i=n(7771),o=n(4841),a=Math.max,s=Math.min;t.exports=function(t,e,n){var l,u,c,h,f,d,p=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=l,r=u;return l=u=void 0,p=e,h=t.apply(r,n)}function b(t){var n=t-d;return void 0===d||n>=e||n<0||v&&t-p>=c}function _(){var t=i();if(b(t))return x(t);f=setTimeout(_,function(t){var n=e-(t-d);return v?s(n,c-(t-p)):n}(t))}function x(t){return f=void 0,g&&l?y(t):(l=u=void 0,h)}function w(){var t=i(),n=b(t);if(l=arguments,u=this,d=t,n){if(void 0===f)return function(t){return p=t,f=setTimeout(_,e),m?y(t):h}(d);if(v)return clearTimeout(f),f=setTimeout(_,e),y(d)}return void 0===f&&(f=setTimeout(_,e)),h}return e=o(e)||0,r(n)&&(m=!!n.leading,c=(v="maxWait"in n)?a(o(n.maxWait)||0,e):c,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=d=u=f=void 0},w.flush=function(){return void 0===f?h:x(i())},w}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},711:(t,e,n)=>{var r=n(6193),i=n(3239),o=n(7206),a=n(1469),s=n(6612);t.exports=function(t,e,n){var l=a(t)?r:i;return n&&s(t,e,n)&&(e=void 0),l(t,o(e,3))}},3311:(t,e,n)=>{var r=n(7740)(n(998));t.exports=r},998:(t,e,n)=>{var r=n(1848),i=n(7206),o=n(554),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(t,i(e,3),l)}},4654:(t,e,n)=>{var r=n(1078),i=n(5161);t.exports=function(t,e){return r(i(t,e),1)}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},9095:(t,e,n)=>{var r=n(13),i=n(222);t.exports=function(t,e){return null!=t&&i(t,e,r)}},6557:t=>{t.exports=function(t){return t}},5694:(t,e,n)=>{var r=n(9454),i=n(7005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),i=n(1780);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},1584:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},4144:(t,e,n)=>{t=n.nmd(t);var r=n(5639),i=n(5062),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l},8446:(t,e,n)=>{var r=n(939);t.exports=function(t,e){return r(t,e)}},3560:(t,e,n)=>{var r=n(4239),i=n(3218);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},7654:(t,e,n)=>{var r=n(1763);t.exports=function(t){return r(t)&&t!=+t}},4293:t=>{t.exports=function(t){return null==t}},1763:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),i=n(5924),o=n(7005),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},7037:(t,e,n)=>{var r=n(4239),i=n(1469),o=n(7005);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},3448:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},6719:(t,e,n)=>{var r=n(8749),i=n(1717),o=n(1167),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},3674:(t,e,n)=>{var r=n(4636),i=n(280),o=n(8612);t.exports=function(t){return o(t)?r(t):i(t)}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,u=128,c=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],m="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",b="[object Error]",_="[object Function]",x="[object GeneratorFunction]",w="[object Map]",S="[object Number]",E="[object Object]",M="[object Promise]",T="[object RegExp]",A="[object Set]",O="[object String]",P="[object Symbol]",C="[object WeakMap]",k="[object ArrayBuffer]",R="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",I="[object Int8Array]",D="[object Int16Array]",j="[object Int32Array]",z="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",F="[object Uint32Array]",H=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(G.source),Z=RegExp(q.source),Y=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ot="["+xt+"]",Pt="["+At+"]",Ct="["+wt+"]",kt="\\d+",Rt="["+St+"]",Nt="["+Et+"]",Lt="[^"+xt+At+kt+St+Et+Mt+"]",It="\\ud83c[\\udffb-\\udfff]",Dt="[^"+xt+"]",jt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ut="["+Mt+"]",Bt="\\u200d",Ft="(?:"+Nt+"|"+Lt+")",Ht="(?:"+Ut+"|"+Lt+")",Wt="(?:['’](?:d|ll|m|re|s|t|ve))?",Vt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Gt="(?:"+Ct+"|"+It+")?",qt="["+Tt+"]?",Xt=qt+Gt+"(?:"+Bt+"(?:"+[Dt,jt,zt].join("|")+")"+qt+Gt+")*",Zt="(?:"+[Rt,jt,zt].join("|")+")"+Xt,Yt="(?:"+[Dt+Ct+"?",Ct,jt,zt,Ot].join("|")+")",$t=RegExp("['’]","g"),Kt=RegExp(Ct,"g"),Jt=RegExp(It+"(?="+It+")|"+Yt+Xt,"g"),Qt=RegExp([Ut+"?"+Nt+"+"+Wt+"(?="+[Pt,Ut,"$"].join("|")+")",Ht+"+"+Vt+"(?="+[Pt,Ut+Ft,"$"].join("|")+")",Ut+"?"+Ft+"+"+Wt,Ut+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,Zt].join("|"),"g"),te=RegExp("["+Bt+xt+wt+Tt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[N]=ie[L]=ie[I]=ie[D]=ie[j]=ie[z]=ie[U]=ie[B]=ie[F]=!0,ie[m]=ie[v]=ie[k]=ie[g]=ie[R]=ie[y]=ie[b]=ie[_]=ie[w]=ie[S]=ie[E]=ie[T]=ie[A]=ie[O]=ie[C]=!1;var oe={};oe[m]=oe[v]=oe[k]=oe[R]=oe[g]=oe[y]=oe[N]=oe[L]=oe[I]=oe[D]=oe[j]=oe[w]=oe[S]=oe[E]=oe[T]=oe[A]=oe[O]=oe[P]=oe[z]=oe[U]=oe[B]=oe[F]=!0,oe[b]=oe[_]=oe[C]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,le=parseInt,ue="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ce="object"==typeof self&&self&&self.Object===Object&&self,he=ue||ce||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,me=pe&&ue.process,ve=function(){try{return de&&de.require&&de.require("util").types||me&&me.binding&&me.binding("util")}catch(t){}}(),ge=ve&&ve.isArrayBuffer,ye=ve&&ve.isDate,be=ve&&ve.isMap,_e=ve&&ve.isRegExp,xe=ve&&ve.isSet,we=ve&&ve.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Pe(t,e){return!(null==t||!t.length)&&Ue(t,e,0)>-1}function Ce(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ke(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Re(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ne(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Le(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var De=We("length");function je(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function ze(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ue(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):ze(t,Fe,n)}function Be(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function He(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:f}function We(t){return function(e){return null==e?i:e[t]}}function Ve(t){return function(e){return null==t?i:t[e]}}function Ge(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function qe(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ze(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function Ye(t){return function(e){return t(e)}}function $e(t,e){return ke(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function Je(t,e){for(var n=-1,r=t.length;++n<r&&Ue(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Ue(e,t[n],0)>-1;);return n}var tn=Ve({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ae[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function an(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function cn(t){return rn(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):De(t)}function hn(t){return rn(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?he:pn.defaults(he.Object(),e,pn.pick(he,ne))).Array,it=e.Date,xt=e.Error,wt=e.Function,St=e.Math,Et=e.Object,Mt=e.RegExp,Tt=e.String,At=e.TypeError,Ot=r.prototype,Pt=wt.prototype,Ct=Et.prototype,kt=e["__core-js_shared__"],Rt=Pt.toString,Nt=Ct.hasOwnProperty,Lt=0,It=(n=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Dt=Ct.toString,jt=Rt.call(Et),zt=he._,Ut=Mt("^"+Rt.call(Nt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=pe?e.Buffer:i,Ft=e.Symbol,Ht=e.Uint8Array,Wt=Bt?Bt.allocUnsafe:i,Vt=an(Et.getPrototypeOf,Et),Gt=Et.create,qt=Ct.propertyIsEnumerable,Xt=Ot.splice,Zt=Ft?Ft.isConcatSpreadable:i,Yt=Ft?Ft.iterator:i,Jt=Ft?Ft.toStringTag:i,te=function(){try{var t=lo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ue=it&&it.now!==he.Date.now&&it.now,ce=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=St.ceil,de=St.floor,me=Et.getOwnPropertySymbols,ve=Bt?Bt.isBuffer:i,De=e.isFinite,Ve=Ot.join,mn=an(Et.keys,Et),vn=St.max,gn=St.min,yn=it.now,bn=e.parseInt,_n=St.random,xn=Ot.reverse,wn=lo(e,"DataView"),Sn=lo(e,"Map"),En=lo(e,"Promise"),Mn=lo(e,"Set"),Tn=lo(e,"WeakMap"),An=lo(Et,"create"),On=Tn&&new Tn,Pn={},Cn=jo(wn),kn=jo(Sn),Rn=jo(En),Nn=jo(Mn),Ln=jo(Tn),In=Ft?Ft.prototype:i,Dn=In?In.valueOf:i,jn=In?In.toString:i;function zn(t){if(ts(t)&&!Wa(t)&&!(t instanceof Hn)){if(t instanceof Fn)return t;if(Nt.call(t,"__wrapped__"))return zo(t)}return new Fn(t)}var Un=function(){function t(){}return function(e){if(!Qa(e))return{};if(Gt)return Gt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Bn(){}function Fn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Vn(t);this.size=e.size}function Zn(t,e){var n=Wa(t),r=!n&&Ha(t),i=!n&&!r&&Xa(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Xe(t.length,Tt):[],l=s.length;for(var u in t)!e&&!Nt.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vo(u,l))||s.push(u);return s}function Yn(t){var e=t.length;return e?t[Gr(0,e-1)]:i}function $n(t,e){return Ro(Ti(t),or(e,0,t.length))}function Kn(t){return Ro(Ti(t))}function Jn(t,e,n){(n!==i&&!Ua(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Qn(t,e,n){var r=t[e];Nt.call(t,e)&&Ua(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Ai(e,Cs(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:Ms(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var s,l=1&e,u=2&e,c=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!Qa(t))return t;var h=Wa(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Ti(t,s)}else{var f=ho(t),d=f==_||f==x;if(Xa(t))return _i(t,l);if(f==E||f==m||d&&!o){if(s=u||d?{}:po(t),!l)return u?function(t,e){return Ai(t,co(t),e)}(t,function(t,e){return t&&Ai(e,ks(e),t)}(s,t)):function(t,e){return Ai(t,uo(t),e)}(t,nr(s,t))}else{if(!oe[f])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case k:return xi(t);case g:case y:return new i(+t);case R:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case L:case I:case D:case j:case z:case U:case B:case F:return wi(t,n);case w:return new i;case S:case O:return new i(t);case T:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new i;case P:return r=t,Dn?Et(Dn.call(r)):{}}}(t,f,l)}}a||(a=new Xn);var p=a.get(t);if(p)return p;a.set(t,s),os(t)?t.forEach((function(r){s.add(ar(r,e,n,r,t,a))})):es(t)&&t.forEach((function(r,i){s.set(i,ar(r,e,n,i,t,a))}));var v=h?i:(c?u?eo:to:u?ks:Cs)(t);return Me(v||t,(function(r,i){v&&(r=t[i=r]),Qn(s,i,ar(r,e,n,i,t,a))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new At(o);return Oo((function(){t.apply(i,n)}),e)}function ur(t,e,n,r){var i=-1,o=Pe,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=ke(e,Ye(n))),r?(o=Ce,a=!1):e.length>=200&&(o=Ke,a=!1,e=new qn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=u;f--;)if(e[f]===h)continue t;l.push(c)}else o(e,h,r)||l.push(c)}return l}zn.templateSettings={escape:Y,evaluate:$,interpolate:K,variable:"",imports:{_:zn}},zn.prototype=Bn.prototype,zn.prototype.constructor=zn,Fn.prototype=Un(Bn.prototype),Fn.prototype.constructor=Fn,Hn.prototype=Un(Bn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===a?i:n}return Nt.call(e,t)?e[t]:i},Wn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Nt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?a:e,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,0))},Vn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Vn.prototype.has=function(t){return tr(this.__data__,t)>-1},Vn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Sn||Vn),string:new Wn}},Gn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return ao(this,t).get(t)},Gn.prototype.has=function(t){return ao(this,t).has(t)},Gn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,a),this},qn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var cr=Ci(yr),hr=Ci(br,!0);function fr(t,e){var n=!0;return cr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(l===i?s==s&&!ss(s):n(s,l)))var l=s,u=a}return u}function pr(t,e){var n=[];return cr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mr(s,e-1,n,r,i):Re(i,s):r||(i[i.length]=s)}return i}var vr=ki(),gr=ki(!0);function yr(t,e){return t&&vr(t,e,Cs)}function br(t,e){return t&&gr(t,e,Cs)}function _r(t,e){return Oe(e,(function(e){return $a(t[e])}))}function xr(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Do(e[n++])];return n&&n==r?t:i}function wr(t,e,n){var r=e(t);return Wa(t)?r:Re(r,n(t))}function Sr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Jt&&Jt in Et(t)?function(t){var e=Nt.call(t,Jt),n=t[Jt];try{t[Jt]=i;var r=!0}catch(t){}var o=Dt.call(t);return r&&(e?t[Jt]=n:delete t[Jt]),o}(t):function(t){return Dt.call(t)}(t)}function Er(t,e){return t>e}function Mr(t,e){return null!=t&&Nt.call(t,e)}function Tr(t,e){return null!=t&&e in Et(t)}function Ar(t,e,n){for(var o=n?Ce:Pe,a=t[0].length,s=t.length,l=s,u=r(s),c=1/0,h=[];l--;){var f=t[l];l&&e&&(f=ke(f,Ye(e))),c=gn(f.length,c),u[l]=!n&&(e||a>=120&&f.length>=120)?new qn(l&&f):i}f=t[0];var d=-1,p=u[0];t:for(;++d<a&&h.length<c;){var m=f[d],v=e?e(m):m;if(m=n||0!==m?m:0,!(p?Ke(p,v):o(h,v,n))){for(l=s;--l;){var g=u[l];if(!(g?Ke(g,v):o(t[l],v,n)))continue t}p&&p.push(v),h.push(m)}}return h}function Or(t,e,n){var r=null==(t=Mo(t,e=vi(e,t)))?t:t[Do(Yo(e))];return null==r?i:Se(r,t,n)}function Pr(t){return ts(t)&&Sr(t)==m}function Cr(t,e,n,r,o){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Wa(t),l=Wa(e),u=s?v:ho(t),c=l?v:ho(e),h=(u=u==m?E:u)==E,f=(c=c==m?E:c)==E,d=u==c;if(d&&Xa(t)){if(!Xa(e))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Xn),s||ls(t)?Ji(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case g:case y:case S:return Ua(+t,+e);case b:return t.name==e.name&&t.message==e.message;case T:case O:return t==e+"";case w:var s=on;case A:var l=1&r;if(s||(s=ln),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=Ji(s(t),s(e),r,i,o,a);return a.delete(t),c;case P:if(Dn)return Dn.call(t)==Dn.call(e)}return!1}(t,e,u,n,r,o,a);if(!(1&n)){var p=h&&Nt.call(t,"__wrapped__"),_=f&&Nt.call(e,"__wrapped__");if(p||_){var x=p?t.value():t,M=_?e.value():e;return a||(a=new Xn),o(x,M,n,r,a)}}return!!d&&(a||(a=new Xn),function(t,e,n,r,o,a){var s=1&n,l=to(t),u=l.length;if(u!=to(e).length&&!s)return!1;for(var c=u;c--;){var h=l[c];if(!(s?h in e:Nt.call(e,h)))return!1}var f=a.get(t),d=a.get(e);if(f&&d)return f==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var m=s;++c<u;){var v=t[h=l[c]],g=e[h];if(r)var y=s?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(!(y===i?v===g||o(v,g,n,r,a):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,r,o,a))}(t,e,n,r,Cr,o))}function kr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Et(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var u=(l=n[o])[0],c=t[u],h=l[1];if(s&&l[2]){if(c===i&&!(u in t))return!1}else{var f=new Xn;if(r)var d=r(c,h,u,t,e,f);if(!(d===i?Cr(h,c,3,r,f):d))return!1}}return!0}function Rr(t){return!(!Qa(t)||(e=t,It&&It in e))&&($a(t)?Ut:mt).test(jo(t));var e}function Nr(t){return"function"==typeof t?t:null==t?nl:"object"==typeof t?Wa(t)?zr(t[0],t[1]):jr(t):hl(t)}function Lr(t){if(!xo(t))return mn(t);var e=[];for(var n in Et(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ir(t,e){return t<e}function Dr(t,e){var n=-1,i=Ga(t)?r(t.length):[];return cr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function jr(t){var e=so(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(n){return n===t||kr(n,t,e)}}function zr(t,e){return yo(t)&&wo(e)?So(Do(t),e):function(n){var r=Ms(n,t);return r===i&&r===e?Ts(n,t):Cr(e,r,3)}}function Ur(t,e,n,r,o){t!==e&&vr(e,(function(a,s){if(o||(o=new Xn),Qa(a))!function(t,e,n,r,o,a,s){var l=To(t,n),u=To(e,n),c=s.get(u);if(c)Jn(t,n,c);else{var h=a?a(l,u,n+"",t,e,s):i,f=h===i;if(f){var d=Wa(u),p=!d&&Xa(u),m=!d&&!p&&ls(u);h=u,d||p||m?Wa(l)?h=l:qa(l)?h=Ti(l):p?(f=!1,h=_i(u,!0)):m?(f=!1,h=wi(u,!0)):h=[]:rs(u)||Ha(u)?(h=l,Ha(l)?h=vs(l):Qa(l)&&!$a(l)||(h=po(u))):f=!1}f&&(s.set(u,h),o(h,u,r,a,s),s.delete(u)),Jn(t,n,h)}}(t,e,s,n,Ur,r,o);else{var l=r?r(To(t,s),a,s+"",t,e,o):i;l===i&&(l=a),Jn(t,s,l)}}),ks)}function Br(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:i}function Fr(t,e,n){e=e.length?ke(e,(function(t){return Wa(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[nl];var r=-1;e=ke(e,Ye(oo()));var i=Dr(t,(function(t,n,i){var o=ke(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Si(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Hr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=xr(t,a);n(s,a)&&$r(o,vi(a,t),s)}return o}function Wr(t,e,n,r){var i=r?Be:Ue,o=-1,a=e.length,s=t;for(t===e&&(e=Ti(e)),n&&(s=ke(t,Ye(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==t&&Xt.call(s,l,1),Xt.call(t,l,1);return t}function Vr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?Xt.call(t,i,1):li(t,i)}}return t}function Gr(t,e){return t+de(_n()*(e-t+1))}function qr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Po(Eo(t,e,nl),t+"")}function Zr(t){return Yn(Us(t))}function Yr(t,e){var n=Us(t);return Ro(n,or(e,0,n.length))}function $r(t,e,n,r){if(!Qa(t))return t;for(var o=-1,a=(e=vi(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var u=Do(e[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=s){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=Qa(h)?h:vo(e[o+1])?[]:{})}Qn(l,u,c),l=l[u]}return t}var Kr=On?function(t,e){return On.set(t,e),t}:nl,Jr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Qs(e),writable:!0})}:nl;function Qr(t){return Ro(Us(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return cr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ss(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,nl,n)}function ri(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,u=ss(e),c=e===i;o<a;){var h=de((o+a)/2),f=n(t[h]),d=f!==i,p=null===f,m=f==f,v=ss(f);if(s)var g=r||m;else g=c?m&&(r||d):l?m&&d&&(r||!p):u?m&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);g?o=h+1:a=h}return gn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:ss(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Wa(t))return ke(t,ai)+"";if(ss(t))return jn?jn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Pe,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Ce;else if(o>=200){var u=e?null:qi(t);if(u)return ln(u);a=!1,i=Ke,l=new qn}else l=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function li(t,e){return null==(t=Mo(t,e=vi(e,t)))||delete t[Do(Yo(e))]}function ui(t,e,n,r){return $r(t,e,n(xr(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],l=-1;++l<i;)l!=o&&(a[o]=ur(a[o]||s,t[l],e,n));return si(mr(a,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var l=r<a?e[r]:i;n(s,t[r],l)}return s}function pi(t){return qa(t)?t:[]}function mi(t){return"function"==typeof t?t:nl}function vi(t,e){return Wa(t)?t:yo(t,e)?[t]:Io(gs(t))}var gi=Xr;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var bi=ae||function(t){return he.clearTimeout(t)};function _i(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function wi(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ss(t),s=e!==i,l=null===e,u=e==e,c=ss(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}function Ei(t,e,n,i){for(var o=-1,a=t.length,s=n.length,l=-1,u=e.length,c=vn(a-s,0),h=r(u+c),f=!i;++l<u;)h[l]=e[l];for(;++o<s;)(f||o<a)&&(h[n[o]]=t[o]);for(;c--;)h[l++]=t[o++];return h}function Mi(t,e,n,i){for(var o=-1,a=t.length,s=-1,l=n.length,u=-1,c=e.length,h=vn(a-l,0),f=r(h+c),d=!i;++o<h;)f[o]=t[o];for(var p=o;++u<c;)f[p+u]=e[u];for(;++s<l;)(d||o<a)&&(f[p+n[s]]=t[o++]);return f}function Ti(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ai(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],u=r?r(n[l],t[l],l,n,t):i;u===i&&(u=t[l]),o?rr(n,l,u):Qn(n,l,u)}return n}function Oi(t,e){return function(n,r){var i=Wa(n)?Ee:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Pi(t){return Xr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&go(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Et(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e}))}function Ci(t,e){return function(n,r){if(null==n)return n;if(!Ga(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Et(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ki(t){return function(e,n,r){for(var i=-1,o=Et(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function Ri(t){return function(e){var n=rn(e=gs(e))?hn(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ni(t){return function(e){return Ne($s(Hs(e).replace($t,"")),t,"")}}function Li(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return Qa(r)?r:n}}function Ii(t){return function(e,n,r){var o=Et(e);if(!Ga(e)){var a=oo(n,3);e=Cs(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Di(t){return Qi((function(e){var n=e.length,r=n,a=Fn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new At(o);if(a&&!l&&"wrapper"==ro(s))var l=new Fn([],!0)}for(r=l?r:n;++r<n;){var u=ro(s=e[r]),c="wrapper"==u?no(s):i;l=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ro(c[0])].apply(l,c[3]):1==s.length&&bo(s)?l[u]():l.thru(s)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Wa(r))return l.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function ji(t,e,n,o,a,s,l,c,h,f){var d=e&u,p=1&e,m=2&e,v=24&e,g=512&e,y=m?i:Li(t);return function u(){for(var b=arguments.length,_=r(b),x=b;x--;)_[x]=arguments[x];if(v)var w=io(u),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,w);if(o&&(_=Ei(_,o,a,v)),s&&(_=Mi(_,s,l,v)),b-=S,v&&b<f){var E=sn(_,w);return Vi(t,e,ji,u.placeholder,n,_,E,c,h,f-b)}var M=p?n:this,T=m?M[t]:t;return b=_.length,c?_=function(t,e){for(var n=t.length,r=gn(e.length,n),o=Ti(t);r--;){var a=e[r];t[r]=vo(a,n)?o[a]:i}return t}(_,c):g&&b>1&&_.reverse(),d&&h<b&&(_.length=h),this&&this!==he&&this instanceof u&&(T=y||Li(T)),T.apply(M,_)}}function zi(t,e){return function(n,r){return function(t,e,n,r){return yr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Bi(t){return Qi((function(e){return e=ke(e,Ye(oo())),Xr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function Fi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?qr(e,t):e;var r=qr(e,fe(t/cn(e)));return rn(e)?yi(hn(r),0,t).join(""):r.slice(0,t)}function Hi(t){return function(e,n,o){return o&&"number"!=typeof o&&go(e,n,o)&&(n=o=i),e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,n,i){for(var o=-1,a=vn(fe((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:fs(o),t)}}function Wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Vi(t,e,n,r,o,a,s,u,c,h){var f=8&e;e|=f?l:64,4&(e&=~(f?64:l))||(e&=-4);var d=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,u,c,h],p=n.apply(i,d);return bo(t)&&Ao(p,d),p.placeholder=r,Co(p,t,e)}function Gi(t){var e=St[t];return function(t,n){if(t=ms(t),(n=null==n?0:gn(ds(n),292))&&De(t)){var r=(gs(t)+"e").split("e");return+((r=(gs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var qi=Mn&&1/ln(new Mn([,-0]))[1]==c?function(t){return new Mn(t)}:sl;function Xi(t){return function(e){var n=ho(e);return n==w?on(e):n==A?un(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Zi(t,e,n,a,c,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new At(o);var m=a?a.length:0;if(m||(e&=-97,a=c=i),f=f===i?f:vn(ds(f),0),d=d===i?d:ds(d),m-=c?c.length:0,64&e){var v=a,g=c;a=c=i}var y=p?i:no(t),b=[t,e,n,a,c,v,g,h,f,d];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Ei(c,l,e[4]):l,t[4]=c?sn(t[3],s):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Mi(c,l,e[6]):l,t[6]=c?sn(t[5],s):e[6]),(l=e[7])&&(t[7]=l),r&u&&(t[8]=null==t[8]?e[8]:gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],a=b[3],c=b[4],!(d=b[9]=b[9]===i?p?0:t.length:vn(b[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var o=Li(t);return function a(){for(var s=arguments.length,l=r(s),u=s,c=io(a);u--;)l[u]=arguments[u];var h=s<3&&l[0]!==c&&l[s-1]!==c?[]:sn(l,c);return(s-=h.length)<n?Vi(t,e,ji,a.placeholder,i,l,h,i,i,n-s):Se(this&&this!==he&&this instanceof a?o:t,this,l)}}(t,e,d):e!=l&&33!=e||c.length?ji.apply(i,b):function(t,e,n,i){var o=1&e,a=Li(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=i.length,h=r(c+l),f=this&&this!==he&&this instanceof e?a:t;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++s];return Se(f,o?n:this,h)}}(t,e,n,a);else var _=function(t,e,n){var r=1&e,i=Li(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Co((y?Kr:Ao)(_,b),t,e)}function Yi(t,e,n,r){return t===i||Ua(t,Ct[n])&&!Nt.call(r,n)?e:t}function $i(t,e,n,r,o,a){return Qa(t)&&Qa(e)&&(a.set(e,t),Ur(t,e,i,$i,a),a.delete(e)),t}function Ki(t){return rs(t)?i:t}function Ji(t,e,n,r,o,a){var s=1&n,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var f=-1,d=!0,p=2&n?new qn:i;for(a.set(t,e),a.set(e,t);++f<l;){var m=t[f],v=e[f];if(r)var g=s?r(v,m,f,e,t,a):r(m,v,f,t,e,a);if(g!==i){if(g)continue;d=!1;break}if(p){if(!Ie(e,(function(t,e){if(!Ke(p,e)&&(m===t||o(m,t,n,r,a)))return p.push(e)}))){d=!1;break}}else if(m!==v&&!o(m,v,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Qi(t){return Po(Eo(t,i,Vo),t+"")}function to(t){return wr(t,Cs,uo)}function eo(t){return wr(t,ks,co)}var no=On?function(t){return On.get(t)}:sl;function ro(t){for(var e=t.name+"",n=Pn[e],r=Nt.call(Pn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Nt.call(zn,"placeholder")?zn:t).placeholder}function oo(){var t=zn.iteratee||rl;return t=t===rl?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Cs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wo(i)]}return e}function lo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Rr(n)?n:i}var uo=me?function(t){return null==t?[]:(t=Et(t),Oe(me(t),(function(e){return qt.call(t,e)})))}:pl,co=me?function(t){for(var e=[];t;)Re(e,uo(t)),t=Vt(t);return e}:pl,ho=Sr;function fo(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var a=Do(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ja(i)&&vo(a,i)&&(Wa(t)||Ha(t))}function po(t){return"function"!=typeof t.constructor||xo(t)?{}:Un(Vt(t))}function mo(t){return Wa(t)||Ha(t)||!!(Zt&&t&&t[Zt])}function vo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function go(t,e,n){if(!Qa(n))return!1;var r=typeof e;return!!("number"==r?Ga(n)&&vo(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function yo(t,e){if(Wa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||Q.test(t)||!J.test(t)||null!=e&&t in Et(e)}function bo(t){var e=ro(t),n=zn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(wn&&ho(new wn(new ArrayBuffer(1)))!=R||Sn&&ho(new Sn)!=w||En&&ho(En.resolve())!=M||Mn&&ho(new Mn)!=A||Tn&&ho(new Tn)!=C)&&(ho=function(t){var e=Sr(t),n=e==E?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case Cn:return R;case kn:return w;case Rn:return M;case Nn:return A;case Ln:return C}return e});var _o=kt?$a:ml;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ct)}function wo(t){return t==t&&!Qa(t)}function So(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Et(n))}}function Eo(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=vn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=r(e+1);++o<e;)l[o]=i[o];return l[e]=n(s),Se(t,this,l)}}function Mo(t,e){return e.length<2?t:xr(t,ti(e,0,-1))}function To(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ao=ko(Kr),Oo=ce||function(t,e){return he.setTimeout(t,e)},Po=ko(Jr);function Co(t,e,n){var r=e+"";return Po(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Me(p,(function(n){var r="_."+n[0];e&n[1]&&!Pe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function ko(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ro(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Gr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var No,Lo,Io=(No=Na((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Lo.size&&Lo.clear(),t})),Lo=No.cache,No);function Do(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zo(t){if(t instanceof Hn)return t.clone();var e=new Fn(t.__wrapped__,t.__chain__);return e.__actions__=Ti(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Xr((function(t,e){return qa(t)?ur(t,mr(e,1,qa,!0)):[]})),Bo=Xr((function(t,e){var n=Yo(e);return qa(n)&&(n=i),qa(t)?ur(t,mr(e,1,qa,!0),oo(n,2)):[]})),Fo=Xr((function(t,e){var n=Yo(e);return qa(n)&&(n=i),qa(t)?ur(t,mr(e,1,qa,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=vn(r+i,0)),ze(t,oo(e,3),i)}function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ds(n),o=n<0?vn(r+o,0):gn(o,r-1)),ze(t,oo(e,3),o,!0)}function Vo(t){return null!=t&&t.length?mr(t,1):[]}function Go(t){return t&&t.length?t[0]:i}var qo=Xr((function(t){var e=ke(t,pi);return e.length&&e[0]===t[0]?Ar(e):[]})),Xo=Xr((function(t){var e=Yo(t),n=ke(t,pi);return e===Yo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,oo(e,2)):[]})),Zo=Xr((function(t){var e=Yo(t),n=ke(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function Yo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var $o=Xr(Ko);function Ko(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var Jo=Qi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Vr(t,ke(e,(function(t){return vo(t,n)?+t:t})).sort(Si)),r}));function Qo(t){return null==t?t:xn.call(t)}var ta=Xr((function(t){return si(mr(t,1,qa,!0))})),ea=Xr((function(t){var e=Yo(t);return qa(e)&&(e=i),si(mr(t,1,qa,!0),oo(e,2))})),na=Xr((function(t){var e=Yo(t);return e="function"==typeof e?e:i,si(mr(t,1,qa,!0),i,e)}));function ra(t){if(!t||!t.length)return[];var e=0;return t=Oe(t,(function(t){if(qa(t))return e=vn(t.length,e),!0})),Xe(e,(function(e){return ke(t,We(e))}))}function ia(t,e){if(!t||!t.length)return[];var n=ra(t);return null==e?n:ke(n,(function(t){return Se(e,i,t)}))}var oa=Xr((function(t,e){return qa(t)?ur(t,e):[]})),aa=Xr((function(t){return fi(Oe(t,qa))})),sa=Xr((function(t){var e=Yo(t);return qa(e)&&(e=i),fi(Oe(t,qa),oo(e,2))})),la=Xr((function(t){var e=Yo(t);return e="function"==typeof e?e:i,fi(Oe(t,qa),i,e)})),ua=Xr(ra),ca=Xr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ia(t,n)}));function ha(t){var e=zn(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var da=Qi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&vo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Fn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),pa=Oi((function(t,e,n){Nt.call(t,n)?++t[n]:rr(t,n,1)})),ma=Ii(Ho),va=Ii(Wo);function ga(t,e){return(Wa(t)?Me:cr)(t,oo(e,3))}function ya(t,e){return(Wa(t)?Te:hr)(t,oo(e,3))}var ba=Oi((function(t,e,n){Nt.call(t,n)?t[n].push(e):rr(t,n,[e])})),_a=Xr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ga(t)?r(t.length):[];return cr(t,(function(t){a[++i]=o?Se(e,t,n):Or(t,e,n)})),a})),xa=Oi((function(t,e,n){rr(t,n,e)}));function wa(t,e){return(Wa(t)?ke:Dr)(t,oo(e,3))}var Sa=Oi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ea=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&go(t,e[0],e[1])?e=[]:n>2&&go(e[0],e[1],e[2])&&(e=[e[0]]),Fr(t,mr(e,1),[])})),Ma=ue||function(){return he.Date.now()};function Ta(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Zi(t,u,i,i,i,i,e)}function Aa(t,e){var n;if("function"!=typeof e)throw new At(o);return t=ds(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Oa=Xr((function(t,e,n){var r=1;if(n.length){var i=sn(n,io(Oa));r|=l}return Zi(t,r,e,n,i)})),Pa=Xr((function(t,e,n){var r=3;if(n.length){var i=sn(n,io(Pa));r|=l}return Zi(e,r,t,n,i)}));function Ca(t,e,n){var r,a,s,l,u,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new At(o);function m(e){var n=r,o=a;return r=a=i,h=e,l=t.apply(o,n)}function v(t){var n=t-c;return c===i||n>=e||n<0||d&&t-h>=s}function g(){var t=Ma();if(v(t))return y(t);u=Oo(g,function(t){var n=e-(t-c);return d?gn(n,s-(t-h)):n}(t))}function y(t){return u=i,p&&r?m(t):(r=a=i,l)}function b(){var t=Ma(),n=v(t);if(r=arguments,a=this,c=t,n){if(u===i)return function(t){return h=t,u=Oo(g,e),f?m(t):l}(c);if(d)return bi(u),u=Oo(g,e),m(c)}return u===i&&(u=Oo(g,e)),l}return e=ms(e)||0,Qa(n)&&(f=!!n.leading,s=(d="maxWait"in n)?vn(ms(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==i&&bi(u),h=0,r=c=a=u=i},b.flush=function(){return u===i?l:y(Ma())},b}var ka=Xr((function(t,e){return lr(t,1,e)})),Ra=Xr((function(t,e,n){return lr(t,ms(e)||0,n)}));function Na(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Na.Cache||Gn),n}function La(t){if("function"!=typeof t)throw new At(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Na.Cache=Gn;var Ia=gi((function(t,e){var n=(e=1==e.length&&Wa(e[0])?ke(e[0],Ye(oo())):ke(mr(e,1),Ye(oo()))).length;return Xr((function(r){for(var i=-1,o=gn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),Da=Xr((function(t,e){var n=sn(e,io(Da));return Zi(t,l,i,e,n)})),ja=Xr((function(t,e){var n=sn(e,io(ja));return Zi(t,64,i,e,n)})),za=Qi((function(t,e){return Zi(t,256,i,i,i,e)}));function Ua(t,e){return t===e||t!=t&&e!=e}var Ba=Wi(Er),Fa=Wi((function(t,e){return t>=e})),Ha=Pr(function(){return arguments}())?Pr:function(t){return ts(t)&&Nt.call(t,"callee")&&!qt.call(t,"callee")},Wa=r.isArray,Va=ge?Ye(ge):function(t){return ts(t)&&Sr(t)==k};function Ga(t){return null!=t&&Ja(t.length)&&!$a(t)}function qa(t){return ts(t)&&Ga(t)}var Xa=ve||ml,Za=ye?Ye(ye):function(t){return ts(t)&&Sr(t)==y};function Ya(t){if(!ts(t))return!1;var e=Sr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function $a(t){if(!Qa(t))return!1;var e=Sr(t);return e==_||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ka(t){return"number"==typeof t&&t==ds(t)}function Ja(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Qa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=be?Ye(be):function(t){return ts(t)&&ho(t)==w};function ns(t){return"number"==typeof t||ts(t)&&Sr(t)==S}function rs(t){if(!ts(t)||Sr(t)!=E)return!1;var e=Vt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==jt}var is=_e?Ye(_e):function(t){return ts(t)&&Sr(t)==T},os=xe?Ye(xe):function(t){return ts(t)&&ho(t)==A};function as(t){return"string"==typeof t||!Wa(t)&&ts(t)&&Sr(t)==O}function ss(t){return"symbol"==typeof t||ts(t)&&Sr(t)==P}var ls=we?Ye(we):function(t){return ts(t)&&Ja(t.length)&&!!ie[Sr(t)]},us=Wi(Ir),cs=Wi((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(Ga(t))return as(t)?hn(t):Ti(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=ho(t);return(e==w?on:e==A?ln:Us)(t)}function fs(t){return t?(t=ms(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ds(t){var e=fs(t),n=e%1;return e==e?n?e-n:e:0}function ps(t){return t?or(ds(t),0,d):0}function ms(t){if("number"==typeof t)return t;if(ss(t))return f;if(Qa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Qa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ze(t);var n=pt.test(t);return n||vt.test(t)?le(t.slice(2),n?2:8):dt.test(t)?f:+t}function vs(t){return Ai(t,ks(t))}function gs(t){return null==t?"":ai(t)}var ys=Pi((function(t,e){if(xo(e)||Ga(e))Ai(e,Cs(e),t);else for(var n in e)Nt.call(e,n)&&Qn(t,n,e[n])})),bs=Pi((function(t,e){Ai(e,ks(e),t)})),_s=Pi((function(t,e,n,r){Ai(e,ks(e),t,r)})),xs=Pi((function(t,e,n,r){Ai(e,Cs(e),t,r)})),ws=Qi(ir),Ss=Xr((function(t,e){t=Et(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&go(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=ks(a),l=-1,u=s.length;++l<u;){var c=s[l],h=t[c];(h===i||Ua(h,Ct[c])&&!Nt.call(t,c))&&(t[c]=a[c])}return t})),Es=Xr((function(t){return t.push(i,$i),Se(Ns,i,t)}));function Ms(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Ts(t,e){return null!=t&&fo(t,e,Tr)}var As=zi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),t[e]=n}),Qs(nl)),Os=zi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ps=Xr(Or);function Cs(t){return Ga(t)?Zn(t):Lr(t)}function ks(t){return Ga(t)?Zn(t,!0):function(t){if(!Qa(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}(t)}var Rs=Pi((function(t,e,n){Ur(t,e,n)})),Ns=Pi((function(t,e,n,r){Ur(t,e,n,r)})),Ls=Qi((function(t,e){var n={};if(null==t)return n;var r=!1;e=ke(e,(function(e){return e=vi(e,t),r||(r=e.length>1),e})),Ai(t,eo(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)li(n,e[i]);return n})),Is=Qi((function(t,e){return null==t?{}:function(t,e){return Hr(t,e,(function(e,n){return Ts(t,n)}))}(t,e)}));function Ds(t,e){if(null==t)return{};var n=ke(eo(t),(function(t){return[t]}));return e=oo(e),Hr(t,n,(function(t,n){return e(t,n[0])}))}var js=Xi(Cs),zs=Xi(ks);function Us(t){return null==t?[]:$e(t,Cs(t))}var Bs=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Fs(e):e)}));function Fs(t){return Ys(gs(t).toLowerCase())}function Hs(t){return(t=gs(t))&&t.replace(yt,tn).replace(Kt,"")}var Ws=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Vs=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Gs=Ri("toLowerCase"),qs=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Xs=Ni((function(t,e,n){return t+(n?" ":"")+Ys(e)})),Zs=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ys=Ri("toUpperCase");function $s(t,e,n){return t=gs(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Ks=Xr((function(t,e){try{return Se(t,i,e)}catch(t){return Ya(t)?t:new xt(t)}})),Js=Qi((function(t,e){return Me(e,(function(e){e=Do(e),rr(t,e,Oa(t[e],t))})),t}));function Qs(t){return function(){return t}}var tl=Di(),el=Di(!0);function nl(t){return t}function rl(t){return Nr("function"==typeof t?t:ar(t,1))}var il=Xr((function(t,e){return function(n){return Or(n,t,e)}})),ol=Xr((function(t,e){return function(n){return Or(t,n,e)}}));function al(t,e,n){var r=Cs(e),i=_r(e,r);null!=n||Qa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Cs(e)));var o=!(Qa(n)&&"chain"in n&&!n.chain),a=$a(t);return Me(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Re([this.value()],arguments))})})),t}function sl(){}var ll=Bi(ke),ul=Bi(Ae),cl=Bi(Ie);function hl(t){return yo(t)?We(Do(t)):function(t){return function(e){return xr(e,t)}}(t)}var fl=Hi(),dl=Hi(!0);function pl(){return[]}function ml(){return!1}var vl,gl=Ui((function(t,e){return t+e}),0),yl=Gi("ceil"),bl=Ui((function(t,e){return t/e}),1),_l=Gi("floor"),xl=Ui((function(t,e){return t*e}),1),wl=Gi("round"),Sl=Ui((function(t,e){return t-e}),0);return zn.after=function(t,e){if("function"!=typeof e)throw new At(o);return t=ds(t),function(){if(--t<1)return e.apply(this,arguments)}},zn.ary=Ta,zn.assign=ys,zn.assignIn=bs,zn.assignInWith=_s,zn.assignWith=xs,zn.at=ws,zn.before=Aa,zn.bind=Oa,zn.bindAll=Js,zn.bindKey=Pa,zn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Wa(t)?t:[t]},zn.chain=ha,zn.chunk=function(t,e,n){e=(n?go(t,e,n):e===i)?1:vn(ds(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=r(fe(o/e));a<o;)l[s++]=ti(t,a,a+=e);return l},zn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},zn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Re(Wa(n)?Ti(n):[n],mr(e,1))},zn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new At(o);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},zn.conforms=function(t){return function(t){var e=Cs(t);return function(n){return sr(n,t,e)}}(ar(t,1))},zn.constant=Qs,zn.countBy=pa,zn.create=function(t,e){var n=Un(t);return null==e?n:nr(n,e)},zn.curry=function t(e,n,r){var o=Zi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},zn.curryRight=function t(e,n,r){var o=Zi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},zn.debounce=Ca,zn.defaults=Ss,zn.defaultsDeep=Es,zn.defer=ka,zn.delay=Ra,zn.difference=Uo,zn.differenceBy=Bo,zn.differenceWith=Fo,zn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ds(e))<0?0:e,r):[]},zn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ds(e)))<0?0:e):[]},zn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0,!0):[]},zn.dropWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0):[]},zn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&go(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ds(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ds(r))<0&&(r+=o),r=n>r?0:ps(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},zn.filter=function(t,e){return(Wa(t)?Oe:pr)(t,oo(e,3))},zn.flatMap=function(t,e){return mr(wa(t,e),1)},zn.flatMapDeep=function(t,e){return mr(wa(t,e),c)},zn.flatMapDepth=function(t,e,n){return n=n===i?1:ds(n),mr(wa(t,e),n)},zn.flatten=Vo,zn.flattenDeep=function(t){return null!=t&&t.length?mr(t,c):[]},zn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ds(e)):[]},zn.flip=function(t){return Zi(t,512)},zn.flow=tl,zn.flowRight=el,zn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},zn.functions=function(t){return null==t?[]:_r(t,Cs(t))},zn.functionsIn=function(t){return null==t?[]:_r(t,ks(t))},zn.groupBy=ba,zn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},zn.intersection=qo,zn.intersectionBy=Xo,zn.intersectionWith=Zo,zn.invert=As,zn.invertBy=Os,zn.invokeMap=_a,zn.iteratee=rl,zn.keyBy=xa,zn.keys=Cs,zn.keysIn=ks,zn.map=wa,zn.mapKeys=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},zn.mapValues=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},zn.matches=function(t){return jr(ar(t,1))},zn.matchesProperty=function(t,e){return zr(t,ar(e,1))},zn.memoize=Na,zn.merge=Rs,zn.mergeWith=Ns,zn.method=il,zn.methodOf=ol,zn.mixin=al,zn.negate=La,zn.nthArg=function(t){return t=ds(t),Xr((function(e){return Br(e,t)}))},zn.omit=Ls,zn.omitBy=function(t,e){return Ds(t,La(oo(e)))},zn.once=function(t){return Aa(2,t)},zn.orderBy=function(t,e,n,r){return null==t?[]:(Wa(e)||(e=null==e?[]:[e]),Wa(n=r?i:n)||(n=null==n?[]:[n]),Fr(t,e,n))},zn.over=ll,zn.overArgs=Ia,zn.overEvery=ul,zn.overSome=cl,zn.partial=Da,zn.partialRight=ja,zn.partition=Sa,zn.pick=Is,zn.pickBy=Ds,zn.property=hl,zn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},zn.pull=$o,zn.pullAll=Ko,zn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,oo(n,2)):t},zn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,i,n):t},zn.pullAt=Jo,zn.range=fl,zn.rangeRight=dl,zn.rearg=za,zn.reject=function(t,e){return(Wa(t)?Oe:pr)(t,La(oo(e,3)))},zn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Vr(t,i),n},zn.rest=function(t,e){if("function"!=typeof t)throw new At(o);return Xr(t,e=e===i?e:ds(e))},zn.reverse=Qo,zn.sampleSize=function(t,e,n){return e=(n?go(t,e,n):e===i)?1:ds(e),(Wa(t)?$n:Yr)(t,e)},zn.set=function(t,e,n){return null==t?t:$r(t,e,n)},zn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:$r(t,e,n,r)},zn.shuffle=function(t){return(Wa(t)?Kn:Qr)(t)},zn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&go(t,e,n)?(e=0,n=r):(e=null==e?0:ds(e),n=n===i?r:ds(n)),ti(t,e,n)):[]},zn.sortBy=Ea,zn.sortedUniq=function(t){return t&&t.length?ii(t):[]},zn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},zn.split=function(t,e,n){return n&&"number"!=typeof n&&go(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=gs(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=ai(e))&&rn(t)?yi(hn(t),0,n):t.split(e,n):[]},zn.spread=function(t,e){if("function"!=typeof t)throw new At(o);return e=null==e?0:vn(ds(e),0),Xr((function(n){var r=n[e],i=yi(n,0,e);return r&&Re(i,r),Se(t,this,i)}))},zn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},zn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ds(e))<0?0:e):[]},zn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ds(e)))<0?0:e,r):[]},zn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!1,!0):[]},zn.takeWhile=function(t,e){return t&&t.length?ci(t,oo(e,3)):[]},zn.tap=function(t,e){return e(t),t},zn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new At(o);return Qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ca(t,e,{leading:r,maxWait:e,trailing:i})},zn.thru=fa,zn.toArray=hs,zn.toPairs=js,zn.toPairsIn=zs,zn.toPath=function(t){return Wa(t)?ke(t,Do):ss(t)?[t]:Ti(Io(gs(t)))},zn.toPlainObject=vs,zn.transform=function(t,e,n){var r=Wa(t),i=r||Xa(t)||ls(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Qa(t)&&$a(o)?Un(Vt(t)):{}}return(i?Me:yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},zn.unary=function(t){return Ta(t,1)},zn.union=ta,zn.unionBy=ea,zn.unionWith=na,zn.uniq=function(t){return t&&t.length?si(t):[]},zn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},zn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},zn.unset=function(t,e){return null==t||li(t,e)},zn.unzip=ra,zn.unzipWith=ia,zn.update=function(t,e,n){return null==t?t:ui(t,e,mi(n))},zn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ui(t,e,mi(n),r)},zn.values=Us,zn.valuesIn=function(t){return null==t?[]:$e(t,ks(t))},zn.without=oa,zn.words=$s,zn.wrap=function(t,e){return Da(mi(e),t)},zn.xor=aa,zn.xorBy=sa,zn.xorWith=la,zn.zip=ua,zn.zipObject=function(t,e){return di(t||[],e||[],Qn)},zn.zipObjectDeep=function(t,e){return di(t||[],e||[],$r)},zn.zipWith=ca,zn.entries=js,zn.entriesIn=zs,zn.extend=bs,zn.extendWith=_s,al(zn,zn),zn.add=gl,zn.attempt=Ks,zn.camelCase=Bs,zn.capitalize=Fs,zn.ceil=yl,zn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ms(n))==n?n:0),e!==i&&(e=(e=ms(e))==e?e:0),or(ms(t),e,n)},zn.clone=function(t){return ar(t,4)},zn.cloneDeep=function(t){return ar(t,5)},zn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},zn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},zn.conformsTo=function(t,e){return null==e||sr(t,e,Cs(e))},zn.deburr=Hs,zn.defaultTo=function(t,e){return null==t||t!=t?e:t},zn.divide=bl,zn.endsWith=function(t,e,n){t=gs(t),e=ai(e);var r=t.length,o=n=n===i?r:or(ds(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},zn.eq=Ua,zn.escape=function(t){return(t=gs(t))&&Z.test(t)?t.replace(q,en):t},zn.escapeRegExp=function(t){return(t=gs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},zn.every=function(t,e,n){var r=Wa(t)?Ae:fr;return n&&go(t,e,n)&&(e=i),r(t,oo(e,3))},zn.find=ma,zn.findIndex=Ho,zn.findKey=function(t,e){return je(t,oo(e,3),yr)},zn.findLast=va,zn.findLastIndex=Wo,zn.findLastKey=function(t,e){return je(t,oo(e,3),br)},zn.floor=_l,zn.forEach=ga,zn.forEachRight=ya,zn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),ks)},zn.forInRight=function(t,e){return null==t?t:gr(t,oo(e,3),ks)},zn.forOwn=function(t,e){return t&&yr(t,oo(e,3))},zn.forOwnRight=function(t,e){return t&&br(t,oo(e,3))},zn.get=Ms,zn.gt=Ba,zn.gte=Fa,zn.has=function(t,e){return null!=t&&fo(t,e,Mr)},zn.hasIn=Ts,zn.head=Go,zn.identity=nl,zn.includes=function(t,e,n,r){t=Ga(t)?t:Us(t),n=n&&!r?ds(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),as(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ue(t,e,n)>-1},zn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=vn(r+i,0)),Ue(t,e,i)},zn.inRange=function(t,e,n){return e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,n){return t>=gn(e,n)&&t<vn(e,n)}(t=ms(t),e,n)},zn.invoke=Ps,zn.isArguments=Ha,zn.isArray=Wa,zn.isArrayBuffer=Va,zn.isArrayLike=Ga,zn.isArrayLikeObject=qa,zn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&Sr(t)==g},zn.isBuffer=Xa,zn.isDate=Za,zn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},zn.isEmpty=function(t){if(null==t)return!0;if(Ga(t)&&(Wa(t)||"string"==typeof t||"function"==typeof t.splice||Xa(t)||ls(t)||Ha(t)))return!t.length;var e=ho(t);if(e==w||e==A)return!t.size;if(xo(t))return!Lr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},zn.isEqual=function(t,e){return Cr(t,e)},zn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Cr(t,e,i,n):!!r},zn.isError=Ya,zn.isFinite=function(t){return"number"==typeof t&&De(t)},zn.isFunction=$a,zn.isInteger=Ka,zn.isLength=Ja,zn.isMap=es,zn.isMatch=function(t,e){return t===e||kr(t,e,so(e))},zn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,kr(t,e,so(e),n)},zn.isNaN=function(t){return ns(t)&&t!=+t},zn.isNative=function(t){if(_o(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(t)},zn.isNil=function(t){return null==t},zn.isNull=function(t){return null===t},zn.isNumber=ns,zn.isObject=Qa,zn.isObjectLike=ts,zn.isPlainObject=rs,zn.isRegExp=is,zn.isSafeInteger=function(t){return Ka(t)&&t>=-9007199254740991&&t<=h},zn.isSet=os,zn.isString=as,zn.isSymbol=ss,zn.isTypedArray=ls,zn.isUndefined=function(t){return t===i},zn.isWeakMap=function(t){return ts(t)&&ho(t)==C},zn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==Sr(t)},zn.join=function(t,e){return null==t?"":Ve.call(t,e)},zn.kebabCase=Ws,zn.last=Yo,zn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ds(n))<0?vn(r+o,0):gn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):ze(t,Fe,o,!0)},zn.lowerCase=Vs,zn.lowerFirst=Gs,zn.lt=us,zn.lte=cs,zn.max=function(t){return t&&t.length?dr(t,nl,Er):i},zn.maxBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Er):i},zn.mean=function(t){return He(t,nl)},zn.meanBy=function(t,e){return He(t,oo(e,2))},zn.min=function(t){return t&&t.length?dr(t,nl,Ir):i},zn.minBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Ir):i},zn.stubArray=pl,zn.stubFalse=ml,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=xl,zn.nth=function(t,e){return t&&t.length?Br(t,ds(e)):i},zn.noConflict=function(){return he._===this&&(he._=zt),this},zn.noop=sl,zn.now=Ma,zn.pad=function(t,e,n){t=gs(t);var r=(e=ds(e))?cn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fi(de(i),n)+t+Fi(fe(i),n)},zn.padEnd=function(t,e,n){t=gs(t);var r=(e=ds(e))?cn(t):0;return e&&r<e?t+Fi(e-r,n):t},zn.padStart=function(t,e,n){t=gs(t);var r=(e=ds(e))?cn(t):0;return e&&r<e?Fi(e-r,n)+t:t},zn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(gs(t).replace(rt,""),e||0)},zn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&go(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fs(t),e===i?(e=t,t=0):e=fs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_n();return gn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Gr(t,e)},zn.reduce=function(t,e,n){var r=Wa(t)?Ne:Ge,i=arguments.length<3;return r(t,oo(e,4),n,i,cr)},zn.reduceRight=function(t,e,n){var r=Wa(t)?Le:Ge,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},zn.repeat=function(t,e,n){return e=(n?go(t,e,n):e===i)?1:ds(e),qr(gs(t),e)},zn.replace=function(){var t=arguments,e=gs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},zn.result=function(t,e,n){var r=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Do(e[r])];a===i&&(r=o,a=n),t=$a(a)?a.call(t):a}return t},zn.round=wl,zn.runInContext=t,zn.sample=function(t){return(Wa(t)?Yn:Zr)(t)},zn.size=function(t){if(null==t)return 0;if(Ga(t))return as(t)?cn(t):t.length;var e=ho(t);return e==w||e==A?t.size:Lr(t).length},zn.snakeCase=qs,zn.some=function(t,e,n){var r=Wa(t)?Ie:ei;return n&&go(t,e,n)&&(e=i),r(t,oo(e,3))},zn.sortedIndex=function(t,e){return ni(t,e)},zn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},zn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Ua(t[r],e))return r}return-1},zn.sortedLastIndex=function(t,e){return ni(t,e,!0)},zn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},zn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},zn.startCase=Xs,zn.startsWith=function(t,e,n){return t=gs(t),n=null==n?0:or(ds(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},zn.subtract=Sl,zn.sum=function(t){return t&&t.length?qe(t,nl):0},zn.sumBy=function(t,e){return t&&t.length?qe(t,oo(e,2)):0},zn.template=function(t,e,n){var r=zn.templateSettings;n&&go(t,e,n)&&(e=i),t=gs(t),e=_s({},e,r,Yi);var o,a,s=_s({},e.imports,r.imports,Yi),l=Cs(s),u=$e(s,l),c=0,h=e.interpolate||bt,f="__p += '",d=Mt((e.escape||bt).source+"|"+h.source+"|"+(h===K?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,s,l){return r||(r=i),f+=t.slice(c,l).replace(_t,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),f+="';\n";var m=Nt.call(e,"variable")&&e.variable;if(m){if(ut.test(m))throw new xt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(H,""):f).replace(W,"$1").replace(V,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ks((function(){return wt(l,p+"return "+f).apply(i,u)}));if(v.source=f,Ya(v))throw v;return v},zn.times=function(t,e){if((t=ds(t))<1||t>h)return[];var n=d,r=gn(t,d);e=oo(e),t-=d;for(var i=Xe(r,e);++n<t;)e(n);return i},zn.toFinite=fs,zn.toInteger=ds,zn.toLength=ps,zn.toLower=function(t){return gs(t).toLowerCase()},zn.toNumber=ms,zn.toSafeInteger=function(t){return t?or(ds(t),-9007199254740991,h):0===t?t:0},zn.toString=gs,zn.toUpper=function(t){return gs(t).toUpperCase()},zn.trim=function(t,e,n){if((t=gs(t))&&(n||e===i))return Ze(t);if(!t||!(e=ai(e)))return t;var r=hn(t),o=hn(e);return yi(r,Je(r,o),Qe(r,o)+1).join("")},zn.trimEnd=function(t,e,n){if((t=gs(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=ai(e)))return t;var r=hn(t);return yi(r,0,Qe(r,hn(e))+1).join("")},zn.trimStart=function(t,e,n){if((t=gs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=hn(t);return yi(r,Je(r,hn(e))).join("")},zn.truncate=function(t,e){var n=30,r="...";if(Qa(e)){var o="separator"in e?e.separator:o;n="length"in e?ds(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=gs(t)).length;if(rn(t)){var s=hn(t);a=s.length}if(n>=a)return t;var l=n-cn(r);if(l<1)return r;var u=s?yi(s,0,l).join(""):t.slice(0,l);if(o===i)return u+r;if(s&&(l+=u.length-l),is(o)){if(t.slice(l).search(o)){var c,h=u;for(o.global||(o=Mt(o.source,gs(ft.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var f=c.index;u=u.slice(0,f===i?l:f)}}else if(t.indexOf(ai(o),l)!=l){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+r},zn.unescape=function(t){return(t=gs(t))&&X.test(t)?t.replace(G,dn):t},zn.uniqueId=function(t){var e=++Lt;return gs(t)+e},zn.upperCase=Zs,zn.upperFirst=Ys,zn.each=ga,zn.eachRight=ya,zn.first=Go,al(zn,(vl={},yr(zn,(function(t,e){Nt.call(zn.prototype,e)||(vl[e]=t)})),vl),{chain:!1}),zn.VERSION="4.17.21",Me(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){zn[t].placeholder=zn})),Me(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===i?1:vn(ds(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=gn(n,r.__takeCount__):r.__views__.push({size:gn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Me(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Me(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Me(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(nl)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Or(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(La(oo(t)))},Hn.prototype.slice=function(t,e){t=ds(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ds(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(d)},yr(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=zn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(zn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,l=e instanceof Hn,u=s[0],c=l||Wa(e),h=function(t){var e=o.apply(zn,Re([t],s));return r&&f?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=a&&!f,m=l&&!d;if(!a&&c){e=m?e:new Hn(this);var v=t.apply(e,s);return v.__actions__.push({func:fa,args:[h],thisArg:i}),new Fn(v,f)}return p&&m?t.apply(this,s):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Me(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);zn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Wa(i)?i:[],t)}return this[n]((function(n){return e.apply(Wa(n)?n:[],t)}))}})),yr(Hn.prototype,(function(t,e){var n=zn[e];if(n){var r=n.name+"";Nt.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:e,func:n})}})),Pn[ji(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Ti(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ti(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ti(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Wa(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=gn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=gn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return hi(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var m=-1,v=t[u+=e];++m<h;){var g=c[m],y=g.iteratee,b=g.type,_=y(v);if(2==b)v=_;else if(!_){if(1==b)continue t;break t}}p[f++]=v}return p},zn.prototype.at=da,zn.prototype.chain=function(){return ha(this)},zn.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},zn.prototype.plant=function(t){for(var e,n=this;n instanceof Bn;){var r=zo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},zn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:fa,args:[Qo],thisArg:i}),new Fn(e,this.__chain__)}return this.thru(Qo)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,Yt&&(zn.prototype[Yt]=function(){return this}),zn}();he._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},5161:(t,e,n)=>{var r=n(9932),i=n(7206),o=n(9199),a=n(1469);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},6604:(t,e,n)=>{var r=n(9465),i=n(7816),o=n(7206);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},6162:(t,e,n)=>{var r=n(6029),i=n(3325),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},8306:(t,e,n)=>{var r=n(3369);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},3632:(t,e,n)=>{var r=n(6029),i=n(433),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},308:t=>{t.exports=function(){}},7771:(t,e,n)=>{var r=n(5639);t.exports=function(){return r.Date.now()}},9601:(t,e,n)=>{var r=n(371),i=n(9152),o=n(5403),a=n(327);t.exports=function(t){return o(t)?r(a(t)):i(t)}},6026:(t,e,n)=>{var r=n(7445)();t.exports=r},9704:(t,e,n)=>{var r=n(2908),i=n(7206),o=n(5076),a=n(1469),s=n(6612);t.exports=function(t,e,n){var l=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),l(t,i(e,3))}},9734:(t,e,n)=>{var r=n(1078),i=n(2689),o=n(5976),a=n(6612),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},479:t=>{t.exports=function(){return[]}},5062:t=>{t.exports=function(){return!1}},3493:(t,e,n)=>{var r=n(3279),i=n(3218);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},8601:(t,e,n)=>{var r=n(4841);t.exports=function(t){return t?Infinity===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},554:(t,e,n)=>{var r=n(8601);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},4841:(t,e,n)=>{var r=n(7561),i=n(3218),o=n(3448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||l.test(t)?u(t.slice(2),n?2:8):a.test(t)?NaN:+t}},9833:(t,e,n)=>{var r=n(531);t.exports=function(t){return null==t?"":r(t)}},5578:(t,e,n)=>{var r=n(7206),i=n(5652);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},1700:(t,e,n)=>{var r=n(8805)("toUpperCase");t.exports=r},2703:(t,e,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(t,e,n)=>{t.exports=n(2703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8531:(t,e,n)=>{"use strict";var r=n(7294),i=n(3935);var o=Object.assign;function a(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function s(){return!0}function l(){return!1}function u(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?s:l,this.isPropagationStopped=l,this}return o(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=s)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=s)},persist:function(){},isPersistent:s}),e}var c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h=u(c),f=o({},c,{view:0,detail:0});u(f);var d,p,m,v=o({},f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==m&&(m&&"mousemove"===t.type?(d=t.screenX-m.screenX,p=t.screenY-m.screenY):p=d=0,m=t),d)},movementY:function(t){return"movementY"in t?t.movementY:p}});u(v),u(o({},v,{dataTransfer:0})),u(o({},f,{relatedTarget:0})),u(o({},c,{animationName:0,elapsedTime:0,pseudoElement:0})),u(o({},c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),u(o({},c,{data:0}));var g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=b[t])&&!!e[t]}function x(){return _}function w(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}u(o({},f,{key:function(t){if(t.key){var e=g[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=a(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?y[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x,charCode:function(t){return"keypress"===t.type?a(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?a(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),u(o({},v,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),u(o({},f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x})),u(o({},c,{propertyName:0,elapsedTime:0,pseudoElement:0})),u(o({},v,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}));var S=!1,E=null,M=!1,T=null,A={onError:function(t){S=!0,E=t}};function O(t,e,n,r,i,o,a,s,l){S=!1,E=null,w.apply(A,arguments)}var P=Array.isArray,C=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Events,k=C[0],R=C[1],N=C[2],L=C[3],I=C[4];r.unstable_act;function D(){}function j(t){return!(!t||1!==t.nodeType||!t.tagName)}function z(t){return!j(t)&&null!=t&&"function"==typeof t.render&&"function"==typeof t.setState}function U(t,e,n){var r=t.type||"unknown-event";t.currentTarget=R(n),function(t,e,n,r,i,o,a,s,l){if(O.apply(this,arguments),S){if(!S)throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.");var u=E;S=!1,E=null,M||(M=!0,T=u)}}(r,e,void 0,t),t.currentTarget=null}function B(t,e){var n=t.stateNode;if(!n)return null;var r=N(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error("Expected `"+e+"` listener to be a function, instead got a value of `"+typeof n+"` type.");return n}function F(t,e,n){var r=n._reactName;"captured"===e&&(r+="Capture"),(e=B(t,r))&&(null==n._dispatchListeners&&(n._dispatchListeners=[]),null==n._dispatchInstances&&(n._dispatchInstances=[]),n._dispatchListeners.push(e),n._dispatchInstances.push(t))}var H={},W=new Set(["mouseEnter","mouseLeave","pointerEnter","pointerLeave"]);"blur cancel click close contextMenu copy cut auxClick doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play pointerCancel pointerDown pointerUp rateChange reset resize seeked submit touchCancel touchEnd touchStart volumeChange drag dragEnter dragExit dragLeave dragOver mouseMove mouseOut mouseOver pointerMove pointerOut pointerOver scroll toggle touchMove wheel abort animationEnd animationIteration animationStart canPlay canPlayThrough durationChange emptied encrypted ended error gotPointerCapture load loadedData loadedMetadata loadStart lostPointerCapture playing progress seeking stalled suspend timeUpdate transitionEnd waiting mouseEnter mouseLeave pointerEnter pointerLeave change select beforeInput compositionEnd compositionStart compositionUpdate".split(" ").forEach((function(t){H[t]=function(t){return function(e,n){if(r.isValidElement(e))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a React element. Pass the DOM node you wish to simulate the event on instead. Note that TestUtils.Simulate will not work if you are using shallow rendering.");if(z(e))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a component instance. Pass the DOM node you wish to simulate the event on instead.");var a="on"+t[0].toUpperCase()+t.slice(1),s=new D;s.target=e,s.type=t.toLowerCase();var l=k(e),u=new h(a,s.type,l,s,e);u.persist(),o(u,n),W.has(t)?u&&u._reactName&&function(t,e,n){t&&n&&n._reactName&&(e=B(t,n._reactName))&&(null==n._dispatchListeners&&(n._dispatchListeners=[]),null==n._dispatchInstances&&(n._dispatchInstances=[]),n._dispatchListeners.push(e),n._dispatchInstances.push(t))}(u._targetInst,null,u):u&&u._reactName&&function(t,e,n){for(var r=[];t;){r.push(t);do{t=t.return}while(t&&5!==t.tag);t=t||null}for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)}(u._targetInst,F,u),i.unstable_batchedUpdates((function(){if(L(e),u){var t=u._dispatchListeners,n=u._dispatchInstances;if(P(t))for(var r=0;r<t.length&&!u.isPropagationStopped();r++)U(u,t[r],n[r]);else t&&U(u,t,n);u._dispatchListeners=null,u._dispatchInstances=null,u.isPersistent()||u.constructor.release(u)}if(M)throw t=T,M=!1,T=null,t})),I()}}(t)})),e.Simulate=H},4448:(t,e,n)=>{"use strict";var r=n(7294),i=n(4142);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(d,t)&&(f.test(t)?p[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,y);v[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,y);v[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,y);v[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function I(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=L&&t[L]||t["@@iterator"])?t:null}var D,j=Object.assign;function z(t){if(void 0===D)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var U=!1;function B(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function F(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return B(t.type,!1);case 11:return B(t.type.render,!1);case 1:return B(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case M:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case k:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case R:e=t._payload,t=t._init;try{return H(t(e))}catch(t){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Z(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return j({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=V(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function K(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){K(t,e);var n=V(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Z(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+V(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return j({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:V(n)}}function ot(t,e){var n=V(e.value),r=V(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function ft(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function vt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(dt).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var gt=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Et=null;function Mt(t){if(t=vi(t)){if("function"!=typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=yi(e),wt(t.stateNode,t.type,e))}}function Tt(t){St?Et?Et.push(t):Et=[t]:St=t}function At(){if(St){var t=St,e=Et;if(Et=St=null,Mt(t),e)for(t=0;t<e.length;t++)Mt(e[t])}}function Ot(t,e){return t(e)}function Pt(){}var Ct=!1;function kt(t,e,n){if(Ct)return t(e,n);Ct=!0;try{return Ot(t,e,n)}finally{Ct=!1,(null!==St||null!==Et)&&(Pt(),At())}}function Rt(t,e){var n=t.stateNode;if(null===n)return null;var r=yi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(o(231,e,typeof n));return n}var Nt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(ct){Nt=!1}function It(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var Dt=!1,jt=null,zt=!1,Ut=null,Bt={onError:function(t){Dt=!0,jt=t}};function Ft(t,e,n,r,i,o,a,s,l){Dt=!1,jt=null,It.apply(Bt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Vt(t){if(Ht(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Vt(i),t;if(a===r)return Vt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Zt=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,$t=i.unstable_requestPaint,Kt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null,ae=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2,ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!=(o&=a)&&(r=he(o))}else 0!=(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!=(4194240&o)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0==(4194240&(ue<<=1))&&(ue=64),t}function ve(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ge(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var xe,we,Se,Ee,Me,Te=!1,Ae=[],Oe=null,Pe=null,Ce=null,ke=new Map,Re=new Map,Ne=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ie(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":Ce=null;break;case"pointerover":case"pointerout":ke.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Re.delete(e.pointerId)}}function De(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&null!==(e=vi(e))&&we(e),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function je(t){var e=mi(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void Me(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=vi(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,e.shift()}return!0}function Ue(t,e,n){ze(t)&&n.delete(e)}function Be(){Te=!1,null!==Oe&&ze(Oe)&&(Oe=null),null!==Pe&&ze(Pe)&&(Pe=null),null!==Ce&&ze(Ce)&&(Ce=null),ke.forEach(Ue),Re.forEach(Ue)}function Fe(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function He(t){function e(e){return Fe(e,t)}if(0<Ae.length){Fe(Ae[0],t);for(var n=1;n<Ae.length;n++){var r=Ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Oe&&Fe(Oe,t),null!==Pe&&Fe(Pe,t),null!==Ce&&Fe(Ce,t),ke.forEach(e),Re.forEach(e),n=0;n<Ne.length;n++)(r=Ne[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ne.length&&null===(n=Ne[0]).blockedOn;)je(n),null===n.blockedOn&&Ne.shift()}var We=_.ReactCurrentBatchConfig,Ve=!0;function Ge(t,e,n,r){var i=be,o=We.transition;We.transition=null;try{be=1,Xe(t,e,n,r)}finally{be=i,We.transition=o}}function qe(t,e,n,r){var i=be,o=We.transition;We.transition=null;try{be=4,Xe(t,e,n,r)}finally{be=i,We.transition=o}}function Xe(t,e,n,r){if(Ve){var i=Ye(t,e,n,r);if(null===i)Fr(t,e,r,Ze,n),Ie(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Oe=De(Oe,t,e,n,r,i),!0;case"dragenter":return Pe=De(Pe,t,e,n,r,i),!0;case"mouseover":return Ce=De(Ce,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ke.set(o,De(ke.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Re.set(o,De(Re.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ie(t,r),4&e&&-1<Le.indexOf(t)){for(;null!==i;){var o=vi(i);if(null!==o&&xe(o),null===(o=Ye(t,e,n,r))&&Fr(t,e,r,Ze,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Fr(t,e,r,null,n)}}var Ze=null;function Ye(t,e,n,r){if(Ze=null,null!==(t=mi(t=xt(r))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ze=t,null}function $e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ke=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,r=n.length,i="value"in Ke?Ke.value:Ke.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=j({},un,{view:0,detail:0}),fn=on(hn),dn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),pn=on(dn),mn=on(j({},dn,{dataTransfer:0})),vn=on(j({},hn,{relatedTarget:0})),gn=on(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=on(j({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),bn=on(j({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wn[t])&&!!e[t]}function En(){return Sn}var Mn=on(j({},hn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Tn=on(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),On=on(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=on(j({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=[9,13,27,32],kn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Nn=c&&"TextEvent"in window&&!Rn,Ln=c&&(!kn||Rn&&8<Rn&&11>=Rn),In=String.fromCharCode(32),Dn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Cn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bn[t.type]:"textarea"===e}function Hn(t,e,n,r){Tt(r),0<(e=Wr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Vn=null;function Gn(t){Ir(t,0)}function qn(t){if(X(gi(t)))return t}function Xn(t,e){if("change"===t)return e}var Zn=!1;if(c){var Yn;if(c){var $n="oninput"in document;if(!$n){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),$n="function"==typeof Kn.oninput}Yn=$n}else Yn=!1;Zn=Yn&&(!document.documentMode||9<document.documentMode)}function Jn(){Wn&&(Wn.detachEvent("onpropertychange",Qn),Vn=Wn=null)}function Qn(t){if("value"===t.propertyName&&qn(Vn)){var e=[];Hn(e,Vn,t,xt(t)),kt(Gn,e)}}function tr(t,e,n){"focusin"===t?(Jn(),Vn=n,(Wn=e).attachEvent("onpropertychange",Qn)):"focusout"===t&&Jn()}function er(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qn(Vn)}function nr(t,e){if("click"===t)return qn(e)}function rr(t,e){if("input"===t||"change"===t)return qn(e)}var ir="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function or(t,e){if(ir(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ir(t[i],e[i]))return!1}return!0}function ar(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sr(t,e){var n,r=ar(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ar(r)}}function lr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?lr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ur(){for(var t=window,e=Z();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Z((t=e.contentWindow).document)}return e}function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function hr(t){var e=ur(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lr(n.ownerDocument.documentElement,n)){if(null!==r&&cr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=sr(n,o);var a=sr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,dr=null,pr=null,mr=null,vr=!1;function gr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==dr||dr!==Z(r)||(r="selectionStart"in(r=dr)&&cr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&or(mr,r)||(mr=r,0<(r=Wr(pr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dr)))}function yr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var br={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},_r={},xr={};function wr(t){if(_r[t])return _r[t];if(!br[t])return t;var e,n=br[t];for(e in n)if(n.hasOwnProperty(e)&&e in xr)return _r[t]=n[e];return t}c&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=wr("animationend"),Er=wr("animationiteration"),Mr=wr("animationstart"),Tr=wr("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){Ar.set(t,e),l(e,[t])}for(var Cr=0;Cr<Or.length;Cr++){var kr=Or[Cr];Pr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Er,"onAnimationIteration"),Pr(Mr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,u){if(Ft.apply(this,arguments),Dt){if(!Dt)throw Error(o(198));var c=jt;Dt=!1,jt=null,zt||(zt=!0,Ut=c)}}(r,e,void 0,t),t.currentTarget=null}function Ir(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Lr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Lr(i,s,u),o=l}}}if(zt)throw t=Ut,zt=!1,Ut=null,t}function Dr(t,e){var n=e[fi];void 0===n&&(n=e[fi]=new Set);var r=t+"__bubble";n.has(r)||(Br(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),Br(n,t,r,e)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[zr]){t[zr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Nr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zr]||(e[zr]=!0,jr("selectionchange",!1,e))}}function Br(t,e,n,r){switch($e(e)){case 1:var i=Ge;break;case 4:i=qe;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Nt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fr(t,e,n,r,i){var o=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=mi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}kt((function(){var r=o,i=xt(n),a=[];t:{var s=Ar.get(t);if(void 0!==s){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Sr:case Er:case Mr:l=gn;break;case Tr:l=On;break;case"scroll":l=fn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!=(4&e),h=!c&&"scroll"===t,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&null!=(m=Rt(p,f))&&c.push(Hr(p,m,d))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===_t||!(u=n.relatedTarget||n.fromElement)||!mi(u)&&!u[hi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?mi(u):null)&&(u!==(h=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=Tn,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?s:gi(l),d=null==u?s:gi(u),(s=new c(m,p+"leave",l,n,i)).target=h,s.relatedTarget=d,m=null,mi(i)===r&&((c=new c(f,p+"enter",u,n,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(f=u,p=0,d=c=l;d;d=Vr(d))p++;for(d=0,m=f;m;m=Vr(m))d++;for(;0<p-d;)c=Vr(c),p--;for(;0<d-p;)f=Vr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break t;c=Vr(c),f=Vr(f)}c=null}else c=null;null!==l&&Gr(a,s,l,c,!1),null!==u&&null!==h&&Gr(a,h,u,c,!0)}if("select"===(l=(s=r?gi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Xn;else if(Fn(s))if(Zn)v=rr;else{v=er;var g=tr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=nr);switch(v&&(v=v(t,r))?Hn(a,v,n,i):(g&&g(t,s,r),"focusout"===t&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&tt(s,"number",s.value)),g=r?gi(r):window,t){case"focusin":(Fn(g)||"true"===g.contentEditable)&&(dr=g,pr=r,mr=null);break;case"focusout":mr=pr=dr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,gr(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":gr(a,n,i)}var y;if(kn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Un?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=tn()):(Je="value"in(Ke=i)?Ke.value:Ke.textContent,Un=!0)),0<(g=Wr(r,b)).length&&(b=new bn(b,t,null,n,i),a.push({event:b,listeners:g}),(y||null!==(y=zn(n)))&&(b.data=y))),(y=Nn?function(t,e){switch(t){case"compositionend":return zn(e);case"keypress":return 32!==e.which?null:(Dn=!0,In);case"textInput":return(t=e.data)===In&&Dn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!kn&&jn(t,e)?(t=tn(),Qe=Je=Ke=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ln&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y)}Ir(a,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Rt(t,n))&&r.unshift(Hr(t,o,i)),null!=(o=Rt(t,e))&&r.push(Hr(t,o,i))),t=t.return}return r}function Vr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Gr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Rt(n,o))&&a.unshift(Hr(n,l,s)):i||null!=(l=Rt(n,o))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(t){return("string"==typeof t?t:""+t).replace(qr,"\n").replace(Xr,"")}function Yr(t,e,n){if(e=Zr(e),Zr(t)!==e&&n)throw Error(o(425))}function $r(){}var Kr=null,Jr=null;function Qr(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ti="function"==typeof setTimeout?setTimeout:void 0,ei="function"==typeof clearTimeout?clearTimeout:void 0,ni="function"==typeof Promise?Promise:void 0,ri="function"==typeof queueMicrotask?queueMicrotask:void 0!==ni?function(t){return ni.resolve(null).then(t).catch(ii)}:ti;function ii(t){setTimeout((function(){throw t}))}function oi(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void He(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);He(e)}function ai(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function si(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var li=Math.random().toString(36).slice(2),ui="__reactFiber$"+li,ci="__reactProps$"+li,hi="__reactContainer$"+li,fi="__reactEvents$"+li,di="__reactListeners$"+li,pi="__reactHandles$"+li;function mi(t){var e=t[ui];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[ui]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=si(t);null!==t;){if(n=t[ui])return n;t=si(t)}return e}n=(t=n).parentNode}return null}function vi(t){return!(t=t[ui]||t[hi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function gi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function yi(t){return t[ci]||null}var bi=[],_i=-1;function xi(t){return{current:t}}function wi(t){0>_i||(t.current=bi[_i],bi[_i]=null,_i--)}function Si(t,e){_i++,bi[_i]=t.current,t.current=e}var Ei={},Mi=xi(Ei),Ti=xi(!1),Ai=Ei;function Oi(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(t){return null!=t.childContextTypes}function Ci(){wi(Ti),wi(Mi)}function ki(t,e,n){if(Mi.current!==Ei)throw Error(o(168));Si(Mi,e),Si(Ti,n)}function Ri(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,W(t)||"Unknown",i));return j({},n,r)}function Ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,Ai=Mi.current,Si(Mi,t),Si(Ti,Ti.current),!0}function Li(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ri(t,e,Ai),r.__reactInternalMemoizedMergedChildContext=t,wi(Ti),wi(Mi),Si(Mi,t)):wi(Ti),Si(Ti,n)}var Ii=null,Di=!1,ji=!1;function zi(t){null===Ii?Ii=[t]:Ii.push(t)}function Ui(){if(!ji&&null!==Ii){ji=!0;var t=0,e=be;try{var n=Ii;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ii=null,Di=!1}catch(e){throw null!==Ii&&(Ii=Ii.slice(t+1)),Xt(Qt,Ui),e}finally{be=e,ji=!1}}return null}var Bi=[],Fi=0,Hi=null,Wi=0,Vi=[],Gi=0,qi=null,Xi=1,Zi="";function Yi(t,e){Bi[Fi++]=Wi,Bi[Fi++]=Hi,Hi=t,Wi=e}function $i(t,e,n){Vi[Gi++]=Xi,Vi[Gi++]=Zi,Vi[Gi++]=qi,qi=t;var r=Xi;t=Zi;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-ae(e)+i|n<<i|r,Zi=o+t}else Xi=1<<o|n<<i|r,Zi=t}function Ki(t){null!==t.return&&(Yi(t,1),$i(t,1,0))}function Ji(t){for(;t===Hi;)Hi=Bi[--Fi],Bi[Fi]=null,Wi=Bi[--Fi],Bi[Fi]=null;for(;t===qi;)qi=Vi[--Gi],Vi[Gi]=null,Zi=Vi[--Gi],Vi[Gi]=null,Xi=Vi[--Gi],Vi[Gi]=null}var Qi=null,to=null,eo=!1,no=null;function ro(t,e){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function io(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,Qi=t,to=ai(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,Qi=t,to=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==qi?{id:Xi,overflow:Zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Qi=t,to=null,!0);default:return!1}}function oo(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function ao(t){if(eo){var e=to;if(e){var n=e;if(!io(t,e)){if(oo(t))throw Error(o(418));e=ai(n.nextSibling);var r=Qi;e&&io(t,e)?ro(r,n):(t.flags=-4097&t.flags|2,eo=!1,Qi=t)}}else{if(oo(t))throw Error(o(418));t.flags=-4097&t.flags|2,eo=!1,Qi=t}}}function so(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Qi=t}function lo(t){if(t!==Qi)return!1;if(!eo)return so(t),eo=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!Qr(t.type,t.memoizedProps)),e&&(e=to)){if(oo(t))throw uo(),Error(o(418));for(;e;)ro(t,e),e=ai(e.nextSibling)}if(so(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){to=ai(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}to=null}}else to=Qi?ai(t.stateNode.nextSibling):null;return!0}function uo(){for(var t=to;t;)t=ai(t.nextSibling)}function co(){to=Qi=null,eo=!1}function ho(t){null===no?no=[t]:no.push(t)}var fo=_.ReactCurrentBatchConfig;function po(t,e){if(t&&t.defaultProps){for(var n in e=j({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var mo=xi(null),vo=null,go=null,yo=null;function bo(){yo=go=vo=null}function _o(t){var e=mo.current;wi(mo),t._currentValue=e}function xo(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wo(t,e){vo=t,yo=go=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(gs=!0),t.firstContext=null)}function So(t){var e=t._currentValue;if(yo!==t)if(t={context:t,memoizedValue:e,next:null},null===go){if(null===vo)throw Error(o(308));go=t,vo.dependencies={lanes:0,firstContext:t}}else go=go.next=t;return e}var Eo=null;function Mo(t){null===Eo?Eo=[t]:Eo.push(t)}function To(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Mo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ao(t,r)}function Ao(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function Po(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Co(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Tl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ao(t,n)}return null===(i=r.interleaved)?(e.next=e,Mo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ao(t,n)}function No(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Lo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Io(t,e,n,r){var i=t.updateQueue;Oo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,m=s;switch(f=e,d=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(d,h,f);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=m.payload)?p.call(d,h,f):p))break t;h=j({},h,f);break t;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Ll|=a,t.lanes=a,t.memoizedState=h}}function Do(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function zo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:j({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Uo={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jl(),i=Ql(t),o=ko(r,i);o.payload=e,null!=n&&(o.callback=n),null!==(e=Ro(t,o,i))&&(tu(e,t,i,r),No(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jl(),i=Ql(t),o=ko(r,i);o.tag=1,o.payload=e,null!=n&&(o.callback=n),null!==(e=Ro(t,o,i))&&(tu(e,t,i,r),No(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jl(),r=Ql(t),i=ko(n,r);i.tag=2,null!=e&&(i.callback=e),null!==(e=Ro(t,i,r))&&(tu(e,t,r,n),No(e,t,r))}};function Bo(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!(e.prototype&&e.prototype.isPureReactComponent&&or(n,r)&&or(i,o))}function Fo(t,e,n){var r=!1,i=Ei,o=e.contextType;return"object"==typeof o&&null!==o?o=So(o):(i=Pi(e)?Ai:Mi.current,o=(r=null!=(r=e.contextTypes))?Oi(t,i):Ei),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Uo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ho(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uo.enqueueReplaceState(e,e.state,null)}function Wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=jo,Po(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=So(o):(o=Pi(e)?Ai:Mi.current,i.context=Oi(t,o)),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(zo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Uo.enqueueReplaceState(i,i.state,null),Io(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function Vo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===jo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!=typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Go(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qo(t){return(0,t._init)(t._payload)}function Xo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=ku(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Iu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===R&&qo(o)===e.type)?((r=i(e,n.props)).ref=Vo(t,e,n),r.return=t,r):((r=Ru(n.type,n.key,n.props,null,t.mode,r)).ref=Vo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Du(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Nu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Iu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Ru(e.type,e.key,e.props,null,t.mode,n)).ref=Vo(t,null,e),n.return=t,n;case w:return(e=Du(e,t.mode,n)).return=t,e;case R:return f(t,(0,e._init)(e._payload),n)}if(et(e)||I(e))return(e=Nu(e,t.mode,n,null)).return=t,e;Go(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(t,e,n,r):null;case w:return n.key===i?c(t,e,n,r):null;case R:return d(t,e,(i=n._init)(n._payload),r)}if(et(n)||I(n))return null!==i?null:h(t,e,n,r,null);Go(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case R:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||I(r))return h(e,t=t.get(n)||null,r,i,null);Go(e,r)}return null}function m(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=d(i,h,s[m],l);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(i,h),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),eo&&Yi(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return eo&&Yi(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(v=p(h,i,m,s[m],l))&&(t&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v);return t&&h.forEach((function(t){return e(i,t)})),eo&&Yi(i,m),u}function v(i,s,l,u){var c=I(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=d(i,m,y.value,u);if(null===b){null===m&&(m=g);break}t&&m&&null===b.alternate&&e(i,m),s=a(b,s,v),null===h?c=b:h.sibling=b,h=b,m=g}if(y.done)return n(i,m),eo&&Yi(i,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=f(i,y.value,u))&&(s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return eo&&Yi(i,v),c}for(m=r(i,m);!y.done;v++,y=l.next())null!==(y=p(m,i,v,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),eo&&Yi(i,v),c}return function t(r,o,a,l){if("object"==typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===R&&qo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Vo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===S?((o=Nu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Ru(a.type,a.key,a.props,null,r.mode,l)).ref=Vo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Du(a,r.mode,l)).return=r,r=o}return s(r);case R:return t(r,o,(c=a._init)(a._payload),l)}if(et(a))return m(r,o,a,l);if(I(a))return v(r,o,a,l);Go(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Iu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Zo=Xo(!0),Yo=Xo(!1),$o={},Ko=xi($o),Jo=xi($o),Qo=xi($o);function ta(t){if(t===$o)throw Error(o(174));return t}function ea(t,e){switch(Si(Qo,e),Si(Jo,t),Si(Ko,$o),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}wi(Ko),Si(Ko,e)}function na(){wi(Ko),wi(Jo),wi(Qo)}function ra(t){ta(Qo.current);var e=ta(Ko.current),n=lt(e,t.type);e!==n&&(Si(Jo,t),Si(Ko,n))}function ia(t){Jo.current===t&&(wi(Ko),wi(Jo))}var oa=xi(0);function aa(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sa=[];function la(){for(var t=0;t<sa.length;t++)sa[t]._workInProgressVersionPrimary=null;sa.length=0}var ua=_.ReactCurrentDispatcher,ca=_.ReactCurrentBatchConfig,ha=0,fa=null,da=null,pa=null,ma=!1,va=!1,ga=0,ya=0;function ba(){throw Error(o(321))}function _a(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function xa(t,e,n,r,i,a){if(ha=a,fa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ua.current=null===t||null===t.memoizedState?is:os,t=n(r,i),va){a=0;do{if(va=!1,ga=0,25<=a)throw Error(o(301));a+=1,pa=da=null,e.updateQueue=null,ua.current=as,t=n(r,i)}while(va)}if(ua.current=rs,e=null!==da&&null!==da.next,ha=0,pa=da=fa=null,ma=!1,e)throw Error(o(300));return t}function wa(){var t=0!==ga;return ga=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===pa?fa.memoizedState=pa=t:pa=pa.next=t,pa}function Ea(){if(null===da){var t=fa.alternate;t=null!==t?t.memoizedState:null}else t=da.next;var e=null===pa?fa.memoizedState:pa.next;if(null!==e)pa=e,da=t;else{if(null===t)throw Error(o(310));t={memoizedState:(da=t).memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},null===pa?fa.memoizedState=pa=t:pa=pa.next=t}return pa}function Ma(t,e){return"function"==typeof e?e(t):e}function Ta(t){var e=Ea(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=da,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((ha&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,fa.lanes|=h,Ll|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,ir(r,e.memoizedState)||(gs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,fa.lanes|=a,Ll|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Aa(t){var e=Ea(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);ir(a,e.memoizedState)||(gs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Oa(){}function Pa(t,e){var n=fa,r=Ea(),i=e(),a=!ir(r.memoizedState,i);if(a&&(r.memoizedState=i,gs=!0),r=r.queue,Fa(Ra.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==pa&&1&pa.memoizedState.tag){if(n.flags|=2048,Da(9,ka.bind(null,n,r,i,e),void 0,null),null===Al)throw Error(o(349));0!=(30&ha)||Ca(n,e,i)}return i}function Ca(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=fa.updateQueue)?(e={lastEffect:null,stores:null},fa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function ka(t,e,n,r){e.value=n,e.getSnapshot=r,Na(e)&&La(t)}function Ra(t,e,n){return n((function(){Na(e)&&La(t)}))}function Na(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch(t){return!0}}function La(t){var e=Ao(t,1);null!==e&&tu(e,t,1,-1)}function Ia(t){var e=Sa();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=Qa.bind(null,fa,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=fa.updateQueue)?(e={lastEffect:null,stores:null},fa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ja(){return Ea().memoizedState}function za(t,e,n,r){var i=Sa();fa.flags|=t,i.memoizedState=Da(1|e,n,void 0,void 0===r?null:r)}function Ua(t,e,n,r){var i=Ea();r=void 0===r?null:r;var o=void 0;if(null!==da){var a=da.memoizedState;if(o=a.destroy,null!==r&&_a(r,a.deps))return void(i.memoizedState=Da(e,n,o,r))}fa.flags|=t,i.memoizedState=Da(1|e,n,o,r)}function Ba(t,e){return za(8390656,8,t,e)}function Fa(t,e){return Ua(2048,8,t,e)}function Ha(t,e){return Ua(4,2,t,e)}function Wa(t,e){return Ua(4,4,t,e)}function Va(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ga(t,e,n){return n=null!=n?n.concat([t]):null,Ua(4,4,Va.bind(null,e,t),n)}function qa(){}function Xa(t,e){var n=Ea();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&_a(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Za(t,e){var n=Ea();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&_a(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ya(t,e,n){return 0==(21&ha)?(t.baseState&&(t.baseState=!1,gs=!0),t.memoizedState=n):(ir(n,e)||(n=me(),fa.lanes|=n,Ll|=n,t.baseState=!0),e)}function $a(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=ca.transition;ca.transition={};try{t(!1),e()}finally{be=n,ca.transition=r}}function Ka(){return Ea().memoizedState}function Ja(t,e,n){var r=Ql(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ts(t)?es(e,n):null!==(n=To(t,e,n,r))&&(tu(n,t,r,Jl()),ns(n,e,r))}function Qa(t,e,n){var r=Ql(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ts(t))es(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,ir(s,a)){var l=e.interleaved;return null===l?(i.next=i,Mo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(t){}null!==(n=To(t,e,i,r))&&(tu(n,t,r,i=Jl()),ns(n,e,r))}}function ts(t){var e=t.alternate;return t===fa||null!==e&&e===fa}function es(t,e){va=ma=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ns(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var rs={readContext:So,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useInsertionEffect:ba,useLayoutEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useMutableSource:ba,useSyncExternalStore:ba,useId:ba,unstable_isNewReconciler:!1},is={readContext:So,useCallback:function(t,e){return Sa().memoizedState=[t,void 0===e?null:e],t},useContext:So,useEffect:Ba,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,za(4194308,4,Va.bind(null,e,t),n)},useLayoutEffect:function(t,e){return za(4194308,4,t,e)},useInsertionEffect:function(t,e){return za(4,2,t,e)},useMemo:function(t,e){var n=Sa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ja.bind(null,fa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Sa().memoizedState=t},useState:Ia,useDebugValue:qa,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=Ia(!1),e=t[0];return t=$a.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fa,i=Sa();if(eo){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Al)throw Error(o(349));0!=(30&ha)||Ca(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ba(Ra.bind(null,r,a,t),[t]),r.flags|=2048,Da(9,ka.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Sa(),e=Al.identifierPrefix;if(eo){var n=Zi;e=":"+e+"R"+(n=(Xi&~(1<<32-ae(Xi)-1)).toString(32)+n),0<(n=ga++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ya++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},os={readContext:So,useCallback:Xa,useContext:So,useEffect:Fa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Za,useReducer:Ta,useRef:ja,useState:function(){return Ta(Ma)},useDebugValue:qa,useDeferredValue:function(t){return Ya(Ea(),da.memoizedState,t)},useTransition:function(){return[Ta(Ma)[0],Ea().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Pa,useId:Ka,unstable_isNewReconciler:!1},as={readContext:So,useCallback:Xa,useContext:So,useEffect:Fa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Za,useReducer:Aa,useRef:ja,useState:function(){return Aa(Ma)},useDebugValue:qa,useDeferredValue:function(t){var e=Ea();return null===da?e.memoizedState=t:Ya(e,da.memoizedState,t)},useTransition:function(){return[Aa(Ma)[0],Ea().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Pa,useId:Ka,unstable_isNewReconciler:!1};function ss(t,e){try{var n="",r=e;do{n+=F(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i,digest:null}}function ls(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function us(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var cs="function"==typeof WeakMap?WeakMap:Map;function hs(t,e,n){(n=ko(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),us(0,e)},n}function fs(t,e,n){(n=ko(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){us(0,e)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){us(0,e),"function"!=typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ds(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new cs;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Su.bind(null,t,e,n),e.then(t,t))}function ps(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ms(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=ko(-1,1)).tag=2,Ro(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var vs=_.ReactCurrentOwner,gs=!1;function ys(t,e,n,r){e.child=null===t?Yo(e,null,n,r):Zo(e,t.child,n,r)}function bs(t,e,n,r,i){n=n.render;var o=e.ref;return wo(e,i),r=xa(t,e,n,r,o,i),n=wa(),null===t||gs?(eo&&n&&Ki(e),e.flags|=1,ys(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hs(t,e,i))}function _s(t,e,n,r,i){if(null===t){var o=n.type;return"function"!=typeof o||Cu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ru(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,xs(t,e,o,r,i))}if(o=t.child,0==(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:or)(a,r)&&t.ref===e.ref)return Hs(t,e,i)}return e.flags|=1,(t=ku(o,r)).ref=e.ref,t.return=e,e.child=t}function xs(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(or(o,r)&&t.ref===e.ref){if(gs=!1,e.pendingProps=r=o,0==(t.lanes&i))return e.lanes=t.lanes,Hs(t,e,i);0!=(131072&t.flags)&&(gs=!0)}}return Es(t,e,n,r,i)}function ws(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(kl,Cl),Cl|=n;else{if(0==(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Si(kl,Cl),Cl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Si(kl,Cl),Cl|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Si(kl,Cl),Cl|=r;return ys(t,e,i,n),e.child}function Ss(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Es(t,e,n,r,i){var o=Pi(n)?Ai:Mi.current;return o=Oi(e,o),wo(e,i),n=xa(t,e,n,r,o,i),r=wa(),null===t||gs?(eo&&r&&Ki(e),e.flags|=1,ys(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hs(t,e,i))}function Ms(t,e,n,r,i){if(Pi(n)){var o=!0;Ni(e)}else o=!1;if(wo(e,i),null===e.stateNode)Fs(t,e),Fo(e,n,r),Wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?So(u):Oi(e,u=Pi(n)?Ai:Mi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Ho(e,a,r,u),Oo=!1;var f=e.memoizedState;a.state=f,Io(e,r,a,i),l=e.memoizedState,s!==r||f!==l||Ti.current||Oo?("function"==typeof c&&(zo(e,n,c,r),l=e.memoizedState),(s=Oo||Bo(e,n,s,r,f,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4194308)):("function"==typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Co(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:po(e.type,s),a.props=u,h=e.pendingProps,f=a.context,l="object"==typeof(l=n.contextType)&&null!==l?So(l):Oi(e,l=Pi(n)?Ai:Mi.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||f!==l)&&Ho(e,a,r,l),Oo=!1,f=e.memoizedState,a.state=f,Io(e,r,a,i);var p=e.memoizedState;s!==h||f!==p||Ti.current||Oo?("function"==typeof d&&(zo(e,n,d,r),p=e.memoizedState),(u=Oo||Bo(e,n,u,r,f,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ts(t,e,n,r,o,i)}function Ts(t,e,n,r,i,o){Ss(t,e);var a=0!=(128&e.flags);if(!r&&!a)return i&&Li(e,n,!1),Hs(t,e,o);r=e.stateNode,vs.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Zo(e,t.child,null,o),e.child=Zo(e,null,s,o)):ys(t,e,s,o),e.memoizedState=r.state,i&&Li(e,n,!0),e.child}function As(t){var e=t.stateNode;e.pendingContext?ki(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ki(0,e.context,!1),ea(t,e.containerInfo)}function Os(t,e,n,r,i){return co(),ho(i),e.flags|=256,ys(t,e,n,r),e.child}var Ps,Cs,ks,Rs,Ns={dehydrated:null,treeContext:null,retryLane:0};function Ls(t){return{baseLanes:t,cachePool:null,transitions:null}}function Is(t,e,n){var r,i=e.pendingProps,a=oa.current,s=!1,l=0!=(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!=(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Si(oa,1&a),null===t)return ao(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lu(l,i,0,null),t=Nu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ls(n),e.memoizedState=Ns,t):Ds(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,js(t,e,s,r=ls(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(a=Nu(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!=(1&e.mode)&&Zo(e,t.child,null,s),e.child.memoizedState=Ls(s),e.memoizedState=Ns,a);if(0==(1&e.mode))return js(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(t,e,s,r=ls(a=Error(o(419)),r,void 0))}if(l=0!=(s&t.childLanes),gs||l){if(null!==(r=Al)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ao(t,i),tu(r,t,i,-1))}return du(),js(t,e,s,r=ls(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Mu.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,to=ai(i.nextSibling),Qi=e,eo=!0,no=null,null!==t&&(Vi[Gi++]=Xi,Vi[Gi++]=Zi,Vi[Gi++]=qi,Xi=t.id,Zi=t.overflow,qi=e),(e=Ds(e,r.children)).flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0==(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=ku(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=ku(r,s):(s=Nu(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ns,i}return t=(s=t.child).sibling,i=ku(s,{mode:"visible",children:i.children}),0==(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ds(t,e){return(e=Lu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function js(t,e,n,r){return null!==r&&ho(r),Zo(e,t.child,null,n),(t=Ds(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function zs(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),xo(t.return,e,n)}function Us(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Bs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ys(t,e,r.children,n),0!=(2&(r=oa.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&zs(t,n,e);else if(19===t.tag)zs(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Si(oa,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===aa(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Us(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===aa(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Us(e,!0,n,null,o);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fs(t,e){0==(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ll|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=ku(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ku(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ws(t,e){if(!eo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Gs(t,e,n){var r=e.pendingProps;switch(Ji(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(e),null;case 1:case 17:return Pi(e.type)&&Ci(),Vs(e),null;case 3:return r=e.stateNode,na(),wi(Ti),wi(Mi),la(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(lo(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==no&&(iu(no),no=null))),Cs(t,e),Vs(e),null;case 5:ia(e);var i=ta(Qo.current);if(n=e.type,null!==t&&null!=e.stateNode)ks(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Vs(e),null}if(t=ta(Ko.current),lo(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[ui]=e,r[ci]=a,t=0!=(1&e.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Dr(Rr[i],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":$(r,a),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Dr("invalid",r);break;case"textarea":it(r,a),Dr("invalid",r)}for(var l in yt(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,u,t),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":q(r),Q(r,a,!0);break;case"textarea":q(r),at(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=$r)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ui]=e,t[ci]=r,Ps(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,r),n){case"dialog":Dr("cancel",t),Dr("close",t),i=r;break;case"iframe":case"object":case"embed":Dr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Dr(Rr[i],t);i=r;break;case"source":Dr("error",t),i=r;break;case"img":case"image":case"link":Dr("error",t),Dr("load",t),i=r;break;case"details":Dr("toggle",t),i=r;break;case"input":$(t,r),i=Y(t,r),Dr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Dr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Dr("invalid",t)}for(a in yt(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?vt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"==typeof c?("textarea"!==n||""!==c)&&ft(t,c):"number"==typeof c&&ft(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Dr("scroll",t):null!=c&&b(t,a,c,l))}switch(n){case"input":q(t),Q(t,r,!1);break;case"textarea":q(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+V(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Vs(e),null;case 6:if(t&&null!=e.stateNode)Rs(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(o(166));if(n=ta(Qo.current),ta(Ko.current),lo(e)){if(r=e.stateNode,n=e.memoizedProps,r[ui]=e,(a=r.nodeValue!==n)&&null!==(t=Qi))switch(t.tag){case 3:Yr(r.nodeValue,n,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!=(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ui]=e,e.stateNode=r}return Vs(e),null;case 13:if(wi(oa),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(eo&&null!==to&&0!=(1&e.mode)&&0==(128&e.flags))uo(),co(),e.flags|=98560,a=!1;else if(a=lo(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[ui]=e}else co(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Vs(e),a=!1}else null!==no&&(iu(no),no=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!=(128&e.flags)?(e.lanes=n,e):((r=null!==r)!=(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&oa.current)?0===Rl&&(Rl=3):du())),null!==e.updateQueue&&(e.flags|=4),Vs(e),null);case 4:return na(),Cs(t,e),null===t&&Ur(e.stateNode.containerInfo),Vs(e),null;case 10:return _o(e.type._context),Vs(e),null;case 19:if(wi(oa),null===(a=e.memoizedState))return Vs(e),null;if(r=0!=(128&e.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Rl||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=aa(t))){for(e.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Si(oa,1&oa.current|2),e.child}t=t.sibling}null!==a.tail&&Kt()>Bl&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=aa(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!eo)return Vs(e),null}else 2*Kt()-a.renderingStartTime>Bl&&1073741824!==n&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Kt(),e.sibling=null,n=oa.current,Si(oa,r?1&n|2:1&n),e):(Vs(e),null);case 22:case 23:return uu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!=(1&e.mode)?0!=(1073741824&Cl)&&(Vs(e),6&e.subtreeFlags&&(e.flags|=8192)):Vs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function qs(t,e){switch(Ji(e),e.tag){case 1:return Pi(e.type)&&Ci(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return na(),wi(Ti),wi(Mi),la(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return ia(e),null;case 13:if(wi(oa),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));co()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return wi(oa),null;case 4:return na(),null;case 10:return _o(e.type._context),null;case 22:case 23:return uu(),null;default:return null}}Ps=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Cs=function(){},ks=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ta(Ko.current);var o,a=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=$r)}for(c in yt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Dr("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Rs=function(t,e,n,r){n!==r&&(e.flags|=4)};var Xs=!1,Zs=!1,Ys="function"==typeof WeakSet?WeakSet:Set,$s=null;function Ks(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){wu(t,e,n)}else n.current=null}function Js(t,e,n){try{n()}catch(n){wu(t,e,n)}}var Qs=!1;function tl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&Js(e,n,o)}i=i.next}while(i!==r)}}function el(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function rl(t){var e=t.alternate;null!==e&&(t.alternate=null,rl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[ui],delete e[ci],delete e[fi],delete e[di],delete e[pi]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function il(t){return 5===t.tag||3===t.tag||4===t.tag}function ol(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||il(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function al(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=$r));else if(4!==r&&null!==(t=t.child))for(al(t,e,n),t=t.sibling;null!==t;)al(t,e,n),t=t.sibling}function sl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(sl(t,e,n),t=t.sibling;null!==t;)sl(t,e,n),t=t.sibling}var ll=null,ul=!1;function cl(t,e,n){for(n=n.child;null!==n;)hl(t,e,n),n=n.sibling}function hl(t,e,n){if(oe&&"function"==typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(t){}switch(n.tag){case 5:Zs||Ks(n,e);case 6:var r=ll,i=ul;ll=null,cl(t,e,n),ul=i,null!==(ll=r)&&(ul?(t=ll,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ll.removeChild(n.stateNode));break;case 18:null!==ll&&(ul?(t=ll,n=n.stateNode,8===t.nodeType?oi(t.parentNode,n):1===t.nodeType&&oi(t,n),He(t)):oi(ll,n.stateNode));break;case 4:r=ll,i=ul,ll=n.stateNode.containerInfo,ul=!0,cl(t,e,n),ll=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Zs&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&Js(n,e,a),i=i.next}while(i!==r)}cl(t,e,n);break;case 1:if(!Zs&&(Ks(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(t){wu(n,e,t)}cl(t,e,n);break;case 21:cl(t,e,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,cl(t,e,n),Zs=r):cl(t,e,n);break;default:cl(t,e,n)}}function fl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ys),e.forEach((function(e){var r=Tu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function dl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:ll=l.stateNode,ul=!1;break t;case 3:case 4:ll=l.stateNode.containerInfo,ul=!0;break t}l=l.return}if(null===ll)throw Error(o(160));hl(a,s,i),ll=null,ul=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(t){wu(i,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)pl(e,t),e=e.sibling}function pl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dl(e,t),ml(t),4&r){try{tl(3,t,t.return),el(3,t)}catch(e){wu(t,t.return,e)}try{tl(5,t,t.return)}catch(e){wu(t,t.return,e)}}break;case 1:dl(e,t),ml(t),512&r&&null!==n&&Ks(n,n.return);break;case 5:if(dl(e,t),ml(t),512&r&&null!==n&&Ks(n,n.return),32&t.flags){var i=t.stateNode;try{ft(i,"")}catch(e){wu(t,t.return,e)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),bt(l,s);var c=bt(l,a);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];"style"===h?vt(i,f):"dangerouslySetInnerHTML"===h?ht(i,f):"children"===h?ft(i,f):b(i,h,f,c)}switch(l){case"input":J(i,a);break;case"textarea":ot(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[ci]=a}catch(e){wu(t,t.return,e)}}break;case 6:if(dl(e,t),ml(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(e){wu(t,t.return,e)}}break;case 3:if(dl(e,t),ml(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(e){wu(t,t.return,e)}break;case 4:default:dl(e,t),ml(t);break;case 13:dl(e,t),ml(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Kt())),4&r&&fl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Zs=(c=Zs)||h,dl(e,t),Zs=c):dl(e,t),ml(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!=(1&t.mode))for($s=t,h=t.child;null!==h;){for(f=$s=h;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:tl(4,d,d.return);break;case 1:Ks(d,d.return);var m=d.stateNode;if("function"==typeof m.componentWillUnmount){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(t){wu(r,n,t)}}break;case 5:Ks(d,d.return);break;case 22:if(null!==d.memoizedState){bl(f);continue}}null!==p?(p.return=d,$s=p):bl(f)}h=h.sibling}t:for(h=null,f=t;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=null!=(u=f.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",s))}catch(e){wu(t,t.return,e)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(e){wu(t,t.return,e)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===t)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;null===f.sibling;){if(null===f.return||f.return===t)break t;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dl(e,t),ml(t),4&r&&fl(t);case 21:}}function ml(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(il(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ft(i,""),r.flags&=-33),sl(t,ol(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;al(t,ol(t),a);break;default:throw Error(o(161))}}catch(e){wu(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){$s=t,gl(t,e,n)}function gl(t,e,n){for(var r=0!=(1&t.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Xs;var u=Zs;if(Xs=a,(Zs=l)&&!u)for($s=i;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,$s=l):_l(i);for(;null!==o;)$s=o,gl(o,e,n),o=o.sibling;$s=i,Xs=s,Zs=u}yl(t)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):yl(t)}}function yl(t){for(;null!==$s;){var e=$s;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Zs||el(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Zs)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:po(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Do(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Do(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&He(f)}}}break;default:throw Error(o(163))}Zs||512&e.flags&&nl(e)}catch(t){wu(e,e.return,t)}}if(e===t){$s=null;break}if(null!==(n=e.sibling)){n.return=e.return,$s=n;break}$s=e.return}}function bl(t){for(;null!==$s;){var e=$s;if(e===t){$s=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$s=n;break}$s=e.return}}function _l(t){for(;null!==$s;){var e=$s;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{el(4,e)}catch(t){wu(e,n,t)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(t){wu(e,i,t)}}var o=e.return;try{nl(e)}catch(t){wu(e,o,t)}break;case 5:var a=e.return;try{nl(e)}catch(t){wu(e,a,t)}}}catch(t){wu(e,e.return,t)}if(e===t){$s=null;break}var s=e.sibling;if(null!==s){s.return=e.return,$s=s;break}$s=e.return}}var xl,wl=Math.ceil,Sl=_.ReactCurrentDispatcher,El=_.ReactCurrentOwner,Ml=_.ReactCurrentBatchConfig,Tl=0,Al=null,Ol=null,Pl=0,Cl=0,kl=xi(0),Rl=0,Nl=null,Ll=0,Il=0,Dl=0,jl=null,zl=null,Ul=0,Bl=1/0,Fl=null,Hl=!1,Wl=null,Vl=null,Gl=!1,ql=null,Xl=0,Zl=0,Yl=null,$l=-1,Kl=0;function Jl(){return 0!=(6&Tl)?Kt():-1!==$l?$l:$l=Kt()}function Ql(t){return 0==(1&t.mode)?1:0!=(2&Tl)&&0!==Pl?Pl&-Pl:null!==fo.transition?(0===Kl&&(Kl=me()),Kl):0!==(t=be)?t:t=void 0===(t=window.event)?16:$e(t.type)}function tu(t,e,n,r){if(50<Zl)throw Zl=0,Yl=null,Error(o(185));ge(t,n,r),0!=(2&Tl)&&t===Al||(t===Al&&(0==(2&Tl)&&(Il|=n),4===Rl&&ou(t,Pl)),eu(t,r),1===n&&0===Tl&&0==(1&e.mode)&&(Bl=Kt()+500,Di&&Ui()))}function eu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=de(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=fe(t,t===Al?Pl:0);if(0===r)null!==n&&Zt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Zt(n),1===e)0===t.tag?function(t){Di=!0,zi(t)}(au.bind(null,t)):zi(au.bind(null,t)),ri((function(){0==(6&Tl)&&Ui()})),n=null;else{switch(_e(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Au(n,nu.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nu(t,e){if($l=-1,Kl=0,0!=(6&Tl))throw Error(o(327));var n=t.callbackNode;if(_u()&&t.callbackNode!==n)return null;var r=fe(t,t===Al?Pl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&t.expiredLanes)||e)e=pu(t,r);else{e=r;var i=Tl;Tl|=2;var a=fu();for(Al===t&&Pl===e||(Fl=null,Bl=Kt()+500,cu(t,e));;)try{vu();break}catch(e){hu(t,e)}bo(),Sl.current=a,Tl=i,null!==Ol?e=0:(Al=null,Pl=0,e=Rl)}if(0!==e){if(2===e&&0!==(i=pe(t))&&(r=i,e=ru(t,i)),1===e)throw n=Nl,cu(t,0),ou(t,r),eu(t,Kt()),n;if(6===e)ou(t,r);else{if(i=t.current.alternate,0==(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ir(o(),i))return!1}catch(t){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=pu(t,r))&&0!==(a=pe(t))&&(r=a,e=ru(t,a)),1===e))throw n=Nl,cu(t,0),ou(t,r),eu(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:bu(t,zl,Fl);break;case 3:if(ou(t,r),(130023424&r)===r&&10<(e=Ul+500-Kt())){if(0!==fe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){Jl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ti(bu.bind(null,t,zl,Fl),e);break}bu(t,zl,Fl);break;case 4:if(ou(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Kt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wl(r/1960))-r)){t.timeoutHandle=ti(bu.bind(null,t,zl,Fl),r);break}bu(t,zl,Fl);break;default:throw Error(o(329))}}}return eu(t,Kt()),t.callbackNode===n?nu.bind(null,t):null}function ru(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(cu(t,e).flags|=256),2!==(t=pu(t,e))&&(e=zl,zl=n,null!==e&&iu(e)),t}function iu(t){null===zl?zl=t:zl.push.apply(zl,t)}function ou(t,e){for(e&=~Dl,e&=~Il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function au(t){if(0!=(6&Tl))throw Error(o(327));_u();var e=fe(t,0);if(0==(1&e))return eu(t,Kt()),null;var n=pu(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=ru(t,r))}if(1===n)throw n=Nl,cu(t,0),ou(t,e),eu(t,Kt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bu(t,zl,Fl),eu(t,Kt()),null}function su(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(Bl=Kt()+500,Di&&Ui())}}function lu(t){null!==ql&&0===ql.tag&&0==(6&Tl)&&_u();var e=Tl;Tl|=1;var n=Ml.transition,r=be;try{if(Ml.transition=null,be=1,t)return t()}finally{be=r,Ml.transition=n,0==(6&(Tl=e))&&Ui()}}function uu(){Cl=kl.current,wi(kl)}function cu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ei(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(Ji(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ci();break;case 3:na(),wi(Ti),wi(Mi),la();break;case 5:ia(r);break;case 4:na();break;case 13:case 19:wi(oa);break;case 10:_o(r.type._context);break;case 22:case 23:uu()}n=n.return}if(Al=t,Ol=t=ku(t.current,null),Pl=Cl=e,Rl=0,Nl=null,Dl=Il=Ll=0,zl=jl=null,null!==Eo){for(e=0;e<Eo.length;e++)if(null!==(r=(n=Eo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Eo=null}return t}function hu(t,e){for(;;){var n=Ol;try{if(bo(),ua.current=rs,ma){for(var r=fa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ma=!1}if(ha=0,pa=da=fa=null,va=!1,ga=0,El.current=null,null===n||null===n.return){Rl=1,Nl=e,Ol=null;break}t:{var a=t,s=n.return,l=n,u=e;if(e=Pl,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,h=l,f=h.tag;if(0==(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ps(s);if(null!==p){p.flags&=-257,ms(p,s,l,0,e),1&p.mode&&ds(a,c,e),u=c;var m=(e=p).updateQueue;if(null===m){var v=new Set;v.add(u),e.updateQueue=v}else m.add(u);break t}if(0==(1&e)){ds(a,c,e),du();break t}u=Error(o(426))}else if(eo&&1&l.mode){var g=ps(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),ms(g,s,l,0,e),ho(ss(u,l));break t}}a=u=ss(u,l),4!==Rl&&(Rl=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Lo(a,hs(0,u,e));break t;case 1:l=u;var y=a.type,b=a.stateNode;if(0==(128&a.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Lo(a,fs(a,l,e));break t}}a=a.return}while(null!==a)}yu(n)}catch(t){e=t,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function fu(){var t=Sl.current;return Sl.current=rs,null===t?rs:t}function du(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Al||0==(268435455&Ll)&&0==(268435455&Il)||ou(Al,Pl)}function pu(t,e){var n=Tl;Tl|=2;var r=fu();for(Al===t&&Pl===e||(Fl=null,cu(t,e));;)try{mu();break}catch(e){hu(t,e)}if(bo(),Tl=n,Sl.current=r,null!==Ol)throw Error(o(261));return Al=null,Pl=0,Rl}function mu(){for(;null!==Ol;)gu(Ol)}function vu(){for(;null!==Ol&&!Yt();)gu(Ol)}function gu(t){var e=xl(t.alternate,t,Cl);t.memoizedProps=t.pendingProps,null===e?yu(t):Ol=e,El.current=null}function yu(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Gs(n,e,Cl)))return void(Ol=n)}else{if(null!==(n=qs(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Rl=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Rl&&(Rl=5)}function bu(t,e,n){var r=be,i=Ml.transition;try{Ml.transition=null,be=1,function(t,e,n,r){do{_u()}while(null!==ql);if(0!=(6&Tl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Al&&(Ol=Al=null,Pl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Gl||(Gl=!0,Au(ee,(function(){return _u(),null}))),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var s=be;be=1;var l=Tl;Tl|=4,El.current=null,function(t,e){if(Kr=Ve,cr(t=ur())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(t){n=null;break t}var s=0,l=-1,u=-1,c=0,h=0,f=t,d=null;e:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===t)break e;if(d===n&&++c===i&&(l=s),d===a&&++h===r&&(u=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jr={focusedElem:t,selectionRange:n},Ve=!1,$s=e;null!==$s;)if(t=(e=$s).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,$s=t;else for(;null!==$s;){e=$s;try{var m=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:po(e.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(t){wu(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,$s=t;break}$s=e.return}m=Qs,Qs=!1}(t,n),pl(n,t),hr(Jr),Ve=!!Kr,Jr=Kr=null,t.current=n,vl(n,t,i),$t(),Tl=l,be=s,Ml.transition=a}else t.current=n;if(Gl&&(Gl=!1,ql=t,Xl=i),0===(a=t.pendingLanes)&&(Vl=null),function(t){if(oe&&"function"==typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128==(128&t.current.flags))}catch(t){}}(n.stateNode),eu(t,Kt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)r((i=e[n]).value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=Wl,Wl=null,t;0!=(1&Xl)&&0!==t.tag&&_u(),0!=(1&(a=t.pendingLanes))?t===Yl?Zl++:(Zl=0,Yl=t):Zl=0,Ui()}(t,e,n,r)}finally{Ml.transition=i,be=r}return null}function _u(){if(null!==ql){var t=_e(Xl),e=Ml.transition,n=be;try{if(Ml.transition=null,be=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,Xl=0,0!=(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,$s=t.current;null!==$s;){var a=$s,s=a.child;if(0!=(16&$s.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($s=c;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:tl(8,h,a)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var d=(h=$s).sibling,p=h.return;if(rl(h),h===c){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var m=a.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}$s=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else t:for(;null!==$s;){if(0!=(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$s=y;break t}$s=a.return}}var b=t.current;for($s=b;null!==$s;){var _=(s=$s).child;if(0!=(2064&s.subtreeFlags)&&null!==_)_.return=s,$s=_;else t:for(s=b;null!==$s;){if(0!=(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(t){wu(l,l.return,t)}if(l===s){$s=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,$s=x;break t}$s=l.return}}if(Tl=i,Ui(),oe&&"function"==typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(t){}r=!0}return r}finally{be=n,Ml.transition=e}}return!1}function xu(t,e,n){t=Ro(t,e=hs(0,e=ss(n,e),1),1),e=Jl(),null!==t&&(ge(t,1,e),eu(t,e))}function wu(t,e,n){if(3===t.tag)xu(t,t,n);else for(;null!==e;){if(3===e.tag){xu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){e=Ro(e,t=fs(e,t=ss(n,t),1),1),t=Jl(),null!==e&&(ge(e,1,t),eu(e,t));break}}e=e.return}}function Su(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=Jl(),t.pingedLanes|=t.suspendedLanes&n,Al===t&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Kt()-Ul?cu(t,0):Dl|=n),eu(t,e)}function Eu(t,e){0===e&&(0==(1&t.mode)?e=1:(e=ce,0==(130023424&(ce<<=1))&&(ce=4194304)));var n=Jl();null!==(t=Ao(t,e))&&(ge(t,e,n),eu(t,n))}function Mu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Eu(t,n)}function Tu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Eu(t,n)}function Au(t,e){return Xt(t,e)}function Ou(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(t,e,n,r){return new Ou(t,e,n,r)}function Cu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ku(t,e){var n=t.alternate;return null===n?((n=Pu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,a){var s=2;if(r=t,"function"==typeof t)Cu(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case S:return Nu(n.children,i,a,e);case E:s=8,i|=8;break;case M:return(t=Pu(12,n,e,2|i)).elementType=M,t.lanes=a,t;case P:return(t=Pu(13,n,e,i)).elementType=P,t.lanes=a,t;case C:return(t=Pu(19,n,e,i)).elementType=C,t.lanes=a,t;case N:return Lu(n,i,a,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case A:s=9;break t;case O:s=11;break t;case k:s=14;break t;case R:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Pu(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Nu(t,e,n,r){return(t=Pu(7,t,r,e)).lanes=n,t}function Lu(t,e,n,r){return(t=Pu(22,t,r,e)).elementType=N,t.lanes=n,t.stateNode={isHidden:!1},t}function Iu(t,e,n){return(t=Pu(6,t,null,e)).lanes=n,t}function Du(t,e,n){return(e=Pu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ju(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(t,e,n,r,i,o,a,s,l){return t=new ju(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Pu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),t}function Uu(t){if(!t)return Ei;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Pi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Pi(n))return Ri(t,n,e)}return e}function Bu(t,e,n,r,i,o,a,s,l){return(t=zu(n,r,!0,t,0,o,0,s,l)).context=Uu(null),n=t.current,(o=ko(r=Jl(),i=Ql(n))).callback=null!=e?e:null,Ro(n,o,i),t.current.lanes=i,ge(t,i,r),eu(t,r),t}function Fu(t,e,n,r){var i=e.current,o=Jl(),a=Ql(i);return n=Uu(n),null===e.context?e.context=n:e.pendingContext=n,(e=ko(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Ro(i,e,a))&&(tu(t,i,a,o),No(t,i,a)),a}function Hu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Vu(t,e){Wu(t,e),(t=t.alternate)&&Wu(t,e)}xl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ti.current)gs=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return gs=!1,function(t,e,n){switch(e.tag){case 3:As(e),co();break;case 5:ra(e);break;case 1:Pi(e.type)&&Ni(e);break;case 4:ea(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Si(mo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Si(oa,1&oa.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Is(t,e,n):(Si(oa,1&oa.current),null!==(t=Hs(t,e,n))?t.sibling:null);Si(oa,1&oa.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return Bs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(oa,oa.current),r)break;return null;case 22:case 23:return e.lanes=0,ws(t,e,n)}return Hs(t,e,n)}(t,e,n);gs=0!=(131072&t.flags)}else gs=!1,eo&&0!=(1048576&e.flags)&&$i(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fs(t,e),t=e.pendingProps;var i=Oi(e,Mi.current);wo(e,n),i=xa(null,e,r,t,i,n);var a=wa();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pi(r)?(a=!0,Ni(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(e),i.updater=Uo,e.stateNode=i,i._reactInternals=e,Wo(e,r,t,n),e=Ts(null,e,r,!0,a,n)):(e.tag=0,eo&&a&&Ki(e),ys(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Fs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Cu(t)?1:0;if(null!=t){if((t=t.$$typeof)===O)return 11;if(t===k)return 14}return 2}(r),t=po(r,t),i){case 0:e=Es(null,e,r,t,n);break t;case 1:e=Ms(null,e,r,t,n);break t;case 11:e=bs(null,e,r,t,n);break t;case 14:e=_s(null,e,r,po(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Es(t,e,r,i=e.elementType===r?i:po(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:po(r,i),n);case 3:t:{if(As(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Co(t,e),Io(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Os(t,e,r,n,i=ss(Error(o(423)),e));break t}if(r!==i){e=Os(t,e,r,n,i=ss(Error(o(424)),e));break t}for(to=ai(e.stateNode.containerInfo.firstChild),Qi=e,eo=!0,no=null,n=Yo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(co(),r===i){e=Hs(t,e,n);break t}ys(t,e,r,n)}e=e.child}return e;case 5:return ra(e),null===t&&ao(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,Qr(r,i)?s=null:null!==a&&Qr(r,a)&&(e.flags|=32),Ss(t,e),ys(t,e,s,n),e.child;case 6:return null===t&&ao(e),null;case 13:return Is(t,e,n);case 4:return ea(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Zo(e,null,r,n):ys(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,bs(t,e,r,i=e.elementType===r?i:po(r,i),n);case 7:return ys(t,e,e.pendingProps,n),e.child;case 8:case 12:return ys(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Si(mo,r._currentValue),r._currentValue=s,null!==a)if(ir(a.value,s)){if(a.children===i.children&&!Ti.current){e=Hs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=ko(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),xo(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xo(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ys(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wo(e,n),r=r(i=So(i)),e.flags|=1,ys(t,e,r,n),e.child;case 14:return i=po(r=e.type,e.pendingProps),_s(t,e,r,i=po(r.type,i),n);case 15:return xs(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),Fs(t,e),e.tag=1,Pi(r)?(t=!0,Ni(e)):t=!1,wo(e,n),Fo(e,r,i),Wo(e,r,i,n),Ts(null,e,r,!0,t,n);case 19:return Bs(t,e,n);case 22:return ws(t,e,n)}throw Error(o(156,e.tag))};var Gu="function"==typeof reportError?reportError:function(t){console.error(t)};function qu(t){this._internalRoot=t}function Xu(t){this._internalRoot=t}function Zu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Yu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $u(){}function Ku(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var t=Hu(a);s.call(t)}}Fu(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var t=Hu(a);o.call(t)}}var a=Bu(e,r,t,0,null,!1,0,"",$u);return t._reactRootContainer=a,t[hi]=a.current,Ur(8===t.nodeType?t.parentNode:t),lu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof r){var s=r;r=function(){var t=Hu(l);s.call(t)}}var l=zu(t,0,!1,null,0,!1,0,"",$u);return t._reactRootContainer=l,t[hi]=l.current,Ur(8===t.nodeType?t.parentNode:t),lu((function(){Fu(e,l,n,r)})),l}(n,e,t,i,r);return Hu(a)}Xu.prototype.render=qu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Fu(t,e,null,null)},Xu.prototype.unmount=qu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;lu((function(){Fu(null,t,null,null)})),e[hi]=null}},Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ne.length&&0!==e&&e<Ne[n].priority;n++);Ne.splice(n,0,t),0===n&&je(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),eu(e,Kt()),0==(6&Tl)&&(Bl=Kt()+500,Ui()))}break;case 13:lu((function(){var e=Ao(t,1);if(null!==e){var n=Jl();tu(e,t,1,n)}})),Vu(t,1)}},we=function(t){if(13===t.tag){var e=Ao(t,134217728);null!==e&&tu(e,t,134217728,Jl()),Vu(t,134217728)}},Se=function(t){if(13===t.tag){var e=Ql(t),n=Ao(t,e);null!==n&&tu(n,t,e,Jl()),Vu(t,e)}},Ee=function(){return be},Me=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yi(r);if(!i)throw Error(o(90));X(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ot=su,Pt=lu;var Ju={usingClientEntryPoint:!1,Events:[vi,gi,yi,Tt,At,su]},Qu={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},tc={bundleType:Qu.bundleType,version:Qu.version,rendererPackageName:Qu.rendererPackageName,rendererConfig:Qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:Qu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{ie=ec.inject(tc),oe=ec}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ju,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Zu(t))throw Error(o(299));var n=!1,r="",i=Gu;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=zu(t,1,!1,null,0,n,0,r,i),t[hi]=e.current,Ur(8===t.nodeType?t.parentNode:t),new qu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return lu(t)},e.hydrate=function(t,e,n){if(!Yu(e))throw Error(o(200));return Ku(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Zu(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Gu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Bu(e,null,t,1,null!=n?n:null,i,0,a,s),t[hi]=e.current,Ur(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xu(e)},e.render=function(t,e,n){if(!Yu(e))throw Error(o(200));return Ku(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(o(40));return!!t._reactRootContainer&&(lu((function(){Ku(null,null,t,!1,(function(){t._reactRootContainer=null,t[hi]=null}))})),!0)},e.unstable_batchedUpdates=su,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yu(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Ku(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},745:(t,e,n)=>{"use strict";var r=n(3935);e.s=r.createRoot,r.hydrateRoot},3935:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(4448)},4203:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,d=3,p=!1,m=!1,v=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(v=!1,_(t),!m)if(null!==r(u))m=!0,N(w);else{var e=r(c);null!==e&&L(x,e.startTime-t)}}function w(t,n){m=!1,v&&(v=!1,y(T),T=-1),p=!0;var o=d;try{for(_(n),f=r(u);null!==f&&(!(f.expirationTime>n)||t&&!P());){var a=f.callback;if("function"==typeof a){f.callback=null,d=f.priorityLevel;var s=a(f.expirationTime<=n);n=e.unstable_now(),"function"==typeof s?f.callback=s:f===r(u)&&i(u),_(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{f=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,A=5,O=-1;function P(){return!(e.unstable_now()-O<A)}function C(){if(null!==M){var t=e.unstable_now();O=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"==typeof b)S=function(){b(C)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=C,S=function(){R.postMessage(null)}}else S=function(){g(C,0)};function N(t){M=t,E||(E=!0,S())}function L(t,n){T=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,N(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(v?(y(T),T=-1):v=!0,L(x,o-a))):(t.sortIndex=s,n(u,t),m||p||(m=!0,N(w))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},4142:(t,e,n)=>{"use strict";t.exports=n(4203)},8267:(t,e,n)=>{"use strict";t.exports=n(8531)},6871:(t,e,n)=>{"use strict";function r(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function i(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!=n?n:null}.bind(this))}function o(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,a=null,s=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?s="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=t.displayName||t.name,u="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=r,e.componentWillReceiveProps=i),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=o;var c=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,t,e,r)}}return t}n.r(e),n.d(e,{polyfill:()=>a}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},129:(t,e,n)=>{"use strict";e.__esModule=!0,e.default=void 0,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}e.default=t}(n(5697));var r=s(n(8141)),i=s(n(602)),o=s(n(7294)),a=s(n(644));function s(t){return t&&t.__esModule?t:{default:t}}function l(){return l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}n(4726);var u=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return(0,r.default)(t,e)}))},c=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return(0,i.default)(t,e)}))},h=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).onEnter=function(t,n){var r=e.getClassNames(n?"appear":"enter").className;e.removeClasses(t,"exit"),u(t,r),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var r=e.getClassNames(n?"appear":"enter").activeClassName;e.reflowAndAddClass(t,r),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var r=e.getClassNames("appear").doneClassName,i=e.getClassNames("enter").doneClassName,o=n?r+" "+i:i;e.removeClasses(t,n?"appear":"enter"),u(t,o),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.getClassNames("exit").className;e.removeClasses(t,"appear"),e.removeClasses(t,"enter"),u(t,n),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.getClassNames("exit").activeClassName;e.reflowAndAddClass(t,n),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.getClassNames("exit").doneClassName;e.removeClasses(t,"exit"),u(t,n),e.props.onExited&&e.props.onExited(t)},e.getClassNames=function(t){var n=e.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+t:n[t];return{className:i,activeClassName:r?i+"-active":n[t+"Active"],doneClassName:r?i+"-done":n[t+"Done"]}},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.removeClasses=function(t,e){var n=this.getClassNames(e),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&c(t,r),i&&c(t,i),o&&c(t,o)},i.reflowAndAddClass=function(t,e){e&&(t&&t.scrollTop,u(t,e))},i.render=function(){var t=l({},this.props);return delete t.classNames,o.default.createElement(a.default,l({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.defaultProps={classNames:""},h.propTypes={};var f=h;e.default=f,t.exports=e.default},6093:(t,e,n)=>{"use strict";e.__esModule=!0,e.default=void 0,a(n(5697));var r=a(n(7294)),i=n(3935),o=a(n(2381));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){var e,n;function a(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).handleEnter=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEnter",0,n)},e.handleEntering=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntering",0,n)},e.handleEntered=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntered",0,n)},e.handleExit=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExit",1,n)},e.handleExiting=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExiting",1,n)},e.handleExited=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExited",1,n)},e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(t,e,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[e];s.props[t]&&(o=s.props)[t].apply(o,n),this.props[t]&&this.props[t]((0,i.findDOMNode)(this))},s.render=function(){var t=this.props,e=t.children,n=t.in,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["children","in"]),a=r.default.Children.toArray(e),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;e.default=l,t.exports=e.default},644:(t,e,n)=>{"use strict";e.__esModule=!0,e.default=e.EXITING=e.ENTERED=e.ENTERING=e.EXITED=e.UNMOUNTED=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(5697)),i=s(n(7294)),o=s(n(3935)),a=n(6871);function s(t){return t&&t.__esModule?t:{default:t}}n(4726);var l="unmounted";e.UNMOUNTED=l;var u="exited";e.EXITED=u;var c="entering";e.ENTERING=c;var h="entered";e.ENTERED=h;var f="exiting";e.EXITING=f;var d=function(t){var e,n;function r(e,n){var r;r=t.call(this,e,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=u,r.appearStatus=c):i=h:i=e.unmountOnExit||e.mountOnEnter?l:u,r.state={status:i},r.nextCallback=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(t,e){return t.in&&e.status===l?{status:u}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==h&&(e=c):n!==c&&n!==h||(e=f)}this.updateStatus(!1,e)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},a.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e){this.cancelNextCallback();var n=o.default.findDOMNode(this);e===c?this.performEnter(n,t):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},a.performEnter=function(t,e){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:e,o=this.getTimeouts(),a=i?o.appear:o.enter;e||r?(this.props.onEnter(t,i),this.safeSetState({status:c},(function(){n.props.onEntering(t,i),n.onTransitionEnd(t,a,(function(){n.safeSetState({status:h},(function(){n.props.onEntered(t,i)}))}))}))):this.safeSetState({status:h},(function(){n.props.onEntered(t)}))},a.performExit=function(t){var e=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(t),this.safeSetState({status:f},(function(){e.props.onExiting(t),e.onTransitionEnd(t,r.exit,(function(){e.safeSetState({status:u},(function(){e.props.onExited(t)}))}))}))):this.safeSetState({status:u},(function(){e.props.onExited(t)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},a.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(t,e,n){this.setNextCallback(n);var r=null==e&&!this.props.addEndListener;t&&!r?(this.props.addEndListener&&this.props.addEndListener(t,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},a.render=function(){var t=this.state.status;if(t===l)return null;var e=this.props,n=e.children,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(t,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function p(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var m=(0,a.polyfill)(d);e.default=m},2381:(t,e,n)=>{"use strict";e.__esModule=!0,e.default=void 0;var r=s(n(5697)),i=s(n(7294)),o=n(6871),a=n(537);function s(t){return t&&t.__esModule?t:{default:t}}function l(){return l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},h=function(t){var e,n;function r(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:i,firstRender:!0},r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(t,e){var n=e.children,r=e.handleExited;return{children:e.firstRender?(0,a.getInitialChildMapping)(t,r):(0,a.getNextChildMapping)(t,n,r),firstRender:!1}},o.handleExited=function(t,e){var n=(0,a.getChildMapping)(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=l({},e.children);return delete n[t.key],{children:n}})))},o.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["component","childFactory"]),o=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?o:i.default.createElement(e,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(t){return t}};var f=(0,o.polyfill)(h);e.default=f,t.exports=e.default},4317:(t,e,n)=>{"use strict";var r=s(n(129)),i=s(n(6093)),o=s(n(2381)),a=s(n(644));function s(t){return t&&t.__esModule?t:{default:t}}t.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},537:(t,e,n)=>{"use strict";e.__esModule=!0,e.getChildMapping=i,e.mergeChildMappings=o,e.getInitialChildMapping=function(t,e){return i(t.children,(function(n){return(0,r.cloneElement)(n,{onExited:e.bind(null,n),in:!0,appear:a(n,"appear",t),enter:a(n,"enter",t),exit:a(n,"exit",t)})}))},e.getNextChildMapping=function(t,e,n){var s=i(t.children),l=o(e,s);return Object.keys(l).forEach((function(i){var o=l[i];if((0,r.isValidElement)(o)){var u=i in e,c=i in s,h=e[i],f=(0,r.isValidElement)(h)&&!h.props.in;!c||u&&!f?c||!u||f?c&&u&&(0,r.isValidElement)(h)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",t),enter:a(o,"enter",t)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",t),enter:a(o,"enter",t)})}})),l};var r=n(7294);function i(t,e){var n=Object.create(null);return t&&r.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,r.isValidElement)(t)?e(t):t}(t)})),n}function o(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(t,e,n){return null!=n[e]?n[e]:t.props[e]}},4726:(t,e,n)=>{"use strict";var r;e.__esModule=!0,e.classNamesShape=e.timeoutsShape=void 0,(r=n(5697))&&r.__esModule,e.timeoutsShape=null,e.classNamesShape=null},2408:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=g.prototype;var _=b.prototype=new y;_.constructor=b,m(_,g.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var A=/\/+/g;function O(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function P(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+O(l,0):o,x(a)?(i="",null!=t&&(i=t.replace(A,"$&/")+"/"),P(a,e,i,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",x(t))for(var u=0;u<t.length;u++){var c=o+O(s=t[u],u);l+=P(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=P(s=s.value,e,i,c=o+O(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function C(t,e,n){if(null==t)return t;var r=[],i=0;return P(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function k(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var R={current:null},N={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};e.Children={map:C,forEach:function(t,e,n){C(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=i,e.Profiler=a,e.PureComponent=b,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=M,e.createFactory=function(t){var e=M.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:k}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=N.transition;N.transition={};try{t()}finally{N.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return R.current.useCallback(t,e)},e.useContext=function(t){return R.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return R.current.useDeferredValue(t)},e.useEffect=function(t,e){return R.current.useEffect(t,e)},e.useId=function(){return R.current.useId()},e.useImperativeHandle=function(t,e,n){return R.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return R.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return R.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return R.current.useMemo(t,e)},e.useReducer=function(t,e,n){return R.current.useReducer(t,e,n)},e.useRef=function(t){return R.current.useRef(t)},e.useState=function(t){return R.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return R.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return R.current.useTransition()},e.version="18.2.0"},7294:(t,e,n)=>{"use strict";t.exports=n(2408)},4745:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,i);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==e||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},2894:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=(n&&Symbol.for("react.suspense_list"),n?Symbol.for("react.memo"):60115),m=n?Symbol.for("react.lazy"):60116;n&&Symbol.for("react.block"),n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope");function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case d:return t;default:switch(t=t&&t.$$typeof){case u:case f:case m:case p:case l:return t;default:return e}}case i:return e}}}e.isFragment=function(t){return v(t)===o}},8508:(t,e,n)=>{"use strict";t.exports=n(2894)},2254:function(t,e){var n,r;n=function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var r={order:2,precision:2,period:null};function i(t,e){var n=[],r=[];t.forEach((function(t,i){null!==t[1]&&(r.push(t),n.push(e[i]))}));var i=r.reduce((function(t,e){return t+e[1]}),0)/r.length,o=r.reduce((function(t,e){var n=e[1]-i;return t+n*n}),0);return 1-r.reduce((function(t,e,r){var i=n[r],o=e[1]-i[1];return t+o*o}),0)/o}function o(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var a={linear:function(t,e){for(var n=[0,0,0,0,0],r=0,a=0;a<t.length;a++)null!==t[a][1]&&(r++,n[0]+=t[a][0],n[1]+=t[a][1],n[2]+=t[a][0]*t[a][0],n[3]+=t[a][0]*t[a][1],n[4]+=t[a][1]*t[a][1]);var s=r*n[2]-n[0]*n[0],l=r*n[3]-n[0]*n[1],u=0===s?0:o(l/s,e.precision),c=o(n[1]/r-u*n[0]/r,e.precision),h=function(t){return[o(t,e.precision),o(u*t+c,e.precision)]},f=t.map((function(t){return h(t[0])}));return{points:f,predict:h,equation:[u,c],r2:o(i(t,f),e.precision),string:0===c?"y = "+u+"x":"y = "+u+"x + "+c}},exponential:function(t,e){for(var n=[0,0,0,0,0,0],r=0;r<t.length;r++)null!==t[r][1]&&(n[0]+=t[r][0],n[1]+=t[r][1],n[2]+=t[r][0]*t[r][0]*t[r][1],n[3]+=t[r][1]*Math.log(t[r][1]),n[4]+=t[r][0]*t[r][1]*Math.log(t[r][1]),n[5]+=t[r][0]*t[r][1]);var a=n[1]*n[2]-n[5]*n[5],s=Math.exp((n[2]*n[3]-n[5]*n[4])/a),l=(n[1]*n[4]-n[5]*n[3])/a,u=o(s,e.precision),c=o(l,e.precision),h=function(t){return[o(t,e.precision),o(u*Math.exp(c*t),e.precision)]},f=t.map((function(t){return h(t[0])}));return{points:f,predict:h,equation:[u,c],string:"y = "+u+"e^("+c+"x)",r2:o(i(t,f),e.precision)}},logarithmic:function(t,e){for(var n=[0,0,0,0],r=t.length,a=0;a<r;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=t[a][1]*Math.log(t[a][0]),n[2]+=t[a][1],n[3]+=Math.pow(Math.log(t[a][0]),2));var s=o((r*n[1]-n[2]*n[0])/(r*n[3]-n[0]*n[0]),e.precision),l=o((n[2]-s*n[0])/r,e.precision),u=function(t){return[o(t,e.precision),o(o(l+s*Math.log(t),e.precision),e.precision)]},c=t.map((function(t){return u(t[0])}));return{points:c,predict:u,equation:[l,s],string:"y = "+l+" + "+s+" ln(x)",r2:o(i(t,c),e.precision)}},power:function(t,e){for(var n=[0,0,0,0,0],r=t.length,a=0;a<r;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=Math.log(t[a][1])*Math.log(t[a][0]),n[2]+=Math.log(t[a][1]),n[3]+=Math.pow(Math.log(t[a][0]),2));var s=(r*n[1]-n[0]*n[2])/(r*n[3]-Math.pow(n[0],2)),l=(n[2]-s*n[0])/r,u=o(Math.exp(l),e.precision),c=o(s,e.precision),h=function(t){return[o(t,e.precision),o(o(u*Math.pow(t,c),e.precision),e.precision)]},f=t.map((function(t){return h(t[0])}));return{points:f,predict:h,equation:[u,c],string:"y = "+u+"x^"+c,r2:o(i(t,f),e.precision)}},polynomial:function(t,e){for(var r=[],a=[],s=0,l=0,u=t.length,c=e.order+1,h=0;h<c;h++){for(var f=0;f<u;f++)null!==t[f][1]&&(s+=Math.pow(t[f][0],h)*t[f][1]);r.push(s),s=0;for(var d=[],p=0;p<c;p++){for(var m=0;m<u;m++)null!==t[m][1]&&(l+=Math.pow(t[m][0],h+p));d.push(l),l=0}a.push(d)}a.push(r);for(var v=function(t,e){for(var n=t,r=t.length-1,i=[e],o=0;o<r;o++){for(var a=o,s=o+1;s<r;s++)Math.abs(n[o][s])>Math.abs(n[o][a])&&(a=s);for(var l=o;l<r+1;l++){var u=n[l][o];n[l][o]=n[l][a],n[l][a]=u}for(var c=o+1;c<r;c++)for(var h=r;h>=o;h--)n[h][c]-=n[h][o]*n[o][c]/n[o][o]}for(var f=r-1;f>=0;f--){for(var d=0,p=f+1;p<r;p++)d+=n[p][f]*i[p];i[f]=(n[r][f]-d)/n[f][f]}return i}(a,c).map((function(t){return o(t,e.precision)})),g=function(t){return[o(t,e.precision),o(v.reduce((function(e,n,r){return e+n*Math.pow(t,r)}),0),e.precision)]},y=t.map((function(t){return g(t[0])})),b="y = ",_=v.length-1;_>=0;_--)b+=_>1?v[_]+"x^"+_+" + ":1===_?v[_]+"x + ":v[_];return{string:b,points:y,predict:g,equation:[].concat(n(v)).reverse(),r2:o(i(t,y),e.precision)}}};t.exports=Object.keys(a).reduce((function(t,n){return e({_round:o},t,(l=function(t,i){return a[n](t,e({},r,i))},(s=n)in(i={})?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,i));var i,s,l}),{})},void 0===(r=n.apply(e,[t]))||(t.exports=r)},5361:(t,e,n)=>{t.exports={h32:n(8963),h64:n(9214)}},8963:(t,e,n)=>{var r=n(1986).UINT32;r.prototype.xxh_update=function(t,e){var n,r,a=o._low,s=o._high;n=(r=t*a)>>>16,n+=e*a,n&=65535,n+=t*s;var l=this._low+(65535&r),u=l>>>16,c=(u+=this._high+(65535&n))<<16|65535&l;u=(c=c<<13|c>>>19)>>>16,n=(r=(l=65535&c)*(a=i._low))>>>16,n+=u*a,n&=65535,n+=l*(s=i._high),this._low=65535&r,this._high=65535&n};var i=r("2654435761"),o=r("2246822519"),a=r("3266489917"),s=r("668265263"),l=r("374761393");function u(){return 2==arguments.length?new u(arguments[1]).update(arguments[0]).digest():this instanceof u?void c.call(this,arguments[0]):new u(arguments[0])}function c(t){return this.seed=t instanceof r?t.clone():r(t),this.v1=this.seed.clone().add(i).add(o),this.v2=this.seed.clone().add(o),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(i),this.total_len=0,this.memsize=0,this.memory=null,this}u.prototype.init=c,u.prototype.update=function(t){var e,n="string"==typeof t;n&&(t=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}(t),n=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var r=0,i=t.length,o=r+i;if(0==i)return this;if(this.total_len+=i,0==this.memsize&&(this.memory=n?"":e?new Uint8Array(16):new Buffer(16)),this.memsize+i<16)return n?this.memory+=t:e?this.memory.set(t.subarray(0,i),this.memsize):t.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){n?this.memory+=t.slice(0,16-this.memsize):e?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;n?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),r+=16-this.memsize,this.memsize=0,n&&(this.memory="")}if(r<=o-16){var s=o-16;do{n?(this.v1.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v2.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v3.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v4.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2))):(this.v1.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v2.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v3.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v4.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2])),r+=4}while(r<=s)}return r<o&&(n?this.memory+=t.slice(r):e?this.memory.set(t.subarray(r,o),this.memsize):t.copy(this.memory,this.memsize,r,o),this.memsize=o-r),this},u.prototype.digest=function(){var t,e,n=this.memory,u="string"==typeof n,c=0,h=this.memsize,f=new r;for((t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(l)).add(f.fromNumber(this.total_len));c<=h-4;)u?f.fromBits(n.charCodeAt(c+1)<<8|n.charCodeAt(c),n.charCodeAt(c+3)<<8|n.charCodeAt(c+2)):f.fromBits(n[c+1]<<8|n[c],n[c+3]<<8|n[c+2]),t.add(f.multiply(a)).rotl(17).multiply(s),c+=4;for(;c<h;)f.fromBits(u?n.charCodeAt(c++):n[c++],0),t.add(f.multiply(l)).rotl(11).multiply(i);return e=t.clone().shiftRight(15),t.xor(e).multiply(o),e=t.clone().shiftRight(13),t.xor(e).multiply(a),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t},t.exports=u},9214:(t,e,n)=>{var r=n(1986).UINT64,i=r("11400714785074694791"),o=r("14029467366897019727"),a=r("1609587929392839161"),s=r("9650029242287828579"),l=r("2870177450012600261");function u(){return 2==arguments.length?new u(arguments[1]).update(arguments[0]).digest():this instanceof u?void c.call(this,arguments[0]):new u(arguments[0])}function c(t){return this.seed=t instanceof r?t.clone():r(t),this.v1=this.seed.clone().add(i).add(o),this.v2=this.seed.clone().add(o),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(i),this.total_len=0,this.memsize=0,this.memory=null,this}u.prototype.init=c,u.prototype.update=function(t){var e,n="string"==typeof t;n&&(t=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}(t),n=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var a=0,s=t.length,l=a+s;if(0==s)return this;if(this.total_len+=s,0==this.memsize&&(this.memory=n?"":e?new Uint8Array(32):new Buffer(32)),this.memsize+s<32)return n?this.memory+=t:e?this.memory.set(t.subarray(0,s),this.memsize):t.copy(this.memory,this.memsize,0,s),this.memsize+=s,this;if(this.memsize>0){n?this.memory+=t.slice(0,32-this.memsize):e?this.memory.set(t.subarray(0,32-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,32-this.memsize);var u=0;n?(h=r(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2),this.memory.charCodeAt(u+5)<<8|this.memory.charCodeAt(u+4),this.memory.charCodeAt(u+7)<<8|this.memory.charCodeAt(u+6)),this.v1.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2),this.memory.charCodeAt(u+5)<<8|this.memory.charCodeAt(u+4),this.memory.charCodeAt(u+7)<<8|this.memory.charCodeAt(u+6)),this.v2.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2),this.memory.charCodeAt(u+5)<<8|this.memory.charCodeAt(u+4),this.memory.charCodeAt(u+7)<<8|this.memory.charCodeAt(u+6)),this.v3.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2),this.memory.charCodeAt(u+5)<<8|this.memory.charCodeAt(u+4),this.memory.charCodeAt(u+7)<<8|this.memory.charCodeAt(u+6)),this.v4.add(h.multiply(o)).rotl(31).multiply(i)):(h=r(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2],this.memory[u+5]<<8|this.memory[u+4],this.memory[u+7]<<8|this.memory[u+6]),this.v1.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2],this.memory[u+5]<<8|this.memory[u+4],this.memory[u+7]<<8|this.memory[u+6]),this.v2.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2],this.memory[u+5]<<8|this.memory[u+4],this.memory[u+7]<<8|this.memory[u+6]),this.v3.add(h.multiply(o)).rotl(31).multiply(i),u+=8,h=r(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2],this.memory[u+5]<<8|this.memory[u+4],this.memory[u+7]<<8|this.memory[u+6]),this.v4.add(h.multiply(o)).rotl(31).multiply(i)),a+=32-this.memsize,this.memsize=0,n&&(this.memory="")}if(a<=l-32){var c=l-32;do{var h;n?(h=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v1.add(h.multiply(o)).rotl(31).multiply(i),a+=8,h=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v2.add(h.multiply(o)).rotl(31).multiply(i),a+=8,h=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v3.add(h.multiply(o)).rotl(31).multiply(i),a+=8,h=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v4.add(h.multiply(o)).rotl(31).multiply(i)):(h=r(t[a+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v1.add(h.multiply(o)).rotl(31).multiply(i),h=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v2.add(h.multiply(o)).rotl(31).multiply(i),h=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v3.add(h.multiply(o)).rotl(31).multiply(i),h=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v4.add(h.multiply(o)).rotl(31).multiply(i)),a+=8}while(a<=c)}return a<l&&(n?this.memory+=t.slice(a):e?this.memory.set(t.subarray(a,l),this.memsize):t.copy(this.memory,this.memsize,a,l),this.memsize=l-a),this},u.prototype.digest=function(){var t,e,n=this.memory,u="string"==typeof n,c=0,h=this.memsize,f=new r;for(this.total_len>=32?((t=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),t.add(this.v3.clone().rotl(12)),t.add(this.v4.clone().rotl(18)),t.xor(this.v1.multiply(o).rotl(31).multiply(i)),t.multiply(i).add(s),t.xor(this.v2.multiply(o).rotl(31).multiply(i)),t.multiply(i).add(s),t.xor(this.v3.multiply(o).rotl(31).multiply(i)),t.multiply(i).add(s),t.xor(this.v4.multiply(o).rotl(31).multiply(i)),t.multiply(i).add(s)):t=this.seed.clone().add(l),t.add(f.fromNumber(this.total_len));c<=h-8;)u?f.fromBits(n.charCodeAt(c+1)<<8|n.charCodeAt(c),n.charCodeAt(c+3)<<8|n.charCodeAt(c+2),n.charCodeAt(c+5)<<8|n.charCodeAt(c+4),n.charCodeAt(c+7)<<8|n.charCodeAt(c+6)):f.fromBits(n[c+1]<<8|n[c],n[c+3]<<8|n[c+2],n[c+5]<<8|n[c+4],n[c+7]<<8|n[c+6]),f.multiply(o).rotl(31).multiply(i),t.xor(f).rotl(27).multiply(i).add(s),c+=8;for(c+4<=h&&(u?f.fromBits(n.charCodeAt(c+1)<<8|n.charCodeAt(c),n.charCodeAt(c+3)<<8|n.charCodeAt(c+2),0,0):f.fromBits(n[c+1]<<8|n[c],n[c+3]<<8|n[c+2],0,0),t.xor(f.multiply(i)).rotl(23).multiply(o).add(a),c+=4);c<h;)f.fromBits(u?n.charCodeAt(c++):n[c++],0,0,0),t.xor(f.multiply(l)).rotl(11).multiply(i);return e=t.clone().shiftRight(33),t.xor(e).multiply(o),e=t.clone().shiftRight(29),t.xor(e).multiply(a),e=t.clone().shiftRight(32),t.xor(e),this.init(this.seed),t},t.exports=u},4836:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return n[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,i.d(o,a),o},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};i.r(t),i.d(t,{scaleBand:()=>Yb,scaleDiverging:()=>fM,scaleDivergingLog:()=>dM,scaleDivergingPow:()=>mM,scaleDivergingSqrt:()=>vM,scaleDivergingSymlog:()=>pM,scaleIdentity:()=>Lx,scaleImplicit:()=>Xb,scaleLinear:()=>Nx,scaleLog:()=>Wx,scaleOrdinal:()=>Zb,scalePoint:()=>Kb,scalePow:()=>Jx,scaleQuantile:()=>lw,scaleQuantize:()=>uw,scaleRadial:()=>ew,scaleSequential:()=>oM,scaleSequentialLog:()=>aM,scaleSequentialPow:()=>lM,scaleSequentialQuantile:()=>cM,scaleSequentialSqrt:()=>uM,scaleSequentialSymlog:()=>sM,scaleSqrt:()=>Qx,scaleSymlog:()=>Xx,scaleThreshold:()=>cw,scaleTime:()=>eM,scaleUtc:()=>nM,tickFormat:()=>kx});var e,n=i(7294),r=i.t(n,2);function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(e||(e={}));const a="popstate";function s(t,e){if(!1===t||null==t)throw new Error(e)}function l(t,e){if(!t){"undefined"!=typeof console&&console.warn(e);try{throw new Error(e)}catch(t){}}}function u(t,e){return{usr:t.state,key:t.key,idx:e}}function c(t,e,n,r){return void 0===n&&(n=null),o({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof e?f(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function f(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}var d;function p(t,e,n){void 0===n&&(n="/");let r=O(("string"==typeof e?f(e):e).pathname||"/",n);if(null==r)return null;let i=m(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let t=0;null==o&&t<i.length;++t)o=M(i[t],A(r));return o}function m(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=R([r,a.relativePath]),u=n.concat(a);t.children&&t.children.length>0&&(s(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),m(t.children,e,u,l)),(null!=t.path||t.index)&&e.push({path:l,score:E(l,t.index),routesMeta:u})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let n of v(t.path))i(t,e,n);else i(t,e)})),e}function v(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=v(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(d||(d={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const g=/^:\w+$/,y=3,b=2,_=1,x=10,w=-2,S=t=>"*"===t;function E(t,e){let n=t.split("/"),r=n.length;return n.some(S)&&(r+=w),e&&(r+=b),n.filter((t=>!S(t))).reduce(((t,e)=>t+(g.test(e)?y:""===e?_:x)),r)}function M(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let t=0;t<n.length;++t){let a=n[t],s=t===n.length-1,l="/"===i?e:e.slice(i.length)||"/",u=T({path:a.relativePath,caseSensitive:a.caseSensitive,end:s},l);if(!u)return null;Object.assign(r,u.params);let c=a.route;o.push({params:r,pathname:R([i,u.pathname]),pathnameBase:N(R([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=R([i,u.pathnameBase]))}return o}function T(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),l("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),u=r.reduce(((t,e,n)=>{let{paramName:r,isOptional:i}=e;if("*"===r){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const u=s[n];return t[r]=i&&!u?void 0:function(t,e){try{return decodeURIComponent(t)}catch(n){return l(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(u||"",r),t}),{});return{params:u,pathname:o,pathnameBase:a,pattern:t}}function A(t){try{return decodeURI(t)}catch(e){return l(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function O(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function P(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function C(t){return function(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}(t).map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function k(t,e,n,r){let i;void 0===r&&(r=!1),"string"==typeof t?i=f(t):(i=o({},t),s(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let a,l=""===t||""===i.pathname,u=l?"/":i.pathname;if(null==u)a=n;else if(r){let t=e[e.length-1].replace(/^\//,"").split("/");if(u.startsWith("..")){let e=u.split("/");for(;".."===e[0];)e.shift(),t.pop();i.pathname=e.join("/")}a="/"+t.join("/")}else{let t=e.length-1;if(u.startsWith("..")){let e=u.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}a=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof t?f(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:L(r),hash:I(i)}}(i,a),h=u&&"/"!==u&&u.endsWith("/"),d=(l||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const R=t=>t.join("/").replace(/\/\/+/g,"/"),N=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",I=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class D extends Error{}const j=["post","put","patch","delete"],z=(new Set(j),["get",...j]);function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U.apply(this,arguments)}new Set(z),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const B=n.createContext(null),F=n.createContext(null),H=n.createContext(null),W=n.createContext(null),V=n.createContext({outlet:null,matches:[],isDataRoute:!1}),G=n.createContext(null);function q(){return null!=n.useContext(W)}function X(){return q()||s(!1),n.useContext(W).location}function Z(t){n.useContext(H).static||n.useLayoutEffect(t)}function Y(){let{isDataRoute:t}=n.useContext(V);return t?function(){let{router:t}=function(t){let e=n.useContext(B);return e||s(!1),e}(nt.UseNavigateStable),e=it(rt.UseNavigateStable),r=n.useRef(!1);return Z((()=>{r.current=!0})),n.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"==typeof n?t.navigate(n):t.navigate(n,U({fromRouteId:e},i)))}),[t,e])}():function(){q()||s(!1);let t=n.useContext(B),{basename:e,navigator:r}=n.useContext(H),{matches:i}=n.useContext(V),{pathname:o}=X(),a=JSON.stringify(C(i)),l=n.useRef(!1);Z((()=>{l.current=!0}));let u=n.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"==typeof n)return void r.go(n);let s=k(n,JSON.parse(a),o,"path"===i.relative);null==t&&"/"!==e&&(s.pathname="/"===s.pathname?e:R([e,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[e,r,a,o,t]);return u}()}function $(t,e){let{relative:r}=void 0===e?{}:e,{matches:i}=n.useContext(V),{pathname:o}=X(),a=JSON.stringify(C(i));return n.useMemo((()=>k(t,JSON.parse(a),o,"path"===r)),[t,a,o,r])}function K(t,r,i){q()||s(!1);let{navigator:o}=n.useContext(H),{matches:a}=n.useContext(V),l=a[a.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,d=X();if(r){var m;let t="string"==typeof r?f(r):r;"/"===c||(null==(m=t.pathname)?void 0:m.startsWith(c))||s(!1),h=t}else h=d;let v=h.pathname||"/",g=p(t,{pathname:"/"===c?v:v.slice(c.length)||"/"}),y=function(t,e,r){var i;if(void 0===e&&(e=[]),void 0===r&&(r=null),null==t){var o;if(null==(o=r)||!o.errors)return null;t=r.matches}let a=t,l=null==(i=r)?void 0:i.errors;if(null!=l){let t=a.findIndex((t=>t.route.id&&(null==l?void 0:l[t.route.id])));t>=0||s(!1),a=a.slice(0,Math.min(a.length,t+1))}return a.reduceRight(((t,i,o)=>{let s=i.route.id?null==l?void 0:l[i.route.id]:null,u=null;r&&(u=i.route.errorElement||Q);let c=e.concat(a.slice(0,o+1)),h=()=>{let e;return e=s?u:i.route.Component?n.createElement(i.route.Component,null):i.route.element?i.route.element:t,n.createElement(et,{match:i,routeContext:{outlet:t,matches:c,isDataRoute:null!=r},children:e})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?n.createElement(tt,{location:r.location,revalidation:r.revalidation,component:u,error:s,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}(g&&g.map((t=>Object.assign({},t,{params:Object.assign({},u,t.params),pathname:R([c,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?c:R([c,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),a,i);return r&&y?n.createElement(W.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},y):y}function J(){let t=function(){var t;let e=n.useContext(G),r=function(t){let e=n.useContext(F);return e||s(!1),e}(rt.UseRouteError),i=it(rt.UseRouteError);return e||(null==(t=r.errors)?void 0:t[i])}(),e=function(t){return null!=t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"boolean"==typeof t.internal&&"data"in t}(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},e),r?n.createElement("pre",{style:i},r):null,null)}const Q=n.createElement(J,null);class tt extends n.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error?n.createElement(V.Provider,{value:this.props.routeContext},n.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function et(t){let{routeContext:e,match:r,children:i}=t,o=n.useContext(B);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(V.Provider,{value:e},i)}var nt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nt||{}),rt=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rt||{});function it(t){let e=function(t){let e=n.useContext(V);return e||s(!1),e}(),r=e.matches[e.matches.length-1];return r.route.id||s(!1),r.route.id}function ot(t){s(!1)}function at(t){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:l,static:u=!1}=t;q()&&s(!1);let c=r.replace(/^\/*/,"/"),h=n.useMemo((()=>({basename:c,navigator:l,static:u})),[c,l,u]);"string"==typeof o&&(o=f(o));let{pathname:d="/",search:p="",hash:m="",state:v=null,key:g="default"}=o,y=n.useMemo((()=>{let t=O(d,c);return null==t?null:{location:{pathname:t,search:p,hash:m,state:v,key:g},navigationType:a}}),[c,d,p,m,v,g,a]);return null==y?null:n.createElement(H.Provider,{value:h},n.createElement(W.Provider,{children:i,value:y}))}function st(t){let{children:e,location:n}=t;return K(ut(e),n)}r.startTransition,new Promise((()=>{}));class lt extends n.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,r=null,i=AwaitRenderStatus.pending;if(n instanceof Promise)if(this.state.error){AwaitRenderStatus.error;let t=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>t})}else n._tracked?void 0!==r._error?AwaitRenderStatus.error:void 0!==r._data?AwaitRenderStatus.success:AwaitRenderStatus.pending:(AwaitRenderStatus.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((t=>Object.defineProperty(n,"_data",{get:()=>t})),(t=>Object.defineProperty(n,"_error",{get:()=>t}))));else AwaitRenderStatus.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===AwaitRenderStatus.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===AwaitRenderStatus.error&&!e)throw r._error;if(i===AwaitRenderStatus.error)return React.createElement(AwaitContext.Provider,{value:r,children:e});if(i===AwaitRenderStatus.success)return React.createElement(AwaitContext.Provider,{value:r,children:t});throw r}}function ut(t,e){void 0===e&&(e=[]);let r=[];return n.Children.forEach(t,((t,i)=>{if(!n.isValidElement(t))return;let o=[...e,i];if(t.type===n.Fragment)return void r.push.apply(r,ut(t.props.children,o));t.type!==ot&&s(!1),t.props.index&&t.props.children&&s(!1);let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=ut(t.props.children,o)),r.push(a)})),r}const ct=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))})),ht=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}))})),ft=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))})),dt=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}))})),pt=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))})),mt=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))})),vt=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"}))})),gt=(n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"}))})),n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.41-.513m14.095-5.13l1.41-.513M5.106 17.785l1.15-.964m11.49-9.642l1.149-.964M7.501 19.795l.75-1.3m7.5-12.99l.75-1.3m-6.063 16.658l.26-1.477m2.605-14.772l.26-1.477m0 17.726l-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205L12 12m6.894 5.785l-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864l-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}))),yt=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{d:"M12.378 1.602a.75.75 0 00-.756 0L3 6.632l9 5.25 9-5.25-8.622-5.03zM21.75 7.93l-9 5.25v9l8.628-5.032a.75.75 0 00.372-.648V7.93zM11.25 22.18v-9l-9-5.25v8.57a.75.75 0 00.372.648l8.628 5.033z"}))}));function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){wt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==bt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M5.636 4.575a.75.75 0 010 1.06 9 9 0 000 12.729.75.75 0 01-1.06 1.06c-4.101-4.1-4.101-10.748 0-14.849a.75.75 0 011.06 0zm12.728 0a.75.75 0 011.06 0c4.101 4.1 4.101 10.749 0 14.85a.75.75 0 11-1.06-1.061 9 9 0 000-12.728.75.75 0 010-1.06zM7.757 6.696a.75.75 0 010 1.061 6 6 0 000 8.485.75.75 0 01-1.06 1.061 7.5 7.5 0 010-10.607.75.75 0 011.06 0zm8.486 0a.75.75 0 011.06 0 7.5 7.5 0 010 10.607.75.75 0 01-1.06-1.06 6 6 0 000-8.486.75.75 0 010-1.06zM9.879 8.818a.75.75 0 010 1.06 3 3 0 000 4.243.75.75 0 11-1.061 1.06 4.5 4.5 0 010-6.363.75.75 0 011.06 0zm4.242 0a.75.75 0 011.061 0 4.5 4.5 0 010 6.364.75.75 0 01-1.06-1.06 3 3 0 000-4.244.75.75 0 010-1.06zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"}))}));var St={allowedFileTypes:["text/plain","text/csv"],maxImportBytes:52428800,mainNavigationMenu:[{name:"Home",href:"/",icon:ct,current:!1,description:""},{name:"Soil",href:"/soil",icon:ht,current:!1,description:""},{name:"Photos",href:"/photos",icon:ft,current:!1,description:""},{name:"Stats",href:"/stats",icon:dt,current:!1,description:""},{name:"Import",href:"/import",icon:pt,current:!1,description:""},{name:"Export",href:"/export",icon:mt,current:!1,description:""},{name:"Audit",href:"/audit",icon:vt,current:!1,description:""},{name:"3D",href:"/maps3d",icon:yt,current:!1,description:""}],userNavigationMenu:[{name:"Preferences",href:"/preferences",icon:gt,current:!1,description:""}],makeCurrentPageActive:function(t,e){return e.map((function(e){return e.href===t?xt(xt({},e),{},{current:!0}):e}))}};const Et=(0,n.createContext)(St),Mt=t=>null==t;function Tt(t){if(function(t,e){return"object"==typeof t&&null!==t&&"toString"in t}(t)&&"function"==typeof t.toString){const e=t.toString();return"string"==typeof e?e:JSON.stringify(t)}return JSON.stringify(t)}const At="Just",Ot="Nothing";let Pt;class Ct{constructor(t){if(Mt(t))return Pt||(this.repr=[Ot],Pt=this),Pt;this.repr=[At,t]}static of(t){return new Nt(t)}static just(t){if(Mt(t))throw new Error(`attempted to call "just" with ${t}`);return new Nt(t)}static nothing(t){return new Ct}get variant(){return this.repr[0]}get value(){if(this.repr[0]===Ot)throw new Error("Cannot get the value of `Nothing`");return this.repr[1]}get isJust(){return this.repr[0]===At}get isNothing(){return this.repr[0]===Ot}map(t){return"Just"===this.repr[0]?Nt.just(t(this.repr[1])):this}mapOr(t,e){return"Just"===this.repr[0]?e(this.repr[1]):t}mapOrElse(t,e){return"Just"===this.repr[0]?e(this.repr[1]):t()}match(t){return"Just"===this.repr[0]?t.Just(this.repr[1]):t.Nothing()}or(t){return"Just"===this.repr[0]?this:t}orElse(t){return"Just"===this.repr[0]?this:t()}and(t){return"Just"===this.repr[0]?t:this}andThen(t){return"Just"===this.repr[0]?t(this.repr[1]):this}unwrapOr(t){return"Just"===this.repr[0]?this.repr[1]:t}unwrapOrElse(t){return"Just"===this.repr[0]?this.repr[1]:t()}toString(){return"Just"===this.repr[0]?`Just(${Tt(this.repr[1])})`:"Nothing"}toJSON(){const t=this.repr[0];return"Just"===t?{variant:t,value:this.repr[1]instanceof Nt?this.repr[1].toJSON():this.repr[1]}:{variant:t}}equals(t){return this.repr[0]===t.repr[0]&&this.repr[1]===t.repr[1]}ap(t){return t.andThen((t=>this.map((e=>e(t)))))}get(t){return this.andThen(function(t,e){return n=e=>Nt.of(e[t]),r=e,void 0!==r?n(r):n;var n,r}(t))}}const kt=Ct.just,Rt=Ct.nothing;const Nt=Ct;var Lt=function(t,e){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Lt(t,e)};function It(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Dt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function jt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ut(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function Ft(t){return"function"==typeof t}function Ht(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var Wt=Ht((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Vt(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Gt=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=jt(o),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else o.remove(this);var l=this.initialTeardown;if(Ft(l))try{l()}catch(t){i=t instanceof Wt?t.errors:[t]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=jt(u),h=c.next();!h.done;h=c.next()){var f=h.value;try{Zt(f)}catch(t){i=null!=i?i:[],t instanceof Wt?i=Ut(Ut([],zt(i)),zt(t.errors)):i.push(t)}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}if(i)throw new Wt(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Zt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Vt(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&Vt(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t;var e}(),qt=Gt.EMPTY;function Xt(t){return t instanceof Gt||t&&"closed"in t&&Ft(t.remove)&&Ft(t.add)&&Ft(t.unsubscribe)}function Zt(t){Ft(t)?t():t.unsubscribe()}var Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$t={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=$t.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,Ut([t,e],zt(n))):setTimeout.apply(void 0,Ut([t,e],zt(n)))},clearTimeout:function(t){var e=$t.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Kt(t){$t.setTimeout((function(){var e=Yt.onUnhandledError;if(!e)throw t;e(t)}))}function Jt(){}var Qt=te("C",void 0,void 0);function te(t,e,n){return{kind:t,value:e,error:n}}var ee=null;function ne(t){if(Yt.useDeprecatedSynchronousErrorHandling){var e=!ee;if(e&&(ee={errorThrown:!1,error:null}),t(),e){var n=ee,r=n.errorThrown,i=n.error;if(ee=null,r)throw i}}else t()}var re=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Xt(e)&&e.add(n)):n.destination=ce,n}return It(e,t),e.create=function(t,e,n){return new se(t,e,n)},e.prototype.next=function(t){this.isStopped?ue(function(t){return te("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?ue(te("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?ue(Qt,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Gt),ie=Function.prototype.bind;function oe(t,e){return ie.call(t,e)}var ae=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){le(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){le(t)}else le(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){le(t)}},t}(),se=function(t){function e(e,n,r){var i,o,a=t.call(this)||this;return Ft(e)||!e?i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&Yt.useDeprecatedNextContext?((o=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},i={next:e.next&&oe(e.next,o),error:e.error&&oe(e.error,o),complete:e.complete&&oe(e.complete,o)}):i=e,a.destination=new ae(i),a}return It(e,t),e}(re);function le(t){var e;Yt.useDeprecatedSynchronousErrorHandling?(e=t,Yt.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=e)):Kt(t)}function ue(t,e){var n=Yt.onStoppedNotification;n&&$t.setTimeout((function(){return n(t,e)}))}var ce={closed:!0,next:Jt,error:function(t){throw t},complete:Jt},he="function"==typeof Symbol&&Symbol.observable||"@@observable";function fe(t){return t}var de=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this,i=function(t){return t&&t instanceof re||function(t){return t&&Ft(t.next)&&Ft(t.error)&&Ft(t.complete)}(t)&&Xt(t)}(t)?t:new se(t,e,n);return ne((function(){var t=r,e=t.operator,n=t.source;i.add(e?e.call(i,n):n?r._subscribe(i):r._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=pe(e))((function(e,r){var i=new se({next:function(e){try{t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[he]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0===(n=t).length?fe:1===n.length?n[0]:function(t){return n.reduce((function(t,e){return e(t)}),t)})(this);var n},t.prototype.toPromise=function(t){var e=this;return new(t=pe(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function pe(t){var e;return null!==(e=null!=t?t:Yt.Promise)&&void 0!==e?e:Promise}var me=Ht((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),ve=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return It(e,t),e.prototype.lift=function(t){var e=new ge(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new me},e.prototype.next=function(t){var e=this;ne((function(){var n,r;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var i=jt(e.currentObservers),o=i.next();!o.done;o=i.next())o.value.next(t)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;ne((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;ne((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?qt:(this.currentObservers=null,o.push(t),new Gt((function(){e.currentObservers=null,Vt(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,i=e.isStopped;n?t.error(r):i&&t.complete()},e.prototype.asObservable=function(){var t=new de;return t.source=this,t},e.create=function(t,e){return new ge(t,e)},e}(de),ge=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return It(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:qt},e}(ve);let ye=t=>crypto.getRandomValues(new Uint8Array(t)),be=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),"");var _e=i(5361),xe=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")},we=function(t){var e=[],n=function(t){for(var e=[],n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if("0"==i)break;e.push(i)}return e}(t);return n.forEach((function(n,r){e.push({menuName:n,menuType:t[n]})})),e},Se=((t,e=21)=>((t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(o=e)=>{let a="";for(;;){let e=n(i),s=i;for(;s--;)if(a+=t[e[s]&r]||"",a.length===o)return a}}})("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e,ye))(0,25),Ee=function(){for(var t=(new Date).getFullYear()-10,e=[],n=0;n<15;n++)e.push(t+n);return e},Me=function(t){return!0},Te=function(t){return(0,_e.h64)(44975).update(t).digest().toString(16)},Ae=/\W/g,Oe=/\|+/g,Pe=/([a-z])([A-Z])/g,Ce=/\s+/g,ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t||(t=""),t.toString().trim().replaceAll(Pe,"$1|$2").replaceAll(Ae,"|").replaceAll(Ce,"|").replaceAll("_","|").replaceAll(Oe," ").trim().replaceAll(Ce,e).toLowerCase()},Re=function(t){return ke(t,"_")},Ne=new ve,Le=function(t){return t.Debug="Debug",t.Info="Information",t.Warning="Warning",t.Success="Success",t.Failure="Failure",t}({}),Ie=new ve;function De(t,e){var n=function(t,e){var n=(new Date).getTime(),r=Te(e.toString());return{ts:n,uid:be(),message:e.toString(),checksum:r,warnings:[],level:Le.Debug,label:t}}(t,e);return Ie.next(n),n}function je(t,e){var n=function(t,e){var n=(new Date).getTime(),r=Te(e.toString());return{ts:n,uid:be(),message:e.toString(),checksum:r,warnings:[],level:Le.Warning,label:t}}(t,e);return Ie.next(n),n}function ze(t,e){var n=(new Date).getTime(),r=Te(e.toString());return{ts:n,uid:be(),message:e.toString(),checksum:r,warnings:[],level:Le.Failure,label:t}}function Ue(t,e){var n=ze(t,e);return Ie.next(n),n}var Be=function(t,e){if(void 0!==t.detail)return ze(t.title,"[".concat(t.status,"] ").concat(t.detail," L(").concat(e,")"));if(!t.title&&t.message&&t.label)return console.warn("deprecated message type (label, message",t),ze(t.label,t.message);var n,r,i,o=(n=t.title,r=/\[([^\]]+)\]/,(i=n.match(r))?{subject:i[1],remaining:n.replace(r,"").trim()}:{subject:"Unknown Error",remaining:n}),a=o.remaining;return ze(o.subject,"[".concat(t.traceId,"] ").concat(a," L(").concat(e,")"))},Fe=function(t,e){var n=Be(t,e);return Ue(n.label,n.message),Ie.next(n),n};function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==He(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),"symbol"===He(o)?o:String(o)),r)}var i,o}var Ve=function(t){return t[t.Pct=0]="Pct",t[t.Apal=1]="Apal",t[t.Pctv=2]="Pctv",t[t.Csbp=3]="Csbp",t[t.Vrts=4]="Vrts",t[t.Shapefile=5]="Shapefile",t[t.ShpVrts=6]="ShpVrts",t[t.ShpPct=7]="ShpPct",t[t.ShpJd=8]="ShpJd",t[t.Kml=9]="Kml",t[t.KmlPct=10]="KmlPct",t[t.KmlVrts=11]="KmlVrts",t[t.SoilPhoto=12]="SoilPhoto",t[t.DualEm50=13]="DualEm50",t[t.DualEm100=14]="DualEm100",t[t.DualEm150=15]="DualEm150",t[t.DualEm300=16]="DualEm300",t[t.DualEmIp50=17]="DualEmIp50",t[t.DualEmIp100=18]="DualEmIp100",t[t.DualEmIp150=19]="DualEmIp150",t[t.DualEmIp300=20]="DualEmIp300",t[t.Potassium=21]="Potassium",t[t.Thorium=22]="Thorium",t[t.Uranium=23]="Uranium",t[t.TotalCount=24]="TotalCount",t[t.Emgr=25]="Emgr",t[t.ClientNote=26]="ClientNote",t[t.Png=27]="Png",t[t.Jpg=28]="Jpg",t[t.Em1s=29]="Em1s",t[t.Em21s=30]="Em21s",t[t.Em1SGrSoilFusion=31]="Em1SGrSoilFusion",t[t.AllFieldsVrts=32]="AllFieldsVrts",t[t.AllBoundariesKml=33]="AllBoundariesKml",t[t.AllFieldsShp=34]="AllFieldsShp",t[t.AllFieldsWkt=35]="AllFieldsWkt",t[t.AllFieldsKml=36]="AllFieldsKml",t[t.IndividualFieldsShp=37]="IndividualFieldsShp",t[t.GrTerrestrial=38]="GrTerrestrial",t[t.GrAirborne=39]="GrAirborne",t[t.Wkt=40]="Wkt",t[t.Unassigned=41]="Unassigned",t[t.Deprecated=42]="Deprecated",t}({}),Ge=function(t){return t[t.Em=0]="Em",t[t.Gr=1]="Gr",t[t.EmGr=2]="EmGr",t[t.SoilSamples=3]="SoilSamples",t[t.SoilPoints=4]="SoilPoints",t[t.SoilPhoto=5]="SoilPhoto",t[t.Boundary=6]="Boundary",t[t.Image=7]="Image",t[t.MapImage=8]="MapImage",t[t.BulkData=9]="BulkData",t[t.Document=10]="Document",t[t.SoilFusion=11]="SoilFusion",t[t.StatsReport=12]="StatsReport",t[t.Unassigned=13]="Unassigned",t[t.Deprecated=14]="Deprecated",t}({}),qe=function(t){return t[t.Clean=0]="Clean",t[t.Raw=1]="Raw",t[t.Unassigned=2]="Unassigned",t}({});function Xe(t){return t.replace(/([A-Z])/g,(function(t){return"_".concat(t.toLowerCase())})).replace(/^_/,"")}function Ze(t,e){var n=function(t){return t.toLowerCase().split("_").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join("")}(e);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&r===n)return t[r];throw new Error("Unknown enum value: ".concat(e))}var Ye=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.dealer=e.dealer,this.client=e.client,this.block=e.block,this.field=e.field,this.uid=e.uid,this.version=e.version,this.set_id=e.set_id,this.attributes=e.attributes,this.type=Ze(Ge,e.type),this.format=Ze(Ve,e.format),this.status=Ze(qe,e.status),this.variation=e.variation,this.size=e.size,this.archived=e.archived,this.created=new Date(e.created),this.created_by=e.created_by,this.modified=new Date(e.modified),this.modified_by=e.modified_by,this.season=e.season,this.url=e.url,this.schemata=e.schemata}return e=t,(n=[{key:"groupBy",value:function(){return"".concat(this.dealer," - ").concat(this.client," - ").concat(this.block," - ").concat(this.field)}},{key:"getGpsBoundingBox",value:function(){return{min_x:parseFloat(this.attributes.bbox_gps_min_lon_x),min_y:parseFloat(this.attributes.bbox_gps_min_lat_y),max_x:parseFloat(this.attributes.bbox_gps_max_lon_x),max_y:parseFloat(this.attributes.bbox_gps_max_lat_y)}}},{key:"getPrjBoundingBox",value:function(){return{min_x:parseFloat(this.attributes.bbox_projection_min_x),min_y:parseFloat(this.attributes.bbox_projection_min_y),max_x:parseFloat(this.attributes.bbox_projection_max_x),max_y:parseFloat(this.attributes.bbox_projection_max_y)}}}])&&We(e.prototype,n),r&&We(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t;var e,n,r}();function $e(t){return t.map((function(t){return new Ye(t)}))}function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==Ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ke(i)?i:String(i)),r)}var i}var Qe=function(t){return t[t.Clean=0]="Clean",t[t.Raw=1]="Raw",t}({}),tn=[{abbr:"Raw",title:"Bulk EM/GR Archive"},{abbr:"Br",title:"Boundary Raw"},{abbr:"Bc",title:"Boundary Clean"},{abbr:"EMr",title:"EM Raw"},{abbr:"EMc",title:"EM Clean"},{abbr:"GRr",title:"GR Raw"},{abbr:"GRc",title:"GR Clean"},{abbr:"Pr",title:"Soil Points Raw"},{abbr:"Pc",title:"Soil Points Clean"},{abbr:"Sr",title:"Soil Results Raw"},{abbr:"S1",title:"Soil Results Zero Horizon"},{abbr:"S2",title:"Soil Results A Horizon"},{abbr:"S3",title:"Soil Results B Horizon"},{abbr:"Sf",title:"Soil Fusion Data"},{abbr:"Sp",title:"Soil Photo"},{abbr:"Mi",title:"Interpolated Map Image"}],en=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.name=e,this.dbMetas=n,this.uid=Se()}return e=t,(n=[{key:"cleanMetas",value:function(){this.dbMetas=this.dbMetas.filter((function(t){return void 0!==t}))}},{key:"noteName",value:function(){return"".concat(this.dealer()," - ").concat(this.client()," - Note")}},{key:"dealer",value:function(){var t;return(null===(t=this.dbMetas.first())||void 0===t?void 0:t.dealer)||""}},{key:"client",value:function(){var t;return(null===(t=this.dbMetas.first())||void 0===t?void 0:t.client)||""}},{key:"block",value:function(){var t;return(null===(t=this.dbMetas.first())||void 0===t?void 0:t.block)||""}},{key:"field",value:function(){var t;return(null===(t=this.dbMetas.first())||void 0===t?void 0:t.field)||""}},{key:"season",value:function(){var t;return(null===(t=this.dbMetas.first())||void 0===t?void 0:t.season)||0}},{key:"blocks",value:function(){return this.dbMetas.map((function(t){return t.block})).sort()}},{key:"recordSummary",value:function(t){var e=this.dbMetas.filter(t).map((function(t){var e=t.status===qe.Raw?"r":"c";switch(t.type){case Ge.SoilSamples:var n=t.set_id.toString();return"r"===e?"Sr":"S".concat(n);case Ge.Em:return"EM".concat(e);case Ge.Gr:return"GR".concat(e);case Ge.Boundary:return"B".concat(e);case Ge.SoilPoints:return"P".concat(e);case Ge.SoilPhoto:return"Sp";case Ge.MapImage:return"Mi";case Ge.BulkData:if(t.format===Ve.Emgr)return"Raw";case Ge.Document:if(t.format===Ve.ClientNote)return"Dn";case Ge.SoilFusion:if(t.format===Ve.Em1SGrSoilFusion)return"Sf";case Ge.StatsReport:if(t.status===qe.Raw)return"Srr";default:return console.warn("Unknown record type ".concat(t.type," ").concat(t.format)),"X"}})).filter((function(t){return t.trim().length>0})),n=Array.from(new Set(e));return Array.from(n).sort()}},{key:"seasons",value:function(){return Array.from(new Set(this.dbMetas.map((function(t){return t.season}))))}},{key:"dealers",value:function(){return Array.from(new Set(this.dbMetas.map((function(t){return t.dealer}))))}},{key:"query",value:function(t){return this.dbMetas.filter(t)}},{key:"hasSeason",value:function(t){return void 0!==this.dbMetas.find((function(e){return e.season===t}))}},{key:"recordSummaryAsBooleans",value:function(t){var e=this.recordSummary(t);return tn.map((function(t){return e.includes(t.abbr.trim())}))}},{key:"hasOnlyBoundary",value:function(t){var e=this.recordSummary(t);return 1===e.length&&e[0].startsWith("B")}},{key:"hasEmOrGr",value:function(t){return this.dbMetas.some((function(e){return e.type===Ge.Em||e.type===Ge.Gr&&t(e)}))}},{key:"getRawEm",value:function(t){return this.dbMetas.find((function(e){return e.type===Ge.Em&&e.status===qe.Raw&&t(e)}))}},{key:"getRawGr",value:function(t){return this.dbMetas.find((function(e){return e.type===Ge.Gr&&e.status===qe.Raw&&t(e)}))}},{key:"getCleanEm",value:function(t){return this.dbMetas.find((function(e){return e.type===Ge.Em&&e.status===qe.Clean&&t(e)}))}},{key:"getCleanGr",value:function(t){return this.dbMetas.find((function(e){return e.type===Ge.Gr&&e.status===qe.Clean&&t(e)}))}},{key:"getAllFieldsBoundary",value:function(){return this.dbMetas.find((function(t){return t.type===Ge.Boundary&&t.format===Ve.AllFieldsVrts}))}},{key:"getCleanSoilData",value:function(){return this.dbMetas.filter((function(t){return t.type===Ge.SoilSamples&&t.status===qe.Clean}))}},{key:"getCleanSoilPoints",value:function(){return this.dbMetas.find((function(t){return t.type===Ge.SoilPoints&&t.status===qe.Clean}))}},{key:"getSoilPhotos",value:function(){return this.dbMetas.filter((function(t){return t.type===Ge.SoilPhoto&&t.status===qe.Clean}))}},{key:"getSoilPhoto",value:function(t){return this.dbMetas.find((function(e){return e.format===Ve.SoilPhoto&&e.status===qe.Clean&&t(e)}))}},{key:"getInterpolatedMaps",value:function(){return this.dbMetas.filter((function(t){return t.type===Ge.MapImage&&t.status===qe.Clean}))}},{key:"getBulkData",value:function(t){return this.dbMetas.filter((function(e){return e.type===Ge.BulkData&&e.status===qe.Raw&&t(e)}))}},{key:"getSoilFusionData",value:function(){return this.dbMetas.filter((function(t){return t.type===Ge.SoilFusion&&t.format===Ve.Em1SGrSoilFusion})).first()}},{key:"getRawStatsReport",value:function(t){return this.dbMetas.filter((function(e){return e.type===Ge.StatsReport&&e.status===qe.Raw&&t(e)})).first()}},{key:"getCleanStatsReport",value:function(t){return this.dbMetas.filter((function(e){return e.type===Ge.StatsReport&&e.status===qe.Clean&&t(e)})).first()}},{key:"displayName",value:function(){return this.name.split(" - ").slice(0,2).join(" - ")}}])&&Je(e.prototype,n),r&&Je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t;var e,n,r}();function nn(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,l){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,l,u){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,l,u,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function rn(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function on(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function an(t){return function e(n){return 0===arguments.length||on(n)?e:t.apply(this,arguments)}}function sn(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return on(n)?e:an((function(e){return t(n,e)}));default:return on(n)&&on(r)?e:on(n)?an((function(e){return t(e,r)})):on(r)?an((function(e){return t(n,e)})):t(n,r)}}}function ln(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return on(n)?e:sn((function(e,r){return t(n,e,r)}));case 2:return on(n)&&on(r)?e:on(n)?sn((function(e,n){return t(e,r,n)})):on(r)?sn((function(e,r){return t(n,e,r)})):an((function(e){return t(n,r,e)}));default:return on(n)&&on(r)&&on(i)?e:on(n)&&on(r)?sn((function(e,n){return t(e,n,i)})):on(n)&&on(i)?sn((function(e,n){return t(e,r,n)})):on(r)&&on(i)?sn((function(e,r){return t(n,e,r)})):on(n)?an((function(e){return t(e,r,i)})):on(r)?an((function(e){return t(n,e,i)})):on(i)?an((function(e){return t(n,r,e)})):t(n,r,i)}}}const un=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function cn(t){return"[object String]"===Object.prototype.toString.call(t)}const hn=an((function(t){return!!un(t)||!!t&&"object"==typeof t&&!cn(t)&&(0===t.length||t.length>0&&t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1))}));var fn="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function dn(t,e,n){return function(r,i,o){if(hn(o))return t(r,i,o);if(null==o)return i;if("function"==typeof o["fantasy-land/reduce"])return e(r,i,o,"fantasy-land/reduce");if(null!=o[fn])return n(r,i,o[fn]());if("function"==typeof o.next)return n(r,i,o);if("function"==typeof o.reduce)return e(r,i,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function pn(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}const mn=sn((function(t,e){return nn(t.length,(function(){return t.apply(e,arguments)}))}));function vn(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function gn(t,e,n,r){return t["@@transducer/result"](n[r](mn(t["@@transducer/step"],t),e))}const yn=dn(pn,gn,vn);var bn=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function _n(t){return new bn(t)}const xn=ln((function(t,e,n){return yn("function"==typeof t?_n(t):t,e,n)}));function wn(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return un(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}const Sn=an(wn("tail",ln(wn("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})))(1,1/0)));function En(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return nn(arguments[0].length,xn(rn,arguments[0],Sn(arguments)))}const Mn=an((function(t){return cn(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Tn(){if(0===arguments.length)throw new Error("compose requires at least one argument");return En.apply(this,Mn(arguments))}function An(t,e,n){for(var r=0,i=n.length;r<i;)e=t(e,n[r]),r+=1;return e}function On(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Pn=Object.prototype.toString;const Cn=function(){return"[object Arguments]"===Pn.call(arguments)?function(t){return"[object Arguments]"===Pn.call(t)}:function(t){return On("callee",t)}}();var kn=!{toString:null}.propertyIsEnumerable("toString"),Rn=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Nn=function(){return arguments.propertyIsEnumerable("length")}(),Ln=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1};const In="function"!=typeof Object.keys||Nn?an((function(t){if(Object(t)!==t)return[];var e,n,r=[],i=Nn&&Cn(t);for(e in t)!On(e,t)||i&&"length"===e||(r[r.length]=e);if(kn)for(n=Rn.length-1;n>=0;)On(e=Rn[n],t)&&!Ln(r,e)&&(r[r.length]=e),n-=1;return r})):an((function(t){return Object(t)!==t?[]:Object.keys(t)}));const Dn=sn((function(t,e){return An((function(n,r){return n[r]=t(e[r],r,e),n}),{},In(e))})),jn=an((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function zn(t,e,n){if(n||(n=new Un),i=typeof(r=t),null==r||"object"!=i&&"function"!=i)return t;var r,i,o,a=function(r){var i=n.get(t);if(i)return i;for(var o in n.set(t,r),t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e?zn(t[o],!0,n):t[o]);return r};switch(jn(t)){case"Object":return a(Object.create(Object.getPrototypeOf(t)));case"Array":return a([]);case"Date":return new Date(t.valueOf());case"RegExp":return o=t,new RegExp(o.source,o.flags?o.flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")+(o.dotAll?"s":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}var Un=function(){function t(){this.map={},this.length=0}return t.prototype.set=function(t,e){const n=this.hash(t);let r=this.map[n];r||(this.map[n]=r=[]),r.push([t,e]),this.length+=1},t.prototype.hash=function(t){let e=[];for(var n in t)e.push(Object.prototype.toString.call(t[n]));return e.join()},t.prototype.get=function(t){if(this.length<=180){for(const e in this.map){const n=this.map[e];for(let e=0;e<n.length;e+=1){const r=n[e];if(r[0]===t)return r[1]}}return}const e=this.hash(t),n=this.map[e];if(n)for(let e=0;e<n.length;e+=1){const r=n[e];if(r[0]===t)return r[1]}},t}();function Bn(t,e,n){return function(){for(var r=[],i=0,o=t,a=0,s=!1;a<e.length||i<arguments.length;){var l;a<e.length&&(!on(e[a])||i>=arguments.length)?l=e[a]:(l=arguments[i],i+=1),r[a]=l,on(l)?s=!0:o-=1,a+=1}return!s&&o<=0?n.apply(this,r):nn(Math.max(0,o),Bn(t,r,n))}}function Fn(t,e,n){return function(){if(0===arguments.length)return n();var r=arguments[arguments.length-1];if(!un(r)){for(var i=0;i<t.length;){if("function"==typeof r[t[i]])return r[t[i]].apply(r,Array.prototype.slice.call(arguments,0,-1));i+=1}if(function(t){return null!=t&&"function"==typeof t["@@transducer/step"]}(r))return e.apply(null,Array.prototype.slice.call(arguments,0,-1))(r)}return n.apply(this,arguments)}}function Hn(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}const Wn=function(){return this.xf["@@transducer/init"]()},Vn=function(t){return this.xf["@@transducer/result"](t)};var Gn=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=Wn,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(On(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,zn(this.valueAcc,!1)],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}();function qn(t,e,n){return function(r){return new Gn(t,e,n,r)}}var Xn=Bn(4,[],Fn([],qn,(function(t,e,n,r){var i=_n((function(r,i){var o=n(i),a=t(On(o,r)?r[o]:zn(e,!1),i);return a&&a["@@transducer/reduced"]?Hn(r):(r[o]=a,r)}));return yn(i,{},r)})));const Zn=sn(wn("groupBy",Xn((function(t,e){return t.push(e),t}),[]))),Yn=sn((function(t,e){return Array.prototype.slice.call(e,0).sort(t)}));var $n=ln((function(t,e,n){var r=t(e),i=t(n);return r>i?-1:r<i?1:0}));const Kn=$n;function Jn(t){return t}const Qn=an(Jn);function tr(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function er(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}const nr="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function rr(t,e,n,r){var i=tr(t);function o(t,e){return ir(t,e,n.slice(),r.slice())}return!er((function(t,e){return!er(o,e,t)}),tr(e),i)}function ir(t,e,n,r){if(nr(t,e))return!0;var i=jn(t);if(i!==jn(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!nr(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!nr(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===t)return r[o]===e;o-=1}switch(i){case"Map":return t.size===e.size&&rr(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&rr(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=In(t);if(a.length!==In(e).length)return!1;var s=n.concat([t]),l=r.concat([e]);for(o=a.length-1;o>=0;){var u=a[o];if(!On(u,e)||!ir(e[u],t[u],s,l))return!1;o-=1}return!0}const or=sn((function(t,e){return ir(t,e,[],[])}));function ar(t,e){return function(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(or(t[n],e))return n;n+=1}return-1}(e,t,0)>=0}function sr(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var o=t?1:0;return!!n._items[i][o]||(e&&(n._items[i][o]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!ar(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!ar(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}const lr=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!sr(t,!0,this)},t.prototype.has=function(t){return sr(t,!1,this)},t}();var ur=function(){function t(t,e){this.xf=e,this.f=t,this.set=new lr}return t.prototype["@@transducer/init"]=Wn,t.prototype["@@transducer/result"]=Vn,t.prototype["@@transducer/step"]=function(t,e){return this.set.add(this.f(e))?this.xf["@@transducer/step"](t,e):t},t}();function cr(t){return function(e){return new ur(t,e)}}const hr=sn(Fn([],cr,(function(t,e){for(var n,r,i=new lr,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o})))(Qn);var fr=ln((function(t,e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0}));const dr=fr;var pr=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Wn,t.prototype["@@transducer/result"]=Vn,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}();const mr=function(t){return function(e){return new pr(t,e)}};const vr=sn((function(t,e){return 1===t?an(e):nn(t,Bn(t,[],e))}));const gr=sn(Fn(["fantasy-land/map","map"],mr,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return vr(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return An((function(n,r){return n[r]=t(e[r]),n}),{},In(e));default:return function(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}(t,e)}}))),yr=an((function(t){for(var e=In(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r}));var br=new ve,_r=new Map,xr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=_r.size;return _r.has(t)?(console.warn("[ACTIVITY] (".concat(n,") WARN ").concat(t," already started")),function(){}):function(t,e){var n=_r.size,r=setTimeout((function(){console.warn("[ACTIVITY] (".concat(n,") WARN ").concat(t," took more than ").concat(e,"ms to complete")),_r.delete(t),br.next({name:t,status:"stop",timeout:e})}),e);return _r.set(t,{timestamp:Date.now(),timeout:r}),br.next({name:t,status:"start",timeout:e}),function(){var r=_r.get(t);r?(clearTimeout(r.timeout),_r.delete(t),br.next({name:t,status:"stop",timeout:e})):console.warn("[ACTIVITY] (".concat(n,") WARN ").concat(t," already stopped"))}}(t,e)},wr=function(t,e){return new Promise((function(n,r){var i=xr("POST ".concat(t),5e3);fetch(t,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(t){try{t.json().then((function(e){if(200!==t.status)return console.warn("ERROR",e),i(),Fe(e,"93c606ad"),void r(Be(e,"40503781"));i(),n(e)}))}catch(t){i(),Fe(t,"42cde4a8"),r(Be(t,"12a2d95b"))}})).catch((function(t){i(),Fe(t,"fe07a6c2"),r(Be(t,"a05e2b67"))}))}))};const Sr=Object.create(null);class Er{constructor(t){this.repr=t}static ok(t){return new Er(0===arguments.length?["Ok",Sr]:["Ok",t])}static err(t){return Mt(t)?new Er(["Err",Sr]):new Er(["Err",t])}get variant(){return this.repr[0]}get value(){if("Err"===this.repr[0])throw new Error("Cannot get the value of Err");return this.repr[1]}get error(){if("Ok"===this.repr[0])throw new Error("Cannot get the error of Ok");return this.repr[1]}get isOk(){return"Ok"===this.repr[0]}get isErr(){return"Err"===this.repr[0]}map(t){return"Ok"===this.repr[0]?Ar.ok(t(this.repr[1])):this}mapOr(t,e){return"Ok"===this.repr[0]?e(this.repr[1]):t}mapOrElse(t,e){return"Ok"===this.repr[0]?e(this.repr[1]):t(this.repr[1])}match(t){return"Ok"===this.repr[0]?t.Ok(this.repr[1]):t.Err(this.repr[1])}mapErr(t){return"Ok"===this.repr[0]?this:Ar.err(t(this.repr[1]))}or(t){return"Ok"===this.repr[0]?this:t}orElse(t){return"Ok"===this.repr[0]?this:t(this.repr[1])}and(t){return"Ok"===this.repr[0]?t:this}andThen(t){return"Ok"===this.repr[0]?t(this.repr[1]):this}unwrapOr(t){return"Ok"===this.repr[0]?this.repr[1]:t}unwrapOrElse(t){return"Ok"===this.repr[0]?this.repr[1]:t(this.repr[1])}toString(){return`${this.repr[0]}(${Tt(this.repr[1])})`}toJSON(){const t=this.repr[0];return"Ok"===t?{variant:t,value:this.repr[1]}:{variant:t,error:this.repr[1]}}equals(t){return this.repr[0]===t.repr[0]&&this.repr[1]===t.repr[1]}ap(t){return t.andThen((t=>this.map((e=>e(t)))))}cast(){return this}}const Mr=Er.ok,Tr=Er.err,Ar=Er;var Or,Pr,Cr,kr=function(){return kr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kr.apply(this,arguments)};function Rr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Nr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lr(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ir(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}!function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(Or||(Or={})),(Cr=Pr||(Pr={})).Parent="#_parent",Cr.Internal="#_internal";var Dr,jr=Or.Start,zr=Or.Stop,Ur=Or.Raise,Br=Or.Send,Fr=Or.Cancel,Hr=Or.NullEvent,Wr=Or.Assign,Vr=(Or.After,Or.DoneState,Or.Log),Gr=Or.Init,qr=Or.Invoke,Xr=(Or.ErrorExecution,Or.ErrorPlatform),Zr=Or.ErrorCustom,Yr=Or.Update,$r=Or.Choose,Kr=Or.Pure,Jr={},Qr="xstate.guard",ti=!0;function ei(t,e,n){void 0===n&&(n=".");var r=ii(t,n),i=ii(e,n);return _i(i)?!!_i(r)&&i===r:_i(r)?r in i:Object.keys(r).every((function(t){return t in i&&ei(r[t],i[t])}))}function ni(t){try{return _i(t)||"number"==typeof t?"".concat(t):t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function ri(t,e){try{return yi(t)?t:t.toString().split(e)}catch(e){throw new Error("'".concat(t,"' is not a valid state path."))}}function ii(t,e){return"object"==typeof(n=t)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?t.value:yi(t)?oi(t):"string"!=typeof t?t:oi(ri(t,e));var n}function oi(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function ai(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function si(t,e,n){var r,i,o={};try{for(var a=Nr(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];n(u)&&(o[l]=e(u,l,t))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var li=function(t){return function(e){var n,r,i=e;try{for(var o=Nr(t),a=o.next();!a.done;a=o.next())i=i[a.value]}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function ui(t){return t?_i(t)?[[t]]:ci(Object.keys(t).map((function(e){var n=t[e];return"string"==typeof n||n&&Object.keys(n).length?ui(t[e]).map((function(t){return[e].concat(t)})):[[e]]}))):[[]]}function ci(t){var e;return(e=[]).concat.apply(e,Ir([],Lr(t),!1))}function hi(t){return yi(t)?t:[t]}function fi(t){return void 0===t?[]:hi(t)}function di(t,e,n){var r,i;if(bi(t))return t(e,n.data);var o={};try{for(var a=Nr(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];bi(u)?o[l]=u(e,n.data):o[l]=u}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function pi(t){return t instanceof Promise||!(null===t||!bi(t)&&"object"!=typeof t||!bi(t.then))}function mi(t,e){return ai(t.states,(function(t,n){if(t){var r=(_i(e)?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:mi(t,r)}}}))}function vi(t,e,n,r){ti||gi(!!t,"Attempting to update undefined context");var i=t?n.reduce((function(t,n){var i,o,a=n.assignment,s={state:r,action:n,_event:e},l={};if(bi(a))l=a(t,e.data,s);else try{for(var u=Nr(Object.keys(a)),c=u.next();!c.done;c=u.next()){var h=c.value,f=a[h];l[h]=bi(f)?f(t,e.data,s):f}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return Object.assign({},t,l)}),t):t;return i}var gi=function(){};function yi(t){return Array.isArray(t)}function bi(t){return"function"==typeof t}function _i(t){return"string"==typeof t}function xi(t,e){if(t)return _i(t)?{type:Qr,name:t,predicate:e?e[t]:void 0}:bi(t)?{type:Qr,name:t.name,predicate:t}:t}ti||(gi=function(t,e){var n=t instanceof Error?t:void 0;if((n||!t)&&void 0!==console){var r=["Warning: ".concat(e)];n&&r.push(n),console.warn.apply(console,r)}});var wi=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Si(t){return!!t&&"__xstatenode"in t}function Ei(t,e){return _i(t)||"number"==typeof t?kr({type:t},e):t}function Mi(t,e){if(!_i(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=Ei(t);return kr({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Ti(t,e){return hi(e).map((function(e){return void 0===e||"string"==typeof e||Si(e)?{target:e,event:t}:kr(kr({},e),{event:t})}))}function Ai(t,e,n,r,i){var o=t.options.guards,a={state:i,cond:e,_event:r};if(e.type===Qr)return((null==o?void 0:o[e.name])||e.predicate)(n,r.data,a);var s=null==o?void 0:o[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(n,r.data,a)}function Oi(t){return"string"==typeof t?{type:t}:t}function Pi(t,e,n){var r=function(){},i="object"==typeof t,o=i?t:null;return{next:((i?t.next:t)||r).bind(o),error:((i?t.error:e)||r).bind(o),complete:((i?t.complete:n)||r).bind(o)}}function Ci(t,e){return"".concat(t,":invocation[").concat(e,"]")}function ki(t){return(t.type===Ur||t.type===Br&&t.to===Pr.Internal)&&"number"!=typeof t.delay}(Dr={})[wi]=function(){return this},Dr[Symbol.observable]=function(){return this};var Ri=Mi({type:Gr});function Ni(t,e){return e&&e[t]||void 0}function Li(t,e){var n;if(_i(t)||"number"==typeof t)n=bi(r=Ni(t,e))?{type:t,exec:r}:r||{type:t,exec:void 0};else if(bi(t))n={type:t.name||t.toString(),exec:t};else{var r;if(bi(r=Ni(t.type,e)))n=kr(kr({},t),{exec:r});else if(r){var i=r.type||t.type;n=kr(kr(kr({},r),t),{type:i})}else n=t}return n}var Ii=function(t,e){return t?(yi(t)?t:[t]).map((function(t){return Li(t,e)})):[]};function Di(t){var e=Li(t);return kr(kr({id:_i(t)?t:e.id},e),{type:e.type})}function ji(t,e){var n="".concat(Or.DoneState,".").concat(t);return{type:n,data:e,toString:function(){return n}}}function zi(t,e){var n="".concat(Or.DoneInvoke,".").concat(t);return{type:n,data:e,toString:function(){return n}}}function Ui(t,e){var n="".concat(Or.ErrorPlatform,".").concat(t);return{type:n,data:e,toString:function(){return n}}}function Bi(t,e,n,r,i,o,a){void 0===a&&(a=!1);var s=a?[]:function(t){var e,n,r=[];try{for(var i=Nr(t),o=i.next();!o.done;o=i.next())for(var a=o.value,s=0;s<a.actions.length;)a.actions[s].type!==Wr?s++:(r.push(a.actions[s]),a.actions.splice(s,1))}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(i),l=s.length?vi(n,r,s,e):n,u=a?[n]:void 0,c=[];function h(i,s){var h;switch(s.type){case Ur:var f=function(t,e,n,r){var i,o={_event:n},a=Mi(bi(t.event)?t.event(e,n.data,o):t.event);if(_i(t.delay)){var s=r&&r[t.delay];i=bi(s)?s(e,n.data,o):s}else i=bi(t.delay)?t.delay(e,n.data,o):t.delay;return kr(kr({},t),{type:Ur,_event:a,delay:i})}(s,l,r,t.options.delays);return o&&"number"==typeof f.delay&&o(f,l,r),f;case Br:var d=function(t,e,n,r){var i,o={_event:n},a=Mi(bi(t.event)?t.event(e,n.data,o):t.event);if(_i(t.delay)){var s=r&&r[t.delay];i=bi(s)?s(e,n.data,o):s}else i=bi(t.delay)?t.delay(e,n.data,o):t.delay;var l=bi(t.to)?t.to(e,n.data,o):t.to;return kr(kr({},t),{to:l,_event:a,event:a.data,delay:i})}(s,l,r,t.options.delays);if(!ti){var p=s.delay;gi(!_i(p)||"number"==typeof d.delay,"No delay reference for delay expression '".concat(p,"' was found on machine '").concat(t.id,"'"))}return o&&d.to!==Pr.Internal&&("entry"===i?c.push(d):o(d,l,r)),d;case Vr:var m=function(t,e,n){return kr(kr({},t),{value:_i(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})}(s,l,r);return null==o||o(m,l,r),m;case $r:if(!(b=null===(h=s.conds.find((function(n){var i=xi(n.cond,t.options.guards);return!i||Ai(t,i,l,r,o?void 0:e)})))||void 0===h?void 0:h.actions))return[];var v=Lr(Bi(t,e,l,r,[{type:i,actions:Ii(fi(b),t.options.actions)}],o,a),2),g=v[0],y=v[1];return l=y,null==u||u.push(l),g;case Kr:var b;if(!(b=s.get(l,r.data)))return[];var _=Lr(Bi(t,e,l,r,[{type:i,actions:Ii(fi(b),t.options.actions)}],o,a),2),x=_[0],w=_[1];return l=w,null==u||u.push(l),x;case zr:return m=function(t,e,n){var r=bi(t.activity)?t.activity(e,n.data):t.activity,i="string"==typeof r?{id:r}:r;return{type:Or.Stop,activity:i}}(s,l,r),null==o||o(m,n,r),m;case Wr:l=vi(l,r,[s],o?void 0:e),null==u||u.push(l);break;default:var S=Li(s,t.options.actions),E=S.exec;if(o)o(S,l,r);else if(E&&u){var M=u.length-1,T=kr(kr({},S),{exec:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];E.apply(void 0,Ir([u[M]],Lr(e),!1))}});S=T}return S}}var f=ci(i.map((function(t){var e,n,i=[];try{for(var a=Nr(t.actions),s=a.next();!s.done;s=a.next()){var u=s.value,f=h(t.type,u);f&&(i=i.concat(f))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return c.forEach((function(t){o(t,l,r)})),c.length=0,i})));return[f,l]}var Fi=function(t){return{type:Wr,assignment:t}},Hi=function(t){return"atomic"===t.type||"final"===t.type};function Wi(t){return Object.keys(t.states).map((function(e){return t.states[e]}))}function Vi(t){return Wi(t).filter((function(t){return"history"!==t.type}))}function Gi(t){var e=[t];return Hi(t)?e:e.concat(ci(Vi(t).map(Gi)))}function qi(t,e){var n,r,i,o,a,s,l,u,c=Zi(new Set(t)),h=new Set(e);try{for(var f=Nr(h),d=f.next();!d.done;d=f.next())for(var p=(S=d.value).parent;p&&!h.has(p);)h.add(p),p=p.parent}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}var m=Zi(h);try{for(var v=Nr(h),g=v.next();!g.done;g=v.next())if("compound"!==(S=g.value).type||m.get(S)&&m.get(S).length){if("parallel"===S.type)try{for(var y=(a=void 0,Nr(Vi(S))),b=y.next();!b.done;b=y.next()){var _=b.value;h.has(_)||(h.add(_),c.get(_)?c.get(_).forEach((function(t){return h.add(t)})):_.initialStateNodes.forEach((function(t){return h.add(t)})))}}catch(t){a={error:t}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}else c.get(S)?c.get(S).forEach((function(t){return h.add(t)})):S.initialStateNodes.forEach((function(t){return h.add(t)}))}catch(t){i={error:t}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var x=Nr(h),w=x.next();!w.done;w=x.next()){var S;for(p=(S=w.value).parent;p&&!h.has(p);)h.add(p),p=p.parent}}catch(t){l={error:t}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}return h}function Xi(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var r=n[0];if(!r)return{};if(Hi(r))return r.key}var i={};return n.forEach((function(t){i[t.key]=Xi(t,e)})),i}function Zi(t){var e,n,r=new Map;try{for(var i=Nr(t),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Yi(t,e){return Xi(t,Zi(qi([t],e)))}function $i(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function Ki(t,e){return"compound"===e.type?Vi(e).some((function(e){return"final"===e.type&&$i(t,e)})):"parallel"===e.type&&Vi(e).every((function(e){return Ki(t,e)}))}function Ji(t){return new Set(ci(t.map((function(t){return t.tags}))))}function Qi(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(_i(t)||_i(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return Qi(t[n],e[n])}))}var to=function(){function t(t){var e,n,r=this;this.actions=[],this.activities=Jr,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||Jr,this.meta=(void 0===(n=t.configuration)&&(n=[]),n.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function(t){return Ir([],Lr(new Set(ci(Ir([],Lr(t.map((function(t){return t.ownEvents}))),!1)))),!1)}(r.configuration)}})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:n,_event:Ri,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=Ri;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),_i(t))return[t];var r=Object.keys(t);return r.concat.apply(r,Ir([],Lr(r.map((function(r){return n.toStrings(t[r],e).map((function(t){return r+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var n=Rr(t,["configuration","transitions","tags","machine"]);return kr(kr({},n),{tags:Array.from(e)})},t.prototype.matches=function(t){return ei(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e;ti&&gi(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}(),eo=[],no=function(t,e){eo.push(t);var n=e(t);return eo.pop(),n};function ro(t){var e;return(e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}})[wi]=function(){return this},e}function io(t,e,n){var r=ro(e);if(r.deferred=!0,Si(t)){var i=r.state=no(void 0,(function(){return(n?t.withContext(n):t).initialState}));r.getSnapshot=function(){return i}}return r}function oo(t){return kr(kr({type:qr},t),{toJSON:function(){t.onDone,t.onError;var e,n=Rr(t,["onDone","onError"]);return kr(kr({},n),{type:qr,src:(e=t.src,"string"==typeof e?{type:e,toString:function(){return e}}:e)})}})}var ao="",so="*",lo={},uo=function(t){return"#"===t[0]},co=function(){function t(e,n,r,i){void 0===r&&(r="context"in e?e.context:void 0);var o,a=this;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=null==i?void 0:i.parent,this.key=this.config.key||(null==i?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||Ir([this.machine.key],Lr(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,ti||gi(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?ai(this.config.states,(function(e,n){var r,i=new t(e,{},void 0,{parent:a,key:n});return Object.assign(a.idMap,kr(((r={})[i.id]=i,r),i.idMap)),i})):lo;var s=0;!function t(e){var n,r;e.order=s++;try{for(var i=Nr(Wi(e)),o=i.next();!o.done;o=i.next())t(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return t.event===ao})):ao in this.config.on),this.strict=!!this.config.strict,this.onEntry=fi(this.config.entry||this.config.onEntry).map((function(t){return Li(t)})),this.onExit=fi(this.config.exit||this.config.onExit).map((function(t){return Li(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=fi(this.config.invoke).map((function(t,e){var n,r;if(Si(t)){var i=Ci(a.id,e);return a.machine.options.services=kr(((n={})[i]=t,n),a.machine.options.services),oo({src:i,id:i})}if(_i(t.src))return i=t.id||Ci(a.id,e),oo(kr(kr({},t),{id:i,src:t.src}));if(Si(t.src)||bi(t.src))return i=t.id||Ci(a.id,e),a.machine.options.services=kr(((r={})[i]=t.src,r),a.machine.options.services),oo(kr(kr({id:i},t),{src:i}));var o=t.src;return oo(kr(kr({id:Ci(a.id,e)},t),{src:o}))})),this.activities=fi(this.config.activities).concat(this.invoke).map((function(t){return Di(t)})),this.transition=this.transition.bind(this),this.tags=fi(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Gi(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,l=r.delays;return new t(this.config,{actions:kr(kr({},i),e.actions),activities:kr(kr({},o),e.activities),guards:kr(kr({},a),e.guards),services:kr(kr({},s),e.services),delays:kr(kr({},l),e.delays)},null!=n?n:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return bi(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:ai(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===ao,n=this.transitions.filter((function(n){var r=n.eventType===t;return e?r:r||n.eventType===so}));return this.__cache.candidates[t]=n,n},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var n=function(e,n){var r,i,o,a=(r=bi(e)?"".concat(t.id,":delay[").concat(n,"]"):e,i=t.id,o=i?"#".concat(i):"","".concat(Or.After,"(").concat(r,")").concat(o));return t.onEntry.push(function(t,e){return{to:e?e.to:void 0,type:Br,event:bi(t)?t:Ei(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:bi(t)?t.name:ni(t)}}(a,{delay:e})),t.onExit.push({type:Fr,sendId:a}),a},r=yi(e)?e.map((function(t,e){var r=n(t.delay,e);return kr(kr({},t),{event:r})})):ci(Object.keys(e).map((function(t,r){var i=e[t],o=_i(i)?{target:i}:i,a=isNaN(+t)?t:+t,s=n(a,r);return fi(o).map((function(t){return kr(kr({},t),{event:s,delay:a})}))})));return r.map((function(e){var n=e.delay;return kr(kr({},t.formatTransition(e)),{delay:n})}))},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof to?t.value:ii(t,this.delimiter);if(_i(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((e={})[r]=i,e)):[this,this.states[r]]}var o=Object.keys(r),a=[this];return a.push.apply(a,Ir([],Lr(ci(o.map((function(t){return n.getStateNode(t).getStateNodes(r[t])})))),!1)),a},t.prototype.handles=function(t){var e=ni(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=t instanceof to?t:to.create(t),n=Array.from(qi([],this.getStateNodes(e.value)));return new to(kr(kr({},e),{value:this.resolve(e.value),configuration:n,done:Ki(n,this),tags:Ji(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t).next(e,n);return r&&r.transitions.length?r:this.next(e,n)},t.prototype.transitionCompoundNode=function(t,e,n){var r=Object.keys(t),i=this.getStateNode(r[0])._transition(t[r[0]],e,n);return i&&i.transitions.length?i:this.next(e,n)},t.prototype.transitionParallelNode=function(t,e,n){var r,i,o={};try{for(var a=Nr(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];if(u){var c=this.getStateNode(l)._transition(u,e,n);c&&(o[l]=c)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var h=Object.keys(o).map((function(t){return o[t]})),f=ci(h.map((function(t){return t.transitions})));if(!h.some((function(t){return t.transitions.length>0})))return this.next(e,n);var d=ci(Object.keys(o).map((function(t){return o[t].configuration})));return{transitions:f,exitSet:ci(h.map((function(t){return t.exitSet}))),configuration:d,source:e,actions:ci(Object.keys(o).map((function(t){return o[t].actions})))}},t.prototype._transition=function(t,e,n){return _i(t)?this.transitionLeafNode(t,e,n):1===Object.keys(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,Mi(e))},t.prototype.next=function(t,e){var n,r,i,o=this,a=e.name,s=[],l=[];try{for(var u=Nr(this.getCandidates(a)),c=u.next();!c.done;c=u.next()){var h=c.value,f=h.cond,d=h.in,p=t.context,m=!d||(_i(d)&&uo(d)?t.matches(ii(this.getStateNodeById(d).path,this.delimiter)):ei(ii(d,this.delimiter),li(this.path.slice(0,-2))(t.value))),v=!1;try{v=!f||Ai(this.machine,f,p,e,t)}catch(t){throw new Error("Unable to evaluate guard '".concat(f.name||f.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(t.message))}if(v&&m){void 0!==h.target&&(l=h.target),s.push.apply(s,Ir([],Lr(h.actions),!1)),i=h;break}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i){if(!l.length)return{transitions:[i],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var g=ci(l.map((function(e){return o.getRelativeStateNodes(e,t.historyValue)})));return{transitions:[i],exitSet:i.internal?[]:ci(l.map((function(t){return o.getPotentiallyReenteringNodes(t)}))),configuration:g,source:t,actions:s}}},t.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var e=[],n=this,r=t;n&&n!==r;)e.push(n),n=n.parent;return n!==r?[]:(e.push(r),e)},t.prototype.getActions=function(t,e,n,r,i,o,a){var s,l,u,c,h=this,f=o?qi([],this.getStateNodes(o.value)):[],d=new Set;try{for(var p=Nr(Array.from(t).sort((function(t,e){return t.order-e.order}))),m=p.next();!m.done;m=p.next())(!$i(f,y=m.value)||$i(n.exitSet,y)||y.parent&&d.has(y.parent))&&d.add(y)}catch(t){s={error:t}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}try{for(var v=Nr(f),g=v.next();!g.done;g=v.next()){var y;$i(t,y=g.value)&&!$i(n.exitSet,y.parent)||n.exitSet.push(y)}}catch(t){u={error:t}}finally{try{g&&!g.done&&(c=v.return)&&c.call(v)}finally{if(u)throw u.error}}n.exitSet.sort((function(t,e){return e.order-t.order}));var b=Array.from(d).sort((function(t,e){return t.order-e.order})),_=new Set(n.exitSet),x=ci(b.map((function(t){var e=[];if("final"!==t.type)return e;var o=t.parent;if(!o.parent)return e;e.push(ji(t.id,t.doneData),ji(o.id,t.doneData?di(t.doneData,r,i):void 0));var a=o.parent;return"parallel"===a.type&&Vi(a).every((function(t){return Ki(n.configuration,t)}))&&e.push(ji(a.id)),e}))),w=b.map((function(t){var e=t.onEntry,n=t.activities.map((function(t){return function(t){var e=Di(t);return{type:Or.Start,activity:e,exec:void 0}}(t)}));return{type:"entry",actions:Ii(a?Ir(Ir([],Lr(e),!1),Lr(n),!1):Ir(Ir([],Lr(n),!1),Lr(e),!1),h.machine.options.actions)}})).concat({type:"state_done",actions:x.map((function(t){return function(t,e){return{type:Ur,event:"function"==typeof t?t:Ei(t),delay:e?e.delay:void 0,id:null==e?void 0:e.id}}(t)}))}),S=Array.from(_).map((function(t){return{type:"exit",actions:Ii(Ir(Ir([],Lr(t.onExit),!1),Lr(t.activities.map((function(t){return function(t){var e=bi(t)?t:Di(t);return{type:Or.Stop,activity:e,exec:void 0}}(t)}))),!1),h.machine.options.actions)}})).concat({type:"transition",actions:Ii(n.actions,this.machine.options.actions)}).concat(w);if(e){var E=Ii(ci(Ir([],Lr(t),!1).sort((function(t,e){return e.order-t.order})).map((function(t){return t.onExit}))),this.machine.options.actions).filter((function(t){return!ki(t)}));return S.concat({type:"stop",actions:E})}return S},t.prototype.transition=function(t,e,n,r){void 0===t&&(t=this.initialState);var i,o,a=Mi(e);if(t instanceof to)i=void 0===n?t:this.resolveState(to.from(t,n));else{var s=_i(t)?this.resolve(oi(this.getResolvedPath(t))):this.resolve(t),l=null!=n?n:this.machine.context;i=this.resolveState(to.from(s,l))}if(!ti&&a.name===so)throw new Error("An event cannot have the wildcard type ('".concat(so,"')"));if(this.strict&&!this.events.includes(a.name)&&(o=a.name,!/^(done|error)\./.test(o)))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var u=this._transition(i.value,i,a)||{transitions:[],configuration:[],exitSet:[],source:i,actions:[]},c=qi([],this.getStateNodes(i.value)),h=u.configuration.length?qi(c,u.configuration):c;return u.configuration=Ir([],Lr(h),!1),this.resolveTransition(u,i,i.context,r,a)},t.prototype.resolveRaisedTransition=function(t,e,n,r){var i,o=t.actions;return(t=this.transition(t,e,void 0,r))._event=n,t.event=n.data,(i=t.actions).unshift.apply(i,Ir([],Lr(o),!1)),t},t.prototype.resolveTransition=function(t,e,n,r,i){var o,a,s,l,u=this;void 0===i&&(i=Ri);var c=t.configuration,h=!e||t.transitions.length>0,f=h?t.configuration:e?e.configuration:[],d=Ki(f,this),p=h?Yi(this.machine,c):void 0,m=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,v=this.getActions(new Set(f),d,t,n,i,e,r),g=e?kr({},e.activities):{};try{for(var y=Nr(v),b=y.next();!b.done;b=y.next()){var _=b.value;try{for(var x=(s=void 0,Nr(_.actions)),w=x.next();!w.done;w=x.next()){var S=w.value;S.type===jr?g[S.activity.id||S.activity.type]=S:S.type===zr&&(g[S.activity.id||S.activity.type]=!1)}}catch(t){s={error:t}}finally{try{w&&!w.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}}catch(t){o={error:t}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}var E,M,T=Lr(Bi(this,e,n,i,v,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),A=T[0],O=T[1],P=Lr(function(t,e){var n,r,i=Lr([[],[]],2),o=i[0],a=i[1];try{for(var s=Nr(t),l=s.next();!l.done;l=s.next()){var u=l.value;e(u)?o.push(u):a.push(u)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}(A,ki),2),C=P[0],k=P[1],R=A.filter((function(t){var e;return t.type===jr&&(null===(e=t.activity)||void 0===e?void 0:e.type)===qr})),N=R.reduce((function(t,e){return t[e.activity.id]=function(t,e,n,r){var i,o=Oi(t.src),a=null===(i=null==e?void 0:e.options.services)||void 0===i?void 0:i[o.type],s=t.data?di(t.data,n,r):void 0,l=a?io(a,t.id,s):ro(t.id);return l.meta=t,l}(e.activity,u.machine,O,i),t}),e?kr({},e.children):{}),L=new to({value:p||e.value,context:O,_event:i,_sessionid:e?e._sessionid:null,historyValue:p?m?(E=m,M=p,{current:M,states:mi(E,M)}):void 0:e?e.historyValue:void 0,history:!p||t.source?e:void 0,actions:p?k:[],activities:p?g:e?e.activities:{},events:[],configuration:f,transitions:t.transitions,children:N,done:d,tags:Ji(f),machine:this}),I=n!==O;L.changed=i.name===Yr||I;var D=L.history;D&&delete D.history;var j=!d&&(this._transient||c.some((function(t){return t._transient})));if(!(h||j&&i.name!==ao))return L;var z=L;if(!d)for(j&&(z=this.resolveRaisedTransition(z,{type:Hr},i,r));C.length;){var U=C.shift();z=this.resolveRaisedTransition(z,U._event,i,r)}var B=z.changed||(D?!!z.actions.length||I||typeof D.value!=typeof z.value||!Qi(z.value,D.value):void 0);return z.changed=B,z.history=D,z},t.prototype.getStateNode=function(t){if(uo(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},t.prototype.getStateNodeById=function(t){var e=uo(t)?t.slice(1):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&uo(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=ri(t,this.delimiter).slice(),n=this;e.length;){var r=e.shift();if(!r.length)break;n=n.getStateNode(r)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||lo;switch(this.type){case"parallel":return ai(this.initialStateValue,(function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):lo}));case"compound":if(_i(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return Object.keys(t).length?ai(t,(function(t,e){return t?n.getStateNode(e).resolve(t):lo})):this.initialStateValue||{};default:return t||lo}},t.prototype.getResolvedPath=function(t){if(uo(t)){var e=this.machine.idMap[t.slice(1)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return ri(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=si(this.states,(function(t){return t.initialStateValue||lo}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=Hi(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(t,e){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=e?e:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=_i(e.target)&&uo(e.target)?oi(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;return Hi(this)?[this]:"compound"!==this.type||this.initial?ci(ui(this.initialStateValue).map((function(e){return t.getFromRelativePath(e)}))):(ti||gi(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this])},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=Lr(t),n=e[0],r=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},t.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:si(this.states,(function(e,n){if(!t)return e.historyValue();var r=_i(t)?void 0:t[n];return e.historyValue(r||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var r=this.target;return r?ci(ui(r).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var i,o=(i=n.path,"states",function(t){var e,n,r=t;try{for(var o=Nr(i),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.states[s]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r})(t).current;return _i(o)?[n.getStateNode(o)]:ci(ui(o).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=ci(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,o=new Set(this.ownEvents);if(i)try{for(var a=Nr(Object.keys(i)),s=a.next();!s.done;s=a.next()){var l=i[s.value];if(l.states)try{for(var u=(n=void 0,Nr(l.events)),c=u.next();!c.done;c=u.next()){var h=c.value;o.add("".concat(h))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!_i(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(t){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(t.message))}}))},t.prototype.formatTransition=function(t){var e=this,n=function(t){if(void 0!==t&&""!==t)return fi(t)}(t.target),r="internal"in t?t.internal:!n||n.some((function(t){return _i(t)&&t[0]===e.delimiter})),i=this.machine.options.guards,o=this.resolveTarget(n),a=kr(kr({},t),{actions:Ii(fi(t.actions)),cond:xi(t.cond,i),target:o,source:this,internal:r,eventType:t.event,toJSON:function(){return kr(kr({},a),{target:a.target?a.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return a},t.prototype.formatTransitions=function(){var t,e,n,r=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var i=this.config.on,o=i[so],a=void 0===o?[]:o,s=Rr(i,["*"]);n=ci(Object.keys(s).map((function(t){ti||t!==ao||gi(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var e=Ti(t,s[t]);return ti||function(t,e,n){var r=n.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&(_i(t.target)||Si(t.target))})),i=e===ao?"the transient event":"event '".concat(e,"'");gi(!r,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(r,t,e),e})).concat(Ti(so,a)))}else n=[];var l=this.config.always?Ti("",this.config.always):[],u=this.config.onDone?Ti(String(ji(this.id)),this.config.onDone):[];ti||gi(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var c=ci(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,Ir([],Lr(Ti(String(zi(t.id)),t.onDone)),!1)),t.onError&&e.push.apply(e,Ir([],Lr(Ti(String(Ui(t.id)),t.onError)),!1)),e}))),h=this.after,f=ci(Ir(Ir(Ir(Ir([],Lr(u),!1),Lr(c),!1),Lr(n),!1),Lr(l),!1).map((function(t){return fi(t).map((function(t){return r.formatTransition(t)}))})));try{for(var d=Nr(h),p=d.next();!p.done;p=d.next()){var m=p.value;f.push(m)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}return f},t}(),ho=!1,fo={deferEvents:!1},po=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=kr(kr({},fo),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}(),mo=new Map,vo=0,go=function(t){mo.delete(t)};function yo(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:void(ti||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}var bo,_o={sync:!1,autoForward:!1};!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(bo||(bo={}));var xo=function(){function t(e,n){void 0===n&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=bo.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(t,e){if(yi(t))return r.batch(t),r.state;var n=Mi(Ei(t,e));if(r.status===bo.Stopped)return ti||gi(!1,'Event "'.concat(n.name,'" was sent to stopped service "').concat(r.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(n.data))),r.state;if(r.status!==bo.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(r.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(n.data)));return r.scheduler.schedule((function(){r.forward(n);var t=r._nextState(n);r.update(t,n)})),r._state},this.sendTo=function(t,e,n){var i=r.parent&&(e===Pr.Parent||r.parent.id===e),o=i?r.parent:_i(e)?e===Pr.Internal?r:r.children.get(e)||function(t){return mo.get(t)}(e):function(t){return!!t&&"function"==typeof t.send}(e)?e:void 0;if(o)if("machine"in o){if(r.status!==bo.Stopped||r.parent!==o||r.state.done){var a=kr(kr({},t),{name:t.name===Zr?"".concat(Ui(r.id)):t.name,origin:r.sessionId});!n&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([o,a]):o.send(a)}}else!n&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([o,t.data]):o.send(t.data);else{if(!i)throw new Error("Unable to send event to child '".concat(e,"' from service '").concat(r.id,"'."));ti||gi(!1,"Service '".concat(r.id,"' has no parent: unable to send event ").concat(t.type))}},this._exec=function(t,e,n,i){void 0===i&&(i=r.machine.options.actions);var o=t.exec||Ni(t.type,i),a=bi(o)?o:o?o.exec:t.exec;if(a)try{return a(e,n.data,r.machine.config.predictableActionArguments?{action:t,_event:n}:{action:t,state:r.state,_event:n})}catch(t){throw r.parent&&r.parent.send({type:"xstate.error",data:t}),t}switch(t.type){case Ur:var s=t;r.defer(s);break;case Br:var l=t;if("number"==typeof l.delay)return void r.defer(l);l.to?r.sendTo(l._event,l.to,n===Ri):r.send(l._event);break;case Fr:r.cancel(t.sendId);break;case jr:if(r.status!==bo.Running)return;var u=t.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[u.id||u.type])break;if(u.type===Or.Invoke){var c=Oi(u.src),h=r.machine.options.services?r.machine.options.services[c.type]:void 0,f=u.id,d=u.data;ti||gi(!("forward"in u),"`forward` property is deprecated (found in invocation of '".concat(u.src,"' in in machine '").concat(r.machine.id,"'). ")+"Please use `autoForward` instead.");var p="autoForward"in u?u.autoForward:!!u.forward;if(!h)return void(ti||gi(!1,"No service found for invocation '".concat(u.src,"' in machine '").concat(r.machine.id,"'.")));var m=d?di(d,e,n):void 0;if("string"==typeof h)return;var v=bi(h)?h(e,n.data,{data:m,src:c,meta:u.meta}):h;if(!v)return;var g=void 0;Si(v)&&(v=m?v.withContext(m):v,g={autoForward:p}),r.spawn(v,f,g)}else r.spawnActivity(u);break;case zr:r.stopChild(t.activity.id);break;case Vr:var y=t,b=y.label,_=y.value;b?r.logger(b,_):r.logger(_);break;default:ti||gi(!1,"No implementation found for action type '".concat(t.type,"'"))}};var i=kr(kr({},t.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,l=i.id,u=void 0!==l?l:e.id;this.id=u,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new po({deferEvents:this.options.deferEvents}),this.sessionId="x:".concat(vo++)}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:no(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return ti||gi(this.status!==bo.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){var n,r;try{for(var i=Nr(t.actions),o=i.next();!o.done;o=i.next()){var a=o.value;this.exec(a,t,e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.update=function(t,e){var n,r,i,o,a,s,l,u,c=this;if(t._sessionid=this.sessionId,this._state=t,this.machine.config.predictableActionArguments&&e!==Ri||!this.options.execute)for(var h=void 0;h=this._outgoingQueue.shift();)h[0].send(h[1]);else this.execute(this.state);if(this.children.forEach((function(t){c.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var f=Nr(this.eventListeners),d=f.next();!d.done;d=f.next())(0,d.value)(t.event)}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var p=Nr(this.listeners),m=p.next();!m.done;m=p.next())(0,m.value)(t,t.event)}catch(t){i={error:t}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var v=Nr(this.contextListeners),g=v.next();!g.done;g=v.next())(0,g.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(t){a={error:t}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(this.state.done){var y=t.configuration.find((function(t){return"final"===t.type&&t.parent===c.machine})),b=y&&y.doneData?di(y.doneData,t.context,e):void 0;this._doneEvent=zi(this.id,b);try{for(var _=Nr(this.doneListeners),x=_.next();!x.done;x=_.next())(0,x.value)(this._doneEvent)}catch(t){l={error:t}}finally{try{x&&!x.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}this._stop(),this._stopChildren(),go(this.sessionId)}},t.prototype.onTransition=function(t){return this.listeners.add(t),this.status===bo.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,n){var r=this,i=Pi(t,e,n);this.listeners.add(i.next),this.status!==bo.NotStarted&&i.next(this.state);var o=function(){r.doneListeners.delete(o),r.stopListeners.delete(o),i.complete()};return this.status===bo.Stopped?i.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){r.listeners.delete(i.next),r.doneListeners.delete(o),r.stopListeners.delete(o)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.status===bo.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e,n,r=this;if(this.status===bo.Running)return this;this.machine._init(),e=this.sessionId,n=this,mo.set(e,n),this.initialized=!0,this.status=bo.Running;var i=void 0===t?this.initialState:no(this,(function(){return"object"==typeof(e=t)&&null!==e&&"value"in e&&"_event"in e?r.machine.resolveState(t):r.machine.resolveState(to.from(t,r.machine.context));var e}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){r.update(i,Ri)})),this},t.prototype._stopChildren=function(){this.children.forEach((function(t){bi(t.stop)&&t.stop()})),this.children.clear()},t.prototype._stop=function(){var t,e,n,r,i,o,a,s,l,u;try{for(var c=Nr(this.listeners),h=c.next();!h.done;h=c.next()){var f=h.value;this.listeners.delete(f)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}try{for(var d=Nr(this.stopListeners),p=d.next();!p.done;p=d.next())(f=p.value)(),this.stopListeners.delete(f)}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}try{for(var m=Nr(this.contextListeners),v=m.next();!v.done;v=m.next())f=v.value,this.contextListeners.delete(f)}catch(t){i={error:t}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var g=Nr(this.doneListeners),y=g.next();!y.done;y=g.next())f=y.value,this.doneListeners.delete(f)}catch(t){a={error:t}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=bo.Stopped,this._initialState=void 0;try{for(var b=Nr(Object.keys(this.delayedEventsMap)),_=b.next();!_.done;_=b.next()){var x=_.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(t){l={error:t}}finally{try{_&&!_.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new po({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var t=this,e=this.scheduler;return this._stop(),e.schedule((function(){var e;if(!(null===(e=t._state)||void 0===e?void 0:e.done)){var n=Mi({type:"xstate.stop"}),r=no(t,(function(){var e=ci(Ir([],Lr(t.state.configuration),!1).sort((function(t,e){return e.order-t.order})).map((function(e){return Ii(e.onExit,t.machine.options.actions)}))),r=Lr(Bi(t.machine,t.state,t.state.context,n,[{type:"exit",actions:e}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),i=r[0],o=r[1],a=new to({value:t.state.value,context:o,_event:n,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:i.filter((function(t){return!ki(t)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return a.changed=!0,a}));t.update(r,n),t._stopChildren(),go(t.sessionId)}})),this},t.prototype.batch=function(t){var e=this;if(this.status===bo.NotStarted&&this.options.deferEvents)ti||gi(!1,"".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==bo.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(t.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule((function(){var r,i,o=e.state,a=!1,s=[],l=function(t){var r=Mi(t);e.forward(r),o=no(e,(function(){return e.machine.transition(o,r,void 0,n||void 0)})),s.push.apply(s,Ir([],Lr(e.machine.config.predictableActionArguments?o.actions:o.actions.map((function(t){return function(t,e){var n=t.exec;return kr(kr({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}(t,o)}))),!1)),a=a||!!o.changed};try{for(var u=Nr(t),c=u.next();!c.done;c=u.next())l(c.value)}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}o.changed=a,o.actions=s,e.update(o,Mi(t[t.length-1]))}))}},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype._nextState=function(t,e){var n=this;void 0===e&&(e=!!this.machine.config.predictableActionArguments&&this._exec);var r=Mi(t);if(0===r.name.indexOf(Xr)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(Xr)})))throw r.data.data;return no(this,(function(){return n.machine.transition(n.state,r,void 0,e||void 0)}))},t.prototype.nextState=function(t){return this._nextState(t,!1)},t.prototype.forward=function(t){var e,n;try{for(var r=Nr(this.forwardTo),i=r.next();!i.done;i=r.next()){var o=i.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this,n=this.clock.setTimeout((function(){"to"in t&&t.to?e.sendTo(t._event,t.to,!0):e.send(t._event)}),t.delay);t.id&&(this.delayedEventsMap[t.id]=n)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions),this._exec(t,e.context,e._event,n)},t.prototype.removeChild=function(t){var e;this.children.delete(t),this.forwardTo.delete(t),null===(e=this.state)||void 0===e||delete e.children[t]},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),bi(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,n){if(this.status!==bo.Running)return io(t,e);if(pi(t))return this.spawnPromise(Promise.resolve(t),e);if(bi(t))return this.spawnCallback(t,e);if(function(t){try{return"function"==typeof t.send}catch(t){return!1}}(r=t)&&"id"in r)return this.spawnActor(t,e);if(function(t){try{return"subscribe"in t&&bi(t.subscribe)}catch(t){return!1}}(t))return this.spawnObservable(t,e);if(Si(t))return this.spawnMachine(t,kr(kr({},n),{id:e}));if(function(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition}(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'.concat(e,'" of type "').concat(typeof t,'".'));var r},t.prototype.spawnMachine=function(e,n){var r=this;void 0===n&&(n={});var i=new t(e,kr(kr({},this.options),{parent:this,id:n.id||e.id})),o=kr(kr({},_o),n);o.sync&&i.onTransition((function(t){r.send(Yr,{state:t,id:i.id})}));var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone((function(t){r.removeChild(i.id),r.send(Mi(t,{origin:i.id}))})).start(),a},t.prototype.spawnBehavior=function(t,e){var n=function(t,e){void 0===e&&(e={});var n=t.initialState,r=new Set,i=[],o=!1,a=function(t){var e;return kr(((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[wi]=function(){return this},e),t)}({id:e.id,send:function(e){i.push(e),function(){if(!o){for(o=!0;i.length>0;){var e=i.shift();n=t.transition(n,e,s),r.forEach((function(t){return t.next(n)}))}o=!1}}()},getSnapshot:function(){return n},subscribe:function(t,e,i){var o=Pi(t,e,i);return r.add(o),o.next(n),{unsubscribe:function(){r.delete(o)}}}}),s={parent:e.parent,self:a,id:e.id||"anonymous",observers:r};return n=t.start?t.start(s):n,a}(t,{id:e,parent:this});return this.children.set(e,n),n},t.prototype.spawnPromise=function(t,e){var n,r,i=this,o=!1;t.then((function(t){o||(r=t,i.removeChild(e),i.send(Mi(zi(e,t),{origin:e})))}),(function(t){if(!o){i.removeChild(e);var n=Ui(e,t);try{i.send(Mi(n,{origin:e}))}catch(r){!function(t,e,n){if(!ti){var r=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(t,"'.").concat(r));else{var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(t,"'. ").concat(r," Current error is '").concat(e,"'.").concat(i))}}}(t,r,e),i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=((n={id:e,send:function(){},subscribe:function(e,n,r){var i=Pi(e,n,r),o=!1;return t.then((function(t){o||(i.next(t),o||i.complete())}),(function(t){o||i.error(t)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return r}})[wi]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnCallback=function(t,e){var n,r,i,o=this,a=!1,s=new Set,l=new Set;try{i=t((function(t){r=t,l.forEach((function(e){return e(t)})),a||o.send(Mi(t,{origin:e}))}),(function(t){s.add(t)}))}catch(t){this.send(Ui(e,t))}if(pi(i))return this.spawnPromise(i,e);var u=((n={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){var e=Pi(t);return l.add(e.next),{unsubscribe:function(){l.delete(e.next)}}},stop:function(){a=!0,bi(i)&&i()},toJSON:function(){return{id:e}},getSnapshot:function(){return r}})[wi]=function(){return this},n);return this.children.set(e,u),u},t.prototype.spawnObservable=function(t,e){var n,r,i=this,o=t.subscribe((function(t){r=t,i.send(Mi(t,{origin:e}))}),(function(t){i.removeChild(e),i.send(Mi(Ui(e,t),{origin:e}))}),(function(){i.removeChild(e),i.send(Mi(zi(e),{origin:e}))})),a=((n={id:e,send:function(){},subscribe:function(e,n,r){return t.subscribe(e,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:e}}})[wi]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else ti||gi(!1,"No implementation found for activity '".concat(t.type,"'"))},t.prototype.spawnEffect=function(t,e){var n;this.children.set(t,((n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}})[wi]=function(){return this},n))},t.prototype.attachDev=function(){var t=yo();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(kr(kr({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:kr({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}!function(t){if(yo()){var e=function(){var t=yo();if(t&&"__xstate__"in t)return t.__xstate__}();e&&e.register(t)}}(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[wi]=function(){return this},t.prototype.getSnapshot=function(){return this.status===bo.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},t.interpret=wo,t}();function wo(t,e){return new xo(t,e)}var So=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Eo(t){return Ft(null==t?void 0:t.then)}function Mo(t){return Ft(t[he])}function To(t){return Symbol.asyncIterator&&Ft(null==t?void 0:t[Symbol.asyncIterator])}function Ao(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Oo="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Po(t){return Ft(null==t?void 0:t[Oo])}function Co(t){return function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{!function(t){t.value instanceof Bt?Promise.resolve(t.value.v).then(l,u):c(o[0][2],t)}(i[t](e))}catch(t){c(o[0][3],t)}}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}(this,arguments,(function(){var e,n,r;return Dt(this,(function(i){switch(i.label){case 0:e=t.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Bt(e.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Bt(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Bt(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function ko(t){return Ft(null==t?void 0:t.getReader)}function Ro(t){if(t instanceof de)return t;if(null!=t){if(Mo(t))return i=t,new de((function(t){var e=i[he]();if(Ft(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(So(t))return e=t,new de((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}));if(Eo(t))return r=t,new de((function(t){r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Kt)}));if(To(t))return No(t);if(Po(t))return n=t,new de((function(t){var e,r;try{for(var i=jt(n),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}t.complete()}));if(ko(t))return No(Co(t))}var e,n,r,i;throw Ao(t)}function No(t){return new de((function(e){(function(t,e){var n,r,i,o;return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var a,s;return Dt(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=jt(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}(t),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),i={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Lo(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=e.schedule((function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()}),r);if(t.add(o),!i)return o}function Io(t){return function(e){if(function(t){return Ft(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Do(t,e,n,r,i){return new jo(t,e,n,r,i)}var jo=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return It(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(re);function zo(t,e){return void 0===e&&(e=0),Io((function(n,r){n.subscribe(Do(r,(function(n){return Lo(r,t,(function(){return r.next(n)}),e)}),(function(){return Lo(r,t,(function(){return r.complete()}),e)}),(function(n){return Lo(r,t,(function(){return r.error(n)}),e)})))}))}function Uo(t,e){return void 0===e&&(e=0),Io((function(n,r){r.add(t.schedule((function(){return n.subscribe(r)}),e))}))}function Bo(t,e){if(!t)throw new Error("Iterable cannot be null");return new de((function(n){Lo(n,e,(function(){var r=t[Symbol.asyncIterator]();Lo(n,e,(function(){r.next().then((function(t){t.done?n.complete():n.next(t.value)}))}),0,!0)}))}))}function Fo(t,e){return e?function(t,e){if(null!=t){if(Mo(t))return function(t,e){return Ro(t).pipe(Uo(e),zo(e))}(t,e);if(So(t))return function(t,e){return new de((function(n){var r=0;return e.schedule((function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())}))}))}(t,e);if(Eo(t))return function(t,e){return Ro(t).pipe(Uo(e),zo(e))}(t,e);if(To(t))return Bo(t,e);if(Po(t))return function(t,e){return new de((function(n){var r;return Lo(n,e,(function(){r=t[Oo](),Lo(n,e,(function(){var t,e,i;try{e=(t=r.next()).value,i=t.done}catch(t){return void n.error(t)}i?n.complete():n.next(e)}),0,!0)})),function(){return Ft(null==r?void 0:r.return)&&r.return()}}))}(t,e);if(ko(t))return function(t,e){return Bo(Co(t),e)}(t,e)}throw Ao(t)}(t,e):Ro(t)}function Ho(t,e,n){return void 0===n&&(n=1/0),Ft(e)?Ho((function(n,r){return function(t,e){return Io((function(e,n){var r=0;e.subscribe(Do(n,(function(e){n.next(t.call(undefined,e,r++))})))}))}((function(t,i){return e(n,t,r,i)}))(Ro(t(n,r)))}),n):("number"==typeof e&&(n=e),Io((function(e,r){return function(t,e,n,r,i,o,a,s){var l=[],u=0,c=0,h=!1,f=function(){!h||l.length||u||e.complete()},d=function(t){return u<r?p(t):l.push(t)},p=function(t){u++;var i=!1;Ro(n(t,c++)).subscribe(Do(e,(function(t){e.next(t)}),(function(){i=!0}),void 0,(function(){if(i)try{u--;for(;l.length&&u<r;)t=void 0,t=l.shift(),p(t);f()}catch(t){e.error(t)}var t})))};return t.subscribe(Do(e,d,(function(){h=!0,f()}))),function(){}}(e,r,t,n)})))}var Wo=new de((function(t){return t.complete()}));function Vo(t){return t&&Ft(t.schedule)}function Go(t){return t[t.length-1]}function qo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(t){return Vo(Go(t))?t.pop():void 0}(t),r=function(t,e){return"number"==typeof Go(t)?t.pop():1/0}(t),i=t;return i.length?1===i.length?Ro(i[0]):function(t){return void 0===t&&(t=1/0),Ho(fe,t)}(r)(Fo(i,n)):Wo}function Xo(t){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(t)}function Zo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||Yo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(t,e){if(t){if("string"==typeof t)return $o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$o(t,e):void 0}}function $o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ea(r.key),r)}}function Jo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(n),!0).forEach((function(e){ta(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ta(t,e,n){return(e=ea(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ea(t){var e=function(t,e){if("object"!==Xo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Xo(e)?e:String(e)}var na="Empty",ra="Waiting",ia="Updating",oa="Loading",aa="Loaded",sa=na,la=ra,ua=ia,ca=oa,ha=aa,fa="UPDATE",da="LOAD",pa="SUCCESS",ma="FAILURE",va="RESET",ga=Fi((function(t,e){return t.queue=Qo(Qo({},t.queue),e.payload),t})),ya=Fi((function(t,e){try{return e.payload(t)}catch(e){return Ue("handleQueueFlush",e.message),t}})),ba=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._machine=function(t){return function(t,e){return ti||"predictableActionArguments"in t||ho||(ho=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new co(t,e)}({predictableActionArguments:!0,id:t,initial:na,context:{notifiers:{},queue:{}},states:{Empty:{entry:["log"],on:{LOAD:{target:oa,actions:"handleLoad"},UPDATE:{target:ia},QUEUE:{target:na,actions:"handleQueue"},FLUSH:{target:na,actions:"handleQueueFlush"}}},Waiting:{entry:["log"],on:{UPDATE:{target:ia},RESET:{target:na}}},Loading:{entry:["log"],on:{SUCCESS:{target:aa},FAILURE:{target:na},QUEUE:{target:oa,actions:"handleQueue"},FLUSH:{target:oa,actions:"handleQueueFlush"}}},Loaded:{entry:["log"],on:{RESET:{target:na},QUEUE:{target:aa,actions:"handleQueue"},FLUSH:{target:aa,actions:"handleQueueFlush"}}},Updating:{entry:["log"],on:{RESET:{target:na},SUCCESS:{target:ra},FAILURE:{target:na}}}}},{actions:{log:function(e,n){switch(n.type){case da:case fa:void 0===e.notifiers[t]&&(e.notifiers[t]=xr(t));break;case pa:case ma:void 0!==e.notifiers[t]&&(e.notifiers[t](),delete e.notifiers[t])}n.type===ma?console.warn("[XSTATE] ".concat(t),n.type):console.log("[XSTATE] ".concat(t),n.type)},handleLoad:function(t,e){},handleQueue:ga,handleQueueFlush:ya}})}(e),this._service=wo(this._machine).start(),this._observer=Fo(this._service),this.reset=this.reset.bind(this)}var e,n;return e=t,(n=[{key:"machine",get:function(){return this._machine}},{key:"service",get:function(){return this._service}},{key:"observer",get:function(){return this._observer}},{key:"reset",value:function(){this._service.getSnapshot().value!==ha&&this._service.getSnapshot().value!==la||this._service.send(va)}}])&&Ko(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_a=function(t){var e=Zo((0,n.useState)(0),2),r=e[0],i=e[1],o=Zo((0,n.useState)(null),2);return o[0],o[1],(0,n.useEffect)((function(){var e=t.filter((function(t){return!(null!=t&&t.observer)}));e.length>0&&console.warn("useLoadMachinesState","invalid machines",e);var n,r=qo.apply(void 0,(n=t.filter((function(t){return null==t?void 0:t.observer})).map((function(t){return t.observer})),function(t){if(Array.isArray(t))return $o(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||Yo(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).subscribe((function(t){t.value===ha&&t.event.type===pa&&i(Date.now()),t.value===sa&&i(Date.now()),t.value===la&&t.event.type===pa&&i(Date.now())}));return function(){return r.unsubscribe()}}),[]),r},xa=function(t){return _a([t])},wa=function(t){return[xa(t),function(e){t.service.send({type:fa,payload:e})}]};function Sa(t){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sa(t)}function Ea(t){return function(t){if(Array.isArray(t))return Ma(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ma(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ta(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Sa(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Sa(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Aa=Tn(Dn((function(t,e,n){return new en(e,n[e])})),Zn((function(t){return t.groupBy()}))),Oa=(Tn(Yn(Kn(Qn)),hr),Tn((function(t){return{dealers:Yn(dr(Qn),hr(t.dealers)),clients:Yn(dr(Qn),hr(t.clients)),blocks:Yn(dr(Qn),hr(t.blocks))}}),xn((function(t,e){return t.dealers.push(e.dealer),t.clients.push(e.client),t.blocks.push(e.block),t}),{dealers:[],clients:[],blocks:[]}),gr((function(t){return{dealer:t.dealer,client:t.client,block:t.block}})),yr)),Pa=function(t){console.log("UPDATE META CHANNEL",t);var e=ja.metas;t.deleted.length>0&&(e=e.filter((function(e){return!$e(t.deleted).find((function(t){return t.uid===e.uid}))})),t.new.length>0&&(e=[].concat(Ea(e),Ea($e(t.new)))),t.updated.length>0&&(e=e.map((function(e){return $e(t.updated).find((function(t){return t.uid===e.uid}))||e})))),za.service.send({type:fa,payload:{metas:e}})},Ca={data:null,error:null},ka=new ba("Network Meta Machine");function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function Na(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function La(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?La(Object(n),!0).forEach((function(e){Da(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Da(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ra(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ra(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ka.observer.subscribe({next:function(t){switch(t.value){case sa:Ca={data:null,error:null};break;case ca:fetch("http://localhost:3001/api/v1/core/metadata").then((function(t){if(!t.ok)throw new Error("Network response was not ok, status: ".concat(t.status," ").concat(t.statusText));return t.json()})).then((function(t){Ca.data=t,ka.service.send({type:pa})})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),Ca.error=t.message,ka.service.send({type:ma})}))}}});var ja={nextClient:Rt(),clientNote:Rt(),networkUpdateCount:0,lastUpdate:0,seasonSelected:null,metaTree:{},metaSeasons:[],metasByGroup:{},metasBySeason:{},metas:[],client:Rt(),clientBools:{name:"",block:"",bools:[]}},za=new ba("Meta Machine"),Ua=function(t,e){var n;ja.metas=t,ja.metasByGroup=Aa(t),n=ja.metasByGroup,ja.metaTree=function(t){var e=t.clientsByGroup;return In(e).reduce((function(t,n){var r=e[n],i=r.dealer(),o=r.client(),a=r.block(),s=r.field();return r.dbMetas.reduce((function(t,e){var n=e.season;return t[i]||(t[i]=Ta({},o,Ta({},a,Ta({},n,Ta({},s,r))))),t[i][o]||(t[i][o]=Ta({},a,Ta({},n,Ta({},s,r)))),t[i][o][a]||(t[i][o][a]=Ta({},n,Ta({},s,r))),t[i][o][a][n]||(t[i][o][a][n]=Ta({},s,r)),t[i][o][a][n][s]?r.uid!==t[i][o][a][n][s].uid&&console.error("Duplicate meta",r.uid,t[i][o][a][n][s].uid):t[i][o][a][n][s]=r,t}),t)}),{})}({clientsByGroup:n}),ja.lastUpdate=Date.now();var r=function(t,e,n){if(e.isJust){var r=n[e.value];return r?kt(r):Rt()}if(t.isJust){var i=n[t.value.name];return i?kt(i):Rt()}return t}(ja.client,ja.nextClient,ja.metasByGroup);return r.isJust&&(ja.nextClient=Rt(),ja.seasonSelected=r.value.season()),r};za.observer.subscribe({next:function(t){switch(t.value){case sa:ja=Ia(Ia({},ja),{},{metas:[]});break;case ua:var e=t.event.payload;if(void 0===e||void 0===e.metas)return void za.service.send(ma);if(e.metas.length>0){var n=Ua(e.metas,t.context);return Fa.service.send({type:fa,payload:{client:n}}),void za.service.send(pa)}za.service.send(ma)}}}),ka.observer.subscribe({next:function(t){if(t.event.type==pa){var e=$e(Ca.data);za.service.send({type:fa,payload:{metas:e}})}}});var Ba=function(t){var e=t.value.recordSummaryAsBooleans(Me),n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Na(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.value.recordSummaryAsBooleans(Me),2),r=n[0],i=n[1];e.splice(0,1,r),e.splice(1,1,i);var o=t.value.name.split(" - ");return{name:o[0],block:o[1],bools:e}},Fa=new ba("Meta Client Machine");Fa.observer.subscribe({next:function(t){switch(t.value){case sa:ja=Ia(Ia({},ja),{},{client:Rt()});break;case ua:var e=t.event.payload.client;if(t.event.payload.boundary,void 0===e)return void Fa.service.send(ma);if(e.isJust)return ja=Ia(Ia({},ja),{},{client:e,seasonSelected:e.value.season(),clientBools:Ba(e)}),void Fa.service.send(pa);if(e.isNothing)return ja.client.isJust&&je("Clearing client","client is selected and being replaced by nothing"),ja=Ia(Ia({},ja),{},{nextClient:Rt(),client:Rt(),seasonSelected:Rt()}),void Fa.service.send(pa);Fa.service.send(ma)}}});var Ha=new ba("Meta Next Client Machine");Ha.observer.subscribe({next:function(t){switch(t.value){case sa:ja=Ia(Ia({},ja),{},{nextClient:Rt()});break;case ua:var e=t.event.payload;if(void 0!==e&&e.length>0)return ja=Ia(Ia({},ja),{},{nextClient:kt(e)}),void Ha.service.send(pa);Ha.service.send(ma)}}});const Wa=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))})),Va=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}));function Ga(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qa=function(t){var e=t.meta,r=t.bools,i=t.clickable,o=t.season;return t.setSelectedClient,n.createElement("tr",{key:name+"a",className:""},n.createElement("td",{className:xe("whitespace-nowrap text-left py-2 pl-4 pr-3 text-sm sm:pl-6",i?"hover:text-blue-500 cursor-pointer":""),onClick:function(){return i?function(t){t&&Fa.service.send({type:fa,payload:kt(t)})}(e):""}},e.name),n.createElement("td",{className:"whitespace-nowrap text-center px-1 py-2 text-sm text-gray-500"},o),r.map((function(t,e){return n.createElement("td",{key:e+"rdt",title:tn[e].title,className:"whitespace-nowrap text-center px-1 py-2 text-sm text-gray-500"},function(t){return t?n.createElement(Wa,{className:"h-6 w-6 text-green-500 m-auto"}):n.createElement(Va,{className:"h-6 w-6 text-red-500 m-auto"})}(t))})))},Xa=function(t){var e,r=t.clients,i=t.season,o=t.clickable,a=t.setSelectedClient;return n.createElement(n.Fragment,null,null===(e=r.map((function(t){var e=ke(t.name),n=("".concat(t.dealer()," - ").concat(t.client()),t.recordSummaryAsBooleans(Me)),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ga(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ga(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.recordSummaryAsBooleans(Me),2),i=r[0],o=r[1];return n.splice(0,1,i),n.splice(1,1,o),{bools:n,meta:t,name:e}})))||void 0===e?void 0:e.map((function(t){return n.createElement(qa,{key:t.name+"b",meta:t.meta,bools:t.bools,clickable:o,setSelectedClient:a,season:i})})))},Za=function(){return n.createElement("thead",{className:"relative"},n.createElement("tr",{className:"sticky top-16"},n.createElement("th",{title:"Client",scope:"col",className:"w-96 whitespace-nowrap text-left py-3.5 pl-4 pr-3 text-left text-sm font-semibold bg-gray-50 text-gray-900 sm:pl-6"},"Client"),n.createElement("th",{title:"Season",scope:"col",className:"whitespace-nowrap text-center px-1 py-3.5 text-left text-sm font-semibold bg-gray-50 text-gray-900"},"Season"),tn.map((function(t){return n.createElement("th",{key:t.abbr,title:t.title,scope:"col",className:"whitespace-nowrap text-center px-1 py-3.5 text-left text-sm font-semibold bg-gray-50 text-gray-900"},t.abbr)}))))},Ya=function(t){return n.createElement("div",{className:"flex flex-col inline-block min-w-full align-middle "},n.createElement("div",{className:"flex-grow shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},n.createElement("table",{className:"min-w-full divide-y divide-gray-300 relative table-fixed"},t.header?n.createElement(t.header,null):"",n.createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},t.children))))},$a=function(t){var e=t.client.isJust?t.client.value.seasons():[],r=t.client.isJust?t.client.value:[];return t.client.isJust?n.createElement("div",{className:xe("bg-white bg-blue-100 border-b-2 border-b-gray-100",t.className)},n.createElement(Ya,{header:Za},e.map((function(e){return n.createElement(Xa,{key:e,setSelectedClient:t.setSelectedClient,clickable:!0,clients:[r],season:e})})))):n.createElement(n.Fragment,null)};function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Ja(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rs(r.key),r)}}function Qa(t,e){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qa(t,e)}function ts(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function es(t){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},es(t)}function ns(t,e,n){return(e=rs(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rs(t){var e=function(t,e){if("object"!==Ka(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ka(e)?e:String(e)}var is=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qa(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=es(o);if(a){var n=es(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ka(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ts(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ns(ts(t=s.call.apply(s,[this].concat(n))),"state",{errorMessage:""}),ns(ts(t),"logErrorToServices",console.log),t}return e=l,i=[{key:"getDerivedStateFromError",value:function(t){return{errorMessage:t.toString()}}}],(r=[{key:"componentDidCatch",value:function(t,e){Ue("ErrorBoundary",t.toString()),this.logErrorToServices(t.toString(),e.componentStack)}},{key:"render",value:function(){return this.state.errorMessage?n.createElement("p",null,this.state.errorMessage):this.props.children}}])&&Ja(e.prototype,r),i&&Ja(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.Component);function os(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const as=function(){_a([za,Fa]);var t=ja.metasByGroup,e=Object.values(t).filter((function(t){return"Note"!==t.block()})),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return os(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?os(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(Rt()),2),i=r[0],o=r[1];return(0,n.useEffect)((function(){i.isJust&&function(t){Fa.service.send({type:fa,payload:t})}(i)}),[i]),n.createElement(is,null,n.createElement("div",{className:""},n.createElement("div",{className:"mt-16"},n.createElement($a,{client:i,setSelectedClient:o}),n.createElement(Ya,{header:Za},n.createElement(Xa,{setSelectedClient:o,clickable:!0,clients:e,season:""})))))};var ss=function(t){return t&&t.body&&t.body.length>0&&t.head&&t.head.length>0},ls=function(t,e){return e.map((function(e){return t.head.indexOf(e)}))},us=function(t,e){var n=e.map((function(e){return t.head[e]})),r=t.body.map((function(t){return e.map((function(e){return t[e]}))}));return{head:n,body:r}},cs=function(t,e){var n=ls(t,e);return us(t,n)},hs=function(t,e){var n=function(t,e){return t.head.filter((function(t){return!e.includes(t)})).map((function(e){return t.head.indexOf(e)}))}(t,e);return us(t,n)},fs=function(t,e){return t.body.map((function(t){return t[e]}))},ds=function(t){var e={};return t.head.forEach((function(n,r){e[n]=t.body.map((function(t){return t[r]}))})),e},ps=function(t){return t[t.Empty=0]="Empty",t[t.Generic=1]="Generic",t[t.EmRaw=2]="EmRaw",t[t.EmClean=3]="EmClean",t[t.GrRaw=4]="GrRaw",t[t.GrClean=5]="GrClean",t[t.PctAgEM=6]="PctAgEM",t[t.PctAgGR=7]="PctAgGR",t[t.DEX=8]="DEX",t[t.TerraLogga=9]="TerraLogga",t[t.DLog=10]="DLog",t[t.SoilPoints=11]="SoilPoints",t[t.SoilFusion=12]="SoilFusion",t}({}),ms=function(){return{soilPoints:{type:ps.Empty,csv:{head:[],body:[]}},soilPointsMeta:Rt(),soilDataMetas:[],soilHorizonData:{},soilFusion:{type:ps.Empty,csv:{head:[],body:[]}},soilSampleIds:[],soilPointsXY:[]}},vs="http://localhost:3001/api/v1/upload",gs={data:null,error:null},ys=new ba("Network Soil Points Machine");function bs(t){return bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(t)}function _s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_s(Object(n),!0).forEach((function(e){ws(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ws(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==bs(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bs(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ys.observer.subscribe({next:function(t){switch(t.value){case sa:gs={data:null,error:null};break;case ca:var e=t.event.payload;if(!e.isJust)return void ys.service.send({type:ma});var n=(e=e.value).getCleanSoilPoints();if(!n)return void ys.service.send({type:ma});fetch("http://localhost:3001/api/v1/data/csv/".concat(n.uid),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Network response was not ok, status: ".concat(t.status," ").concat(t.statusText));return t.json()})).then((function(t){gs.data={csv:t,meta:n},ys.service.send({type:pa})})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),gs.error=t.message,ys.service.send({type:ma})}))}}});var Ss={data:null,error:null},Es=new ba("Network Soil Samples Machine");Es.observer.subscribe({next:function(t){switch(t.value){case sa:Ss={data:null,error:null};break;case ca:var e=t.event.payload;if(!e.isJust)return void Es.service.send({type:ma});var n=(e=e.value).getCleanSoilData();if(!n||0==n.length)return void Es.service.send({type:ma});var r=n.map((function(t){return fetch("http://localhost:3001/api/v1/data/csv/".concat(t.uid),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Network response was not ok, status: ".concat(e.status," ").concat(e.statusText));return e.json().then((function(e){switch(t.variation.toLowerCase()){case"horizon-0":return{0:e};case"horizon-1":return{1:e};case"horizon-2":return{2:e};default:return je("Network Soil Samples Machine","Unknown horizon variation ".concat(t.variation)),{0:{head:[],body:[]}}}}))})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),Ss.error=t.message,Es.service.send({type:ma})}))}));Promise.all(r).then((function(t){return{metas:n,csvs:t.reduce((function(t,e){return xs(xs({},t),e)}),{})}})).then((function(t){Ss.data=t,Es.service.send({type:pa})}))}}});var Ms=function(t,e,n){return new Promise((function(r,i){r({manifest:{variation:null==n?void 0:n.variation,season:null==n?void 0:n.season,type:null==n?void 0:n.type,status:null==n?void 0:n.status,format:null==n?void 0:n.format},owner:{dealer:null==n?void 0:n.dealer,client:null==n?void 0:n.client,block:null==n?void 0:n.block,field:null==n?void 0:n.field},payload:{overwrite:n.overwrite,mimetype:t,data:e}})}))},Ts=function(t){return new Promise((function(e,n){if(void 0!==t){var r=t.type,i=new FileReader;i.onload=function(t){var n=t.target.result,i=Buffer.from(n).toString("base64");e({data:i,mime:r})},i.onerror=function(t){n("File reading has failed: ".concat(t))},i.readAsArrayBuffer(t)}else n("File reading has failed: ".concat(t))}))},As=function(t){var e,n=Ee();return null!==(e=t.season)&&void 0!==e&&e.toString().match(/^[0-9]{4}$/)?function(t){return null!==t&&!isNaN(t)&&void 0!==t&&t!==1/0&&t!==-1/0}(parseInt(t.season))?(n.includes(parseInt(t.season))||function(t,e){var n=function(t,e){var n=(new Date).getTime(),r=Te(e);return{ts:n,uid:be(),value:null,message:e,checksum:r,warnings:[],level:Le.Info,label:t}}(t,e);Ie.next(n)}("Check season","Season should be between ".concat(n[0]," and ").concat(n[n.length-1])),0===ke(t.dealer).length?(Ue("Dealer is required","Dealer is empty, please specify a dealer"),!1):0===ke(t.client).length?(Ue("Client is required","Client is empty, please specify a client"),!1):0===ke(t.block).length?(Ue("Block is required","Block is empty, please specify a block"),!1):0!=ke(t.field).length||(Ue("Field is required","Field is empty, please specify a field"),!1)):(Ue("Invalid season","Season must be a number"),!1):(Ue("Invalid season","Season must be a full year"),!1)},Os=function(t,e,n,r,i){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"na";return{season:t.season,dealer:t.dealer,client:t.client,block:t.block,field:t.field,format:Xe(Ve[r]),type:Xe(Ge[e]),status:Xe(qe[n]),variation:a,path:null==i||null===(o=i.first())||void 0===o?void 0:o.path,overwrite:t.overwrite,remote:!1,flagged:!1,archived:!1,modified:(new Date).toISOString(),created:(new Date).toISOString(),modifiedBy:"System",createdBy:"System"}},Ps=new ba("Network Soil Photo Upload Machine");Ps.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.sampleId,i=e.props;(o=n,o.preventDefault(),o.stopPropagation(),new Promise((function(t,e){if(o.dataTransfer.files&&o.dataTransfer.files.length>0){var n=o.dataTransfer.files[0],r=n.type,i=new FileReader;i.onload=function(e){var n=e.target.result,i=Buffer.from(n).toString("base64");t({data:i,mime:r})},i.onerror=function(t){e("File reading has failed: ".concat(t))},i.readAsArrayBuffer(n)}}))).then((function(t){var e,n=t.data,o=t.mime;switch(o){case"image/jpeg":(e=Os(i,Ge.SoilPhoto,qe.Clean,Ve.Jpg,null)).variation=r;break;case"image/png":(e=Os(i,Ge.SoilPhoto,qe.Clean,Ve.Png,null)).variation=r}Ms(o,n,e).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/soil-photo"),{owner:n,manifest:e,payload:r}).then((function(t){Ps.service.send(pa),Ps.reset(),Pa(t)})).catch((function(t){Ps.service.send(ma),Fe(t,"cebfc614")}))}))})).catch((function(t){Ps.service.send(ma),Ue("Importing Soil Photo Failed",t)}))}var o}});var Cs=new ba("Network Soil Samples Upload Machine");Cs.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.meta;Ts(n).then((function(t){var e=t.data,n=t.mime;Ms(n,e,r).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/soil-samples"),{owner:n,manifest:e,payload:r}).then((function(t){Cs.service.send(pa),Cs.reset(),Pa(t)})).catch((function(t){Cs.service.send(ma)}))}))})).catch((function(t){Cs.service.send(ma),je("Importing Soil Samples Failed",t)}))}}});var ks=new ba("Network Soil Points Upload Machine");function Rs(t){return Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(t)}function Ns(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ns(Object(n),!0).forEach((function(e){Is(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Is(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Rs(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Rs(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ks.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.meta;Ts(n).then((function(t){var e=t.data,n=t.mime;Ms(n,e,r).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/soil-points"),{owner:n,manifest:e,payload:r}).then((function(t){ks.service.send(pa),ks.reset(),Pa(t)})).catch((function(t){ks.service.send(ma)}))}))})).catch((function(t){ks.service.send(ma),je("Importing Soil Points Failed",t)}))}}});var Ds={data:ms(),maps:{soilMapMetas:{},soilMapUrls:{}},photos:{soilPhotoMetas:{},soilPhotoUrls:{}}},js=new ba("Soil Machine");js.observer.subscribe((function(t){switch(t.value){case sa:Ds=Ls(Ls({},Ds),{},{data:ms()});break;case ua:Ds.data.soilSampleIds=Ds.data.soilPoints.csv.body.map((function(t){return t[0]})),Ds.data.soilPointsXY=Ds.data.soilPoints.csv.body.map((function(t){return[parseFloat(t[1]),parseFloat(t[2])]})),js.service.send(pa)}})),ys.observer.subscribe({next:function(t){t.event.type===pa&&(Ds.data.soilPoints={type:ps.SoilPoints,csv:gs.data.csv},Ds.data.soilPointsMeta=kt(gs.data.meta),js.service.send(fa))}}),Es.observer.subscribe({next:function(t){t.event.type===pa&&(Ds.data.soilDataMetas=Ss.data.metas,Ds.data.soilHorizonData=Ss.data.csvs,js.service.send(fa))}}),ks.observer.subscribe({next:function(t){t.event.type===pa&&(ys.reset(),ys.service.send(da,{payload:ja.client.value}))}}),Cs.observer.subscribe({next:function(t){t.event.type===pa&&(Es.reset(),Es.service.send(da,{payload:ja.client.value}))}});var zs=new ba("Soil Photos Machine");zs.observer.subscribe({next:function(t){switch(t.value){case sa:Ds=Ls(Ls({},Ds),{},{photos:{soilPhotoMetas:{},soilPhotoUrls:{}}});break;case ca:if(!ja.client.isJust)return void zs.service.send(ma);if(ja.client.isJust){var e=function(t,e){return new Promise((function(n,r){var i=e.getSoilPhotos();t.photos.soilPhotoMetas=i.reduce((function(t,e){return t[e.variation]=e,t}),{}),n(null)}))}(Ds,ja.client.value),n=function(t,e){return new Promise((function(e,n){var r=t.photos.soilPhotoMetas;Ds.photos.soilPhotoUrls=Object.keys(r).reduce((function(t,e){return t[e]={url:"".concat("http://localhost:3001/api/v1/photo/soil","/").concat(r[e].uid),ref:e,uid:r[e].uid},t}),{}),e(null)}))}(Ds,ja.client.value);Promise.all([e,n]).then((function(){zs.service.send(pa)})).catch((function(t){De("Error loading soil photos",t),zs.service.send(ma)}))}}}}),Ps.observer.subscribe({next:function(t){t.event.type===pa&&(zs.reset(),zs.service.send(da))}});var Us=new ba("Soil Maps Machine");Us.observer.subscribe({next:function(t){switch(t.value){case sa:Ds=Ls(Ls({},Ds),{},{maps:{soilMapMetas:{},soilMapUrls:{}}});break;case ca:if(!ja.client.isJust)return void Us.service.send(ma);if(ja.client.isJust){var e=function(t,e){return new Promise((function(n,r){var i=e.getInterpolatedMaps();t.maps.soilMapMetas=i.reduce((function(t,e){return t[e.variation]=e,t}),{}),n(null)}))}(Ds,ja.client.value),n=function(t,e){return new Promise((function(e,n){var r=t.maps.soilMapMetas,i=Object.keys(r).reduce((function(t,e){var n=r[e],i=n.getGpsBoundingBox(),o=n.getPrjBoundingBox(),a={name:n.format,url:function(t){return"".concat("http://localhost:3001/api/v1/map/image","/").concat(t.toString(),"/").concat(r[e].uid)},bbox_gps:[i.min_x,i.min_y,i.max_x,i.max_y],bbox_prj:[o.min_x,o.min_y,o.max_x,o.max_y]};return console.log(a),t[e]=a,t}),{});Ds.maps.soilMapUrls=i,e(null)}))}(Ds,ja.client.value);Promise.all([e,n]).then((function(){Us.service.send(pa)})).catch((function(t){console.error("Error loading soil maps",t),De("Error loading soil maps",t),Us.service.send(ma)}))}}}});var Bs=[{menuName:"Off",menuType:0},{menuName:"Small",menuType:1},{menuName:"Medium",menuType:2},{menuName:"Large",menuType:3},{menuName:"Full",menuType:4}],Fs=[{menuName:"Blue",menuType:0},{menuName:"LimeGreen",menuType:1},{menuName:"Yellow",menuType:2},{menuName:"Red",menuType:3},{menuName:"White",menuType:4},{menuName:"Black",menuType:5}],Hs=[{menuName:"0-10",menuType:0},{menuName:"A",menuType:1},{menuName:"B",menuType:2}],Ws="sk.eyJ1IjoibWlsdmVydG9uIiwiYSI6ImNrenRhaWd3cTB6anIyd3BrZ3Jzc2czbHMifQ.FvHS5P4tdvx44VsETgedmg",Vs={token:Ws,url:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=".concat(Ws),attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>'},Gs=function(t){return t.Default="default",t.BlackAndWhite="black-and-white",t.Gradient="gradient",t}({}),qs=function(){return{selectedHorizon:0,selectedHorizonName:"0-10",selectedMapSize:2,selectedSoilHeader:-1,selectedSoilHeaderName:"NA",selectedMap:-1,selectedMapMenuEntry:{menuName:"NA",menuType:-1},mapMenu:[],shrinkTable:!0,colorTable:!1,mapOpacity:1,showBoundaries:!0,showPoints:!0,scrollZoom:!1,pointColor:0,selectedPointColor:3,mapZoom:12,mapFit:0,mapVariant:Gs.Default}};function Xs(t){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(t)}function Zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zs(Object(n),!0).forEach((function(e){$s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Xs(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Xs(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ks=function(t){return[t.lat,t.lng]},Js=function(t,e){return function(n){return n>=t&&n<e}},Qs=function(t){return function(e){return e<t}},tl=function(t){return function(e){return e>=t}},el=[Js(0,30),Js(30,40),Js(40,60),tl(60)],nl=[Js(0,10),Js(10,20),Js(20,30),tl(30)],rl=[tl(30),Js(15,30),Js(6,15),Qs(6)],il=[Qs(4.5),Js(4.5,4.8),Js(4.8,5.5),tl(5.5)],ol=function(t,e){return e.findIndex((function(e){return e(t)}))},al=function(t){switch(t){case 0:return"#ef4444";case 1:return"#f97316";case 2:return"#eab308";case 3:return"#22c55e"}},sl=function(t,e,n){var r=parseFloat(e);if(isNaN(r))return n;if(t.startsWith("Soil K Colwell[ppm]")){var i=ol(r,el);return al(i)}if(t.startsWith("Soil P Colwell[ppm]")){var o=ol(r,nl);return al(o)}if(t.startsWith("Soil Na %")){var a=ol(r,rl);return al(a)}if(t.startsWith("Soil pH")&&!t.endsWith("CaCl")){var s=ol(r,il);return al(s)}return n};function ll(t){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(t)}function ul(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){fl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fl(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ll(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ll(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ll(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dl={toolbarState:qs(),soilDataState:{selectedHorizonData:{head:[],body:[]},selectedHorizonDataPoints:[],shrunkHorizonData:{head:[],body:[]},selectedColumnData:{columnIndex:-1,columnData:[]},combinedHorizonData:{}}},pl=new ba("Soil UI Machine");pl.observer.subscribe({next:function(t){switch(t.value){case sa:dl=hl(hl({},dl),{},{toolbarState:qs()});break;case ua:var e=t.event.payload;dl=hl(hl({},dl),{},{toolbarState:hl(hl({},dl.toolbarState),e)}),pl.service.send({type:pa})}}});var ml=new ba("Soil UI Data Machine");ml.observer.subscribe({next:function(t){switch(t.value){case sa:dl=hl(hl({},dl),{},{soilDataState:{selectedHorizonData:{head:[],body:[]},selectedHorizonDataPoints:[],shrunkHorizonData:{head:[],body:[]},selectedColumnData:{columnIndex:-1,columnData:[]},combinedHorizonData:{}}});break;case ua:var e=t.event.payload;dl=hl(hl({},dl),{},{soilDataState:hl(hl({},dl.soilDataState),e)}),ml.service.send({type:pa})}}}),qo(js.observer,pl.observer).subscribe({next:function(t){if(t.event.type===pa){var e=Ds.data.soilHorizonData[dl.toolbarState.selectedHorizon]||{head:[],body:[]},n=e.head.map((function(t){return ke(t)})),r=n.findIndex((function(t){return t.startsWith("lat")})),i=n.findIndex((function(t){return t.startsWith("lon")}));if(-1===r||-1===i)return[];var o=e.body.map((function(t){return function(t,e,n){return[parseFloat(t[e]),parseFloat(t[n])]}(t,r,i)})),a=(s=Ds.data.soilHorizonData,Ds.data.soilSampleIds,Object.keys(s).reduce((function(t,e){return s[e].head.reduce((function(t,n,r){var i=ls(s[e],["Sample ID"]),o=fs(s[e],i.first()),a=s[e].body.map((function(t,e){return t[r]})).map((function(t){return t.trim().length?t.trim():"NA"})),l=o.map((function(t,r){return{id:t,value:a[r],header:n,horizon:e,idGroup:t.split("-")[0].trim()}})),u=o.reduce((function(t,e){return t[e]=l.find((function(t){return t.id.startsWith(e)})),t}),{});return void 0===t[n]?t[n]=$s({},Hs[e].menuName,u):t[n]=Ys(Ys({},t[n]),{},$s({},Hs[e].menuName,u)),t}),t)}),{}));ml.service.send({type:fa,payload:{selectedHorizonData:e,selectedHorizonDataPoints:o,combinedHorizonData:a}})}var s}}),qo(Us.observer).subscribe({next:function(t){if(t.event.type===pa){var e=Object.keys(Ds.maps.soilMapUrls).map((function(t,e){return{menuName:t,menuType:e}}));e.splice(0,0,{menuName:"NA",menuType:-1}),pl.service.send({type:fa,payload:{mapMenu:e}})}}});var vl=["Longitude","Latitude","Code","Depth Min[cm]","Depth Max[cm]","Season"];qo(pl.observer).subscribe({next:function(t){if(t.event.type===pa){var e=dl.soilDataState.selectedHorizonData,n=dl.toolbarState.selectedSoilHeader,r=dl.soilDataState.combinedHorizonData,i=Object.keys(r)[n],o={};if(void 0!==n&&void 0!==i){var a=r[i],s=Hs.filter((function(t){return"NA"!==t.menuName})).map((function(t){return t.menuName})),l=Ds.data.soilSampleIds.map((function(t){return s.reduce((function(e,n){var r={};Object.values(a[n]).forEach((function(t){return r[t.idGroup]=t}));var i,o=r[t];return[].concat(function(t){if(Array.isArray(t))return ul(t)}(i=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return ul(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ul(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),void 0!==o?[o.value]:[" - "])}),[])})),u={columnIndex:n,columnData:l};o=hl(hl({},o),{},{selectedColumnData:u,selectedColumnHeaderName:i})}else o=hl(hl({},o),{},{selectedColumnData:{columnIndex:-1,columnData:[]},selectedColumnHeaderName:""});if(dl.toolbarState.shrinkTable){var c=function(t,e){var n=t.head.filter((function(t,n){return!e.includes(n)})),r=t.body.map((function(t){return t.filter((function(t,n){return!e.includes(n)}))}));return{head:n,body:r}}(e,ls(e,vl)),h=c.head.map((function(t){return t})),f=hl(hl({},c),{},{head:h});o=hl(hl({},o),{},{shrunkHorizonData:f})}else o=hl(hl({},o),{},{shrunkHorizonData:e});ml.service.send({type:fa,payload:o})}}});const gl=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"}))}));function yl(t){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(t)}function bl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bl(Object(n),!0).forEach((function(e){xl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xl(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==yl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==yl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===yl(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wl=function(t){var e=t.className,r=t.name,i=t.menu,o=t.selected,a=t.setSelected,s=(t.style,i);return n.createElement("select",{id:ke(r),name:r,value:o?o.menuName:"Loading...",className:e,onChange:function(t){var e=t.target.value,n=i.filter((function(t){return t.menuName===e})).first().menuType,r=_l(_l({},o),{},{menuName:e,menuType:n});a(r)}},s.map((function(t){return n.createElement("option",{className:"",key:t.menuType},t.menuName)})))};function Sl(t){return Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(t)}function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},El.apply(this,arguments)}function Ml(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tl(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Sl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Sl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Sl(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Al(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}i(6486);var Ol=function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Al(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Al(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(t.selected),2),r=(e[0],e[1],function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ml(Object(n),!0).forEach((function(e){Tl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t));return delete r.setSelected,delete r.selected,n.createElement("input",El({type:"number",value:t.selected,onChange:function(e){return t.setSelected(parseFloat(e.target.value))}},r))};function Pl(...t){return Array.from(new Set(t.flatMap((t=>"string"==typeof t?t.split(" "):[])))).filter(Boolean).join(" ")}function Cl(t,e,...n){if(t in e){let r=e[t];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map((t=>`"${t}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Cl),r}var kl,Rl,Nl=((Rl=Nl||{})[Rl.None=0]="None",Rl[Rl.RenderStrategy=1]="RenderStrategy",Rl[Rl.Static=2]="Static",Rl),Ll=((kl=Ll||{})[kl.Unmount=0]="Unmount",kl[kl.Hidden=1]="Hidden",kl);function Il({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:o=!0,name:a}){let s=jl(e,t);if(o)return Dl(s,n,r,a);let l=null!=i?i:0;if(2&l){let{static:t=!1,...e}=s;if(t)return Dl(e,n,r,a)}if(1&l){let{unmount:t=!0,...e}=s;return Cl(t?0:1,{0:()=>null,1:()=>Dl({...e,hidden:!0,style:{display:"none"}},n,r,a)})}return Dl(s,n,r,a)}function Dl(t,e={},r,i){let{as:o=r,children:a,refName:s="ref",...l}=Bl(t,["unmount","static"]),u=void 0!==t.ref?{[s]:t.ref}:{},c="function"==typeof a?a(e):a;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(e));let h={};if(e){let t=!1,n=[];for(let[r,i]of Object.entries(e))"boolean"==typeof i&&(t=!0),!0===i&&n.push(r);t&&(h["data-headlessui-state"]=n.join(" "))}if(o===n.Fragment&&Object.keys(Ul(l)).length>0){if(!(0,n.isValidElement)(c)||Array.isArray(c)&&c.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map((t=>`  - ${t}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((t=>`  - ${t}`)).join("\n")].join("\n"));let t=c.props,e="function"==typeof(null==t?void 0:t.className)?(...e)=>Pl(null==t?void 0:t.className(...e),l.className):Pl(null==t?void 0:t.className,l.className),r=e?{className:e}:{};return(0,n.cloneElement)(c,Object.assign({},jl(c.props,Ul(Bl(l,["ref"]))),h,u,function(...t){return{ref:t.every((t=>null==t))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}(c.ref,u.ref),r))}return(0,n.createElement)(o,Object.assign({},Bl(l,["ref"]),o!==n.Fragment&&u,o!==n.Fragment&&h),c)}function jl(...t){if(0===t.length)return{};if(1===t.length)return t[0];let e={},n={};for(let r of t)for(let t in r)t.startsWith("on")&&"function"==typeof r[t]?(null!=n[t]||(n[t]=[]),n[t].push(r[t])):e[t]=r[t];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map((t=>[t,void 0]))));for(let t in n)Object.assign(e,{[t](e,...r){let i=n[t];for(let t of i){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;t(e,...r)}}});return e}function zl(t){var e;return Object.assign((0,n.forwardRef)(t),{displayName:null!=(e=t.displayName)?e:t.name})}function Ul(t){let e=Object.assign({},t);for(let t in e)void 0===e[t]&&delete e[t];return e}function Bl(t,e=[]){let n=Object.assign({},t);for(let t of e)t in n&&delete n[t];return n}var Fl=Object.defineProperty,Hl=(t,e,n)=>(((t,e,n)=>{e in t?Fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);let Wl=new class{constructor(){Hl(this,"current",this.detect()),Hl(this,"handoffState","pending"),Hl(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},Vl=(t,e)=>{Wl.isServer?(0,n.useEffect)(t,e):(0,n.useLayoutEffect)(t,e)};function Gl(){let t=function(){let t="undefined"==typeof document;return r.useSyncExternalStore((()=>()=>{}),(()=>!1),(()=>!t))}(),[e,i]=n.useState(Wl.isHandoffComplete);return e&&!1===Wl.isHandoffComplete&&i(!1),n.useEffect((()=>{!0!==e&&i(!0)}),[e]),n.useEffect((()=>Wl.handoff()),[]),!t&&e}var ql;let Xl=null!=(ql=n.useId)?ql:function(){let t=Gl(),[e,r]=n.useState(t?()=>Wl.nextId():null);return Vl((()=>{null===e&&r(Wl.nextId())}),[e]),null!=e?""+e:void 0};var Zl=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Zl||{});function Yl(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=""===(null==e?void 0:e.getAttribute("disabled"));return(!r||!function(t){if(!t)return!1;let e=t.previousElementSibling;for(;null!==e;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}(n))&&r}function $l(t){let e=(0,n.useRef)(t);return Vl((()=>{e.current=t}),[t]),e}let Kl=function(t){let e=$l(t);return n.useCallback(((...t)=>e.current(...t)),[e])},Jl=Symbol();function Ql(...t){let e=(0,n.useRef)(t);(0,n.useEffect)((()=>{e.current=t}),[t]);let r=Kl((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}));return t.every((t=>null==t||(null==t?void 0:t[Jl])))?void 0:r}let tu=(0,n.createContext)(null);function eu(){let t=(0,n.useContext)(tu);if(null===t){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,eu),t}return t}let nu=zl((function(t,e){let n=Xl(),{id:r=`headlessui-label-${n}`,passive:i=!1,...o}=t,a=eu(),s=Ql(e);Vl((()=>a.register(r)),[r,a.register]);let l={ref:s,...a.props,id:r};return i&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in o&&delete o.onClick),Il({ourProps:l,theirProps:o,slot:a.slot||{},defaultTag:"label",name:a.name||"Label"})})),ru=Object.assign(nu,{}),iu=(0,n.createContext)(null);function ou(){let t=(0,n.useContext)(iu);if(null===t){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ou),t}return t}function au(){let[t,e]=(0,n.useState)([]);return[t.length>0?t.join(" "):void 0,(0,n.useMemo)((()=>function(t){let r=Kl((t=>(e((e=>[...e,t])),()=>e((e=>{let n=e.slice(),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}))))),i=(0,n.useMemo)((()=>({register:r,slot:t.slot,name:t.name,props:t.props})),[r,t.slot,t.name,t.props]);return n.createElement(iu.Provider,{value:i},t.children)}),[e])]}let su=zl((function(t,e){let n=Xl(),{id:r=`headlessui-description-${n}`,...i}=t,o=ou(),a=Ql(e);return Vl((()=>o.register(r)),[r,o.register]),Il({ourProps:{ref:a,...o.props,id:r},theirProps:i,slot:o.slot||{},defaultTag:"p",name:o.name||"Description"})})),lu=Object.assign(su,{});function uu(t){var e;if(t.type)return t.type;let n=null!=(e=t.as)?e:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function cu(t,e){let[r,i]=(0,n.useState)((()=>uu(t)));return Vl((()=>{i(uu(t))}),[t.type,t.as]),Vl((()=>{r||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&i("button")}),[r,e]),r}var hu=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(hu||{});let fu=zl((function(t,e){let{features:n=1,...r}=t;return Il({ourProps:{ref:e,"aria-hidden":2==(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&n)&&2!=(2&n)&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function du(t){"function"==typeof queueMicrotask?queueMicrotask(t):Promise.resolve().then(t).catch((t=>setTimeout((()=>{throw t}))))}function pu(){let t=[],e={addEventListener:(t,n,r,i)=>(t.addEventListener(n,r,i),e.add((()=>t.removeEventListener(n,r,i)))),requestAnimationFrame(...t){let n=requestAnimationFrame(...t);return e.add((()=>cancelAnimationFrame(n)))},nextFrame:(...t)=>e.requestAnimationFrame((()=>e.requestAnimationFrame(...t))),setTimeout(...t){let n=setTimeout(...t);return e.add((()=>clearTimeout(n)))},microTask(...t){let n={current:!0};return du((()=>{n.current&&t[0]()})),e.add((()=>{n.current=!1}))},style(t,e,n){let r=t.style.getPropertyValue(e);return Object.assign(t.style,{[e]:n}),this.add((()=>{Object.assign(t.style,{[e]:r})}))},group(t){let e=pu();return t(e),this.add((()=>e.dispose()))},add:e=>(t.push(e),()=>{let n=t.indexOf(e);if(n>=0)for(let e of t.splice(n,1))e()}),dispose(){for(let e of t.splice(0))e()}};return e}function mu(){let[t]=(0,n.useState)(pu);return(0,n.useEffect)((()=>()=>t.dispose()),[t]),t}let vu=(0,n.createContext)(null);vu.displayName="GroupContext";let gu=n.Fragment,yu=zl((function(t,e){let r=Xl(),{id:i=`headlessui-switch-${r}`,checked:o,defaultChecked:a=!1,onChange:s,name:l,value:u,form:c,...h}=t,f=(0,n.useContext)(vu),d=(0,n.useRef)(null),p=Ql(d,e,null===f?null:f.setSwitch),[m,v]=function(t,e,r){let[i,o]=(0,n.useState)(r),a=void 0!==t,s=(0,n.useRef)(a),l=(0,n.useRef)(!1),u=(0,n.useRef)(!1);return!a||s.current||l.current?!a&&s.current&&!u.current&&(u.current=!0,s.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,s.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[a?t:i,Kl((t=>(a||o(t),null==e?void 0:e(t))))]}(o,s,a),g=Kl((()=>null==v?void 0:v(!m))),y=Kl((t=>{if(Yl(t.currentTarget))return t.preventDefault();t.preventDefault(),g()})),b=Kl((t=>{t.key===Zl.Space?(t.preventDefault(),g()):t.key===Zl.Enter&&function(t){var e,n;let r=null!=(e=null==t?void 0:t.form)?e:t.closest("form");if(r){for(let e of r.elements)if(e!==t&&("INPUT"===e.tagName&&"submit"===e.type||"BUTTON"===e.tagName&&"submit"===e.type||"INPUT"===e.nodeName&&"image"===e.type))return void e.click();null==(n=r.requestSubmit)||n.call(r)}}(t.currentTarget)})),_=Kl((t=>t.preventDefault())),x=(0,n.useMemo)((()=>({checked:m})),[m]),w={id:i,ref:p,role:"switch",type:cu(t,d),tabIndex:0,"aria-checked":m,"aria-labelledby":null==f?void 0:f.labelledby,"aria-describedby":null==f?void 0:f.describedby,onClick:y,onKeyUp:b,onKeyPress:_},S=mu();return(0,n.useEffect)((()=>{var t;let e=null==(t=d.current)?void 0:t.closest("form");e&&void 0!==a&&S.addEventListener(e,"reset",(()=>{v(a)}))}),[d,v]),n.createElement(n.Fragment,null,null!=l&&m&&n.createElement(fu,{features:hu.Hidden,...Ul({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:c,checked:m,name:l,value:u})}),Il({ourProps:w,theirProps:h,slot:x,defaultTag:"button",name:"Switch"}))})),bu=Object.assign(yu,{Group:function(t){var e;let[r,i]=(0,n.useState)(null),[o,a]=function(){let[t,e]=(0,n.useState)([]);return[t.length>0?t.join(" "):void 0,(0,n.useMemo)((()=>function(t){let r=Kl((t=>(e((e=>[...e,t])),()=>e((e=>{let n=e.slice(),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}))))),i=(0,n.useMemo)((()=>({register:r,slot:t.slot,name:t.name,props:t.props})),[r,t.slot,t.name,t.props]);return n.createElement(tu.Provider,{value:i},t.children)}),[e])]}(),[s,l]=au(),u=(0,n.useMemo)((()=>({switch:r,setSwitch:i,labelledby:o,describedby:s})),[r,i,o,s]),c=t;return n.createElement(l,{name:"Switch.Description"},n.createElement(a,{name:"Switch.Label",props:{htmlFor:null==(e=u.switch)?void 0:e.id,onClick(t){r&&("LABEL"===t.currentTarget.tagName&&t.preventDefault(),r.click(),r.focus({preventScroll:!0}))}}},n.createElement(vu.Provider,{value:u},Il({ourProps:{},theirProps:c,defaultTag:gu,name:"Switch.Group"}))))},Label:ru,Description:lu});function _u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}function xu(t){t.name;var e=t.className,r=t.toggle,i=t.default,o=r;return n.createElement(bu,{checked:i,onChange:o,className:_u(e,i?"bg-blue-600":"bg-gray-300","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2")},n.createElement("span",{className:"sr-only"},"Use setting"),n.createElement("span",{className:_u(i?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")},n.createElement("span",{className:_u(i?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"),"aria-hidden":"true"},n.createElement("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12"},n.createElement("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),n.createElement("span",{className:_u(i?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"),"aria-hidden":"true"},n.createElement("svg",{className:"h-3 w-3 text-blue-600",fill:"currentColor",viewBox:"0 0 12 12"},n.createElement("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})))))}var wu=function(t){var e=t.label,r=t.menu,i=t.selected,o=t.setSelected;return n.createElement("div",{className:"control-container-col"},e?n.createElement("label",{htmlFor:"soil-results",className:"lbl-xs lbl-badge mb-1"},e):null,n.createElement(wl,{name:"soil-results",className:"text-xs string-select",menu:r,selected:i,setSelected:o}))},Su=function(t){var e=t.label,r=t.selected,i=t.setSelected;return n.createElement("div",{className:"control-container-col"},n.createElement("label",{htmlFor:"shrink-table",className:"lbl-xs lbl-badge mb-1"},e),n.createElement("div",{className:"toggle-middle"},n.createElement(xu,{name:"no",default:r,toggle:i})))},Eu=function(t){var e=t.label,r=t.selected,i=t.setSelected,o=t.min,a=t.max,s=t.step;return n.createElement("div",{className:"control-container-col"},n.createElement("label",{htmlFor:"opacity",className:"lbl-xs lbl-badge mb-1"},e),n.createElement("div",{className:""},n.createElement(Ol,{className:"number-input-xs",id:"opacity",name:"Opacity",min:o,max:a,step:s,selected:r,setSelected:i})))};function Mu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Tu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tu(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Au=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Map Size",menu:Bs,selected:Bs[dl.toolbarState.selectedMapSize],setSelected:function(t){return e({selectedMapSize:t.menuType})}})},Ou=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Horizon",menu:Hs,selected:Hs[dl.toolbarState.selectedHorizon],setSelected:function(t){return e({selectedHorizon:t.menuType,selectedHorizonName:t.menuName})}})},Pu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]),r=Object.keys(dl.soilDataState.combinedHorizonData).map((function(t,e){return{menuName:t,menuType:e}}));return r.splice(0,0,{menuName:"NA",menuType:-1}),n.createElement(wu,{label:"Header",menu:r,selected:r[dl.toolbarState.selectedSoilHeader+1],setSelected:function(t){e({selectedSoilHeader:t.menuType,selectedSoilHeaderName:t.menuName})}})},Cu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]),r=dl.toolbarState.mapMenu;return n.createElement(wu,{label:"Map",menu:r,selected:dl.toolbarState.selectedMapMenuEntry,setSelected:function(t){return e({selectedMap:t.menuType,selectedMapMenuEntry:t,mapFit:dl.toolbarState.mapFit+1})}})},ku=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(Su,{label:"Shrink",selected:dl.toolbarState.shrinkTable,setSelected:function(){return e({shrinkTable:!dl.toolbarState.shrinkTable})}})},Ru=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(Eu,{label:"Opacity",selected:dl.toolbarState.mapOpacity,setSelected:function(t){return e({mapOpacity:t})},min:0,max:1,step:.05})},Nu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(Su,{label:"Boundaries",selected:dl.toolbarState.showBoundaries,setSelected:function(){return e({showBoundaries:!dl.toolbarState.showBoundaries})}})},Lu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(Su,{label:"Points",selected:dl.toolbarState.showPoints,setSelected:function(){return e({showPoints:!dl.toolbarState.showPoints})}})},Iu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement("div",{className:"control-container-col"},n.createElement("label",{htmlFor:"fit-map",className:"lbl-xs lbl-badge mb-1"},"Fit"),n.createElement("button",{className:"flex-auto hover:text-blue-500",onClick:function(){return e({mapFit:dl.toolbarState.mapFit+1})}},n.createElement(gl,{className:"h-6 w-full"})))},Du=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(Su,{label:"Scroll Zoom",selected:dl.toolbarState.scrollZoom,setSelected:function(){return e({scrollZoom:!dl.toolbarState.scrollZoom})}})},ju=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Point Color",menu:Fs,selected:Fs[dl.toolbarState.pointColor],setSelected:function(t){return e({pointColor:t.menuType})}})},zu=function(){var t=Mu(wa(pl),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Selected Color",menu:Fs,selected:Fs[dl.toolbarState.selectedPointColor],setSelected:function(t){return e({selectedPointColor:t.menuType})}})};const Uu=function(t){var e=t.id,r=xa(pl);return n.createElement("div",{key:e+r,className:"flex flex-col relative text-xs justify-start sticky top-16 z-40"},n.createElement("div",{className:"flex flex-row w-full"},n.createElement("div",{className:"bg-blue-100 flex flex-row p-2 border-r-4 border-gray-100 "},n.createElement(Au,null)),n.createElement("div",{className:"bg-gray-200 flex flex-row p-2 border-r-4 border-gray-100 space-x-2"},n.createElement(Ou,null),n.createElement(Pu,null),n.createElement(ku,null)),n.createElement("div",{className:"bg-blue-100 flex flex-row p-2 border-r-4 border-gray-100 space-x-2"},n.createElement(Cu,null),n.createElement(Ru,null),n.createElement(Nu,null),n.createElement(Lu,null),n.createElement(Iu,null)),n.createElement("div",{className:"bg-gray-200 flex flex-row p-2 border-r-4 border-gray-100 hidden 2xl:flex space-x-2"},n.createElement(ju,null),n.createElement(zu,null),n.createElement(Du,null))))};function Bu(t,e){return Object.freeze({...t,...e})}const Fu=(0,n.createContext)(null),Hu=Fu.Provider;function Wu(){const t=(0,n.useContext)(Fu);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}var Vu=i(3935),Gu=i.t(Vu,2);function qu(t){function e(e,r){const{instance:i,context:o}=t(e).current;return(0,n.useImperativeHandle)(r,(()=>i)),null==e.children?null:n.createElement(Hu,{value:o},e.children)}return(0,n.forwardRef)(e)}function Xu(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Zu(t,e){return null==e?function(e,r){const i=(0,n.useRef)();return i.current||(i.current=t(e,r)),i}:function(r,i){const o=(0,n.useRef)();o.current||(o.current=t(r,i));const a=(0,n.useRef)(r),{instance:s}=o.current;return(0,n.useEffect)((function(){a.current!==r&&(e(s,r,a.current),a.current=r)}),[s,r,i]),o}}function Yu(t,e){const r=(0,n.useRef)(e);(0,n.useEffect)((function(){e!==r.current&&null!=t.attributionControl&&(null!=r.current&&t.attributionControl.removeAttribution(r.current),null!=e&&t.attributionControl.addAttribution(e)),r.current=e}),[t,e])}function $u(t,e){const r=(0,n.useRef)();(0,n.useEffect)((function(){return null!=e&&t.instance.on(e),r.current=e,function(){null!=r.current&&t.instance.off(r.current),r.current=null}}),[t,e])}function Ku(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Ju(t,e){(0,n.useEffect)((function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}}),[e,t])}function Qu(t){return function(e){const n=Wu(),r=t(Ku(e,n),n);return Yu(n.map,e.attribution),$u(r.current,e.eventHandlers),Ju(r.current,n),r}}function tc(t,e){const r=function(t,e){return function(n,r){const i=Wu(),o=t(Ku(n,i),i);return Yu(i.map,n.attribution),$u(o.current,n.eventHandlers),e(o.current,i,n,r),o}}(Zu(t),e);return function(t){function e(e,r){const[i,o]=(0,n.useState)(!1),{instance:a}=t(e,o).current;(0,n.useImperativeHandle)(r,(()=>a)),(0,n.useEffect)((function(){i&&a.update()}),[a,i,e.children]);const s=a._contentNode;return s?(0,Vu.createPortal)(e.children,s):null}return(0,n.forwardRef)(e)}(r)}function ec(t,e){return qu((r=Zu(t,e),function(t){const e=Wu(),i=r(Ku(t,e),e);return $u(i.current,t.eventHandlers),Ju(i.current,e),function(t,e){const r=(0,n.useRef)();(0,n.useEffect)((function(){if(e.pathOptions!==r.current){const n=e.pathOptions??{};t.instance.setStyle(n),r.current=n}}),[t,e])}(i.current,t),i}));var r}var nc=i(5243);const rc=qu(Qu(Zu((function({bounds:t,url:e,...n},r){const i=new nc.ImageOverlay(e,t,n);return Xu(i,Bu(r,{overlayContainer:i}))}),(function(t,e,n){if(function(t,e,n){e.bounds instanceof nc.LatLngBounds&&e.bounds!==n.bounds&&t.setBounds(e.bounds),null!=e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),null!=e.zIndex&&e.zIndex!==n.zIndex&&t.setZIndex(e.zIndex)}(t,e,n),e.bounds!==n.bounds){const n=e.bounds instanceof nc.LatLngBounds?e.bounds:new nc.LatLngBounds(e.bounds);t.setBounds(n)}e.url!==n.url&&t.setUrl(e.url)}))));function ic(){return ic=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ic.apply(this,arguments)}function oc({bounds:t,boundsOptions:e,center:r,children:i,className:o,id:a,placeholder:s,style:l,whenReady:u,zoom:c,...h},f){const[d]=(0,n.useState)({className:o,id:a,style:l}),[p,m]=(0,n.useState)(null);(0,n.useImperativeHandle)(f,(()=>p?.map??null),[p]);const v=(0,n.useCallback)((n=>{if(null!==n&&null===p){const i=new nc.Map(n,h);null!=r&&null!=c?i.setView(r,c):null!=t&&i.fitBounds(t,e),null!=u&&i.whenReady(u),m(function(t){return Object.freeze({__version:1,map:t})}(i))}}),[]);(0,n.useEffect)((()=>()=>{p?.map.remove()}),[p]);const g=p?n.createElement(Hu,{value:p},i):s??null;return n.createElement("div",ic({},d,{ref:v}),g)}const ac=(0,n.forwardRef)(oc),sc=function(t){function e(e,r){const{instance:i}=t(e).current;return(0,n.useImperativeHandle)(r,(()=>i)),null}return(0,n.forwardRef)(e)}(Qu(Zu((function({url:t,...e},n){return Xu(new nc.TileLayer(t,Ku(e,n)),n)}),(function(t,e,n){!function(t,e,n){const{opacity:r,zIndex:i}=e;null!=r&&r!==n.opacity&&t.setOpacity(r),null!=i&&i!==n.zIndex&&t.setZIndex(i)}(t,e,n);const{url:r}=e;null!=r&&r!==n.url&&t.setUrl(r)}))));function lc(t){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(t)}function uc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fc(r.key),r)}}function cc(t,e,n){return e&&uc(t.prototype,e),n&&uc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hc(t,e,n){return(e=fc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fc(t){var e=function(t,e){if("object"!==lc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===lc(e)?e:String(e)}var dc=function(t){return t.reduce((function(t,e){return t+e}),0)},pc=function(t){return dc(t)/t.length},mc=function(t,e){var n=function(t,e){return t.map((function(t){return Math.pow(t-e,2)}))}(t,e);return dc(n)/(n.length-1)},vc=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc;return Math.sqrt(n(t,e))},gc=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},yc=cc((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),hc(this,"update",(function(t){isNaN(t)||(e.min=Math.min(e.min,t),e.max=Math.max(e.max,t))})),hc(this,"isUnset",(function(){return e.min===1/0||e.max===-1/0})),this.min=1/0,this.max=-1/0}));const bc=ec((function({data:t,...e},n){const r=new nc.GeoJSON(t,e);return Xu(r,Bu(n,{overlayContainer:r}))}),(function(t,e,n){e.style!==n.style&&(null==e.style?t.resetStyle():t.setStyle(e.style))})),_c={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},xc=1/298.257223563,wc=xc*(2-xc),Sc=Math.PI/180;class Ec{static fromTile(t,e,n){const r=Math.PI*(1-2*(t+.5)/Math.pow(2,e)),i=Math.atan(.5*(Math.exp(r)-Math.exp(-r)))/Sc;return new Ec(i,n)}static get units(){return _c}constructor(t,e){if(void 0===t)throw new Error("No latitude given.");if(e&&!_c[e])throw new Error(`Unknown unit ${e}. Use one of: ${Object.keys(_c).join(", ")}`);const n=6378.137*Sc*(e?_c[e]:1),r=Math.cos(t*Sc),i=1/(1-wc*(1-r*r)),o=Math.sqrt(i);this.kx=n*o*r,this.ky=n*o*i*(1-wc)}distance(t,e){const n=Ac(t[0]-e[0])*this.kx,r=(t[1]-e[1])*this.ky;return Math.sqrt(n*n+r*r)}bearing(t,e){const n=Ac(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.atan2(n,r)/Sc}destination(t,e,n){const r=n*Sc;return this.offset(t,Math.sin(r)*e,Math.cos(r)*e)}offset(t,e,n){return[t[0]+e/this.kx,t[1]+n/this.ky]}lineDistance(t){let e=0;for(let n=0;n<t.length-1;n++)e+=this.distance(t[n],t[n+1]);return e}area(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];for(let t=0,i=r.length,o=i-1;t<i;o=t++)e+=Ac(r[t][0]-r[o][0])*(r[t][1]+r[o][1])*(n?-1:1)}return Math.abs(e)/2*this.kx*this.ky}along(t,e){let n=0;if(e<=0)return t[0];for(let r=0;r<t.length-1;r++){const i=t[r],o=t[r+1],a=this.distance(i,o);if(n+=a,n>e)return Tc(i,o,(e-(n-a))/a)}return t[t.length-1]}pointToSegmentDistance(t,e,n){let[r,i]=e,o=Ac(n[0]-r)*this.kx,a=(n[1]-i)*this.ky,s=0;return 0===o&&0===a||(s=(Ac(t[0]-r)*this.kx*o+(t[1]-i)*this.ky*a)/(o*o+a*a),s>1?(r=n[0],i=n[1]):s>0&&(r+=o/this.kx*s,i+=a/this.ky*s)),o=Ac(t[0]-r)*this.kx,a=(t[1]-i)*this.ky,Math.sqrt(o*o+a*a)}pointOnLine(t,e){let n,r,i,o,a=1/0;for(let s=0;s<t.length-1;s++){let l=t[s][0],u=t[s][1],c=Ac(t[s+1][0]-l)*this.kx,h=(t[s+1][1]-u)*this.ky,f=0;0===c&&0===h||(f=(Ac(e[0]-l)*this.kx*c+(e[1]-u)*this.ky*h)/(c*c+h*h),f>1?(l=t[s+1][0],u=t[s+1][1]):f>0&&(l+=c/this.kx*f,u+=h/this.ky*f)),c=Ac(e[0]-l)*this.kx,h=(e[1]-u)*this.ky;const d=c*c+h*h;d<a&&(a=d,n=l,r=u,i=s,o=f)}return{point:[n,r],index:i,t:Math.max(0,Math.min(1,o))}}lineSlice(t,e,n){let r=this.pointOnLine(n,t),i=this.pointOnLine(n,e);if(r.index>i.index||r.index===i.index&&r.t>i.t){const t=r;r=i,i=t}const o=[r.point],a=r.index+1,s=i.index;!Mc(n[a],o[0])&&a<=s&&o.push(n[a]);for(let t=a+1;t<=s;t++)o.push(n[t]);return Mc(n[s],i.point)||o.push(i.point),o}lineSliceAlong(t,e,n){let r=0;const i=[];for(let o=0;o<n.length-1;o++){const a=n[o],s=n[o+1],l=this.distance(a,s);if(r+=l,r>t&&0===i.length&&i.push(Tc(a,s,(t-(r-l))/l)),r>=e)return i.push(Tc(a,s,(e-(r-l))/l)),i;r>t&&i.push(s)}return i}bufferPoint(t,e){const n=e/this.ky,r=e/this.kx;return[t[0]-r,t[1]-n,t[0]+r,t[1]+n]}bufferBBox(t,e){const n=e/this.ky,r=e/this.kx;return[t[0]-r,t[1]-n,t[2]+r,t[3]+n]}insideBBox(t,e){return Ac(t[0]-e[0])>=0&&Ac(t[0]-e[2])<=0&&t[1]>=e[1]&&t[1]<=e[3]}}function Mc(t,e){return t[0]===e[0]&&t[1]===e[1]}function Tc(t,e,n){const r=Ac(e[0]-t[0]),i=e[1]-t[1];return[t[0]+r*n,t[1]+i*n]}function Ac(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}function Oc(t){return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(t)}function Pc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Cc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cc(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==Oc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Oc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Oc(i)?i:String(i)),r)}var i}var Rc=function(t,e){return new jc(t.x-e.x,t.y-e.y)},Nc=function(t,e){return new jc(t.x+e.x,t.y+e.y)},Lc=function(t,e){return new jc(t.x*e,t.y*e)},Ic=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Dc=function(t){return new jc(t.x/Ic(t),t.y/Ic(t))},jc=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,n=[{key:"center",value:function(e){return new t(this.x+e.x/2,this.y+e.y/2)}},{key:"add",value:function(t){return Nc(this,t)}},{key:"subtract",value:function(t){return Rc(this,t)}},{key:"multiply",value:function(t){return Lc(this,t)}},{key:"divide",value:function(t){return function(t,e){return new jc(t.x/e,t.y/e)}(this,t)}},{key:"distance",value:function(t){return function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}(this,t)}},{key:"lerp",value:function(t,e){return function(t,e,n){return Nc(Lc(t,1-n),Lc(e,n))}(this,t,e)}},{key:"angle",value:function(t){return function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}(this,t)}},{key:"fromAngle",value:function(t){return function(t){return new jc(Math.cos(t),Math.sin(t))}(t)}},{key:"angleInDegrees",value:function(t){return function(t,e){var n=Rc(e,t);return 180*Math.atan2(n.y,n.x)/Math.PI}(this,t)}},{key:"angleIn360Degrees",value:function(t){return function(t,e){var n=Dc(new jc(e.x-t.x,e.y-t.y)),r=Math.atan2(n.y,-n.x)*(180/Math.PI)-90;return Math.abs((r-360)%360)}(this,t)}},{key:"normalize",value:function(){return Dc(this)}},{key:"magnitude",value:function(){return Ic(this)}},{key:"shift",value:function(t,e){return function(t,e,n){var r=t.angle(e)-Math.PI/2;return new jc(e.x+n*Math.cos(r+Math.PI/2),e.y+n*Math.sin(r+Math.PI/2))}(this,t,e)}},{key:"rotate",value:function(t){return function(t,e){return new jc(t.x*Math.cos(e)-t.y*Math.sin(e),t.x*Math.sin(e)+t.y*Math.cos(e))}(this,t)}},{key:"floor",value:function(){return new t(Math.floor(this.x),Math.floor(this.y))}},{key:"ceil",value:function(){return new t(Math.ceil(this.x),Math.ceil(this.y))}},{key:"round",value:function(){return new t(Math.round(this.x),Math.round(this.y))}},{key:"toString",value:function(){return"".concat(this.x,".").concat(this.y)}},{key:"asArray",value:function(){return[this.x,this.y]}},{key:"cmp",value:function(t){return this.x===t.x&&this.y===t.y}}],r=[{key:"from",value:function(){return new t(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},{key:"fromString",value:function(e){var n=Pc(e.split("."),2),r=n[0],i=n[1];return new t(parseFloat(r),parseFloat(i))}}],n&&kc(e.prototype,n),r&&kc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zc(t){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zc(t)}function Uc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Bc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bc(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wc(r.key),r)}}function Hc(t,e,n){return(e=Wc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wc(t){var e=function(t,e){if("object"!==zc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==zc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===zc(e)?e:String(e)}var Vc=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Hc(this,"isInitialized",(function(){var t=[180,90,-180,-90];return 4!==r.toArray().filter((function(e,n){return e===t[n]})).length})),Hc(this,"update",(function(t,e){var n=r;t>n.max_x&&(n.max_x=t),t<n.min_x&&(n.min_x=t),e>n.max_y&&(n.max_y=e),e<n.min_y&&(n.min_y=e)})),Hc(this,"updateWithPoints",(function(t){for(var e=0;e<t.length;e++){var n=t[e];r.update(n[0],n[1])}})),Hc(this,"updateUsingFeaturePoints",(function(t){for(var e=0;e<t.length;e++){var n=t[e];r.update(n.geometry.coordinates[0],n.geometry.coordinates[1])}})),Hc(this,"updateWithBoundingBox",(function(t){r.update(t.min_x,t.min_y),r.update(t.max_x,t.max_y)})),Hc(this,"updateWithBoundingBoxArray",(function(t,e,n,i){r.update(t,e),r.update(n,i)})),Hc(this,"updateWithBoundaries",(function(t){for(var e=0;e<t.length;e++){var n=Uc(t[e].bounding_box,4),i=n[0],o=n[1],a=n[2],s=n[3];r.update(i,o),r.update(a,s)}})),Hc(this,"toArray",(function(){return[r.min_x,r.min_y,r.max_x,r.max_y]})),Hc(this,"toObject",(function(){return{min_x:r.min_x,min_y:r.min_y,max_x:r.max_x,max_y:r.max_y}})),Hc(this,"haversine",(function(t,e){var n=Math.PI/180,r=t.y*n,i=t.x*n,o=e.y*n,a=o-r,s=e.x*n-i,l=Math.pow(Math.sin(a/2),2)+Math.cos(r)*Math.cos(o)*Math.pow(Math.sin(s/2),2);return l<0&&(l=0),l>1&&(l=1),2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3})),Hc(this,"widthInMeters",(function(){return r.haversine(new jc(r.min_x,r.min_y),new jc(r.max_x,r.min_y))})),Hc(this,"heightInMeters",(function(){return r.haversine(new jc(r.min_x,r.min_y),new jc(r.min_x,r.max_y))})),Hc(this,"adjustDimensionsWithHaversine",(function(){r.width=r.widthInMeters(),r.height=r.heightInMeters()})),Hc(this,"adjustDimensionsWithCheapRuler",(function(){var t=new Ec((r.min_y+r.max_y)/2,"meters");r.width=t.distance([r.min_x,r.min_y],[r.max_x,r.min_y]),r.height=t.distance([r.min_x,r.min_y],[r.min_x,r.max_y])})),Hc(this,"adjustDimensions",(function(){r.adjustDimensionsWithCheapRuler()})),Hc(this,"adjustDimensionsVictor",(function(){var t=40007863,e=(0,Math.abs)((r.max_y+r.min_y)/2)*(Math.PI/180),n=40075017*Math.cos(e);if(r.ratio_wh<r.ratio_hw){var i=n/t*r.ratio_wh;r.width=Math.abs(r.width*i)}else{var o=t/n*r.ratio_hw;r.height=Math.abs(r.height*o)}})),Hc(this,"toString",(function(){return"\n        width:".concat(r.width," height:").concat(r.height,"\n        \n        max_x:").concat(r.max_x," min_x:").concat(r.min_x,"\n\n        max_y:").concat(r.max_y," min_y:").concat(r.min_y,"\n        \n        dist_x:").concat(r.dist_x," dist_y:").concat(r.dist_y,"\n\n        ratio_wh:").concat(r.ratio_wh," ratio_hw:").concat(r.ratio_hw,"\n                \n        ")})),this.width=e,this.height=n,this.max_x=-180,this.min_x=180,this.max_y=-90,this.min_y=90}var e,n;return e=t,(n=[{key:"copy",value:function(){var e=new t(this.width,this.height);return e.max_x=this.max_x,e.min_x=this.min_x,e.max_y=this.max_y,e.min_y=this.min_y,e}},{key:"isUnset",value:function(){return 0===this.width||0===this.height||-180===this.max_x&&180===this.min_x&&-90===this.max_y&&90===this.min_y}},{key:"dist_x",get:function(){return this.max_x-this.min_x}},{key:"dist_y",get:function(){return this.max_y-this.min_y}},{key:"ratio_hw",get:function(){return this.dist_y/this.dist_x}},{key:"ratio_wh",get:function(){return this.dist_x/this.dist_y}},{key:"ratio_x",get:function(){return this.width/this.dist_x}},{key:"ratio_y",get:function(){return this.height/this.dist_y}},{key:"area",get:function(){return this.dist_x*this.dist_y}},{key:"center",get:function(){return[this.min_x+this.dist_x/2,this.min_y+this.dist_y/2]}}])&&Fc(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gc(t){return function(t){if(Array.isArray(t))return Zc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||Xc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xc(t,e){if(t){if("string"==typeof t)return Zc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zc(t,e):void 0}}function Zc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yc=function(t){var e=new Vc(0,0);e.updateWithPoints(t);var n=(e.min_y+e.max_y)/2,r=new Ec(n,"meters"),i=t.map((function(t){return[t[0],t[1]]}));return r.area([i])},$c=function(t){var e=t.show,r=t.boundary;if(e){var i=r.map((function(t){return function(t){var e={BOUNDARY:t.client,REGION:t.block,ID:t.field},n={bbox:Gc(t.bounding_box),type:"Polygon",coordinates:[t.exterior_ring.map((function(t){return[t[0],t[1]]}))].concat(Gc(t.interior_ring.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))))};return{type:"Feature",properties:e,geometry:n}}(t)})),o=i.map((function(t){return t.geometry.bbox})).flat().join("-");return n.createElement(n.Fragment,null,i.map((function(t,e){return n.createElement(bc,{key:e+o,data:t,style:{color:"limegreen",weight:2,fillColor:"transparent"}})})))}return n.createElement(n.Fragment,null,[])};const Kc=tc((function(t,e){return Xu(new nc.Popup(t,e.overlayContainer),e)}),(function(t,e,{position:r},i){(0,n.useEffect)((function(){const{instance:n}=t;function o(t){t.popup===n&&(n.update(),i(!0))}function a(t){t.popup===n&&i(!1)}return e.map.on({popupopen:o,popupclose:a}),null==e.overlayContainer?(null!=r&&n.setLatLng(r),n.openOn(e.map)):e.overlayContainer.bindPopup(n),function(){e.map.off({popupopen:o,popupclose:a}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(n)}}),[t,e,i,r])})),Jc=tc((function(t,e){return Xu(new nc.Tooltip(t,e.overlayContainer),e)}),(function(t,e,{position:r},i){(0,n.useEffect)((function(){const n=e.overlayContainer;if(null==n)return;const{instance:o}=t,a=t=>{t.tooltip===o&&(null!=r&&o.setLatLng(r),o.update(),i(!0))},s=t=>{t.tooltip===o&&i(!1)};return n.on({tooltipopen:a,tooltipclose:s}),n.bindTooltip(o),function(){n.off({tooltipopen:a,tooltipclose:s}),null!=n._map&&n.unbindTooltip()}}),[t,e,i,r])})),Qc=ec((function({center:t,children:e,...n},r){const i=new nc.CircleMarker(t,n);return Xu(i,Bu(r,{overlayContainer:i}))}),(function(t,e,n){e.center!==n.center&&t.setLatLng(e.center),null!=e.radius&&e.radius!==n.radius&&t.setRadius(e.radius)}));let th=(0,n.createContext)(null);th.displayName="OpenClosedContext";var eh=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(eh||{});function nh(){return(0,n.useContext)(th)}function rh({value:t,children:e}){return n.createElement(th.Provider,{value:t},e)}function ih(){let t=(0,n.useRef)(!1);return Vl((()=>(t.current=!0,()=>{t.current=!1})),[]),t}function oh(t,...e){t&&e.length>0&&t.classList.add(...e)}function ah(t,...e){t&&e.length>0&&t.classList.remove(...e)}function sh(t=""){return t.split(" ").filter((t=>t.trim().length>1))}let lh=(0,n.createContext)(null);lh.displayName="TransitionContext";var uh=(t=>(t.Visible="visible",t.Hidden="hidden",t))(uh||{});let ch=(0,n.createContext)(null);function hh(t){return"children"in t?hh(t.children):t.current.filter((({el:t})=>null!==t.current)).filter((({state:t})=>"visible"===t)).length>0}function fh(t,e){let r=$l(t),i=(0,n.useRef)([]),o=ih(),a=mu(),s=Kl(((t,e=Ll.Hidden)=>{let n=i.current.findIndex((({el:e})=>e===t));-1!==n&&(Cl(e,{[Ll.Unmount](){i.current.splice(n,1)},[Ll.Hidden](){i.current[n].state="hidden"}}),a.microTask((()=>{var t;!hh(i)&&o.current&&(null==(t=r.current)||t.call(r))})))})),l=Kl((t=>{let e=i.current.find((({el:e})=>e===t));return e?"visible"!==e.state&&(e.state="visible"):i.current.push({el:t,state:"visible"}),()=>s(t,Ll.Unmount)})),u=(0,n.useRef)([]),c=(0,n.useRef)(Promise.resolve()),h=(0,n.useRef)({enter:[],leave:[],idle:[]}),f=Kl(((t,n,r)=>{u.current.splice(0),e&&(e.chains.current[n]=e.chains.current[n].filter((([e])=>e!==t))),null==e||e.chains.current[n].push([t,new Promise((t=>{u.current.push(t)}))]),null==e||e.chains.current[n].push([t,new Promise((t=>{Promise.all(h.current[n].map((([t,e])=>e))).then((()=>t()))}))]),"enter"===n?c.current=c.current.then((()=>null==e?void 0:e.wait.current)).then((()=>r(n))):r(n)})),d=Kl(((t,e,n)=>{Promise.all(h.current[e].splice(0).map((([t,e])=>e))).then((()=>{var t;null==(t=u.current.shift())||t()})).then((()=>n(e)))}));return(0,n.useMemo)((()=>({children:i,register:l,unregister:s,onStart:f,onStop:d,wait:c,chains:h})),[l,s,i,f,d,h,c])}function dh(){}ch.displayName="NestingContext";let ph=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function mh(t){var e;let n={};for(let r of ph)n[r]=null!=(e=t[r])?e:dh;return n}let vh=Nl.RenderStrategy,gh=zl((function(t,e){let{show:r,appear:i=!1,unmount:o=!0,...a}=t,s=(0,n.useRef)(null),l=Ql(s,e);Gl();let u=nh();if(void 0===r&&null!==u&&(r=(u&eh.Open)===eh.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,h]=(0,n.useState)(r?"visible":"hidden"),f=fh((()=>{h("hidden")})),[d,p]=(0,n.useState)(!0),m=(0,n.useRef)([r]);Vl((()=>{!1!==d&&m.current[m.current.length-1]!==r&&(m.current.push(r),p(!1))}),[m,r]);let v=(0,n.useMemo)((()=>({show:r,appear:i,initial:d})),[r,i,d]);(0,n.useEffect)((()=>{if(r)h("visible");else if(hh(f)){let t=s.current;if(!t)return;let e=t.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&h("hidden")}else h("hidden")}),[r,f]);let g={unmount:o},y=Kl((()=>{var e;d&&p(!1),null==(e=t.beforeEnter)||e.call(t)})),b=Kl((()=>{var e;d&&p(!1),null==(e=t.beforeLeave)||e.call(t)}));return n.createElement(ch.Provider,{value:f},n.createElement(lh.Provider,{value:v},Il({ourProps:{...g,as:n.Fragment,children:n.createElement(yh,{ref:l,...g,...a,beforeEnter:y,beforeLeave:b})},theirProps:{},defaultTag:n.Fragment,features:vh,visible:"visible"===c,name:"Transition"})))})),yh=zl((function(t,e){var r,i;let{beforeEnter:o,afterEnter:a,beforeLeave:s,afterLeave:l,enter:u,enterFrom:c,enterTo:h,entered:f,leave:d,leaveFrom:p,leaveTo:m,...v}=t,g=(0,n.useRef)(null),y=Ql(g,e),b=null==(r=v.unmount)||r?Ll.Unmount:Ll.Hidden,{show:_,appear:x,initial:w}=function(){let t=(0,n.useContext)(lh);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),[S,E]=(0,n.useState)(_?"visible":"hidden"),M=function(){let t=(0,n.useContext)(ch);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),{register:T,unregister:A}=M;(0,n.useEffect)((()=>T(g)),[T,g]),(0,n.useEffect)((()=>{if(b===Ll.Hidden&&g.current)return _&&"visible"!==S?void E("visible"):Cl(S,{hidden:()=>A(g),visible:()=>T(g)})}),[S,g,T,A,_,b]);let O=$l({base:sh(v.className),enter:sh(u),enterFrom:sh(c),enterTo:sh(h),entered:sh(f),leave:sh(d),leaveFrom:sh(p),leaveTo:sh(m)}),P=function(t){let e=(0,n.useRef)(mh(t));return(0,n.useEffect)((()=>{e.current=mh(t)}),[t]),e}({beforeEnter:o,afterEnter:a,beforeLeave:s,afterLeave:l}),C=Gl();(0,n.useEffect)((()=>{if(C&&"visible"===S&&null===g.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[g,S,C]);let k=x&&_&&w,R=!C||w&&!x?"idle":_?"enter":"leave",N=function(t=0){let[e,r]=(0,n.useState)(t),i=ih(),o=(0,n.useCallback)((t=>{i.current&&r((e=>e|t))}),[e,i]),a=(0,n.useCallback)((t=>Boolean(e&t)),[e]),s=(0,n.useCallback)((t=>{i.current&&r((e=>e&~t))}),[r,i]),l=(0,n.useCallback)((t=>{i.current&&r((e=>e^t))}),[r]);return{flags:e,addFlag:o,hasFlag:a,removeFlag:s,toggleFlag:l}}(0),L=Kl((t=>Cl(t,{enter:()=>{N.addFlag(eh.Opening),P.current.beforeEnter()},leave:()=>{N.addFlag(eh.Closing),P.current.beforeLeave()},idle:()=>{}}))),I=Kl((t=>Cl(t,{enter:()=>{N.removeFlag(eh.Opening),P.current.afterEnter()},leave:()=>{N.removeFlag(eh.Closing),P.current.afterLeave()},idle:()=>{}}))),D=fh((()=>{E("hidden"),A(g)}),M);!function({immediate:t,container:e,direction:n,classes:r,onStart:i,onStop:o}){let a=ih(),s=mu(),l=$l(n);Vl((()=>{t&&(l.current="enter")}),[t]),Vl((()=>{let t=pu();s.add(t.dispose);let n=e.current;if(n&&"idle"!==l.current&&a.current)return t.dispose(),i.current(l.current),t.add(function(t,e,n,r){let i=n?"enter":"leave",o=pu(),a=void 0!==r?function(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}(r):()=>{};"enter"===i&&(t.removeAttribute("hidden"),t.style.display="");let s=Cl(i,{enter:()=>e.enter,leave:()=>e.leave}),l=Cl(i,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=Cl(i,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return ah(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),oh(t,...e.base,...s,...u),o.nextFrame((()=>{ah(t,...e.base,...s,...u),oh(t,...e.base,...s,...l),function(t,e){let n=pu();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(t),[o,a]=[r,i].map((t=>{let[e=0]=t.split(",").filter(Boolean).map((t=>t.includes("ms")?parseFloat(t):1e3*parseFloat(t))).sort(((t,e)=>e-t));return e})),s=o+a;if(0!==s){n.group((n=>{n.setTimeout((()=>{e(),n.dispose()}),s),n.addEventListener(t,"transitionrun",(t=>{t.target===t.currentTarget&&n.dispose()}))}));let r=n.addEventListener(t,"transitionend",(t=>{t.target===t.currentTarget&&(e(),r())}))}else e();n.add((()=>e())),n.dispose}(t,(()=>(ah(t,...e.base,...s),oh(t,...e.base,...e.entered),a())))})),o.dispose}(n,r.current,"enter"===l.current,(()=>{t.dispose(),o.current(l.current)}))),t.dispose}),[n])}({immediate:k,container:g,classes:O,direction:R,onStart:$l((t=>{D.onStart(g,t,L)})),onStop:$l((t=>{D.onStop(g,t,I),"leave"===t&&!hh(D)&&(E("hidden"),A(g))}))});let j=v,z={ref:y};return k?j={...j,className:Pl(v.className,...O.current.enter,...O.current.enterFrom)}:(j.className=Pl(v.className,null==(i=g.current)?void 0:i.className),""===j.className&&delete j.className),n.createElement(ch.Provider,{value:D},n.createElement(rh,{value:Cl(S,{visible:eh.Open,hidden:eh.Closed})|N.flags},Il({ourProps:z,theirProps:j,defaultTag:"div",features:vh,visible:"visible"===S,name:"Transition.Child"})))})),bh=zl((function(t,e){let r=null!==(0,n.useContext)(lh),i=null!==nh();return n.createElement(n.Fragment,null,!r&&i?n.createElement(gh,{ref:e,...t}):n.createElement(yh,{ref:e,...t}))})),_h=Object.assign(gh,{Child:bh,Root:gh});function xh(t){return Wl.isServer?null:t instanceof Node?t.ownerDocument:null!=t&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let wh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((t=>`${t}:not([tabindex='-1'])`)).join(",");var Sh,Eh,Mh=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Mh||{}),Th=((Eh=Th||{})[Eh.Error=0]="Error",Eh[Eh.Overflow=1]="Overflow",Eh[Eh.Success=2]="Success",Eh[Eh.Underflow=3]="Underflow",Eh),Ah=((Sh=Ah||{})[Sh.Previous=-1]="Previous",Sh[Sh.Next=1]="Next",Sh);var Oh=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Oh||{});var Ph=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Ph||{});function Ch(t){null==t||t.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(t=>{1===t.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===t.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let kh=["textarea","input"].join(",");function Rh(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?n?function(t,e=(t=>t)){return t.slice().sort(((t,n)=>{let r=e(t),i=e(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(t):t:function(t=document.body){return null==t?[]:Array.from(t.querySelectorAll(wh)).sort(((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER))))}(t);i.length>0&&a.length>1&&(a=a.filter((t=>!i.includes(t)))),r=null!=r?r:o.activeElement;let s,l=(()=>{if(5&e)return 1;if(10&e)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&e)return 0;if(2&e)return Math.max(0,a.indexOf(r))-1;if(4&e)return Math.max(0,a.indexOf(r))+1;if(8&e)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&e?{preventScroll:!0}:{},h=0,f=a.length;do{if(h>=f||h+f<=0)return 0;let t=u+h;if(16&e)t=(t+f)%f;else{if(t<0)return 3;if(t>=f)return 1}s=a[t],null==s||s.focus(c),h+=l}while(s!==o.activeElement);return 6&e&&function(t){var e,n;return null!=(n=null==(e=null==t?void 0:t.matches)?void 0:e.call(t,kh))&&n}(s)&&s.select(),2}function Nh(t,e,r){let i=$l(e);(0,n.useEffect)((()=>{function e(t){i.current(t)}return window.addEventListener(t,e,r),()=>window.removeEventListener(t,e,r)}),[t,r])}var Lh=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Lh||{});function Ih(...t){return(0,n.useMemo)((()=>xh(...t)),[...t])}function Dh(t,e,r,i){let o=$l(r);(0,n.useEffect)((()=>{function n(t){o.current(t)}return(t=null!=t?t:window).addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}),[t,e,i])}function jh(t,e){let r=(0,n.useRef)([]),i=Kl(t);(0,n.useEffect)((()=>{let t=[...r.current];for(let[n,o]of e.entries())if(r.current[n]!==o){let n=i(e,t);return r.current=e,n}}),[i,...e])}function zh(t){let e=Kl(t),r=(0,n.useRef)(!1);(0,n.useEffect)((()=>(r.current=!1,()=>{r.current=!0,du((()=>{r.current&&e()}))})),[e])}function Uh(t){if(!t)return new Set;if("function"==typeof t)return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}var Bh=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(Bh||{});let Fh=zl((function(t,e){let r=(0,n.useRef)(null),i=Ql(r,e),{initialFocus:o,containers:a,features:s=30,...l}=t;Gl()||(s=1);let u=Ih(r);!function({ownerDocument:t},e){let r=function(t=!0){let e=(0,n.useRef)(Wh.slice());return jh((([t],[n])=>{!0===n&&!1===t&&du((()=>{e.current.splice(0)})),!1===n&&!0===t&&(e.current=Wh.slice())}),[t,Wh,e]),Kl((()=>{var t;return null!=(t=e.current.find((t=>null!=t&&t.isConnected)))?t:null}))}(e);jh((()=>{e||(null==t?void 0:t.activeElement)===(null==t?void 0:t.body)&&Ch(r())}),[e]),zh((()=>{e&&Ch(r())}))}({ownerDocument:u},Boolean(16&s));let c=function({ownerDocument:t,container:e,initialFocus:r},i){let o=(0,n.useRef)(null),a=ih();return jh((()=>{if(!i)return;let n=e.current;n&&du((()=>{if(!a.current)return;let e=null==t?void 0:t.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===e)return void(o.current=e)}else if(n.contains(e))return void(o.current=e);null!=r&&r.current?Ch(r.current):Rh(n,Mh.First)===Th.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),o.current=null==t?void 0:t.activeElement}))}),[i]),o}({ownerDocument:u,container:r,initialFocus:o},Boolean(2&s));!function({ownerDocument:t,container:e,containers:n,previousActiveElement:r},i){let o=ih();Dh(null==t?void 0:t.defaultView,"focus",(t=>{if(!i||!o.current)return;let a=Uh(n);e.current instanceof HTMLElement&&a.add(e.current);let s=r.current;if(!s)return;let l=t.target;l&&l instanceof HTMLElement?Vh(a,l)?(r.current=l,Ch(l)):(t.preventDefault(),t.stopPropagation(),Ch(s)):Ch(r.current)}),!0)}({ownerDocument:u,container:r,containers:a,previousActiveElement:c},Boolean(8&s));let h=function(){let t=(0,n.useRef)(0);return Nh("keydown",(e=>{"Tab"===e.key&&(t.current=e.shiftKey?1:0)}),!0),t}(),f=Kl((t=>{let e=r.current;e&&Cl(h.current,{[Lh.Forwards]:()=>{Rh(e,Mh.First,{skipElements:[t.relatedTarget]})},[Lh.Backwards]:()=>{Rh(e,Mh.Last,{skipElements:[t.relatedTarget]})}})})),d=mu(),p=(0,n.useRef)(!1),m={ref:i,onKeyDown(t){"Tab"==t.key&&(p.current=!0,d.requestAnimationFrame((()=>{p.current=!1})))},onBlur(t){let e=Uh(a);r.current instanceof HTMLElement&&e.add(r.current);let n=t.relatedTarget;n instanceof HTMLElement&&"true"!==n.dataset.headlessuiFocusGuard&&(Vh(e,n)||(p.current?Rh(r.current,Cl(h.current,{[Lh.Forwards]:()=>Mh.Next,[Lh.Backwards]:()=>Mh.Previous})|Mh.WrapAround,{relativeTo:t.target}):t.target instanceof HTMLElement&&Ch(t.target)))}};return n.createElement(n.Fragment,null,Boolean(4&s)&&n.createElement(fu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:hu.Focusable}),Il({ourProps:m,theirProps:l,defaultTag:"div",name:"FocusTrap"}),Boolean(4&s)&&n.createElement(fu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:hu.Focusable}))})),Hh=Object.assign(Fh,{features:Bh}),Wh=[];function Vh(t,e){for(let n of t)if(n.contains(e))return!0;return!1}!function(t){function e(){"loading"!==document.readyState&&((()=>{function t(t){t.target instanceof HTMLElement&&t.target!==document.body&&Wh[0]!==t.target&&(Wh.unshift(t.target),Wh=Wh.filter((t=>null!=t&&t.isConnected)),Wh.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})})(),document.removeEventListener("DOMContentLoaded",e))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",e),e())}();let Gh=(0,n.createContext)(!1);function qh(t){return n.createElement(Gh.Provider,{value:t.force},t.children)}let Xh=n.Fragment,Zh=n.Fragment,Yh=(0,n.createContext)(null),$h=(0,n.createContext)(null),Kh=zl((function(t,e){let r=t,i=(0,n.useRef)(null),o=Ql(function(t,e=!0){return Object.assign(t,{[Jl]:e})}((t=>{i.current=t})),e),a=Ih(i),s=function(t){let e=(0,n.useContext)(Gh),r=(0,n.useContext)(Yh),i=Ih(t),[o,a]=(0,n.useState)((()=>{if(!e&&null!==r||Wl.isServer)return null;let t=null==i?void 0:i.getElementById("headlessui-portal-root");if(t)return t;if(null===i)return null;let n=i.createElement("div");return n.setAttribute("id","headlessui-portal-root"),i.body.appendChild(n)}));return(0,n.useEffect)((()=>{null!==o&&(null!=i&&i.body.contains(o)||null==i||i.body.appendChild(o))}),[o,i]),(0,n.useEffect)((()=>{e||null!==r&&a(r.current)}),[r,a,e]),o}(i),[l]=(0,n.useState)((()=>{var t;return Wl.isServer?null:null!=(t=null==a?void 0:a.createElement("div"))?t:null})),u=(0,n.useContext)($h),c=Gl();return Vl((()=>{!s||!l||s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l))}),[s,l]),Vl((()=>{if(l&&u)return u.register(l)}),[u,l]),zh((()=>{var t;!s||!l||(l instanceof Node&&s.contains(l)&&s.removeChild(l),s.childNodes.length<=0&&(null==(t=s.parentElement)||t.removeChild(s)))})),c&&s&&l?(0,Vu.createPortal)(Il({ourProps:{ref:o},theirProps:r,defaultTag:Xh,name:"Portal"}),l):null})),Jh=zl((function(t,e){let{target:r,...i}=t,o={ref:Ql(e)};return n.createElement(Yh.Provider,{value:r},Il({ourProps:o,theirProps:i,defaultTag:Zh,name:"Popover.Group"}))})),Qh=Object.assign(Kh,{Group:Jh}),tf=(0,n.createContext)((()=>{}));tf.displayName="StackContext";var ef=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(ef||{});function nf({children:t,onUpdate:e,type:r,element:i,enabled:o}){let a=(0,n.useContext)(tf),s=Kl(((...t)=>{null==e||e(...t),a(...t)}));return Vl((()=>{let t=void 0===o||!0===o;return t&&s(0,r,i),()=>{t&&s(1,r,i)}}),[s,r,i,o]),n.createElement(tf.Provider,{value:s},t)}function rf(t,e,r){let i=$l(e);(0,n.useEffect)((()=>{function e(t){i.current(t)}return document.addEventListener(t,e,r),()=>document.removeEventListener(t,e,r)}),[t,r])}"function"==typeof Object.is&&Object.is;const{useState:of,useEffect:af,useLayoutEffect:sf,useDebugValue:lf}=r;"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;const uf=(t=>t.useSyncExternalStore)(r);function cf(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=(null!=(n=e.defaultView)?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,i=r.clientWidth-r.offsetWidth,o=t-i;n.style(r,"paddingRight",`${o}px`)}}}function hf(){if(!(/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0))return{};let t;return{before(){t=window.pageYOffset},after({doc:e,d:n,meta:r}){function i(t){return r.containers.flatMap((t=>t())).some((e=>e.contains(t)))}n.microTask((()=>{if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let t=pu();t.style(e.documentElement,"scroll-behavior","auto"),n.add((()=>n.microTask((()=>t.dispose()))))}n.style(e.body,"marginTop",`-${t}px`),window.scrollTo(0,0);let r=null;n.addEventListener(e,"click",(t=>{if(t.target instanceof HTMLElement)try{let n=t.target.closest("a");if(!n)return;let{hash:o}=new URL(n.href),a=e.querySelector(o);a&&!i(a)&&(r=a)}catch{}}),!0),n.addEventListener(e,"touchmove",(t=>{t.target instanceof HTMLElement&&!i(t.target)&&t.preventDefault()}),{passive:!1}),n.add((()=>{window.scrollTo(0,window.pageYOffset+t),r&&r.isConnected&&(r.scrollIntoView({block:"nearest"}),r=null)}))}))}}}function ff(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let df=function(t,e){let n=new Map,r=new Set;return{getSnapshot:()=>n,subscribe:t=>(r.add(t),()=>r.delete(t)),dispatch(t,...i){let o=e[t].call(n,...i);o&&(n=o,r.forEach((t=>t())))}}}(0,{PUSH(t,e){var n;let r=null!=(n=this.get(t))?n:{doc:t,count:0,d:pu(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:ff(n)},i=[hf(),cf(),{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}];i.forEach((({before:t})=>null==t?void 0:t(r))),i.forEach((({after:t})=>null==t?void 0:t(r)))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});df.subscribe((()=>{let t=df.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let t="hidden"===e.get(n.doc),r=0!==n.count;(r&&!t||!r&&t)&&df.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&df.dispatch("TEARDOWN",n)}}));let pf=new Map,mf=new Map;function vf(t,e=!0){Vl((()=>{var n;if(!e)return;let r="function"==typeof t?t():t.current;if(!r)return;let i=null!=(n=mf.get(r))?n:0;return mf.set(r,i+1),0!==i||(pf.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),function(){var t;if(!r)return;let e=null!=(t=mf.get(r))?t:1;if(1===e?mf.delete(r):mf.set(r,e-1),1!==e)return;let n=pf.get(r);n&&(null===n["aria-hidden"]?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",n["aria-hidden"]),r.inert=n.inert,pf.delete(r))}}),[t,e])}var gf=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(gf||{}),yf=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(yf||{});let bf={0:(t,e)=>t.titleId===e.id?t:{...t,titleId:e.id}},_f=(0,n.createContext)(null);function xf(t){let e=(0,n.useContext)(_f);if(null===e){let e=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,xf),e}return e}function wf(t,e){return Cl(e.type,bf,t,e)}_f.displayName="DialogContext";let Sf=Nl.RenderStrategy|Nl.Static,Ef=zl((function(t,e){var r;let i=Xl(),{id:o=`headlessui-dialog-${i}`,open:a,onClose:s,initialFocus:l,__demoMode:u=!1,...c}=t,[h,f]=(0,n.useState)(0),d=nh();void 0===a&&null!==d&&(a=(d&eh.Open)===eh.Open);let p=(0,n.useRef)(null),m=Ql(p,e),v=Ih(p),g=t.hasOwnProperty("open")||null!==d,y=t.hasOwnProperty("onClose");if(!g&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof a)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if("function"!=typeof s)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${s}`);let b=a?0:1,[_,x]=(0,n.useReducer)(wf,{titleId:null,descriptionId:null,panelRef:(0,n.createRef)()}),w=Kl((()=>s(!1))),S=Kl((t=>x({type:0,id:t}))),E=!!Gl()&&!u&&0===b,M=h>1,T=null!==(0,n.useContext)(_f),[A,O]=function(){let t=(0,n.useContext)($h),e=(0,n.useRef)([]),r=Kl((n=>(e.current.push(n),t&&t.register(n),()=>i(n)))),i=Kl((n=>{let r=e.current.indexOf(n);-1!==r&&e.current.splice(r,1),t&&t.unregister(n)})),o=(0,n.useMemo)((()=>({register:r,unregister:i,portals:e})),[r,i,e]);return[e,(0,n.useMemo)((()=>function({children:t}){return n.createElement($h.Provider,{value:o},t)}),[o])]}(),{resolveContainers:P,mainTreeNodeRef:C,MainTreeNode:k}=function({defaultContainers:t=[],portals:e,mainTreeNodeRef:r}={}){var i;let o=(0,n.useRef)(null!=(i=null==r?void 0:r.current)?i:null),a=Ih(o),s=Kl((()=>{var n;let r=[];for(let e of t)null!==e&&(e instanceof HTMLElement?r.push(e):"current"in e&&e.current instanceof HTMLElement&&r.push(e.current));if(null!=e&&e.current)for(let t of e.current)r.push(t);for(let t of null!=(n=null==a?void 0:a.querySelectorAll("html > *, body > *"))?n:[])t!==document.body&&t!==document.head&&t instanceof HTMLElement&&"headlessui-portal-root"!==t.id&&(t.contains(o.current)||r.some((e=>t.contains(e)))||r.push(t));return r}));return{resolveContainers:s,contains:Kl((t=>s().some((e=>e.contains(t))))),mainTreeNodeRef:o,MainTreeNode:(0,n.useMemo)((()=>function(){return null!=r?null:n.createElement(fu,{features:hu.Hidden,ref:o})}),[o,r])}}({portals:A,defaultContainers:[null!=(r=_.panelRef.current)?r:p.current]}),R=M?"parent":"leaf",N=null!==d&&(d&eh.Closing)===eh.Closing,L=!T&&!N&&E,I=(0,n.useCallback)((()=>{var t,e;return null!=(e=Array.from(null!=(t=null==v?void 0:v.querySelectorAll("body > *"))?t:[]).find((t=>"headlessui-portal-root"!==t.id&&t.contains(C.current)&&t instanceof HTMLElement)))?e:null}),[C]);vf(I,L);let D=!!M||E,j=(0,n.useCallback)((()=>{var t,e;return null!=(e=Array.from(null!=(t=null==v?void 0:v.querySelectorAll("[data-headlessui-portal]"))?t:[]).find((t=>t.contains(C.current)&&t instanceof HTMLElement)))?e:null}),[C]);vf(j,D),function(t,e,r=!0){let i=(0,n.useRef)(!1);function o(n,r){if(!i.current||n.defaultPrevented)return;let o=r(n);if(null===o||!o.getRootNode().contains(o)||!o.isConnected)return;let a=function t(e){return"function"==typeof e?t(e()):Array.isArray(e)||e instanceof Set?e:[e]}(t);for(let t of a){if(null===t)continue;let e=t instanceof HTMLElement?t:t.current;if(null!=e&&e.contains(o)||n.composed&&n.composedPath().includes(e))return}return!function(t,e=0){var n;return t!==(null==(n=xh(t))?void 0:n.body)&&Cl(e,{0:()=>t.matches(wh),1(){let e=t;for(;null!==e;){if(e.matches(wh))return!0;e=e.parentElement}return!1}})}(o,Oh.Loose)&&-1!==o.tabIndex&&n.preventDefault(),e(n,o)}(0,n.useEffect)((()=>{requestAnimationFrame((()=>{i.current=r}))}),[r]);let a=(0,n.useRef)(null);rf("pointerdown",(t=>{var e,n;i.current&&(a.current=(null==(n=null==(e=t.composedPath)?void 0:e.call(t))?void 0:n[0])||t.target)}),!0),rf("mousedown",(t=>{var e,n;i.current&&(a.current=(null==(n=null==(e=t.composedPath)?void 0:e.call(t))?void 0:n[0])||t.target)}),!0),rf("click",(t=>{a.current&&(o(t,(()=>a.current)),a.current=null)}),!0),rf("touchend",(t=>o(t,(()=>t.target instanceof HTMLElement?t.target:null))),!0),Nh("blur",(t=>o(t,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}(P,w,!(!E||M));let z=!(M||0!==b);Dh(null==v?void 0:v.defaultView,"keydown",(t=>{z&&(t.defaultPrevented||t.key===Zl.Escape&&(t.preventDefault(),t.stopPropagation(),w()))})),function(t,e,n=(()=>[document.body])){!function(t,e,n){let r=function(t){return uf(t.subscribe,t.getSnapshot,t.getSnapshot)}(df),i=t?r.get(t):void 0,o=!!i&&i.count>0;Vl((()=>{if(t&&e)return df.dispatch("PUSH",t,n),()=>df.dispatch("POP",t,n)}),[e,t])}(t,e,(t=>{var e;return{containers:[...null!=(e=t.containers)?e:[],n]}}))}(v,!(N||0!==b||T),P),(0,n.useEffect)((()=>{if(0!==b||!p.current)return;let t=new ResizeObserver((t=>{for(let e of t){let t=e.target.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&w()}}));return t.observe(p.current),()=>t.disconnect()}),[b,p,w]);let[U,B]=au(),F=(0,n.useMemo)((()=>[{dialogState:b,close:w,setTitleId:S},_]),[b,_,w,S]),H=(0,n.useMemo)((()=>({open:0===b})),[b]),W={ref:m,id:o,role:"dialog","aria-modal":0===b||void 0,"aria-labelledby":_.titleId,"aria-describedby":U};return n.createElement(nf,{type:"Dialog",enabled:0===b,element:p,onUpdate:Kl(((t,e)=>{"Dialog"===e&&Cl(t,{[ef.Add]:()=>f((t=>t+1)),[ef.Remove]:()=>f((t=>t-1))})}))},n.createElement(qh,{force:!0},n.createElement(Qh,null,n.createElement(_f.Provider,{value:F},n.createElement(Qh.Group,{target:p},n.createElement(qh,{force:!1},n.createElement(B,{slot:H,name:"Dialog.Description"},n.createElement(Hh,{initialFocus:l,containers:P,features:E?Cl(R,{parent:Hh.features.RestoreFocus,leaf:Hh.features.All&~Hh.features.FocusLock}):Hh.features.None},n.createElement(O,null,Il({ourProps:W,theirProps:c,slot:H,defaultTag:"div",features:Sf,visible:0===b,name:"Dialog"}))))))))),n.createElement(k,null))})),Mf=zl((function(t,e){let r=Xl(),{id:i=`headlessui-dialog-backdrop-${r}`,...o}=t,[{dialogState:a},s]=xf("Dialog.Backdrop"),l=Ql(e);(0,n.useEffect)((()=>{if(null===s.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[s.panelRef]);let u=(0,n.useMemo)((()=>({open:0===a})),[a]);return n.createElement(qh,{force:!0},n.createElement(Qh,null,Il({ourProps:{ref:l,id:i,"aria-hidden":!0},theirProps:o,slot:u,defaultTag:"div",name:"Dialog.Backdrop"})))})),Tf=zl((function(t,e){let r=Xl(),{id:i=`headlessui-dialog-panel-${r}`,...o}=t,[{dialogState:a},s]=xf("Dialog.Panel"),l=Ql(e,s.panelRef),u=(0,n.useMemo)((()=>({open:0===a})),[a]);return Il({ourProps:{ref:l,id:i,onClick:Kl((t=>{t.stopPropagation()}))},theirProps:o,slot:u,defaultTag:"div",name:"Dialog.Panel"})})),Af=zl((function(t,e){let r=Xl(),{id:i=`headlessui-dialog-overlay-${r}`,...o}=t,[{dialogState:a,close:s}]=xf("Dialog.Overlay");return Il({ourProps:{ref:Ql(e),id:i,"aria-hidden":!0,onClick:Kl((t=>{if(t.target===t.currentTarget){if(Yl(t.currentTarget))return t.preventDefault();t.preventDefault(),t.stopPropagation(),s()}}))},theirProps:o,slot:(0,n.useMemo)((()=>({open:0===a})),[a]),defaultTag:"div",name:"Dialog.Overlay"})})),Of=zl((function(t,e){let r=Xl(),{id:i=`headlessui-dialog-title-${r}`,...o}=t,[{dialogState:a,setTitleId:s}]=xf("Dialog.Title"),l=Ql(e);(0,n.useEffect)((()=>(s(i),()=>s(null))),[i,s]);let u=(0,n.useMemo)((()=>({open:0===a})),[a]);return Il({ourProps:{ref:l,id:i},theirProps:o,slot:u,defaultTag:"h2",name:"Dialog.Title"})})),Pf=Object.assign(Ef,{Backdrop:Mf,Panel:Tf,Overlay:Af,Title:Of,Description:lu});function Cf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return kf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kf(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rf=function(t){var e,r,i=t.className,o=t.src,a=t.onLoad,s=(0,n.useRef)(null),l=Cf((0,n.useState)(!1),2),u=(l[0],l[1]),c=Cf((0,n.useState)({width:0,height:0}),2),h=c[0],f=c[1],d=Cf((0,n.useState)(1),2),p=d[0],m=d[1];return(0,n.useEffect)((function(){if(s.current){var t=window.innerWidth,e=window.innerHeight;if(!isNaN(t)&&!isNaN(e)){t*=.8,e*=.8;var n=s.current.naturalWidth,r=s.current.naturalHeight,i=t/n,o=e/r,a=Math.min(i,o)*p;isNaN(a)||a===1/0||f({width:n*a,height:r*a})}}}),[null==s||null===(e=s.current)||void 0===e?void 0:e.naturalWidth,null==s||null===(r=s.current)||void 0===r?void 0:r.naturalHeight,p]),n.createElement("img",{onLoad:function(){u(!0),a()},ref:s,className:i,src:o,width:h.width,height:h.height,onWheel:function(t){t.deltaY<0?m((function(t){return Math.min(t+.1,20)})):m((function(t){return Math.max(t-.1,.3)}))}})};const Nf=function(t){var e=t.photoUrl,r=t.open,i=t.setOpen,o=Cf((0,n.useState)(!1),2),a=(o[0],o[1]);return console.log(r),n.createElement(_h.Root,{show:r,as:n.Fragment},n.createElement(Pf,{as:"div",className:"relative z-50",onClose:i},n.createElement(_h.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},n.createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),n.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},n.createElement("div",{className:"h-full flex justify-center p-4 text-center sm:items-center sm:p-0"},n.createElement(_h.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},n.createElement(Pf.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all "},n.createElement("div",{className:""},n.createElement(Rf,{onLoad:function(){return a(!0)},className:"",src:e})),n.createElement("div",{className:"flex flex-col justify-center items-center p-2"},n.createElement("button",{type:"button",className:"btn pastel-blue-button text-gray-500 text-sm w-1/4",onClick:function(){return i(!1)}},n.createElement(Va,{className:"w-5 h-5 m-auto"})))))))))};var Lf=["EM 50","EM 150","GR Potassium","GR Uranium","GR Thorium","GR Total Count"],If=["Sample ID","Longitude","Latitude","X[m]","Y[m]","Code","Depth","Depth Min[cm]","Depth Max[cm]","Season","EM Index","EM Distance[m]","EM Longitude","EM Latitude","EM Elevation[m]","EM 150","EM 50","GR Index","GR Distance[m]","GR Longitude","GR Latitude","GR Total Count","GR Potassium","GR Uranium","GR Thorium"],Df=["Soil K Colwell[ppm]","Soil P Colwell[ppm]","Soil Na %[%]","Soil pH CaCl"],jf=[{menuName:"Linear",menuType:0},{menuName:"Polynomial",menuType:1},{menuName:"Exponential",menuType:2}],zf=function(){return{longList:!1,selectedHorizon:Hs[0].menuType,selectedHorizonName:Hs[0].menuName,selectedXVar:0,selectedYVar:0}},Uf=function(){return{selectedRegression:0,selectedRegressionName:jf[0].menuName,degree:2,r2Threshold:0,outlierThreshold:6,showOutliers:!0,showThresholds:!0,showLabels:!0,showSoilPhotos:!1}},Bf=[{x:"EM 150",y:"Soil K Colwell[ppm]",active:!0,horizonIndex:0,regression:null,regressionResult:null,showOutliers:!0,title:"Potash",pagesBefore:[],sortKey:"C-0",note:""},{x:"EM 50",y:"Soil pH CaCl",active:!0,horizonIndex:0,regression:null,regressionResult:null,showOutliers:!0,title:"Lime",pagesBefore:[],sortKey:"C-1",note:""},{x:"EM 50",y:"Soil Na %[%]",active:!0,horizonIndex:0,regression:null,regressionResult:null,showOutliers:!0,title:"Gypsum",pagesBefore:["esp"],sortKey:"C-2",note:""},{x:"GR Uranium",y:"Soil P Colwell[ppm]",active:!0,horizonIndex:0,regression:null,regressionResult:null,showOutliers:!0,title:"Phosphorus",pagesBefore:[],sortKey:"C-3",note:""}],Ff=[{x:"EM 150",y:"Soil K Colwell[ppm]",active:!0,horizonIndex:1,regression:null,regressionResult:null,showOutliers:!0,title:"Potash",pagesBefore:[],sortKey:"C-0",note:""},{x:"EM 50",y:"Soil pH CaCl",active:!0,horizonIndex:1,regression:null,regressionResult:null,showOutliers:!0,title:"Lime",pagesBefore:[],sortKey:"C-1",note:""},{x:"EM 50",y:"Soil Na %[%]",active:!0,horizonIndex:1,regression:null,regressionResult:null,showOutliers:!0,title:"Gypsum",pagesBefore:[],sortKey:"C-2",note:""},{x:"GR Uranium",y:"Soil P Colwell[ppm]",active:!1,horizonIndex:1,regression:null,regressionResult:null,showOutliers:!0,title:"Phosphorus",pagesBefore:[],sortKey:"C-3",note:""}],Hf=[{x:"EM 150",y:"Soil K Colwell[ppm]",active:!0,horizonIndex:2,regression:null,regressionResult:null,showOutliers:!0,title:"Potash",pagesBefore:[],sortKey:"C-0",note:""},{x:"EM 50",y:"Soil pH CaCl",active:!0,horizonIndex:2,regression:null,regressionResult:null,showOutliers:!0,title:"Lime",pagesBefore:[],sortKey:"C-1",note:""},{x:"EM 50",y:"Soil Na %[%]",active:!0,horizonIndex:2,regression:null,regressionResult:null,showOutliers:!0,title:"Gypsum",pagesBefore:[],sortKey:"C-2",note:""},{x:"GR Uranium",y:"Soil P Colwell[ppm]",active:!1,horizonIndex:2,regression:null,regressionResult:null,showOutliers:!0,title:"Phosphorus",pagesBefore:[],sortKey:"C-3",note:""}],Wf=function(){return{isLongList:!1,reportItemsWithData:{0:!1,1:!1,2:!1},reportItems:{0:Bf,1:Ff,2:Hf},slideReportItems:[]}},Vf=i(2254),Gf=i.n(Vf),qf=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=Wn,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=Hn(this.xf["@@transducer/step"](t,!1))),t},t}();function Xf(t){return function(e){return new qf(t,e)}}const Zf=sn(Fn(["all"],Xf,(function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}))),Yf=sn((function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n})),$f=15,Kf=573,Jf=-2;function Qf(t){return td(t.map((([t,e])=>new Array(t).fill(e,0,t))))}function td(t){return t.reduce(((t,e)=>t.concat(Array.isArray(e)?td(e):e)),[])}const ed=[0,1,2,3].concat(...Qf([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function nd(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}t.build_tree=function(n){const r=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.elems;let a,s,l,u=-1;for(n.heap_len=0,n.heap_max=Kf,a=0;a<o;a++)0!==r[2*a]?(n.heap[++n.heap_len]=u=a,n.depth[a]=0):r[2*a+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=u<2?++u:0,r[2*l]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=i[2*l+1]);for(t.max_code=u,a=Math.floor(n.heap_len/2);a>=1;a--)n.pqdownheap(r,a);l=o;do{a=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(r,1),s=n.heap[1],n.heap[--n.heap_max]=a,n.heap[--n.heap_max]=s,r[2*l]=r[2*a]+r[2*s],n.depth[l]=Math.max(n.depth[a],n.depth[s])+1,r[2*a+1]=r[2*s+1]=l,n.heap[1]=l++,n.pqdownheap(r,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,a=t.stat_desc.max_length;let s,l,u,c,h,f,d=0;for(c=0;c<=$f;c++)e.bl_count[c]=0;for(n[2*e.heap[e.heap_max]+1]=0,s=e.heap_max+1;s<Kf;s++)l=e.heap[s],c=n[2*n[2*l+1]+1]+1,c>a&&(c=a,d++),n[2*l+1]=c,l>t.max_code||(e.bl_count[c]++,h=0,l>=o&&(h=i[l-o]),f=n[2*l],e.opt_len+=f*(c+h),r&&(e.static_len+=f*(r[2*l+1]+h)));if(0!==d){do{for(c=a-1;0===e.bl_count[c];)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[a]--,d-=2}while(d>0);for(c=a;0!==c;c--)for(l=e.bl_count[c];0!==l;)u=e.heap[--s],u>t.max_code||(n[2*u+1]!=c&&(e.opt_len+=(c-n[2*u+1])*n[2*u],n[2*u+1]=c),l--)}}(n),function(t,n,r){const i=[];let o,a,s,l=0;for(o=1;o<=$f;o++)i[o]=l=l+r[o-1]<<1;for(a=0;a<=n;a++)s=t[2*a+1],0!==s&&(t[2*a]=e(i[s]++,s))}(r,t.max_code,n.bl_count)}}function rd(t,e,n,r,i){const o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=r,o.max_length=i}nd._length_code=[0,1,2,3,4,5,6,7].concat(...Qf([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),nd.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],nd.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],nd.d_code=function(t){return t<256?ed[t]:ed[256+(t>>>7)]},nd.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nd.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nd.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nd.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const id=Qf([[144,8],[112,9],[24,7],[8,8]]);rd.static_ltree=td([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((t,e)=>[t,id[e]])));const od=Qf([[30,5]]);function ad(t,e,n,r,i){const o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=r,o.func=i}rd.static_dtree=td([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((t,e)=>[t,od[e]]))),rd.static_l_desc=new rd(rd.static_ltree,nd.extra_lbits,257,286,$f),rd.static_d_desc=new rd(rd.static_dtree,nd.extra_dbits,0,30,$f),rd.static_bl_desc=new rd(null,nd.extra_blbits,0,19,7);const sd=[new ad(0,0,0,0,0),new ad(4,4,8,4,1),new ad(4,5,16,8,1),new ad(4,6,32,32,1),new ad(4,4,16,16,2),new ad(8,16,32,32,2),new ad(8,16,128,128,2),new ad(8,32,128,256,2),new ad(32,128,258,1024,2),new ad(32,258,258,4096,2)],ld=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],ud=113,cd=666,hd=262;function fd(t,e,n,r){const i=t[2*e],o=t[2*n];return i<o||i==o&&r[e]<=r[n]}function dd(){const t=this;let e,n,r,i,o,a,s,l,u,c,h,f,d,p,m,v,g,y,b,_,x,w,S,E,M,T,A,O,P,C,k,R,N;const L=new nd,I=new nd,D=new nd;let j,z,U,B,F,H;function W(){let e;for(e=0;e<286;e++)k[2*e]=0;for(e=0;e<30;e++)R[2*e]=0;for(e=0;e<19;e++)N[2*e]=0;k[512]=1,t.opt_len=t.static_len=0,z=U=0}function V(t,e){let n,r=-1,i=t[1],o=0,a=7,s=4;0===i&&(a=138,s=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)n=i,i=t[2*(l+1)+1],++o<a&&n==i||(o<s?N[2*n]+=o:0!==n?(n!=r&&N[2*n]++,N[32]++):o<=10?N[34]++:N[36]++,o=0,r=n,0===i?(a=138,s=3):n==i?(a=6,s=3):(a=7,s=4))}function G(e){t.pending_buf[t.pending++]=e}function q(t){G(255&t),G(t>>>8&255)}function X(t,e){let n;const r=e;H>16-r?(n=t,F|=n<<H&65535,q(F),F=n>>>16-H,H+=r-16):(F|=t<<H&65535,H+=r)}function Z(t,e){const n=2*t;X(65535&e[n],65535&e[n+1])}function Y(t,e){let n,r,i=-1,o=t[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),n=0;n<=e;n++)if(r=o,o=t[2*(n+1)+1],!(++a<s&&r==o)){if(a<l)do{Z(r,N)}while(0!=--a);else 0!==r?(r!=i&&(Z(r,N),a--),Z(16,N),X(a-3,2)):a<=10?(Z(17,N),X(a-3,3)):(Z(18,N),X(a-11,7));a=0,i=r,0===o?(s=138,l=3):r==o?(s=6,l=3):(s=7,l=4)}}function $(){16==H?(q(F),F=0,H=0):H>=8&&(G(255&F),F>>>=8,H-=8)}function K(e,n){let r,i,o;if(t.dist_buf[z]=e,t.lc_buf[z]=255&n,z++,0===e?k[2*n]++:(U++,e--,k[2*(nd._length_code[n]+256+1)]++,R[2*nd.d_code(e)]++),0==(8191&z)&&A>2){for(r=8*z,i=x-g,o=0;o<30;o++)r+=R[2*o]*(5+nd.extra_dbits[o]);if(r>>>=3,U<Math.floor(z/2)&&r<Math.floor(i/2))return!0}return z==j-1}function J(e,n){let r,i,o,a,s=0;if(0!==z)do{r=t.dist_buf[s],i=t.lc_buf[s],s++,0===r?Z(i,e):(o=nd._length_code[i],Z(o+256+1,e),a=nd.extra_lbits[o],0!==a&&(i-=nd.base_length[o],X(i,a)),r--,o=nd.d_code(r),Z(o,n),a=nd.extra_dbits[o],0!==a&&(r-=nd.base_dist[o],X(r,a)))}while(s<z);Z(256,e),B=e[513]}function Q(){H>8?q(F):H>0&&G(255&F),F=0,H=0}function tt(e,n,r){X(0+(r?1:0),3),function(e,n,r){Q(),B=8,q(n),q(~n),t.pending_buf.set(l.subarray(e,e+n),t.pending),t.pending+=n}(e,n)}function et(n){(function(e,n,r){let i,o,a=0;A>0?(L.build_tree(t),I.build_tree(t),a=function(){let e;for(V(k,L.max_code),V(R,I.max_code),D.build_tree(t),e=18;e>=3&&0===N[2*nd.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!=e?tt(e,n,r):o==i?(X(2+(r?1:0),3),J(rd.static_ltree,rd.static_dtree)):(X(4+(r?1:0),3),function(t,e,n){let r;for(X(t-257,5),X(e-1,5),X(n-4,4),r=0;r<n;r++)X(N[2*nd.bl_order[r]+1],3);Y(k,t-1),Y(R,e-1)}(L.max_code+1,I.max_code+1,a+1),J(k,R)),W(),r&&Q()})(g>=0?g:-1,x-g,n),g=x,e.flush_pending()}function nt(){let t,n,r,i;do{if(i=u-S-x,0===i&&0===x&&0===S)i=o;else if(-1==i)i--;else if(x>=o+o-hd){l.set(l.subarray(o,o+o),0),w-=o,x-=o,g-=o,t=d,r=t;do{n=65535&h[--r],h[r]=n>=o?n-o:0}while(0!=--t);t=o,r=t;do{n=65535&c[--r],c[r]=n>=o?n-o:0}while(0!=--t);i+=o}if(0===e.avail_in)return;t=e.read_buf(l,x+S,i),S+=t,S>=3&&(f=255&l[x],f=(f<<v^255&l[x+1])&m)}while(S<hd&&0!==e.avail_in)}function rt(t){let e,n,r=M,i=x,a=E;const u=x>o-hd?x-(o-hd):0;let h=C;const f=s,d=x+258;let p=l[i+a-1],m=l[i+a];E>=P&&(r>>=2),h>S&&(h=S);do{if(e=t,l[e+a]==m&&l[e+a-1]==p&&l[e]==l[i]&&l[++e]==l[i+1]){i+=2,e++;do{}while(l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&l[++i]==l[++e]&&i<d);if(n=258-(d-i),i=d-258,n>a){if(w=t,a=n,n>=h)break;p=l[i+a-1],m=l[i+a]}}}while((t=65535&c[t&f])>u&&0!=--r);return a<=S?a:S}t.depth=[],t.bl_count=[],t.heap=[],k=[],R=[],N=[],t.pqdownheap=function(e,n){const r=t.heap,i=r[n];let o=n<<1;for(;o<=t.heap_len&&(o<t.heap_len&&fd(e,r[o+1],r[o],t.depth)&&o++,!fd(e,i,r[o],t.depth));)r[n]=r[o],n=o,o<<=1;r[n]=i},t.deflateInit=function(e,b,w,z,U,V){return z||(z=8),U||(U=8),V||(V=0),e.msg=null,-1==b&&(b=6),U<1||U>9||8!=z||w<9||w>15||b<0||b>9||V<0||V>2?Jf:(e.dstate=t,a=w,o=1<<a,s=o-1,p=U+7,d=1<<p,m=d-1,v=Math.floor((p+3-1)/3),l=new Uint8Array(2*o),c=[],h=[],j=1<<U+6,t.pending_buf=new Uint8Array(4*j),r=4*j,t.dist_buf=new Uint16Array(j),t.lc_buf=new Uint8Array(j),A=b,O=V,function(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,n=ud,i=0,L.dyn_tree=k,L.stat_desc=rd.static_l_desc,I.dyn_tree=R,I.stat_desc=rd.static_d_desc,D.dyn_tree=N,D.stat_desc=rd.static_bl_desc,F=0,H=0,B=8,W(),function(){u=2*o,h[d-1]=0;for(let t=0;t<d-1;t++)h[t]=0;T=sd[A].max_lazy,P=sd[A].good_length,C=sd[A].nice_length,M=sd[A].max_chain,x=0,g=0,S=0,y=E=2,_=0,f=0}(),0}(e))},t.deflateEnd=function(){return 42!=n&&n!=ud&&n!=cd?Jf:(t.lc_buf=null,t.dist_buf=null,t.pending_buf=null,h=null,c=null,l=null,t.dstate=null,n==ud?-3:0)},t.deflateParams=function(t,e,n){let r=0;return-1==e&&(e=6),e<0||e>9||n<0||n>2?Jf:(sd[A].func!=sd[e].func&&0!==t.total_in&&(r=t.deflate(1)),A!=e&&(A=e,T=sd[A].max_lazy,P=sd[A].good_length,C=sd[A].nice_length,M=sd[A].max_chain),O=n,r)},t.deflateSetDictionary=function(t,e,r){let i,a=r,u=0;if(!e||42!=n)return Jf;if(a<3)return 0;for(a>o-hd&&(a=o-hd,u=r-a),l.set(e.subarray(u,u+a),0),x=a,g=a,f=255&l[0],f=(f<<v^255&l[1])&m,i=0;i<=a-3;i++)f=(f<<v^255&l[i+2])&m,c[i&s]=h[f],h[f]=i;return 0},t.deflate=function(u,p){let M,P,C,k,R;if(p>4||p<0)return Jf;if(!u.next_out||!u.next_in&&0!==u.avail_in||n==cd&&4!=p)return u.msg=ld[4],Jf;if(0===u.avail_out)return u.msg=ld[7],-5;if(e=u,k=i,i=p,42==n&&(P=8+(a-8<<4)<<8,C=(A-1&255)>>1,C>3&&(C=3),P|=C<<6,0!==x&&(P|=32),P+=31-P%31,n=ud,G((N=P)>>8&255),G(255&N)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return i=-1,0}else if(0===e.avail_in&&p<=k&&4!=p)return e.msg=ld[7],-5;var N;if(n==cd&&0!==e.avail_in)return u.msg=ld[7],-5;if(0!==e.avail_in||0!==S||0!=p&&n!=cd){switch(R=-1,sd[A].func){case 0:R=function(t){let n,i=65535;for(i>r-5&&(i=r-5);;){if(S<=1){if(nt(),0===S&&0==t)return 0;if(0===S)break}if(x+=S,S=0,n=g+i,(0===x||x>=n)&&(S=x-n,x=n,et(!1),0===e.avail_out))return 0;if(x-g>=o-hd&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 1:R=function(t){let n,r=0;for(;;){if(S<hd){if(nt(),S<hd&&0==t)return 0;if(0===S)break}if(S>=3&&(f=(f<<v^255&l[x+2])&m,r=65535&h[f],c[x&s]=h[f],h[f]=x),0!==r&&(x-r&65535)<=o-hd&&2!=O&&(y=rt(r)),y>=3)if(n=K(x-w,y-3),S-=y,y<=T&&S>=3){y--;do{x++,f=(f<<v^255&l[x+2])&m,r=65535&h[f],c[x&s]=h[f],h[f]=x}while(0!=--y);x++}else x+=y,y=0,f=255&l[x],f=(f<<v^255&l[x+1])&m;else n=K(0,255&l[x]),S--,x++;if(n&&(et(!1),0===e.avail_out))return 0}return et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p);break;case 2:R=function(t){let n,r,i=0;for(;;){if(S<hd){if(nt(),S<hd&&0==t)return 0;if(0===S)break}if(S>=3&&(f=(f<<v^255&l[x+2])&m,i=65535&h[f],c[x&s]=h[f],h[f]=x),E=y,b=w,y=2,0!==i&&E<T&&(x-i&65535)<=o-hd&&(2!=O&&(y=rt(i)),y<=5&&(1==O||3==y&&x-w>4096)&&(y=2)),E>=3&&y<=E){r=x+S-3,n=K(x-1-b,E-3),S-=E-1,E-=2;do{++x<=r&&(f=(f<<v^255&l[x+2])&m,i=65535&h[f],c[x&s]=h[f],h[f]=x)}while(0!=--E);if(_=0,y=2,x++,n&&(et(!1),0===e.avail_out))return 0}else if(0!==_){if(n=K(0,255&l[x-1]),n&&et(!1),x++,S--,0===e.avail_out)return 0}else _=1,x++,S--}return 0!==_&&(n=K(0,255&l[x-1]),_=0),et(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(p)}if(2!=R&&3!=R||(n=cd),0==R||2==R)return 0===e.avail_out&&(i=-1),0;if(1==R){if(1==p)X(2,3),Z(256,rd.static_ltree),$(),1+B+10-H<9&&(X(2,3),Z(256,rd.static_ltree),$()),B=7;else if(tt(0,0,!1),3==p)for(M=0;M<d;M++)h[M]=0;if(e.flush_pending(),0===e.avail_out)return i=-1,0}}return 4!=p?0:1}}function pd(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}pd.prototype={deflateInit(t,e){const n=this;return n.dstate=new dd,e||(e=$f),n.dstate.deflateInit(n,t,e)},deflate(t){const e=this;return e.dstate?e.dstate.deflate(e,t):Jf},deflateEnd(){const t=this;if(!t.dstate)return Jf;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams(t,e){const n=this;return n.dstate?n.dstate.deflateParams(n,t,e):Jf},deflateSetDictionary(t,e){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):Jf},read_buf(t,e,n){const r=this;let i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};const md=0,vd=1,gd=-2,yd=-3,bd=-4,_d=-5,xd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],wd=1440,Sd=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],Ed=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Md=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Td=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Ad=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Od=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Pd=15;function Cd(){let t,e,n,r,i,o;function a(t,e,a,s,l,u,c,h,f,d,p){let m,v,g,y,b,_,x,w,S,E,M,T,A,O,P;E=0,b=a;do{n[t[e+E]]++,E++,b--}while(0!==b);if(n[0]==a)return c[0]=-1,h[0]=0,md;for(w=h[0],_=1;_<=Pd&&0===n[_];_++);for(x=_,w<_&&(w=_),b=Pd;0!==b&&0===n[b];b--);for(g=b,w>b&&(w=b),h[0]=w,O=1<<_;_<b;_++,O<<=1)if((O-=n[_])<0)return yd;if((O-=n[b])<0)return yd;for(n[b]+=O,o[1]=_=0,E=1,A=2;0!=--b;)o[A]=_+=n[E],A++,E++;b=0,E=0;do{0!==(_=t[e+E])&&(p[o[_]++]=b),E++}while(++b<a);for(a=o[g],o[0]=b=0,E=0,y=-1,T=-w,i[0]=0,M=0,P=0;x<=g;x++)for(m=n[x];0!=m--;){for(;x>T+w;){if(y++,T+=w,P=g-T,P=P>w?w:P,(v=1<<(_=x-T))>m+1&&(v-=m+1,A=x,_<P))for(;++_<P&&!((v<<=1)<=n[++A]);)v-=n[A];if(P=1<<_,d[0]+P>wd)return yd;i[y]=M=d[0],d[0]+=P,0!==y?(o[y]=b,r[0]=_,r[1]=w,_=b>>>T-w,r[2]=M-i[y-1]-_,f.set(r,3*(i[y-1]+_))):c[0]=M}for(r[1]=x-T,E>=a?r[0]=192:p[E]<s?(r[0]=p[E]<256?0:96,r[2]=p[E++]):(r[0]=u[p[E]-s]+16+64,r[2]=l[p[E++]-s]),v=1<<x-T,_=b>>>T;_<P;_+=v)f.set(r,3*(M+_));for(_=1<<x-1;0!=(b&_);_>>>=1)b^=_;for(b^=_,S=(1<<T)-1;(b&S)!=o[y];)y--,T-=w,S=(1<<T)-1}return 0!==O&&1!=g?_d:md}function s(a){let s;for(t||(t=[],e=[],n=new Int32Array(Pd+1),r=[],i=new Int32Array(Pd),o=new Int32Array(Pd+1)),e.length<a&&(e=[]),s=0;s<a;s++)e[s]=0;for(s=0;s<Pd+1;s++)n[s]=0;for(s=0;s<3;s++)r[s]=0;i.set(n.subarray(0,Pd),0),o.set(n.subarray(0,Pd+1),0)}this.inflate_trees_bits=function(n,r,i,o,l){let u;return s(19),t[0]=0,u=a(n,0,19,19,null,null,i,r,o,t,e),u==yd?l.msg="oversubscribed dynamic bit lengths tree":u!=_d&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",u=yd),u},this.inflate_trees_dynamic=function(n,r,i,o,l,u,c,h,f){let d;return s(288),t[0]=0,d=a(i,0,n,257,Md,Td,u,o,h,t,e),d!=md||0===o[0]?(d==yd?f.msg="oversubscribed literal/length tree":d!=bd&&(f.msg="incomplete literal/length tree",d=yd),d):(s(288),d=a(i,n,r,0,Ad,Od,c,l,h,t,e),d!=md||0===l[0]&&n>257?(d==yd?f.msg="oversubscribed distance tree":d==_d?(f.msg="incomplete distance tree",d=yd):d!=bd&&(f.msg="empty distance tree with lengths",d=yd),d):md)}}Cd.inflate_trees_fixed=function(t,e,n,r){return t[0]=9,e[0]=5,n[0]=Sd,r[0]=Ed,md};const kd=0,Rd=1,Nd=2,Ld=3,Id=4,Dd=5,jd=6,zd=7,Ud=8,Bd=9;function Fd(){const t=this;let e,n,r,i,o=0,a=0,s=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0;function m(t,e,n,r,i,o,a,s){let l,u,c,h,f,d,p,m,v,g,y,b,_,x,w,S;p=s.next_in_index,m=s.avail_in,f=a.bitb,d=a.bitk,v=a.write,g=v<a.read?a.read-v-1:a.end-v,y=xd[t],b=xd[e];do{for(;d<20;)m--,f|=(255&s.read_byte(p++))<<d,d+=8;if(l=f&y,u=n,c=r,S=3*(c+l),0!==(h=u[S]))for(;;){if(f>>=u[S+1],d-=u[S+1],0!=(16&h)){for(h&=15,_=u[S+2]+(f&xd[h]),f>>=h,d-=h;d<15;)m--,f|=(255&s.read_byte(p++))<<d,d+=8;for(l=f&b,u=i,c=o,S=3*(c+l),h=u[S];;){if(f>>=u[S+1],d-=u[S+1],0!=(16&h)){for(h&=15;d<h;)m--,f|=(255&s.read_byte(p++))<<d,d+=8;if(x=u[S+2]+(f&xd[h]),f>>=h,d-=h,g-=_,v>=x)w=v-x,v-w>0&&2>v-w?(a.win[v++]=a.win[w++],a.win[v++]=a.win[w++],_-=2):(a.win.set(a.win.subarray(w,w+2),v),v+=2,w+=2,_-=2);else{w=v-x;do{w+=a.end}while(w<0);if(h=a.end-w,_>h){if(_-=h,v-w>0&&h>v-w)do{a.win[v++]=a.win[w++]}while(0!=--h);else a.win.set(a.win.subarray(w,w+h),v),v+=h,w+=h,h=0;w=0}}if(v-w>0&&_>v-w)do{a.win[v++]=a.win[w++]}while(0!=--_);else a.win.set(a.win.subarray(w,w+_),v),v+=_,w+=_,_=0;break}if(0!=(64&h))return s.msg="invalid distance code",_=s.avail_in-m,_=d>>3<_?d>>3:_,m+=_,p-=_,d-=_<<3,a.bitb=f,a.bitk=d,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=v,yd;l+=u[S+2],l+=f&xd[h],S=3*(c+l),h=u[S]}break}if(0!=(64&h))return 0!=(32&h)?(_=s.avail_in-m,_=d>>3<_?d>>3:_,m+=_,p-=_,d-=_<<3,a.bitb=f,a.bitk=d,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=v,vd):(s.msg="invalid literal/length code",_=s.avail_in-m,_=d>>3<_?d>>3:_,m+=_,p-=_,d-=_<<3,a.bitb=f,a.bitk=d,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=v,yd);if(l+=u[S+2],l+=f&xd[h],S=3*(c+l),0===(h=u[S])){f>>=u[S+1],d-=u[S+1],a.win[v++]=u[S+2],g--;break}}else f>>=u[S+1],d-=u[S+1],a.win[v++]=u[S+2],g--}while(g>=258&&m>=10);return _=s.avail_in-m,_=d>>3<_?d>>3:_,m+=_,p-=_,d-=_<<3,a.bitb=f,a.bitk=d,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=v,md}t.init=function(t,o,a,s,l,u){e=kd,h=t,f=o,r=a,d=s,i=l,p=u,n=null},t.proc=function(t,v,g){let y,b,_,x,w,S,E,M=0,T=0,A=0;for(A=v.next_in_index,x=v.avail_in,M=t.bitb,T=t.bitk,w=t.write,S=w<t.read?t.read-w-1:t.end-w;;)switch(e){case kd:if(S>=258&&x>=10&&(t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,g=m(h,f,r,d,i,p,t,v),A=v.next_in_index,x=v.avail_in,M=t.bitb,T=t.bitk,w=t.write,S=w<t.read?t.read-w-1:t.end-w,g!=md)){e=g==vd?zd:Bd;break}s=h,n=r,a=d,e=Rd;case Rd:for(y=s;T<y;){if(0===x)return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);g=md,x--,M|=(255&v.read_byte(A++))<<T,T+=8}if(b=3*(a+(M&xd[y])),M>>>=n[b+1],T-=n[b+1],_=n[b],0===_){l=n[b+2],e=jd;break}if(0!=(16&_)){u=15&_,o=n[b+2],e=Nd;break}if(0==(64&_)){s=_,a=b/3+n[b+2];break}if(0!=(32&_)){e=zd;break}return e=Bd,v.msg="invalid literal/length code",g=yd,t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);case Nd:for(y=u;T<y;){if(0===x)return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);g=md,x--,M|=(255&v.read_byte(A++))<<T,T+=8}o+=M&xd[y],M>>=y,T-=y,s=f,n=i,a=p,e=Ld;case Ld:for(y=s;T<y;){if(0===x)return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);g=md,x--,M|=(255&v.read_byte(A++))<<T,T+=8}if(b=3*(a+(M&xd[y])),M>>=n[b+1],T-=n[b+1],_=n[b],0!=(16&_)){u=15&_,c=n[b+2],e=Id;break}if(0==(64&_)){s=_,a=b/3+n[b+2];break}return e=Bd,v.msg="invalid distance code",g=yd,t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);case Id:for(y=u;T<y;){if(0===x)return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);g=md,x--,M|=(255&v.read_byte(A++))<<T,T+=8}c+=M&xd[y],M>>=y,T-=y,e=Dd;case Dd:for(E=w-c;E<0;)E+=t.end;for(;0!==o;){if(0===S&&(w==t.end&&0!==t.read&&(w=0,S=w<t.read?t.read-w-1:t.end-w),0===S&&(t.write=w,g=t.inflate_flush(v,g),w=t.write,S=w<t.read?t.read-w-1:t.end-w,w==t.end&&0!==t.read&&(w=0,S=w<t.read?t.read-w-1:t.end-w),0===S)))return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);t.win[w++]=t.win[E++],S--,E==t.end&&(E=0),o--}e=kd;break;case jd:if(0===S&&(w==t.end&&0!==t.read&&(w=0,S=w<t.read?t.read-w-1:t.end-w),0===S&&(t.write=w,g=t.inflate_flush(v,g),w=t.write,S=w<t.read?t.read-w-1:t.end-w,w==t.end&&0!==t.read&&(w=0,S=w<t.read?t.read-w-1:t.end-w),0===S)))return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);g=md,t.win[w++]=l,S--,e=kd;break;case zd:if(T>7&&(T-=8,x++,A--),t.write=w,g=t.inflate_flush(v,g),w=t.write,S=w<t.read?t.read-w-1:t.end-w,t.read!=t.write)return t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);e=Ud;case Ud:return g=vd,t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);case Bd:return g=yd,t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g);default:return g=gd,t.bitb=M,t.bitk=T,v.avail_in=x,v.total_in+=A-v.next_in_index,v.next_in_index=A,t.write=w,t.inflate_flush(v,g)}},t.free=function(){}}const Hd=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Wd=0,Vd=1,Gd=2,qd=3,Xd=4,Zd=5,Yd=6,$d=7,Kd=8,Jd=9;function Qd(t,e){const n=this;let r,i=Wd,o=0,a=0,s=0;const l=[0],u=[0],c=new Fd;let h=0,f=new Int32Array(3*wd);const d=new Cd;n.bitk=0,n.bitb=0,n.win=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(t,e){e&&(e[0]=0),i==Yd&&c.free(t),i=Wd,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(t,null),n.inflate_flush=function(t,e){let r,i,o;return i=t.next_out_index,o=n.read,r=(o<=n.write?n.write:n.end)-o,r>t.avail_out&&(r=t.avail_out),0!==r&&e==_d&&(e=md),t.avail_out-=r,t.total_out+=r,t.next_out.set(n.win.subarray(o,o+r),i),i+=r,o+=r,o==n.end&&(o=0,n.write==n.end&&(n.write=0),r=n.write-o,r>t.avail_out&&(r=t.avail_out),0!==r&&e==_d&&(e=md),t.avail_out-=r,t.total_out+=r,t.next_out.set(n.win.subarray(o,o+r),i),i+=r,o+=r),t.next_out_index=i,n.read=o,e},n.proc=function(t,e){let p,m,v,g,y,b,_,x;for(g=t.next_in_index,y=t.avail_in,m=n.bitb,v=n.bitk,b=n.write,_=b<n.read?n.read-b-1:n.end-b;;){let w,S,E,M,T,A,O,P;switch(i){case Wd:for(;v<3;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}switch(p=7&m,h=1&p,p>>>1){case 0:m>>>=3,v-=3,p=7&v,m>>>=p,v-=p,i=Vd;break;case 1:w=[],S=[],E=[[]],M=[[]],Cd.inflate_trees_fixed(w,S,E,M),c.init(w[0],S[0],E[0],0,M[0],0),m>>>=3,v-=3,i=Yd;break;case 2:m>>>=3,v-=3,i=qd;break;case 3:return m>>>=3,v-=3,i=Jd,t.msg="invalid block type",e=yd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e)}break;case Vd:for(;v<32;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}if((~m>>>16&65535)!=(65535&m))return i=Jd,t.msg="invalid stored block lengths",e=yd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);o=65535&m,m=v=0,i=0!==o?Gd:0!==h?$d:Wd;break;case Gd:if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);if(0===_&&(b==n.end&&0!==n.read&&(b=0,_=b<n.read?n.read-b-1:n.end-b),0===_&&(n.write=b,e=n.inflate_flush(t,e),b=n.write,_=b<n.read?n.read-b-1:n.end-b,b==n.end&&0!==n.read&&(b=0,_=b<n.read?n.read-b-1:n.end-b),0===_)))return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);if(e=md,p=o,p>y&&(p=y),p>_&&(p=_),n.win.set(t.read_buf(g,p),b),g+=p,y-=p,b+=p,_-=p,0!=(o-=p))break;i=0!==h?$d:Wd;break;case qd:for(;v<14;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}if(a=p=16383&m,(31&p)>29||(p>>5&31)>29)return i=Jd,t.msg="too many length or distance symbols",e=yd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);if(p=258+(31&p)+(p>>5&31),!r||r.length<p)r=[];else for(x=0;x<p;x++)r[x]=0;m>>>=14,v-=14,s=0,i=Xd;case Xd:for(;s<4+(a>>>10);){for(;v<3;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}r[Hd[s++]]=7&m,m>>>=3,v-=3}for(;s<19;)r[Hd[s++]]=0;if(l[0]=7,p=d.inflate_trees_bits(r,l,u,f,t),p!=md)return(e=p)==yd&&(r=null,i=Jd),n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);s=0,i=Zd;case Zd:for(;p=a,!(s>=258+(31&p)+(p>>5&31));){let o,c;for(p=l[0];v<p;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}if(p=f[3*(u[0]+(m&xd[p]))+1],c=f[3*(u[0]+(m&xd[p]))+2],c<16)m>>>=p,v-=p,r[s++]=c;else{for(x=18==c?7:c-14,o=18==c?11:3;v<p+x;){if(0===y)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);e=md,y--,m|=(255&t.read_byte(g++))<<v,v+=8}if(m>>>=p,v-=p,o+=m&xd[x],m>>>=x,v-=x,x=s,p=a,x+o>258+(31&p)+(p>>5&31)||16==c&&x<1)return r=null,i=Jd,t.msg="invalid bit length repeat",e=yd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);c=16==c?r[x-1]:0;do{r[x++]=c}while(0!=--o);s=x}}if(u[0]=-1,T=[],A=[],O=[],P=[],T[0]=9,A[0]=6,p=a,p=d.inflate_trees_dynamic(257+(31&p),1+(p>>5&31),r,T,A,O,P,f,t),p!=md)return p==yd&&(r=null,i=Jd),e=p,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);c.init(T[0],A[0],f,O[0],f,P[0]),i=Yd;case Yd:if(n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,(e=c.proc(n,t,e))!=vd)return n.inflate_flush(t,e);if(e=md,c.free(t),g=t.next_in_index,y=t.avail_in,m=n.bitb,v=n.bitk,b=n.write,_=b<n.read?n.read-b-1:n.end-b,0===h){i=Wd;break}i=$d;case $d:if(n.write=b,e=n.inflate_flush(t,e),b=n.write,_=b<n.read?n.read-b-1:n.end-b,n.read!=n.write)return n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);i=Kd;case Kd:return e=vd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);case Jd:return e=yd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e);default:return e=gd,n.bitb=m,n.bitk=v,t.avail_in=y,t.total_in+=g-t.next_in_index,t.next_in_index=g,n.write=b,n.inflate_flush(t,e)}}},n.free=function(t){n.reset(t,null),n.win=null,f=null},n.set_dictionary=function(t,e,r){n.win.set(t.subarray(e,e+r),0),n.read=n.write=r},n.sync_point=function(){return i==Vd?1:0}}const tp=13,ep=[0,0,255,255];function np(){const t=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),md):gd}t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0,t.inflateEnd=function(e){return t.blocks&&t.blocks.free(e),t.blocks=null,md},t.inflateInit=function(n,r){return n.msg=null,t.blocks=null,r<8||r>15?(t.inflateEnd(n),gd):(t.wbits=r,n.istate.blocks=new Qd(n,1<<r),e(n),md)},t.inflate=function(t,e){let n,r;if(!t||!t.istate||!t.next_in)return gd;const i=t.istate;for(e=4==e?_d:md,n=_d;;)switch(i.mode){case 0:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(i.method=t.read_byte(t.next_in_index++)))){i.mode=tp,t.msg="unknown compression method",i.marker=5;break}if(8+(i.method>>4)>i.wbits){i.mode=tp,t.msg="invalid win size",i.marker=5;break}i.mode=1;case 1:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,r=255&t.read_byte(t.next_in_index++),((i.method<<8)+r)%31!=0){i.mode=tp,t.msg="incorrect header check",i.marker=5;break}if(0==(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,i.mode=3;case 3:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,i.mode=4;case 4:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,i.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,i.mode=5;case 5:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,i.need+=255&t.read_byte(t.next_in_index++),i.mode=6,2);case 6:return i.mode=tp,t.msg="need dictionary",i.marker=0,gd;case 7:if(n=i.blocks.proc(t,n),n==yd){i.mode=tp,i.marker=0;break}if(n==md&&(n=e),n!=vd)return n;n=e,i.blocks.reset(t,i.was),i.mode=12;case 12:return t.avail_in=0,vd;case tp:return yd;default:return gd}},t.inflateSetDictionary=function(t,e,n){let r=0,i=n;if(!t||!t.istate||6!=t.istate.mode)return gd;const o=t.istate;return i>=1<<o.wbits&&(i=(1<<o.wbits)-1,r=n-i),o.blocks.set_dictionary(e,r,i),o.mode=7,md},t.inflateSync=function(t){let n,r,i,o,a;if(!t||!t.istate)return gd;const s=t.istate;if(s.mode!=tp&&(s.mode=tp,s.marker=0),0===(n=t.avail_in))return _d;for(r=t.next_in_index,i=s.marker;0!==n&&i<4;)t.read_byte(r)==ep[i]?i++:i=0!==t.read_byte(r)?0:4-i,r++,n--;return t.total_in+=r-t.next_in_index,t.next_in_index=r,t.avail_in=n,s.marker=i,4!=i?yd:(o=t.total_in,a=t.total_out,e(t),t.total_in=o,t.total_out=a,s.mode=7,md)},t.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():gd}}function rp(){}rp.prototype={inflateInit(t){const e=this;return e.istate=new np,t||(t=15),e.istate.inflateInit(e,t)},inflate(t){const e=this;return e.istate?e.istate.inflate(e,t):gd},inflateEnd(){const t=this;if(!t.istate)return gd;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync(){const t=this;return t.istate?t.istate.inflateSync(t):gd},inflateSetDictionary(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):gd},read_byte(t){return this.next_in[t]},read_buf(t,e){return this.next_in.subarray(t,t+e)}},new Date(2107,11,31),new Date(1980,0,1);const ip=void 0,op="undefined";class ap{constructor(t){return class extends TransformStream{constructor(e,n){const r=new t(n);super({transform(t,e){e.enqueue(r.append(t))},flush(t){const e=r.flush();e&&t.enqueue(e)}})}}}}let sp=2;try{typeof navigator!=op&&navigator.hardwareConcurrency&&(sp=navigator.hardwareConcurrency)}catch(t){}const lp={chunkSize:524288,maxWorkers:sp,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:ip,CompressionStreamNative:typeof CompressionStream!=op&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=op&&DecompressionStream},up=Object.assign({},lp);function cp(t){const{baseURL:e,chunkSize:n,maxWorkers:r,terminateWorkerTimeout:i,useCompressionStream:o,useWebWorkers:a,Deflate:s,Inflate:l,CompressionStream:u,DecompressionStream:c,workerScripts:h}=t;if(hp("baseURL",e),hp("chunkSize",n),hp("maxWorkers",r),hp("terminateWorkerTimeout",i),hp("useCompressionStream",o),hp("useWebWorkers",a),s&&(up.CompressionStream=new ap(s)),l&&(up.DecompressionStream=new ap(l)),hp("CompressionStream",u),hp("DecompressionStream",c),h!==ip){const{deflate:t,inflate:e}=h;if((t||e)&&(up.workerScripts||(up.workerScripts={})),t){if(!Array.isArray(t))throw new Error("workerScripts.deflate must be an array");up.workerScripts.deflate=t}if(e){if(!Array.isArray(e))throw new Error("workerScripts.inflate must be an array");up.workerScripts.inflate=e}}}function hp(t,e){e!==ip&&(up[t]=e)}const fp={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};(()=>{const t={};for(const e of Object.keys(fp))for(const n of Object.keys(fp[e])){const r=fp[e][n];if("string"==typeof r)t[r]=e+"/"+n;else for(let i=0;i<r.length;i++)t[r[i]]=e+"/"+n}})();const dp=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;dp[t]=e}class pp extends TransformStream{constructor(){const t=new Crc32;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const e=new Uint8Array(4);new DataView(e.buffer).setUint32(0,t.get()),undefined.value=e}})}}const mp={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=mp.getPartial(n);return 32===r?t.concat(e):mp._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+mp.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=mp.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;const i=t.length?t[t.length-1]:0,o=mp.getPartial(i);return r.push(mp.partial(e+o&31,e+o>32?n:r.pop(),1)),r}},vp={bytes:{fromBits(t){const e=mp.bitLength(t)/8,n=new Uint8Array(e);let r;for(let i=0;i<e;i++)0==(3&i)&&(r=t[i/4]),n[i]=r>>>24,r<<=8;return n},toBits(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(mp.partial(8*(3&n),r)),e}}},gp=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;"string"==typeof t&&(t=vp.utf8String.toBits(t));const n=e._buffer=mp.concat(e._buffer,t),r=e._length,i=e._length=r+mp.bitLength(t);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const o=new Uint32Array(n);let a=0;for(let t=e.blockSize+r-(e.blockSize+r&e.blockSize-1);t<=i;t+=e.blockSize)e._block(o.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),e}finalize(){const t=this;let e=t._buffer;const n=t._h;e=mp.concat(e,[mp.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),n}_f(t,e,n,r){return t<=19?e&n|~e&r:t<=39?e^n^r:t<=59?e&n|e&r|n&r:t<=79?e^n^r:void 0}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,n=e._h,r=Array(80);for(let e=0;e<16;e++)r[e]=t[e];let i=n[0],o=n[1],a=n[2],s=n[3],l=n[4];for(let t=0;t<=79;t++){t>=16&&(r[t]=e._S(1,r[t-3]^r[t-8]^r[t-14]^r[t-16]));const n=e._S(5,i)+e._f(t,o,a,s)+l+r[t]+e._key[Math.floor(t/20)]|0;l=s,s=a,a=e._S(30,o),o=i,i=n}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0}},yp={importKey:t=>new yp.hmacSha1(vp.bytes.toBits(t)),pbkdf2(t,e,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,a,s,l,u;const c=new ArrayBuffer(i),h=new DataView(c);let f=0;const d=mp;for(e=vp.bytes.toBits(e),u=1;f<(i||1);u++){for(o=a=t.encrypt(d.concat(e,[u])),s=1;s<n;s++)for(a=t.encrypt(a),l=0;l<a.length;l++)o[l]^=a[l];for(s=0;f<(i||1)&&s<o.length;s++)h.setInt32(f,o[s]),f+=4}return c.slice(0,r/8)},hmacSha1:class{constructor(t){const e=this,n=e._hash=gp,r=[[],[]];e._baseHash=[new n,new n];const i=e._baseHash[0].blockSize/32;t.length>i&&(t=(new n).update(t).finalize());for(let e=0;e<i;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}};"undefined"!=typeof crypto&&crypto.getRandomValues;const bp={name:"PBKDF2"},_p=(Object.assign({hash:{name:"HMAC"}},bp),Object.assign({iterations:1e3,hash:{name:"SHA-1"}},bp),"undefined"),xp=typeof crypto!=_p,wp=xp&&crypto.subtle,Sp=xp&&typeof wp!=_p;vp.bytes,yp.hmacSha1,xp&&Sp&&wp.importKey,xp&&Sp&&wp.deriveBits;class Ep extends TransformStream{constructor({password:t,signed:e,encryptionStrength:n,checkPasswordOnly:r}){super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:t,signed:e,strength:n-1,pending:new Uint8Array})},async transform(t,e){const n=this,{password:i,strength:o,resolveReady:a,ready:s}=n;i?(await async function(t,e,n,r){const i=await createKeys(t,e,n,subarray(r,0,SALT_LENGTH[e])),o=subarray(r,SALT_LENGTH[e]);if(i[0]!=o[0]||i[1]!=o[1])throw new Error(ERR_INVALID_PASSWORD)}(n,o,i,subarray(t,0,SALT_LENGTH[o]+2)),subarray(t,SALT_LENGTH[o]+2),r?e.error(new Error(ERR_ABORT_CHECK_PASSWORD)):a()):await s;const l=new Uint8Array(t.length-SIGNATURE_LENGTH-(t.length-SIGNATURE_LENGTH)%BLOCK_LENGTH);e.enqueue(append(n,t,l,0,SIGNATURE_LENGTH,!0))},async flush(t){const{signed:e,ctr:n,hmac:r,pending:i,ready:o}=this;if(r&&n){await o;const a=subarray(i,0,i.length-SIGNATURE_LENGTH),s=subarray(i,i.length-SIGNATURE_LENGTH);let l=new Uint8Array;if(a.length){const t=toBits(codecBytes,a);r.update(t);const e=n.update(t);fromBits(codecBytes,e)}if(e){const t=subarray(fromBits(codecBytes,r.digest()),0,SIGNATURE_LENGTH);for(let e=0;e<SIGNATURE_LENGTH;e++)if(t[e]!=s[e])throw new Error(ERR_INVALID_SIGNATURE)}t.enqueue(l)}}})}}class Mp extends TransformStream{constructor({password:t,encryptionStrength:e}){let n;super({start(){Object.assign(this,{ready:new Promise((t=>this.resolveReady=t)),password:t,strength:e-1,pending:new Uint8Array})},async transform(t,e){const n=this,{password:r,strength:i,resolveReady:o,ready:a}=n;let s=new Uint8Array;r?(await async function(t,e,n){const r=getRandomValues(new Uint8Array(SALT_LENGTH[e])),i=await createKeys(t,e,n,r);return concat(r,i)}(n,i,r),o()):await a;const l=new Uint8Array(s.length+t.length-t.length%BLOCK_LENGTH);l.set(s,0),e.enqueue(append(n,t,l,s.length,0))},async flush(t){const{ctr:e,hmac:r,pending:i,ready:o}=this;if(r&&e){await o;let a=new Uint8Array;if(i.length){const t=e.update(toBits(codecBytes,i));r.update(t),fromBits(codecBytes,t)}n.signature=fromBits(codecBytes,r.digest()).slice(0,SIGNATURE_LENGTH),t.enqueue(concat(a,n.signature))}}})}}class Tp extends TransformStream{constructor({password:t,passwordVerification:e,checkPasswordOnly:n}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),zip_crypto_stream_createKeys(this,t)},transform(t,e){const r=this;if(r.password){const e=decrypt(r,t.subarray(0,HEADER_LENGTH));if(r.password=null,e[11]!=r.passwordVerification)throw new Error(ERR_INVALID_PASSWORD);t.subarray(HEADER_LENGTH)}n?e.error(new Error(ERR_ABORT_CHECK_PASSWORD)):e.enqueue(decrypt(r,t))}})}}class Ap extends TransformStream{constructor({password:t,passwordVerification:e}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),zip_crypto_stream_createKeys(this,t)},transform(t,e){const n=this;let r;if(n.password){n.password=null;const e=getRandomValues(new Uint8Array(HEADER_LENGTH));e[11]=n.passwordVerification,new Uint8Array(t.length+e.length),r.set(encrypt(n,e),0),HEADER_LENGTH}else new Uint8Array(t.length);r.set(encrypt(n,t),undefined),e.enqueue(r)}})}}class Op extends TransformStream{constructor(t,{chunkSize:e,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:i,encrypted:o,useCompressionStream:a,zipCrypto:s,signed:l,level:u}=t,c=this;let h,f,d=filterEmptyChunks(super.readable);o&&!s||!l||(new pp,pipeThrough(d,h)),i&&pipeThroughCommpressionStream(d,a,{level:u,chunkSize:e},r,n),o&&(s?pipeThrough(d,new Ap(t)):(new Mp(t),pipeThrough(d,f))),setReadable(c,d,(()=>{o&&!s&&f.signature,o&&!s||!l||new DataView(h.value.buffer).getUint32(0),c.signature=undefined}))}}class Pp extends TransformStream{constructor(t,{chunkSize:e,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:a,signature:s,compressed:l,useCompressionStream:u}=t;let c,h=filterEmptyChunks(super.readable);o&&(i?pipeThrough(h,new Tp(t)):(new Ep(t),pipeThrough(h,undefined))),l&&pipeThroughCommpressionStream(h,u,{chunkSize:e},r,n),o&&!i||!a||(new pp,pipeThrough(h,c)),setReadable(this,h,(()=>{if((!o||i)&&a){const t=new DataView(c.value.buffer);if(s!=t.getUint32(0,!1))throw new Error(ERR_INVALID_SIGNATURE)}}))}}class Cp extends TransformStream{constructor(t,e){super({});const n=this,{codecType:r}=t;r.startsWith(CODEC_DEFLATE)||r.startsWith(CODEC_INFLATE);const i=new undefined(t,e),o=super.readable,a=new TransformStream({transform(t,e){t&&t.length&&(t.length,e.enqueue(t))},flush(){const{signature:t}=i;Object.assign(n,{signature:t,size:0})}});Object.defineProperty(n,"readable",{get:()=>o.pipeThrough(i).pipeThrough(a)})}}class kp extends TransformStream{constructor(t,{onstart:e,onprogress:n,size:r,onend:i},{chunkSize:o}){super({start(){e&&callHandler(e,r)},async transform(t,e){t.length,n&&await callHandler(n,0,r),e.enqueue(t)},flush(){t.size=0,i&&callHandler(i,0)}},{highWaterMark:1,size:()=>o})}}let Rp;"\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split("").length,new Uint8Array([7,0,2,0,65,69,3,0,0]);try{Rp="file:///C:/Users/mmilv/Documents/Github/react-vrts-viewer/node_modules/@zip.js/zip.js/lib/zip-fs.js"}catch(t){}function Np(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||Ip(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(t){return function(t){if(Array.isArray(t))return Dp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ip(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(t,e){if(t){if("string"==typeof t)return Dp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dp(t,e):void 0}}function Dp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cp({baseURL:Rp}),function(t){const e=()=>URL.createObjectURL(new Blob(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self;class k{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const v=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;v[e]=t}class S{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^v[255&(t^e[n])];this.t=t}get(){return~this.t}}class z extends p{constructor(){let e;const t=new S;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const C={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=C.i(n);return 32===r?e.concat(t):C.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+C.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=C.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=C.i(s);return r.push(C.h(t+i&31,t+i>32?n:r.pop(),1)),r}},x={p:{m(e){const t=C.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},g(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(C.h(8*(3&n),r)),t}}},_=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t._=e._):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e._=0,e}update(e){const t=this;"string"==typeof e&&(e=x.A.g(e));const n=t.C=C.concat(t.C,e),r=t._,i=t._=r+C.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.I(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}D(){const e=this;let t=e.C;const n=e.S;t=C.concat(t,[C.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._/4294967296)),t.push(0|e._);t.length;)e.I(t.splice(0,16));return e.reset(),n}V(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}P(e,t){return t<<e|t>>>32-e}I(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.P(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.P(5,o)+n.V(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.P(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},A={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},I={importKey:e=>new I.R(x.p.g(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=C;for(t=x.p.g(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=_,r=[[],[]];t.U=[new n,new n];const s=t.U[0].blockSize/32;e.length>s&&(e=(new n).update(e).D());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.U[0].update(r[0]),t.U[1].update(r[1]),t.K=new n(t.U[0])}reset(){const e=this;e.K=new e.M(e.U[0]),e.N=!1}update(e){this.N=!0,this.K.update(e)}digest(){const e=this,t=e.K.D(),n=new e.M(e.U[1]).update(t).D();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},D=void 0!==h&&"function"==typeof h.getRandomValues,V="Invalid password",P="Invalid signature",R="zipjs-abort-check-password";function B(e){return D?h.getRandomValues(e):A.getRandomValues(e)}const E=16,M={name:"PBKDF2"},U=t.assign({hash:{name:"HMAC"}},M),K=t.assign({iterations:1e3,hash:{name:"SHA-1"}},M),N=["deriveBits"],O=[8,12,16],T=[16,24,32],W=10,j=[0,0,0,0],H="undefined",L="function",F=typeof h!=H,q=F&&h.subtle,G=F&&typeof q!=H,J=x.p,Q=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},X=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=C.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return C.u(t,s)}},Y=I.R;let Z=F&&G&&typeof q.importKey==L,$=F&&G&&typeof q.deriveBits==L;class ee extends p{constructor({password:e,signed:n,encryptionStrength:r,checkPasswordOnly:o}){super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,signed:n,X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:c,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await re(e,t,n,ie(r,0,O[t])),o=ie(r,O[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(V)})(n,c,r,ie(e,0,O[c]+2)),e=ie(e,O[c]+2),o?t.error(new s(R)):f()):await a;const l=new i(e.length-W-(e.length-W)%E);t.enqueue(ne(n,e,l,0,W,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ie(o,0,o.length-W),a=ie(o,o.length-W);let l=new i;if(f.length){const e=ce(J,f);r.update(e);const t=n.update(e);l=oe(J,t)}if(t){const e=ie(oe(J,r.digest()),0,W);for(let t=0;W>t;t++)if(e[t]!=a[t])throw new s(P)}e.enqueue(l)}}})}}class te extends p{constructor({password:e,encryptionStrength:n}){let r;super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,X:n-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=B(new i(O[t]));return se(r,await re(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%E);a.set(f,0),t.enqueue(ne(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:s,ready:o}=this;if(n&&t){await o;let c=new i;if(s.length){const e=t.update(ce(J,s));n.update(e),c=oe(J,e)}r.signature=oe(J,n.digest()).slice(0,W),e.enqueue(se(c,r.signature))}}}),r=this}}function ne(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=se(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%E)),u=0;l-E>=u;u+=E){const e=ce(J,ie(t,u,u+E));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(oe(J,s),u+r)}return e.pending=ie(t,u),n}async function re(n,r,s,o){n.password=null;const c=(e=>{if(void 0===w){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(s),f=await(async(e,t,n,r,s)=>{if(!Z)return I.importKey(t);try{return await q.importKey("raw",t,n,!1,s)}catch(e){return Z=!1,I.importKey(t)}})(0,c,U,0,N),a=await(async(e,t,n)=>{if(!$)return I.B(t,e.salt,K.iterations,n);try{return await q.deriveBits(e,t,n)}catch(r){return $=!1,I.B(t,e.salt,K.iterations,n)}})(t.assign({salt:o},K),f,8*(2*T[r]+2)),l=new i(a),u=ce(J,ie(l,0,T[r])),h=ce(J,ie(l,T[r],2*T[r])),d=ie(l,2*T[r]);return t.assign(n,{keys:{key:u,$:h,passwordVerification:d},Y:new X(new Q(u),e.from(j)),Z:new Y(h)}),d}function se(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ie(e,t,n){return e.subarray(t,n)}function oe(e,t){return e.m(t)}function ce(e,t){return e.g(t)}class fe extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;if(n.password){const t=le(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(V);e=e.subarray(12)}r?t.error(new s(R)):t.enqueue(le(n,e))}})}}class ae extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=B(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(ue(n,t),0),s=12}else r=new i(e.length),s=0;r.set(ue(n,e),s),t.enqueue(r)}})}}function le(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,n[r]);return n}function ue(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,t[r]);return n}function we(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new S(r[0]),te:new S(r[2])});for(let t=0;t<n.length;t++)he(e,n.charCodeAt(t))}function he(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=ye(r.imul(ye(s+pe(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function de(e){const t=2|e.keys[2];return pe(r.imul(t,1^t)>>>8)}function pe(e){return 255&e}function ye(e){return 4294967295&e}const me="deflate-raw";class be extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=ke(super.readable);i&&!c||!f||(w=new z,d=ze(d,w)),s&&(d=Se(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=ze(d,new ae(e)):(h=new te(e),d=ze(d,h))),ve(u,d,(()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e}))}}class ge extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=ke(super.readable);o&&(i?d=ze(d,new fe(e)):(h=new ee(e),d=ze(d,h))),a&&(d=Se(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new z,d=ze(d,w)),ve(this,d,(()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(P)}}))}}function ke(e){return ze(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ve(e,n,r){n=ze(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Se(e,t,n,r,s){try{e=ze(e,new(t&&r?r:s)(me,n))}catch(r){if(!t)throw r;e=ze(e,new s(me,n))}return e}function ze(e,t){return e.pipeThrough(t)}const Ce="data";class xe extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=be:s.startsWith("inflate")&&(i=ge);let o=0;const c=new i(e,n),f=super.readable,a=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=c;t.assign(r,{signature:e,size:o})}});t.defineProperty(r,"readable",{get:()=>f.pipeThrough(c).pipeThrough(a)})}}const _e=new a,Ae=new a;let Ie=0;async function De(e){try{const{options:t,scripts:r,config:s}=e;r&&r.length&&importScripts.apply(void 0,r),self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new k(self.Deflate)),self.Inflate&&(s.DecompressionStream=new k(self.Inflate));const i={highWaterMark:1,size:()=>s.chunkSize},o=e.readable||new y({async pull(e){const t=new u((e=>_e.set(Ie,e)));Ve({type:"pull",messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ae.set(Ie,t),Ve({type:Ce,value:e,messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new xe(t,s);await o.pipeThrough(f).pipeTo(c,{preventClose:!0,preventAbort:!0});try{await c.getWriter().close()}catch(e){}const{signature:a,size:l}=f;Ve({type:"close",result:{signature:a,size:l}})}catch(e){Pe(e)}}function Ve(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Pe(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i}=e;d({error:{message:t,stack:n,code:r,name:i}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&De(e),t==Ce){const e=_e.get(n);_e.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ae.get(n);Ae.delete(n),e()}}catch(e){Pe(e)}}));const Re=-2;function Be(t){return Ee(t.map((([t,n])=>new e(t).fill(n,0,t))))}function Ee(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?Ee(n):n)),[])}const Me=[0,1,2,3].concat(...Be([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Ue(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function Ke(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}Ue.ge=[0,1,2,3,4,5,6,7].concat(...Be([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Ue.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Ue.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Ue.Se=e=>256>e?Me[e]:Me[256+(e>>>7)],Ue.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ue.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ue.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ue._e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ne=Be([[144,8],[112,9],[24,7],[8,8]]);Ke.Ae=Ee([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Ne[t]])));const Oe=Be([[30,5]]);function Te(e,t,n,r,s){const i=this;i.Ie=e,i.De=t,i.Ve=n,i.Pe=r,i.Re=s}Ke.Be=Ee([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Oe[t]]))),Ke.Ee=new Ke(Ke.Ae,Ue.ze,257,286,15),Ke.Me=new Ke(Ke.Be,Ue.Ce,0,30,15),Ke.Ue=new Ke(null,Ue.xe,0,19,7);const We=[new Te(0,0,0,0,0),new Te(4,4,8,4,1),new Te(4,5,16,8,1),new Te(4,6,32,32,1),new Te(4,4,16,16,2),new Te(8,16,32,32,2),new Te(8,16,128,128,2),new Te(8,32,128,256,2),new Te(32,128,258,1024,2),new Te(32,258,258,4096,2)],je=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],He=113,Le=666,Fe=262;function qe(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function Ge(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,_,A,I,D,V,P,R,B,E,M,U;const K=new Ue,N=new Ue,O=new Ue;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ke[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(Ue.ge[n]+256+1)]++,M[2*Ue.Se(t)]++),0==(8191&W)&&V>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+Ue.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=Ue.ge[s],Y(i+256+1,t),o=Ue.ze[i],0!==o&&(s-=Ue.ke[i],X(s,o)),r--,i=Ue.Se(r),Y(i,n),o=Ue.Ce[i],0!==o&&(r-=Ue.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ke.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;V>0?(K.ne(e),N.ne(e),o=(()=>{let t;for(G(E,K.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===U[2*Ue._e[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(Ke.Ae,Ke.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*Ue._e[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-_-C,0===s&&0===C&&0===_)s=f;else if(-1==s)s--;else if(C>=f+f-Fe){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.We)return;e=t.je(u,C+_,s),_+=e,3>_||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Fe>_&&0!==t.We)}function oe(e){let t,n,r=I,s=C,i=A;const o=C>f-Fe?C-(f-Fe):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>A||(r>>=2),c>_&&(c=_);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>_?_:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],U=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&qe(t,r[i+1],r[i],e.le)&&i++,!qe(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Re:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ke=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),V=S,P=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=He,c=0,K.re=E,K.ie=Ke.Ee,N.re=M,N.ie=Ke.Me,O.re=U,O.ie=Ke.Ue,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe,C=0,k=0,_=0,v=A=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=He&&n!=Le?Re:(e.Oe=null,e.Ne=null,e.Ke=null,d=null,h=null,u=null,e.Fe=null,n==He?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Re:(We[V].Re!=We[t].Re&&0!==e.qe&&(r=e.Ye(1)),V!=t&&(V=t,D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe),P=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Re;if(3>i)return 0;for(i>f-Fe&&(i=f-Fe,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return Re;if(!r.$e||!r.et&&0!==r.We||n==Le&&4!=i)return r.Le=je[4],Re;if(0===r.tt)return r.Le=je[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(V-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=He,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&I>=i&&4!=i)return t.Le=je[7],-5;if(n==Le&&0!==t.We)return r.Le=je[7],-5;if(0!==t.We||0!==_||0!=i&&n!=Le){switch(R=-1,We[V].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=_){if(ie(),0===_&&0==e)return 0;if(0===_)break}if(C+=_,_=0,n=k+r,(0===C||C>=n)&&(_=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Fe&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Fe||2!=P&&(v=oe(r)),3>v)n=ee(0,255&u[C]),_--,C++;else if(n=ee(C-x,v-3),_-=v,v>D||3>_)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),A=v,S=x,v=2,0!==s&&D>A&&f-Fe>=(C-s&65535)&&(2!=P&&(v=oe(s)),5>=v&&(1==P||3==v&&C-x>4096)&&(v=2)),3>A||v>A)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,_--,0===t.tt)return 0}else z=1,C++,_--;else{r=C+_-3,n=ee(C-1-S,A-3),_-=A-1,A-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--A);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Le),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,Ke.Ae),$(),9>1+H+10-F&&(X(2,3),Y(256,Ke.Ae),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function Je(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function Qe(e){const t=new Je,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.subarray(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}Je.prototype={He(e,t){const n=this;return n.Fe=new Ge,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Re},Qe(){const e=this;if(!e.Fe)return Re;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Re},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Re},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ke.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const Xe=-2,Ye=-3,Ze=-5,$e=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],et=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],tt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],nt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],st=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function ot(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,_,A,I,D;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return Ye;if(0>(I-=n[g]))return Ye;for(n[g]+=I,i[1]=k=0,C=1,A=2;0!=--g;)i[A]=k+=n[C],A++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,_=-S,s[0]=0,x=0,D=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>_+S;){if(b++,_+=S,D=m-_,D=D>S?S:D,(y=1<<(k=v-_))>p+1&&(y-=p+1,A=v,D>k))for(;++k<D&&(y<<=1)>n[++A];)y-=n[A];if(D=1<<k,h[0]+D>1440)return Ye;s[b]=x=h[0],h[0]+=D,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>_-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-_,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-_,k=g>>>_;D>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;0!=(g&k);k>>>=1)g^=k;for(g^=k,z=(1<<_)-1;(g&z)!=i[b];)b--,_-=S,z=(1<<_)-1}return 0!==I&&1!=m?Ze:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==Ye?f.Le="oversubscribed dynamic bit lengths tree":a!=Ze&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=Ye),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,nt,rt,a,i,u,e,t),0!=h||0===i[0]?(h==Ye?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=Ye),h):(c(288),h=o(s,n,r,0,st,it,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==Ye?w.Le="oversubscribed distance tree":h==Ze?(w.Le="incomplete distance tree",h=Ye):-4!=h&&(w.Le="empty distance tree with lengths",h=Ye),h):0)}}function ct(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=$e[e],g=$e[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15,k=a[z+2]+(w&$e[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&$e[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(0!=(64&u))return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye;f+=a[z+2],f+=w&$e[u],z=3*(l+f),u=a[z]}break}if(0!=(64&u))return 0!=(32&u)?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye);if(f+=a[z+2],f+=w&$e[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,_=0,A=0;for(A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,m=p(u,w,r,h,s,d,e,y),A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>>=n[g+1],_-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(0!=(16&k)){a=15&k,i=n[g+2],t=2;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}if(0!=(32&k)){t=7;break}return t=9,y.Le="invalid literal/length code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 2:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}i+=x&$e[b],x>>=b,_-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>=n[g+1],_-=n[g+1],k=n[g],0!=(16&k)){a=15&k,l=n[g+2],t=4;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 4:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}l+=x&$e[b],x>>=b,_-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(_>7&&(_-=8,v++,A--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 9:return m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);default:return m=Xe,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m)}},e.ht=()=>{}}ot.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=et,r[0]=tt,0);const ft=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function at(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new ct;let h=0,d=new f(4320);const p=new ot;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,_,A,I,D;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],ot.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[ft[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[ft[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==Ye&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&$e[i]))+1],w=d[3*(u[0]+(f&$e[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&$e[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,_=[],A=[],I=[],D=[],_[0]=9,A[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,_,A,I,D,d,e),0!=i)return i==Ye&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(_[0],A[0],d,I[0],d,D[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=Xe,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const lt=13,ut=[0,0,255,255];function wt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):Xe}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),Xe):(e.zt=r,n.gt.kt=new at(n,1<<r),t(n),0)),e._t=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return Xe;const s=e.gt;for(t=4==t?Ze:0,n=Ze;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=lt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=lt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=lt,e.Le="incorrect header check",s.marker=5;break}if(0==(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=lt,e.Le="need dictionary",s.marker=0,Xe;case 7:if(n=s.kt.ut(e,n),n==Ye){s.mode=lt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case lt:return Ye;default:return Xe}},e.At=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return Xe;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e.It=e=>{let n,r,s,i,o;if(!e||!e.gt)return Xe;const c=e.gt;if(c.mode!=lt&&(c.mode=lt,c.marker=0),0===(n=e.We))return Ze;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==ut[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?Ye:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Dt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():Xe}function ht(){}function dt(e){const t=new ht,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t._t(0),c&&a===Ze){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.subarray(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.Ct()}}ht.prototype={xt(e){const t=this;return t.gt=new wt,e||(e=15),t.gt.xt(t,e)},_t(e){const t=this;return t.gt?t.gt._t(t,e):Xe},Ct(){const e=this;if(!e.gt)return Xe;const t=e.gt.Ct(e);return e.gt=null,t},It(){const e=this;return e.gt?e.gt.It(e):Xe},At(e,t){const n=this;return n.gt?n.gt.At(n,e,t):Xe},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=Qe,self.Inflate=dt};\n'],{type:"text/javascript"}));t({workerScripts:{inflate:[e],deflate:[e]}})}(cp),cp({Deflate:function(t){const e=new pd,n=(r=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(r/16383)+1);var r;const i=new Uint8Array(n);let o=t?t.level:-1;void 0===o&&(o=-1),e.deflateInit(o),e.next_out=i,this.append=function(t,r){let o,a,s=0,l=0,u=0;const c=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,o=e.deflate(0),0!=o)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==n?c.push(new Uint8Array(i)):c.push(i.subarray(0,e.next_out_index))),u+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=s&&(r(e.next_in_index),s=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return c.length>1?(a=new Uint8Array(u),c.forEach((function(t){a.set(t,l),l+=t.length}))):a=c[0]?new Uint8Array(c[0]):new Uint8Array,a}},this.flush=function(){let t,r,o=0,a=0;const s=[];do{if(e.next_out_index=0,e.avail_out=n,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&s.push(i.slice(0,e.next_out_index)),a+=e.next_out_index}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),r=new Uint8Array(a),s.forEach((function(t){r.set(t,o),o+=t.length})),r}},Inflate:function(t){const e=new rp,n=t&&t.chunkSize?Math.floor(2*t.chunkSize):131072,r=new Uint8Array(n);let i=!1;e.inflateInit(),e.next_out=r,this.append=function(t,o){const a=[];let s,l,u=0,c=0,h=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||i||(e.next_in_index=0,i=!0),s=e.inflate(0),i&&s===_d){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(s!==md&&s!==vd)throw new Error("inflating: "+e.msg);if((i||s===vd)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?a.push(new Uint8Array(r)):a.push(r.subarray(0,e.next_out_index))),h+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=u&&(o(e.next_in_index),u=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return a.length>1?(l=new Uint8Array(h),a.forEach((function(t){l.set(t,c),c+=t.length}))):l=a[0]?new Uint8Array(a[0]):new Uint8Array,l}},this.flush=function(){e.inflateEnd()}}});var jp=function(t){var e=t.sampleIds,n=t.csv;if(ss(n)){var r=Zp(n).reduce((function(t,e,n){return t[e]=n,t}),{}),i=[];return e.forEach((function(t,e){var o=r[t];void 0!==o&&i.push(n.body[o])})),{head:Lp(n.head),body:i}}},zp=function(t,e){return ke("".concat(t,"-").concat(e))},Up=function(t){return function(e){var n=Gf().polynomial(e,{precision:20,order:t});return{prediction:n.points,r2:n.r2}}},Bp=function(t){return function(e){var n=Gf().exponential(e,{precision:20,order:t});return{prediction:n.points,r2:n.r2}}},Fp=function(t){return isNaN(t)||!isFinite(t)?0:t},Hp=function(t,e,n,r,i){var o=Object.values(n.xy),a=o.map((function(t){return[t.x,t.y]})),s=Array.from(i).map((function(t){var e;return(null===(e=o[t])||void 0===e?void 0:e.id)||""})).filter((function(t){return""!==t})),l=o.reduce((function(e,r,i){var o=s.includes(r.id);return e[r.id]={id:r.id,uid:t,x:r.x,y:r.y,prediction:0,residual:0,zScore:0,outlier:o,horizon:n.horizon},e}),{});try{for(var u=e(a),c=u.prediction.map((function(t,e){return a[e][1]-t[1]})),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mc;return function(t,e){return vc(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc)/e*100}(t,pc(t),e)}(c.map((function(t){return Math.abs(t)}))),f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mc;return function(t,e){var n=vc(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc);return t.map((function(t){return function(t){return(t-e)/n}(t)}))}(t,pc(t),e)}(c).map((function(t){return gc(Math.abs(t),3)})),d=0;d<o.length;d++){var p=l[o[d].id];p.prediction=u.prediction[d][1],p.residual=c[d],p.zScore=f[d]}return Mr({r2:Fp(u.r2),cov:Fp(h),predictions:l,horizon:n.horizon})}catch(t){return Tr(t)}return Tr("No data")},Wp=function(t,e,n,r){return ke("".concat(t,"-").concat(e,"-").concat(n,"-").concat(r))},Vp=function(t){var e=t.map((function(e){return e/t.length})),n=1/dc(e);return e.map((function(t){return t*n}))},Gp=function(t){return!isNaN(t)&&isFinite(t)},qp=Zf((function(t){return 0!==t})),Xp=function(t,e){if(void 0===t||void 0===t.results)return Tr("Invalid regression result for ".concat(e));var n=[t.results.linear.r2,t.results.polynomial.r2,t.results.exponential.r2].map((function(t){return Gp(t)?t:0})),r=[t.results.linear.cov,t.results.polynomial.cov,t.results.exponential.cov].map((function(t){return Gp(t)?t:0})),i=Vp(n),o=Vp(r);if(dc(i)<.99||dc(o)<.99)return Tr("Invalid normalisation for ".concat(e,". R2: ").concat(i," sum: ").concat(dc(i),", Cov: ").concat(o," sum: ").concat(dc(o)));var a=Yf(i,o).filter(qp).sort((function(t,e){return e[0]-t[0]+t[1]-e[1]}))[0],s=i.indexOf(a[0]),l=n[s],u=r[s];return Mr([l,u,["linear","polynomial","exponential"][s]])},Zp=function(t){var e=ds(t)["Sample ID"];return void 0===e?[]:e.map((function(t){return t.split(" ")[0]}))};function Yp(t){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(t)}function $p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$p(Object(n),!0).forEach((function(e){Jp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jp(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Yp(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Yp(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qp=function(){return{fusionData:{type:ps.Empty,csv:{head:[],body:[]}},fusionSampleIds:[]}},tm=Qp(),em=new ba("Fusion Machine");function nm(t){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(t)}function rm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||im(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function im(t,e){if(t){if("string"==typeof t)return om(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?om(t,e):void 0}}function om(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function am(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?am(Object(n),!0).forEach((function(e){lm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):am(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==nm(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nm(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}em.observer.subscribe({next:function(t){switch(t.value){case sa:tm=Qp();break;case ca:var e=Ds.data.soilFusion,n=(e.type,e.csv);if(void 0===n)return void em.service.send(ma);if(0===n.head.length)return Ue("Fusion Header Error","Fusion csv has no header"),void em.service.send(ma);if(0===n.body.length)return Ue("Fusion Body Error","Fusion csv has no body"),void em.service.send(ma);tm=Kp(Kp({},tm),{},{fusionData:{type:ps.SoilFusion,csv:n}});var r=ds(tm.fusionData.csv)["Sample ID"];if(void 0===r)return void em.service.send(ma);tm=Kp(Kp({},tm),{},{fusionSampleIds:r}),em.service.send(pa)}}});var um={uiXYState:zf(),uiRegressionState:Uf(),xyState:{xName:"",xData:{head:[],body:[]},xDataExtra:{head:[],body:[]},yName:"",yData:{head:[],body:[]},yDataExtra:{head:[],body:[]},sampleIds:[],xyResults:{}},regressionState:{results:{},ranking:[],selectedResult:null,predictions:[]},outliersState:{outliers:{}},reportState:Wf()},cm=new ba("Stats UI Regressions Machine");cm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{uiRegressionState:Uf()});break;case ua:var e=t.event.payload;void 0!==e.selectedRegression?e.selectedRegressionName=jf[e.selectedRegression].menuName:e.selectedRegressionName="NA",um=sm(sm({},um),{},{uiRegressionState:sm(sm({},um.uiRegressionState),e)}),cm.service.send({type:pa})}}});var hm=new ba("Stats UI XY Data Machine");hm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{uiXYState:zf()});break;case ua:var e=t.event.payload;if(void 0!==e.selectedHorizon&&void 0===Ds.data.soilHorizonData[e.selectedHorizon])return je("Missing horizon data","No data for horizon ".concat(Hs[e.selectedHorizon].menuName)),void hm.service.send(ma);n="longList",r=e,i=um.uiXYState[n],o=r[n],void 0!==i&&void 0!==o&&i!==o&&(e.selectedYVar=0,e.selectedXVar=0),0===e.selectedHorizon&&(fm.reset(),pm.reset()),void 0!==e.selectedHorizon&&(e.selectedHorizonName=Hs[e.selectedHorizon].menuName),um=sm(sm({},um),{},{uiXYState:sm(sm({},um.uiXYState),e)}),hm.service.send({type:pa})}var n,r,i,o}});var fm=new ba("Stats Data Machine");fm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{xyState:{xName:"",xData:{head:[],body:[]},xDataExtra:{head:[],body:[]},yName:"",yData:{head:[],body:[]},yDataExtra:{head:[],body:[]},sampleIds:[],xyResults:{}}});break;case ua:var e=t.event.payload;um=sm(sm({},um),{},{xyState:sm(sm({},um.xyState),e)}),fm.service.send({type:pa})}}}),qo(js.observer,em.observer,hm.observer).subscribe({next:function(t){if(t.event.type===pa){var e=tm.fusionData.csv,n=Ds.data.soilHorizonData[um.uiXYState.selectedHorizon]||{head:[],body:[]},r=Zp(n),i=function(t,e){if(!t.length||!e.length)return[];var n=new Set(t),r=new Set(e);return Array.from(new Set(Lp(n).filter((function(t){return r.has(t)})))).sort()}(tm.fusionSampleIds,r),o={sampleIds:i};if(ss(e)&&i.length){var a=jp({sampleIds:i,csv:e}),s=cs(a,Lf),l=hs(a,Lf),u=s.head[um.uiXYState.selectedXVar];o=sm(sm({},o),{},{xData:s,xDataExtra:l,xName:u})}if(ss(n)&&i.length){var c=jp({sampleIds:i,csv:n});if(um.uiXYState.longList){var h=hs(c,If),f=h.head[um.uiXYState.selectedYVar];o=sm(sm({},o),{},{yData:h,yName:f})}else{var d=cs(c,Df),p=d.head[um.uiXYState.selectedYVar];o=sm(sm({},o),{},{yData:d,yName:p})}o=sm(sm({},o),{},{yDataExtra:cs(c,If)})}var m=function(t,e,n,r){var i={},o=[];if(!t.length)return Tr("No ids");for(var a=0;a<n.head.length;a++)for(var s=0;s<r.head.length;s++){var l=fs(n,a),u=fs(r,s),c=Yf(l.map((function(t){return parseFloat(t)})),u.map((function(t){return parseFloat(t)}))),h=c.reduce((function(e,n,r){var i=t[r];return i?(e[i]={id:t[r],x:n[0],y:n[1]},e):e}),{}),f=zp(n.head[a],r.head[s]);void 0!==i[f]&&o.push(f),i[f]={id:f,xName:n.head[a],yName:r.head[s],horizon:e,xy:h}}return o.length>0?Tr("Duplicate primary keys: ".concat(o.join(", "))):0===Object.keys(i).length?Tr("No data found"):Mr(i)}(o.sampleIds,Hs[um.uiXYState.selectedHorizon].menuName,o.xData,o.yData);if(m.isOk)return o=sm(sm({},o),{},{xyResults:m.value}),void fm.service.send({type:fa,payload:o});fm.service.send(ma)}}});var dm=new ba("Stats Regression Outliers Machine");dm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{outliersState:{outliers:{}}});break;case ua:var e=t.event.payload,n=jf[um.uiRegressionState.selectedRegression].menuName.toLowerCase(),r=Wp(um.uiXYState.selectedHorizonName,n,um.xyState.xName,um.xyState.yName),i=um.outliersState.outliers[r]||new Set;i.has(e)?i.delete(e):i.add(e);var o=sm(sm({},um.outliersState.outliers),{},lm({},r,i));um=sm(sm({},um),{},{outliersState:sm(sm({},um.outliersState),{},{outliers:o})}),dm.service.send({type:pa})}}});var pm=new ba("Stats Regression Machine");pm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{regressionState:{results:{},ranking:[],selectedResult:null,predictions:[]},outliersState:{outliers:{}}});break;case ua:var e=t.event.payload;um=sm(sm({},um),{},{regressionState:sm(sm({},um.regressionState),e)}),pm.service.send({type:pa})}}}),qo(cm.observer,fm.observer,dm.observer).subscribe({next:function(t){if(t.event.type===pa){var e=jf[um.uiRegressionState.selectedRegression].menuName.toLowerCase(),n=um.outliersState.outliers,r=function(t,e,n,r,i){for(var o=Object.keys(t),a=[],s={},l=0;l<o.length;l++){var u=o[l],c=t[o[l]],h=Wp(c.horizon,"linear",c.xName,c.yName),f=Wp(c.horizon,"polynomial",c.xName,c.yName),d=Wp(c.horizon,"exponential",c.xName,c.yName),p=i[h]||new Set,m=i[f]||new Set,v=i[d]||new Set,g=Hp(h,(function(t){var e=Gf().linear(t,{precision:20});return{prediction:e.points,r2:e.r2}}),c,0,Array.from(p)),y=Hp(f,Up(e),c,0,Array.from(m)),b=Hp(d,Bp(e),c,0,Array.from(v)),_={};g.isOk&&(_.linear=g.value),y.isOk&&(_.polynomial=y.value),b.isOk&&(_.exponential=b.value),s[u]={id:u,xName:c.xName,yName:c.yName,results:_},g.isErr&&a.push("linear: "+g.error),y.isErr&&a.push("polynomial: "+y.error),b.isErr&&a.push("exponential: "+b.error)}return a.length>0?Tr(hr(a).join(", ")):Mr(s)}(um.xyState.xyResults,um.uiRegressionState.degree,um.uiRegressionState.outlierThreshold,0,n),i={};if(r.isErr)return pm.service.send(ma),void console.warn(r.error);if(r.isOk){var o=zp(um.xyState.xName,um.xyState.yName),a=r.value[o],s=null==a?void 0:a.results[e].predictions,l=[];if(s)for(var u=Object.keys(s).sort(),c=0;c<u.length;c++){var h=s[u[c]];l.push(h)}i={results:r.value,selectedResult:a,predictions:l};var f=function(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++){var i=e[r],o=t[i],a=Xp(o,i);if(!a.isOk)return Tr(a.error);var s=Np(a.value,3),l=s[0],u=s[1],c=s[2];n.push([l,u,c,i])}return n.sort((function(t,e){return e[0]-t[0]})),Mr(n.map((function(t){return{r2:t[0],cov:t[1],type:t[2],regressionResultKey:t[3]}})))}(r.value);if(f.isErr)return pm.service.send(ma),void console.warn(f.error);if(f.isOk)return i=sm(sm({},i),{},{ranking:f.value}),void pm.service.send({type:fa,payload:i})}pm.service.send(ma)}}});var mm=function(){return{statsUISelectedRowAtom:-1,soilUISelectedPointAtom:Rt()}},vm=mm(),gm=new ba("Stats UI Shared State Machine");gm.observer.subscribe({next:function(t){switch(t.value){case sa:vm=mm();break;case ua:var e=t.event.payload;um=sm(sm({},vm),e)}gm.service.send({type:pa})}});var ym=new ba("Stats Report Loading Machine");ym.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{reportState:Wf()});break;case ca:for(var e=t.event.payload,n=Object.keys(e.reportItems),r=sm({},um.outliersState.outliers),i=0;i<n.length;i++)for(var o=n[i],a=e.reportItems[o],s=function(){var t=a[l],e=Wp(Hs[t.horizonIndex].menuName,t.regression,t.x,t.y);if(!t.regressionResult)return 1;var n=Object.values(t.regressionResult.predictions).map((function(t,e){return t.outlier?e:-1})).filter((function(t){return-1!==t}));if(n.length){var i=r[e]||new Set;n.forEach((function(t){return i.add(t)})),r[e]=i}},l=0;l<a.length;l++)s();var u=_m(e.reportItems);um=sm(sm({},um),{},{reportState:sm(sm({},e),{},{slideReportItems:u}),outliersState:{outliers:r}}),(um=sm(sm({},um),{},{reportState:sm(sm({},e),{},{slideReportItems:u})})).uiXYState.longList!==e.isLongList&&hm.service.send({type:fa,payload:{longList:e.isLongList}}),ym.service.send({type:pa})}}});var bm=new ba("Stats Report Updating Machine");bm.observer.subscribe({next:function(t){switch(t.value){case sa:um=sm(sm({},um),{},{reportState:Wf()});break;case ua:for(var e=t.event.payload,n=function(t){if(Array.isArray(t))return om(t)}(m=um.reportState.reportItems[um.uiXYState.selectedHorizon])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(m)||im(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=0;r<e.length;r++){var i=e[r],o=i.action,a=i.idx,s=i.key,l=i.value;if("delete"!==o)if("add"!==o){if("shift-up"===o){var u=n[a];n.splice(a,1),n.splice(a-1,0,u)}if("shift-down"===o){var c=n[a];n.splice(a,1),n.splice(a+1,0,c)}n[a]=sm(sm({},n[a]),{},lm({},s,l))}else n.splice(a,0,l);else delete n[a]}n=n.filter((function(t){return void 0!==t}));for(var h=0;h<n.length;h++)n[h].sortKey="C-".concat(h);var f=n.some((function(t){return null!==t.regression})),d=sm(sm({},um.reportState.reportItems),{},lm({},um.uiXYState.selectedHorizon,n)),p=sm(sm({},um.reportState.reportItemsWithData),{},lm({},um.uiXYState.selectedHorizon,f));um=sm(sm({},um),{},{reportState:sm(sm({},um.reportState),{},{reportItems:d,reportItemsWithData:p,isLongList:um.uiXYState.longList})}),bm.service.send({type:pa})}var m}}),bm.observer.subscribe({next:function(t){if(t.event.type===pa){var e=um.reportState;console.log("RESETTING STATS MACHINE A"),ym.reset(),ym.service.send({type:da,payload:e})}}});var _m=function(t){var e={};return Object.keys(t).forEach((function(n){t[n].filter((function(t){return null!==t.regression})).forEach((function(t){var n=ke("".concat(t.sortKey,"-").concat(t.title)),r={x:t.x,y:t.y,title:t.title,sortKey:t.sortKey};e[n]?e[n].reports.push(t):e[n]={relationship:r,reports:[t]}}))})),Object.keys(e).sort().map((function(t){return e[t]}))};function xm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}qo(pm.observer).subscribe({next:function(t){if(t.event.type===pa){for(var e=[],n=um.reportState.reportItems[um.uiXYState.selectedHorizon],r=0;r<n.length;r++){var i=n[r];if(null!==i.regression){var o=zp(i.x,i.y),a=um.regressionState.results[o].results[i.regression];e.push({idx:r,key:"regressionResult",value:a})}if(null===i.regression){var s=zp(i.x,i.y),l=um.regressionState.results[s],u=Xp(l,s);if(u.isErr)return void Ue("getRegressionResultRanking",u.error);var c=rm(u.value,3),h=c[0],f=c[1],d=c[2],p=[{idx:r,key:"regression",value:d},{idx:r,key:"r2",value:h},{idx:r,key:"cov",value:f},{idx:r,key:"regressionResult",value:l.results[d]}];e.push.apply(e,p)}}bm.service.send({type:fa,payload:e})}}});var Sm=function(t){var e=t.header;return t.row.map((function(t,r){return n.createElement("div",{key:"ssd"+r,className:"hover:bg-blue-200 rounded px-2 text-black flex flex-row justify-between w-48"},n.createElement("div",{className:"text-gray-700 mr-4"},e[r],":"),n.createElement("div",null,t))}))},Em=function(t){var e=t.sampleId,r=t.header,i=t.row,o=t.photoUrl,a=xm((0,n.useState)(!1),2),s=a[0],l=a[1];return n.createElement(Kc,{key:e+"p"},n.createElement("div",{className:"flex flex-col text-xs"},n.createElement("h2",{className:xe("text-center p-2 text-base text-gray-800")},e),n.createElement(Sm,{header:r,row:i}),n.createElement(Nf,{photoUrl:o,open:s,setOpen:l}),n.createElement("button",{className:xe("btn mt-2",o?"pastel-blue-button":"btn-disabled"),onClick:function(){return o?l(!s):""}},o?"Show Photo":"No Photo")))},Mm=function(t,e){var r=(0,n.useRef)(null),i=xm((0,n.useState)(0),2),o=i[0],a=i[1],s=function(){return e(t)};return(0,n.useEffect)((function(){if(r.current){var t=r.current.getElement();if(!t)return;return t.style.pointerEvents="auto",t.addEventListener("click",s),function(){t.removeEventListener("click",s)}}return function(){}}),[null==r?void 0:r.current,t,o]),(0,n.useEffect)((function(){var t=setInterval((function(){r.current&&(a(o+1),clearInterval(t))}),100);return function(){clearInterval(t)}}),[]),r},Tm=function(t){var e=t.active,r=t.onClick,i=t.sampleId,o=t.hasPhoto,a=t.columnData,s=t.header,l=(Fs[dl.toolbarState.selectedPointColor].menuName.toLowerCase(),Mm(i,r));return n.createElement(Jc,{ref:l,key:i+"td"+e,direction:"right",opacity:1,permanent:!0,className:xe("bg-gray-700",e?"border-solid border-4":"")},n.createElement("span",{className:xe("text-xs",""),onClick:function(){return r(i)}},n.createElement("div",{className:xe("font-bold",o?"text-blue-400":"text-gray-100")},i),a.map((function(t,e){return n.createElement("div",{key:"cdm"+e,style:{color:sl(s,t,"#f3f4f6")}},t)}))))},Am=function(t){var e=t.active,r=t.onClick,i=t.sampleId,o=t.hasPhoto,a=Mm(i,r);return n.createElement(Jc,{ref:a,pane:"tooltipPane",interactive:!0,key:i+"t"+e,className:xe("text-xs bg-gray-700",o?"text-blue-400":"text-gray-100",e?"border-solid border-4":""),direction:"right",opacity:1,permanent:!0},n.createElement("span",null,i))},Om=function(t){var e=t.active,r=t.onClick,i=t.sampleId,o=t.hasPhoto,a=t.columnData,s=t.header;return a.length>0?n.createElement(Tm,{active:e,onClick:r,sampleId:i,hasPhoto:o,columnData:a,header:s}):n.createElement(Am,{active:e,onClick:r,sampleId:i,hasPhoto:o})},Pm=function(t,e,n,r){return function(i){r({latlng:n,target:{options:{sampleId:t,rowIndex:e}}})}};const Cm=function(t){var e=t.show,r=xm(wa(gm),2),i=(r[0],r[1]),o=dl.soilDataState.selectedHorizonDataPoints,a=Ds.data.soilSampleIds,s=dl.soilDataState.selectedHorizonData,l=Ds.photos.soilPhotoUrls,u=Fs[dl.toolbarState.selectedPointColor].menuName.toLowerCase(),c=dl.soilDataState.selectedColumnData,h=Fs[dl.toolbarState.pointColor].menuName.toLowerCase(),f=dl.toolbarState.selectedSoilHeaderName,d=[vm.soilUISelectedPointAtom,i],p=d[0],m=d[1];if(!e)return null;var v=function(t){return m(kt({point:Ks(t.latlng),latlng:t.latlng,sampleId:t.target.options.sampleId,rowIndex:t.target.options.rowIndex}))};return o.length&&a.length?n.createElement(n.Fragment,null,o.map((function(t,e){var r,i=a[e],o=l[i],d=e,m={color:h,fillColor:h,fillOpacity:1,radius:8,sampleId:i,rowIndex:d,active:!1};return p.isJust&&p.value.sampleId===i&&(m={color:u,fillColor:u,fillOpacity:1,radius:12,sampleId:i,rowIndex:d,active:!0}),n.createElement(Qc,{interactive:!0,pathOptions:m,pane:"markerPane",key:"cm"+e,center:t},n.createElement(Om,{active:m.active,onClick:Pm(i,d,t,v),sampleId:i,hasPhoto:o,columnData:c.columnData[d]||[],header:f}),n.createElement(Em,{sampleId:i,header:s.head,row:s.body[d]||[],photoUrl:null===(r=l[i])||void 0===r?void 0:r.url}))}))):null};var km=new ba("Boundary Machine");function Rm(t){return Rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(t)}function Nm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==Rm(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Rm(i)?i:String(i)),r)}var i}var Lm=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exterior_ring=e,this.interior_ring=n,this.bounding_box=r,this.client=i,this.block=o,this.field=a}var e,n;return e=t,n=[{key:"toObject",value:function(){return{outer:this.exterior_ring.map((function(t){return[t[0],t[1]]})),inner:this.interior_ring.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})),bbox:this.bounding_box,boundary:this.client,region:this.block,id:this.field}}}],n&&Nm(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Im={data:null,error:null},Dm=new ba("Network Boundary All Fields Machine");function jm(t){return jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(t)}function zm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Um(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zm(Object(n),!0).forEach((function(e){Bm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==jm(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==jm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===jm(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Dm.observer.subscribe({next:function(t){switch(t.value){case sa:Im={data:null,error:null};break;case ca:var e=t.event.payload;if(void 0===e||void 0===e.uid)return Im.error="Meta is undefined",void Dm.service.send({type:ma});fetch("http://localhost:3001/api/v1/boundary/all/vrts/".concat(e.uid)).then((function(t){if(!t.ok)throw new Error("Network response was not ok, status: ".concat(t.status," ").concat(t.statusText));return t.json()})).then((function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(new Lm(i.exterior_ring,i.interior_ring,i.bounding_box,i.client,i.block,i.field))}Im.data={meta:e,boundaries:n},Dm.service.send({type:pa})})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),Im.error=t.message,Dm.service.send({type:ma})}))}}});var Fm=Um({},{hectares:0,boundary:[],meta:null,bbox:new Vc(0,0)});function Hm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}km.observer.subscribe({next:function(t){switch(t.value){case sa:Fm.meta=null,Fm.boundary=[],Fm.hectares=0,Fm.bbox=new Vc(0,0);break;case ca:var e=t.event.payload.meta,n=t.event.payload.boundaries;Fm.boundary=n,Fm.bbox=function(t){var e=new Vc(0,0);if(!t||0===t.length)return e;for(var n=0;n<t.length;n++){var r=qc(t[n].bounding_box,4),i=r[0],o=r[1],a=r[2],s=r[3];e.update(i,o),e.update(a,s)}return e.adjustDimensions(),e}(n),Fm.hectares=function(t){var e,n=0,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Xc(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=Yc(i.exterior_ring),n-=dc(i.interior_ring.map((function(t){return Yc(t)})))}}catch(t){r.e(t)}finally{r.f()}return n/1e4}(n),Fm.meta=e,km.service.send(pa)}}}),Fa.observer.subscribe({next:function(t){if(t.event.type===pa&&ja.client.isJust){km.service.getSnapshot().value===ha&&km.service.send(va);var e=ja.client.value.getAllFieldsBoundary();Dm.reset(),Dm.service.send({type:da,payload:e})}}}),Dm.service.subscribe({next:function(t){t.event.type==pa&&km.service.send({type:da,payload:Um({},Im.data)})}});var Wm=function(t){var e=t.fitMap,r=t.setZoom,i=t.boundary,o=function(t){const e=Wu().map;return(0,n.useEffect)((function(){return e.on(t),function(){e.off(t)}}),[e,t]),e}({zoomend:function(){r(o.getZoom())}});return(0,n.useEffect)((function(){if(i&&i.length>0){var t=new yc,e=new yc;i.forEach((function(n){var r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Hm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.bounding_box,4),i=r[0],o=r[1],a=r[2],s=r[3];t.update(i),e.update(o),t.update(a),e.update(s)})),o.fitBounds([[e.min,t.min],[e.max,t.max]])}}),[e]),null},Vm=function(t){var e=t.overlay,r=t.opacity,i=t.bbox,o=(t.selectedBoundary,t.mapVariant);if(e.isNothing)return null;var a=e.unwrapOr({name:"",url:null,bbox:[0,0,0,0],image:null}),s=[[i.min_y,i.min_x],[i.max_y,i.max_x]],l=a.url(o);return n.createElement(rc,{key:l,opacity:r,url:l,bounds:s})};const Gm=function(t){var e=t.className,r=t.mapBoxSetup,i=(t.mapSize,t.points),o=t.showZoomControl,a=t.scrollToZoom,s=t.showPoints,l=t.showBoundaries,u=(t.showAttributes,t.selectedMap),c=t.mapOpacity,h=t.mapZoom,f=t.setMapZoom,d=t.mapFit,p=Ds.maps.soilMapUrls,m=Fm.boundary,v=Fm.bbox,g=dl.toolbarState.mapVariant,y=i[0]||[0,0],b=Nt.of(p[u.menuName]),_=m.first(),x=(null==_?void 0:_.block)+(null==_?void 0:_.client)+(null==_?void 0:_.field);return n.createElement(n.Fragment,null,n.createElement(ac,{key:x,className:xe(e),center:y,zoom:h,zoomControl:o,scrollWheelZoom:a,style:{width:"100%",height:"100%"}},n.createElement(Wm,{fitMap:d,setZoom:f,boundary:m}),n.createElement(sc,{attribution:r.attribution,url:r.url,keepBuffer:100}),n.createElement($c,{key:x+"bo",show:l,boundary:m}),n.createElement(Vm,{overlay:b,mapVariant:g,bbox:v,selectedBoundary:m,opacity:c}),n.createElement(Cm,{show:s})))};function qm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xm=function(t){var e=t.header,r=t.highlight,i=t.shrinkTable;return n.createElement("th",{scope:"col",className:xe("whitespace-nowrap text-left",r?"text-gray-700 font-bold":"text-gray-500 font-normal",i?"pl-2":"py-3.5 pl-4 pr-3")},e)};const Zm=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(wa(gm),2),e=(t[0],t[1]),r=dl.soilDataState.shrunkHorizonData,i=dl.soilDataState.selectedHorizonDataPoints,o=Ds.data.soilSampleIds,a=dl.toolbarState.shrinkTable,s=[vm.soilUISelectedPointAtom,e],l=s[0],u=s[1];return n.createElement("div",{className:xe("relative bg-gray-100",a?"text-xs":"")},n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},n.createElement("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},n.createElement("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},n.createElement("table",{className:"min-w-full divide-y divide-gray-300"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",{className:"sticky"},r.head.map((function(t,e){return n.createElement(Xm,{header:t,key:"thead"+t+e,highlight:!1,shrinkTable:a})})))),n.createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},r.body.map((function(t,e){return n.createElement("tr",{key:e.toString()+"b",onClick:function(){return u(kt({latlng:i[e],point:Ks(i[e]),sampleId:o[e],rowIndex:e}))},className:"even:bg-gray-200 hover:bg-blue-300"},t.map((function(t,i){var o=t.trim().length>0?t.trim():"N/A",s=r.head[i];return n.createElement("td",{key:ke("tbody"+s+i),style:{color:sl(s,o,"#374151")},className:xe("whitespace-nowrap",l.unwrapOr({rowIndex:-1}).rowIndex===e?"bg-blue-200 font-bold text-gray-700":"",a?"pl-2":"py-2 pl-4 pr-3")},o)})))})))))))))};function Ym(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const $m=function(){var t=_a([js]),e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ym(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ym(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(wa(pl),2),r=(e[0],e[1]);return(0,n.useEffect)((function(){r({mapFit:dl.toolbarState.mapFit+1})}),[]),n.createElement("div",{className:"h-full z-0"},n.createElement(Uu,{id:"m"+t+Object.keys(Ds.maps.soilMapUrls).join(",")}),n.createElement("div",{className:"flex flex-col w-full h-full bg-gray-50 items-center z-0"},n.createElement(Gm,{key:t,className:"z-0 mt-16 w-full h-full",mapBoxSetup:Vs,mapSize:Bs[dl.toolbarState.selectedMapSize],points:dl.soilDataState.selectedHorizonDataPoints,showZoomControl:!0,scrollToZoom:dl.toolbarState.scrollZoom,showPoints:dl.toolbarState.showPoints,showBoundaries:dl.toolbarState.showBoundaries,showAttributes:!0,selectedMap:dl.toolbarState.selectedMapMenuEntry,mapOpacity:dl.toolbarState.mapOpacity,mapZoom:dl.toolbarState.mapZoom,setMapZoom:function(t){return r({mapZoom:t})},mapFit:dl.toolbarState.mapFit})),n.createElement(Zm,null))};function Km(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Jm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qm=function(){var t=Km(wa(hm),2),e=(t[0],t[1]);return n.createElement(Su,{key:um.uiXYState.longList.toString(),label:"Long List",selected:um.uiXYState.longList,setSelected:function(){return e({longList:!um.uiXYState.longList})}})},tv=function(){var t=Km(wa(hm),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Soil Data",menu:Hs,selected:Hs[um.uiXYState.selectedHorizon],setSelected:function(t){return e({selectedHorizon:t.menuType,selectedHorizonName:t.menuName})}})},ev=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(Su,{key:um.uiRegressionState.showOutliers.toString(),label:"Show Outliers",selected:um.uiRegressionState.showOutliers,setSelected:function(){return e({showOutliers:!um.uiRegressionState.showOutliers})}})},nv=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(Su,{key:um.uiRegressionState.showThresholds.toString(),label:"Show Thresholds",selected:um.uiRegressionState.showThresholds,setSelected:function(){return e({showThresholds:!um.uiRegressionState.showThresholds})}})},rv=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(Su,{key:um.uiRegressionState.showLabels.toString(),label:"Show Labels",selected:um.uiRegressionState.showLabels,setSelected:function(){return e({showLabels:!um.uiRegressionState.showLabels})}})},iv=function(){var t=um.xyState.xData.head.map((function(t,e){return{menuName:t,menuType:e}})),e=Km(wa(hm),2),r=(e[0],e[1]);return n.createElement(wu,{label:"X Var",menu:t,selected:t[um.uiXYState.selectedXVar],setSelected:function(t){return r({selectedXVar:t.menuType})}})},ov=function(){var t=um.xyState.yData.head.map((function(t,e){return{menuName:t,menuType:e}})),e=Km(wa(hm),2),r=(e[0],e[1]);return n.createElement(wu,{label:"Y Var",menu:t,selected:t[um.uiXYState.selectedYVar],setSelected:function(t){return r({selectedYVar:t.menuType})}})},av=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(wu,{label:"Regression",menu:jf,selected:jf[um.uiRegressionState.selectedRegression],setSelected:function(t){return e({selectedRegression:t.menuType})}})},sv=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(Eu,{label:"Degree",selected:um.uiRegressionState.degree,setSelected:function(t){return e({degree:t})},min:0,max:10,step:1})},lv=function(){var t=Km(wa(cm),2),e=(t[0],t[1]);return n.createElement(Eu,{label:"R2 Threshold",selected:um.uiRegressionState.r2Threshold,setSelected:function(t){return e({r2Threshold:t})},min:0,max:1,step:.1})};const uv=function(){return n.createElement("div",{className:"flex flex-col relative text-xs justify-start sticky top-16 z-40"},n.createElement("div",{className:"flex flex-row w-full bg-white"},n.createElement("div",{className:"bg-blue-100 flex flex-row p-2 border-r-4 border-gray-100 "},n.createElement(Qm,null),n.createElement(tv,null),n.createElement(iv,null),n.createElement(ov,null),n.createElement(av,null),n.createElement(sv,null)),n.createElement("div",{className:"bg-gray-100 flex flex-row p-2 border-r-4 border-gray-100 "},n.createElement(lv,null),n.createElement(ev,null),n.createElement(nv,null),n.createElement(rv,null))))};function cv(t){return cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cv(t)}function hv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hv(Object(n),!0).forEach((function(e){dv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dv(t,e,n){return(e=gv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pv(t){return function(t){if(Array.isArray(t))return mv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return mv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gv(r.key),r)}}function gv(t){var e=function(t,e){if("object"!==cv(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==cv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===cv(e)?e:String(e)}var yv=function(t,e){for(var n=0;n<t.length;n++)t[n].push(e[n])},bv={},_v=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cData=e,this.predictions=n,this.xName=r,this.yName=i,this.rows=[],this.series={},this.nextInSeries=o,this.hasOutliers=n.filter((function(t){return t.outlier})).length>0}var e,n;return e=t,n=[{key:"setX",value:function(){var t;return this.cData.addColumn("number",this.xName),(t=this.rows).push.apply(t,pv(this.predictions.map((function(t){return[t.x]})))),this}},{key:"setY",value:function(){return this.cData.addColumn("number",this.yName),yv(this.rows,this.predictions.map((function(t){return t.outlier?null:t.y}))),this}},{key:"setPointLabels",value:function(t){return t&&(this.cData.addColumn({type:"string",role:"annotation"}),yv(this.rows,this.predictions.map((function(t){return t.id})))),this}},{key:"setOutliers",value:function(t){return t&&this.hasOutliers&&(this.cData.addColumn("number","Outlier"),this.series[this.nextInSeries()]={type:"scatter",color:"red",pointSize:10,lineWidth:0,visibleInLegend:!0,enableInteractivity:!0,pointShape:"square"},yv(this.rows,this.predictions.map((function(t){return t.outlier?t.y:null}))),this.cData.addColumn({type:"string",role:"annotation",color:"red"}),yv(this.rows,this.predictions.map((function(t){return t.outlier?t.id:null})))),this}},{key:"setSodiumThresholds",value:function(t,e,n,r,i){var o=this;if(!t)return this;var a=["red","red","red"];return[n,r,i].forEach((function(t,e){o.cData.addColumn("number","Sodium % @ ".concat(t,"%")),yv(o.rows,o.predictions.map((function(e){return t}))),o.series[o.nextInSeries()]=fv({type:"line",color:a[e],pointSize:0,lineWidth:2,visibleInLegend:!1,enableInteractivity:!1},bv)})),this}},{key:"setPhCaCl2Thresholds",value:function(t,e,n,r,i){var o=this;if(!t)return this;var a=["red","red","#ff9f94"];return[n,r].forEach((function(t,e){o.cData.addColumn("number","pH CaCl2 @ ".concat(t,"%")),yv(o.rows,o.predictions.map((function(e){return t}))),o.series[o.nextInSeries()]=fv({type:"line",color:a[e],pointSize:0,lineWidth:2,visibleInLegend:!1,enableInteractivity:!1},bv)})),"0-10"!==e||Math.max.apply(Math,pv(this.predictions.map((function(t){return t.y}))))>i&&[i].forEach((function(t,e){o.cData.addColumn("number","pH CaCl2 @ ".concat(t,"%")),yv(o.rows,o.predictions.map((function(e){return t}))),o.series[o.nextInSeries()]=fv({type:"line",color:a[e],pointSize:0,lineWidth:2,visibleInLegend:!1,enableInteractivity:!1},bv)})),this}},{key:"setPotassiumColwellThresholds",value:function(t,e,n){var r=this;if(!t)return this;var i=["red"];return[n].forEach((function(t,e){r.cData.addColumn("number","Potassium Colwell @ ".concat(t,"%")),yv(r.rows,r.predictions.map((function(e){return t}))),r.series[r.nextInSeries()]=fv({type:"line",color:i[e],pointSize:0,lineWidth:2,visibleInLegend:!1,enableInteractivity:!1},bv)})),this}},{key:"setPhosphorusColwellThresholds",value:function(t,e,n){var r=this;if(!t)return this;var i=["red"];return[n].forEach((function(t,e){r.cData.addColumn("number","Phosphorus Colwell @ ".concat(t,"%")),yv(r.rows,r.predictions.map((function(e){return t}))),r.series[r.nextInSeries()]=fv({type:"line",color:i[e],pointSize:0,lineWidth:2,visibleInLegend:!1,enableInteractivity:!1},bv)})),this}},{key:"build",value:function(){this.cData.addRows(this.rows)}}],n&&vv(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const xv=_v;function wv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Sv=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(),2),e=t[0],r=t[1];return(0,n.useEffect)((function(){if(!e){var t=document.head,n=document.getElementById("googleChartsScript");n?window.google&&window.google.charts&&window.google.visualization&&r(window.google):((n=document.createElement("script")).src="https://www.gstatic.com/charts/loader.js",n.id="googleChartsScript",n.onload=function(t){window.google&&window.google.charts&&(window.google.charts.load("current",{packages:["corechart"]}),window.google.charts.setOnLoadCallback((function(){return r(window.google)})))},t.appendChild(n))}return function(){var t=document.getElementById("googleChartsScript");t&&t.remove()}}),[e]),e};function Ev(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mv(t){return Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(t)}function Tv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Av(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tv(Object(n),!0).forEach((function(e){Ov(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ov(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Mv(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Mv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Mv(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Cv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}String.prototype.slugify=function(){return ke(this)},String.prototype.slugifyNoDashes=function(){return ke(this).replaceAll("-","")},String.prototype.isEmpty=function(){return 0===this.trim().length},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.justNumbers=function(){return this.replace(/\D/g,"")},String.prototype.removeFileExtension=function(){return this.replace(/\.[^/.]+$/,"")},Array.prototype.range=function(t){return function(t){if(Array.isArray(t))return Ev(t)}(e=Array(t).keys())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return Ev(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ev(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e},Array.prototype.first=function(){return this[0]||null};var kv=function(t){var e=t.id,r=t.className,i=t.reportItem,o=t.xName,a=t.yName,s=t.horizon,l=t.regressionType,u=t.degree,c=t.showLabels,h=t.showOutliers,f=t.showThresholds,d=t.selectedRow,p=t.setSelectedRow,m=t.height,v=t.onMount,g=t.onChartReady,y=Pv((0,n.useState)(!1),2),b=y[0],_=y[1],x=function(t){var e=t.reportItem,r=t.xName,i=t.yName,o=t.horizon,a=t.regressionType,s=t.degree,l=t.showLabels,u=t.showOutliers,c=t.showThresholds,h=t.selectedRow,f=t.setSelectedRow,d=t.height,p=(t.onMount,t.onChartReady),m=Sv(),v=Pv((0,n.useState)(null),2),g=v[0],y=v[1],b=(0,n.useRef)();return function(t){var e=t.google,r=t.chart,i=t.selectedRow,o=t.setSelectedRow;(0,n.useEffect)((function(){if(e&&r)return e.visualization.events.addListener(r,"select",(function(t){var e=r.getSelection();e.length>0&&o(e[0].row)})),function(){e.visualization.events.removeAllListeners(r)}}),[e,r]),(0,n.useEffect)((function(){r&&i>-1&&r.setSelection([{row:i}])}),[e,i,r])}({google:m,chart:g,selectedRow:h,setSelectedRow:f}),(0,n.useEffect)((function(){var t;if(m&&b.current&&!e)!function(t){var e=t.google,n=t.chartRef,r=new e.visualization.ComboChart(n.current),i=new e.visualization.DataTable(null);i.addColumn("number","X"),i.addColumn("number","Y");var o={legend:"none",width:"100%",height:d,title:"No Data",chartArea:{left:"10%",bottom:"10%",right:"20%",top:"10%"}};r.draw(i,o),y(r)}({google:m,chartRef:b});else if(m&&b.current&&e&&null!=e&&null!==(t=e.regressionResult)&&void 0!==t&&t.predictions){var n,h=Object.values(e.regressionResult.predictions),f=new m.visualization.DataTable(null),v=new xv(f,h,r,i,(n=1,function(){return n++})),g=c&&i.includes("Na %"),_=c&&i.includes("pH CaCl"),x=c&&i.includes("K Colwell"),w=c&&i.includes("P Colwell");v.setX().setY().setPointLabels(l).setOutliers(u).setSodiumThresholds(g,o,6,15,30).setPhCaCl2Thresholds(_,o,4.5,4.8,5.5).setPotassiumColwellThresholds(x,o,50).setPhosphorusColwellThresholds(w,o,25).build();var S=h.reduce((function(t,e){return Math.max(t,e.x)}),-1/0),E=(h.reduce((function(t,e){return Math.min(t,e.x)}),1/0),h.reduce((function(t,e){return Math.min(t,e.y)}),1/0),u?h.reduce((function(t,e){return Math.max(t,e.y)}),-1/0):h.filter((function(t){return!t.outlier})).reduce((function(t,e){return Math.max(t,e.y)}),-1/0)),M=0;i.toLowerCase().includes("ph")&&(M=3.5);var T=.05*E,A=.05*Math.ceil(S),O={title:"(".concat(o,") ").concat(r," vs ").concat(i),crosshair:{trigger:"both",orientation:"vertical"},hAxis:{title:r,viewWindow:{min:0,max:Math.ceil(S+A)}},vAxis:{title:i,viewWindow:{min:M,max:Math.ceil(E+T)}},seriesType:"scatter",height:800,chartArea:{width:"65%"},series:Av({},v.series),trendlines:{0:{color:"green",lineWidth:3,type:a.toLowerCase(),degree:s,visibleInLegend:!0,labelInLegend:a.capitalize(),showR2:!0,pointSize:2,pointsVisible:!1}}},P=new m.visualization.ComboChart(b.current);m.visualization.events.addListener(P,"ready",(function(){p&&p(P)})),P.draw(v.cData,O),y(P)}}),[b,m,e,c,u,l]),b}({id:e,className:r,reportItem:i,xName:o,yName:a,horizon:s,regressionType:l,degree:u,showLabels:c,showOutliers:h,showThresholds:f,selectedRow:d,setSelectedRow:p,height:m,onMount:v,onChartReady:g});return!b&&null!=x&&x.current&&(v&&v(x),_(!0)),n.createElement("div",{id:e,ref:x,className:r})};const Rv=function(t){var e=void 0!==t.selected&&void 0!==t.id&&t.selected;return n.createElement("input",{id:t.id,"aria-describedby":"comments-description",name:t.id,type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",readOnly:!0,checked:e,onChange:function(n){return t.onClick(!e)}})},Nv=function(t){var e=t.title,r=t.predictions,i=t.xName,o=t.yName,a=t.selected,s=t.className,l=t.onClick,u=t.onOutlierClicked,c=r.length>0;return n.createElement("div",{className:s},n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:""},n.createElement("div",{className:"inline-block min-w-full align-middle"},n.createElement("div",{className:"overflow-hidden"},n.createElement("h2",{className:"text-xl text-center p-2"},c?e:""),n.createElement("table",{className:"min-w-full divide-y divide-gray-300"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",{className:"sticky"},n.createElement("th",{key:"a",scope:"col",className:"text-center whitespace-nowrap text-left text-gray-500 font-normal py-2"},"Id"),n.createElement("th",{key:"c",scope:"col",className:"text-center whitespace-nowrap text-left text-gray-500 font-normal py-2 "},i),n.createElement("th",{key:"d",scope:"col",className:"text-center whitespace-nowrap text-left text-gray-500 font-normal py-2 "},o),n.createElement("th",{key:"g",scope:"col",className:"text-center whitespace-nowrap text-left text-gray-500 font-normal py-2 "},"Z-Score"),n.createElement("th",{key:"z",scope:"col",className:"text-center whitespace-nowrap text-left text-gray-500 font-normal py-2 "},"Outlier"))),n.createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},n.createElement(n.Fragment,null,r.map((function(t,e){return n.createElement("tr",{key:e.toString()+"z",onClick:function(){return l(e)},className:xe("text-center hover:bg-blue-500 hover:text-white",t.outlier?"text-red-500":"text-gray-500",e===a?"bg-blue-300":"even:bg-gray-200")},n.createElement("td",{key:e.toString()+"a",className:"px-4 py-2 whitespace-nowrap "},t.id),n.createElement("td",{key:e.toString()+"c",className:"px-4 py-2 whitespace-nowrap "},gc(Fp(t.x),3)),n.createElement("td",{key:e.toString()+"d",className:"px-4 py-2 whitespace-nowrap font-bold"},gc(t.y,3)),n.createElement("td",{key:e.toString()+"g",className:"px-4 py-2 whitespace-nowrap "},gc(Fp(t.zScore),2)),n.createElement("td",{key:e.toString()+"x",className:"px-4 py-2 whitespace-nowrap w-2"},n.createElement(Rv,{id:t.id,selected:t.outlier,onClick:function(t){return u(e,t)}})))}))))))))))};var Lv=["Comparison","Type","R2"];const Iv=function(t){var e=t.title,r=t.className,i=um.regressionState.results,o=um.regressionState.ranking,a=um.uiRegressionState.r2Threshold,s=[um.xyState.xName,um.xyState.yName],l=function(t,e,n){!function(t,e){var n=um.xyState.xData.head.findIndex((function(e){return e===t})),r=um.xyState.yData.head.findIndex((function(t){return t===e}));hm.service.send({type:fa,payload:{selectedXVar:n,selectedYVar:r}})}(t,e),function(t){var e=jf.find((function(e){var n;return(null===(n=e.menuName)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()}));e&&cm.service.send({type:fa,payload:{selectedRegression:e.menuType}})}(n)},u=o.length>0;return n.createElement("div",{className:r},n.createElement("div",{className:"flex flex-col text-xs"},n.createElement("div",{className:""},n.createElement("div",{className:"inline-block min-w-full align-middle"},n.createElement("div",{className:""},n.createElement("h2",{className:"text-xl text-center p-2"},u?e:""),n.createElement("table",{className:"min-w-full divide-y divide-gray-300"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",{className:"sticky"},function(t){return t.map((function(t,e){return n.createElement("th",{key:ke(t)+e.toString(),scope:"col",className:xe("whitespace-nowrap text-left text-gray-500 font-normal py-2 pl-5 pr-4")},t)}))}(Lv))),n.createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},function(t,e,r,i,o){return e.filter((function(t){return!isNaN(t.r2)&&!isNaN(t.cov)&&t.r2>i})).map((function(e,i){var a,s,l,u=t[e.regressionResultKey];return n.createElement("tr",{key:i.toString()+"b",onClick:function(){return o(u.xName,u.yName,e.type)},className:xe("text-gray-500  hover:bg-blue-500 hover:text-white",(s=u.xName,l=u.yName,s===r[0]&&l===r[1]?"bg-blue-300":"even:bg-gray-200"))},n.createElement("td",{className:xe("px-4 py-2 max-w-[30ch] truncate ...")},u.xName," vs ",u.yName),n.createElement("td",{className:xe("px-4 py-2 whitespace-nowrap")},null===(a=e.type)||void 0===a?void 0:a.slice(0,3)),n.createElement("td",{className:xe("px-4 py-2 whitespace-nowrap")},gc(e.r2,2)))}))}(i,o,s,a,l))))))))};var Dv=function(t){return t[t.MinX=0]="MinX",t[t.MinY=1]="MinY",t[t.MaxX=2]="MaxX",t[t.MaxY=3]="MaxY",t}(Dv||{}),jv=function(t,e,n){return function(t,e,n,r,i,o,a){var s=e-t[Dv.MinX],l=(n-t[Dv.MinY])/i*a;return[s/r*o,Math.abs(l-a)]}(t.toArray(),e,n,t.dist_x,t.dist_y,t.width,t.height)};function zv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bv=function(t,e,n,r,i){t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.fillStyle=i,t.fill(),t.closePath()},Fv=function(t,e,n,r,i,o,a,s){t.lineWidth=r,t.fillStyle=a,t.strokeStyle=i,t.beginPath();for(var l=0;l<n.exterior_ring.length;l++){var u=zv(jv(e,n.exterior_ring[l][0],n.exterior_ring[l][1]),2),c=u[0],h=u[1];0===l?t.moveTo(c,h):t.lineTo(c,h)}if(t.stroke(),t.fill(),t.closePath(),s){t.beginPath();var f=zv(n.bounding_box,4),d=f[0],p=f[1],m=f[2],v=f[3],g=zv(jv(e,d,v),2),y=g[0],b=g[1],_=zv(jv(e,m,p),2),x=_[0],w=_[1];t.strokeStyle="gray",t.moveTo(y,b),t.lineTo(y,w),t.lineTo(x,w),t.lineTo(x,b),t.lineTo(y,b),t.stroke(),t.closePath()}for(var S=0;S<n.interior_ring.length;S++){var E=n.interior_ring[S];t.strokeStyle=o,t.fillStyle="white",t.beginPath();for(var M=0;M<E.length;M++){var T=zv(jv(e,E[M][0],E[M][1]),2),A=T[0],O=T[1];0===M?t.moveTo(A,O):t.lineTo(A,O)}t.stroke(),t.fill(),t.closePath()}t.closePath()},Hv=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600;return 0===t.width?1/e:1/(pc([t.width,t.height])/e)},Wv=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.25)/t},Vv=function(t,e,n,r){return 1/r.toString().length*e/t},Gv=function(t,e,n,r,i,o){var a=Hv(e,r*o),s=Wv(a,i*o),l=t.current.getContext("2d",{alpha:!0});!function(t,e,n,r,i){t.setTransform(1,0,0,1,0,0),t.clearRect(-r/2,-r/2,e+r/2,n+r/2),t.scale(i,i),t.translate(r/2,r/2)}(l,e.width+(e.width+n)*a,e.height+(e.height+n)*a,s,a);var u=t.current.width/a,c=t.current.height/a,h=e.width*n,f=e.height*n,d=u-e.width-h/2,p=c-e.height-f/2;return l.translate(d,p),l},qv=function(t,e,n,r){return function(i,o,a,s,l){return new Promise((function(a,s){if(!t.width||!e.length||!i.current)return s("check drawCoordinates: ".concat(t.width," ").concat(e.length," ").concat(i.current));for(var l=i.current.getContext("2d",{alpha:!0}),u=Vv(o,n,0,1),c=0;c<e.length;c++){var h=e[c],f=jv(t,h[0],h[1]);Bv(l,f[0],f[1],u,r)}a(null)}))}},Xv=function(t,e,n,r,i){return function(o,a,s,l,u){return new Promise((function(a,s){if(!t.width||!e.length||!o.current)return s("check drawBoundaries: ".concat(t.width," ").concat(e.length," ").concat(o.current));for(var u=o.current.getContext("2d",{alpha:!0}),c=0;c<e.length;c++){var h=e[c];Fv(u,t,h,l,n,r,i,!1)}a(null)}))}},Zv=function(t,e,n,r){return function(i,o,a,s,l){return new Promise((function(a,s){if(!t.width||!e.length||!i.current)return s("check drawSoilPoints: ".concat(t.width," ").concat(e.length," ").concat(i.current));var l=i.current.getContext("2d",{alpha:!0}),u=Vv(o,r,0,1);!function(t,e,n,r,i,o,a,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"start";t.beginPath(),t.font="bold ".concat(i,"pt sans-serif"),t.fillStyle=o;for(var u=0;u<n.length;u++){var c=zv(jv(e,n[u][0],n[u][1]),2),h=c[0],f=c[1],d="";s&&(Bv(t,h,f,i/3,a),d="    "),t.fillStyle=o,t.textAlign=l,t.textBaseline="middle",t.fillText(d+r[u],h,f)}t.closePath()}(l,t,e,n,u,"black","black",!0),a(null)}))}};const Yv=an((function(t){return vr(t.length,t)}));function $v(t){return $v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(t)}function Kv(){Kv=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(k([])));w&&w!==n&&r.call(w,a)&&(_=w);var S=b.prototype=g.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,o,a,s){var l=h(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==$v(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?m:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError($v(e)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(M.prototype),u(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new M(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(S),u(S,l,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Jv(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}const Qv=function(t){var e=t.id,r=t.bbox,i=t.className,o=t.targetCanvasWidth,a=t.targetCanvasLineWidth,s=t.targetCanvasPointSize,l=t.canvasBuffer,u=t.zoom,c=t.drawFunctions,h=t.pngCallback,f=t.jpegCallback,d=(0,n.useRef)(null),p=Hv(r,o),m=(r.width+r.width*l)*p,v=(r.height+r.height*l)*p;return(0,n.useEffect)((function(){if(d.current){var t=function(){var t,e=(t=Kv().mark((function t(){var e,n,i,h,f,p;return Kv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=u>1?a/u:a*(u/1.25),Gv(d,r,l,o,a,u),n=Hv(r,o),i=Wv(n,e),h=Yv(Vv)(n,s,u),f=0;case 7:if(!(f<c.length)){t.next=21;break}return p=c[f],performance.now(),t.prev=10,t.next=13,p(d,n,u,i,h);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),console.warn(t.t0);case 18:f++,t.next=7;break;case 21:case"end":return t.stop()}}),t,null,[[10,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Jv(o,r,i,a,s,"next",t)}function s(t){Jv(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();t().then((function(){h&&h(d.current.toDataURL("image/png").replace("data:image/png;base64,","").replace(" ","+"),e,m,v),f&&f(d.current.toDataURL("image/jpeg").replace("data:image/jpeg;base64,","").replace(" ","+"),e,m,v)})).catch((function(t){return console.error(t)}))}}),[d,c,r.width,r.height,o,l,u]),n.createElement("div",{className:xe(i||"m-auto")},n.createElement("canvas",{ref:d,key:m+"canvas"+v+e+u+s+a+o,className:"m-auto z-10",width:m*u,height:v*u}))};function tg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||eg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eg(t,e){if(t){if("string"==typeof t)return ng(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ng(t,e):void 0}}function ng(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rg=function(t){var e=t.regression,r=t.title;return n.createElement("div",{className:"flex flex-col items-center"},n.createElement("h2",{className:"text-xl text-center"},r," R",n.createElement("sup",null,"2")),n.createElement("h3",{className:"text-base"},gc(e.r2,2)))},ig=function(t){var e=t.result;if(!(e||null!=e&&e.results))return n.createElement(n.Fragment,null);var r=e.results;return n.createElement("div",{className:"flex flex-row items-center justify-evenly p-4 border-b-2 border-gray-100 mt-16"},n.createElement(rg,{regression:r.linear,title:"Linear"}),n.createElement(rg,{regression:r.polynomial,title:"Polynomial"}),n.createElement(rg,{regression:r.exponential,title:"Exponential"}))},og=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lat",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lon",r=t.head.map((function(t){return ke(t)})),i=r.map((function(t){return t.startsWith(e)})).indexOf(!0),o=r.map((function(t){return t.startsWith(n)})).indexOf(!0);return-1===i||-1===o?Tr("Could not find lat/lon columns"):Mr([o,i])},ag=function(t,e,n){for(var r=[],i=0;i<t.body.length;i++){var o=t.body[i],a=parseFloat(o[e]),s=parseFloat(o[n]);a&&s&&r.push([a,s])}return r},sg=function(t,e,n){var r=og(t,e,n);if(r.isErr)return Tr(r.error);var i=r.unwrapOr([0,0]);return Mr(ag(t,i[0],i[1]))},lg=function(){_a([em]);var t=function(t,e){if(!ss(t))return Tr("No data in csv");switch(e){case ps.Empty:return Mr([]);case ps.EmClean:case ps.EmRaw:case ps.GrClean:case ps.GrRaw:case ps.DLog:case ps.PctAgEM:case ps.PctAgGR:case ps.DEX:case ps.TerraLogga:case ps.Generic:case ps.SoilPoints:case ps.SoilFusion:return function(t){var e=og(t);return e.isErr&&Ue("No Lon/Lat columns found","Could not find lon/lat columns in csv, trying to use first two columns"),Mr(ag(t,e.unwrapOr(0)[0],e.unwrapOr(1)[1]))}(t);default:return Tr("Unhandled csv type: ".concat(e," (86cc4462)"))}}(tm.fusionData.csv,tm.fusionData.type).unwrapOr([]),e=Fm.bbox,r=sg(tm.fusionData.csv,"em-lat","em-lon").unwrapOr([]),i=sg(tm.fusionData.csv,"gr-lat","gr-lon").unwrapOr([]),o=tg((0,n.useState)([]),2),a=o[0],s=o[1];return(0,n.useEffect)((function(){if(0!==t.length&&0!==r.length&&0!==i.length){var e=new Ec(pc(t.map((function(t){return t[1]}))),"meters"),n=t.map((function(t,n){return e.distance(t,r[n])})),o=t.map((function(t,n){return e.distance(t,i[n])})),a=function(t){if(Array.isArray(t))return ng(t)}(l=tm.fusionSampleIds)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(l)||eg(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();a=a.map((function(t,e){return"".concat(t,"  EM ").concat(gc(n[e],0),"m  GR ").concat(gc(o[e],0),"m")})),s(a)}var l}),[t,r,i]),n.createElement("div",{className:"w-full h-full flex items-center justify-center"},n.createElement("div",{className:""},n.createElement(Qv,{id:"fusion-sensor",bbox:e,className:"z-10 mx-2 m-auto rounded min-w-[500px]",targetCanvasWidth:900,targetCanvasLineWidth:1.15,targetCanvasPointSize:2,canvasBuffer:.1,zoom:1,drawFunctions:[Xv(e,Fm.boundary,"gray","gray","transparent"),qv(e,i,5,"blue"),qv(e,r,4,"red"),Zv(e,t,a,7)],pngCallback:null})))};const ug=function(){_a([pm,em]);var t,e,r,i=tg(wa(gm),2),o=(i[0],i[1]),a=um.regressionState.selectedResult,s=um.regressionState.predictions,l=jf[um.uiRegressionState.selectedRegression].menuName,u=Hs[um.uiXYState.selectedHorizon].menuName,c=um.uiRegressionState.degree,h=um.uiRegressionState.showLabels,f=um.uiRegressionState.showOutliers,d=um.uiRegressionState.showThresholds,p=tg(wa(dm),2),m=(p[0],p[1]),v=(t=a,e=um.uiXYState.selectedHorizon,r=l,null==t||void 0===t.xName||void 0===t.yName?{title:"",x:"",y:"",horizonIndex:e,active:!1,regression:"",regressionResult:{},pagesBefore:[],sortKey:"",note:""}:{title:"".concat(t.xName," vs ").concat(t.yName," (").concat(Hs[e].menuName.toLowerCase(),")"),x:t.xName,y:t.yName,horizonIndex:e,active:!0,regression:r,regressionResult:t.results[r.toLowerCase()],pagesBefore:[],sortKey:"A0",note:"",showOutliers:!1});return n.createElement("div",null,n.createElement(uv,null),n.createElement(ig,{result:a}),n.createElement("div",{className:"flex flex-row w-full"},n.createElement("div",{className:"flex flex-col"},n.createElement(Iv,{title:"Ranked Results",className:"min-h-[20em] max-h-[300px] mx-2 min-w-3/12 text-xs overflow-y-auto"}),n.createElement(Nv,{title:l,predictions:s,xName:null==a?void 0:a.xName,yName:null==a?void 0:a.yName,selected:vm.statsUISelectedRowAtom,className:"min-h-[20em] max-h-[500px] mt-8 mx-2 min-w-3/12 text-xs overflow-y-auto",onClick:function(t){return o(t)},onOutlierClicked:function(t){return m(t)}})),n.createElement(kv,{id:"stats-chart",className:"w-9/12",xName:v.x,yName:v.y,reportItem:v,horizon:u,regressionType:l,degree:c,showLabels:h,showOutliers:f,showThresholds:d,selectedRow:vm.statsUISelectedRowAtom,setSelectedRow:o,height:800,onMount:null})),n.createElement(lg,null))},cg=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M13.28 3.97a.75.75 0 010 1.06L6.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0zm6 0a.75.75 0 010 1.06L12.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))})),hg=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M4.72 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 010-1.06zm6 0a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 010-1.06z",clipRule:"evenodd"}))}));function fg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return dg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const vg=function(){xa(km),xa(za),xa(ml);var t,e=Ds.data.soilPointsMeta.unwrapOr(null),r=Ds.photos.soilPhotoUrls,i=Ds.data.soilSampleIds,o=pg((0,n.useState)(null),2),a=o[0],s=o[1],l=function(t){var e=fg((0,n.useState)(0),2),r=e[0],i=e[1],o=fg((0,n.useState)(0),2),a=o[0],s=o[1],l=fg((0,n.useState)(!1),2),u=l[0],c=l[1],h=function(t,e){return(e+t)%e};return(0,n.useEffect)((function(){u||i(h(a,t))}),[a,u]),(0,n.useEffect)((function(){i(0),s(0)}),[t]),[r,a,function(e){t>1&&(c(!0),s(h(e,t)))},u,c]}(i.length),u=pg(l,5),c=u[0],h=u[1],f=u[2],d=u[3],p=u[4],m=pg((0,n.useState)(null),2),v=m[0],g=m[1];return(0,n.useEffect)((function(){var t=r[i[Math.abs(h)]]||null;s(t),t||p(!1)}),[h,i,r]),e&&(t={dealer:e.dealer,client:e.client,block:e.block,season:e.season.toString(),field:e.field,overwrite:!0}),(0,n.useEffect)((function(){"ArrowLeft"===(null==v?void 0:v.key)&&(f(c-1),null==v||v.preventDefault(),null==v||v.stopPropagation()),"ArrowRight"===(null==v?void 0:v.key)&&(f(c+1),null==v||v.preventDefault(),null==v||v.stopPropagation())," "===(null==v?void 0:v.key)&&(f(0),null==v||v.preventDefault(),null==v||v.stopPropagation())}),[v]),(0,n.useEffect)((function(){return window.addEventListener("keydown",g),function(){window.removeEventListener("keydown",g)}}),[]),i.length,n.createElement("div",{className:"flex flex-col justify-center items-center m-16 relative"},n.createElement("div",{className:xe("flex flex-col justify-center items-center sticky top-16 h-26  w-screen bg-gray-200 z-10","")},n.createElement("h1",{className:xe("text-xl text-center p-2")},i[Math.abs(c)]||"PHOTOS"),n.createElement("div",{className:"flex space-x-4"},n.createElement("button",{onClick:function(){return f(c-1)}},n.createElement(cg,{className:"h-7 w-7 hover:text-blue-500"})),n.createElement("button",{onClick:function(){return f(c+1)}},n.createElement(hg,{className:"h-7 w-7 hover:text-blue-500"})))),n.createElement("div",{className:"flex flex-wrap max-w-[1400px] mt-16 z-0"},i.map((function(e,i){var o=r[e],a=(null==o?void 0:o.url.length)>0;return console.log("PHOTO DATA",o),n.createElement("div",{key:"v"+i,className:xe("p-4 mt-4 mr-4 cursor-pointer z-0","border-2 border-gray-100 rounded",c===i?"border-gray-400":""),onClick:function(){return f(i)},onDragOver:function(t){return function(t){t.preventDefault(),t.stopPropagation()}(t)},onDrop:function(n){return Ps.service.send({type:da,payload:{event:n,sampleId:e,props:t}})}},n.createElement("h4",{className:"text-xs text-gray-900 font-bold text-center"},e),n.createElement("img",{key:"photo-uid"+(null==o?void 0:o.uid),className:xe("h-[80px]",a?"":"w-52"),src:null==o?void 0:o.url,height:80}))}))),n.createElement("div",{className:"flex flex-col justify-start items-center mt-4 mb-2 z-0"},n.createElement("img",{onLoad:function(){return p(!1)},className:xe("p-4","",d?"border-green-600":"border-gray-100"),src:null==a?void 0:a.url})))};function gg(t,e){if(t){if("string"==typeof t)return yg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yg(t,e):void 0}}function yg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bg=function(t){var e=t.meta,r=t.index,i=t.name;return n.createElement("div",null,n.createElement("a",{className:"ml-2 flex flex-row items-center hover:text-blue-500 hover:underline pb-2",href:"http://localhost:3001/api/v1/download/by-uid/".concat(e.uid),download:i,key:r},n.createElement(mt,{className:"h-4 w-4"}),n.createElement("span",{className:"ml-2"},i)),n.createElement("hr",{className:""}))};const _g=function(){_a([za,Fa]);var t=ja.client,e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||gg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)([]),2),r=e[0],i=e[1];return(0,n.useEffect)((function(){var e;t.isJust&&i((e=t.value.dbMetas,function(t){if(Array.isArray(t))return yg(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||gg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort())}),[t]),0===r.length?n.createElement("div",{className:"flex flex-col w-full h-full justify-start items-center text-base mt-16"},n.createElement("div",{className:"flex flex-col justify-start space-y-2 text-base bg-gray-100 p-12 rounded"},n.createElement("h1",{className:"flex text-2xl"},"No client selected"))):n.createElement("div",{className:"flex flex-col w-full h-full justify-start items-center text-base mt-16"},n.createElement("div",{className:"flex flex-col justify-start space-y-2 text-base bg-gray-100 p-12 rounded "},n.createElement("h1",{className:"text-2xl font-bold pb-1"},t.value.client()," - ",t.value.block()),n.createElement("hr",{className:""}),r.map((function(t,e){var r=function(t){var e=Re;return"".concat(e(t.dealer),"-").concat(e(t.client),"-").concat(e(t.block),"-").concat(e(t.field))+"_"+"".concat(e(Ge[t.type]),"-").concat(e(Ve[t.format]),"-").concat(e(qe[t.status]),"-").concat(e(t.variation),"-").concat(t.version,"-").concat(t.set_id,"-").concat(t.season)+".".concat(function(t){return t.url.split(".").slice(-1)[0],t.type===Ge.Image||t.type===Ge.MapImage||t.type===Ge.SoilPhoto?Ve[t.format].toLowerCase():"zip"}(t))}(t);return n.createElement(bg,{key:e+"fd",name:r,meta:t,index:e})}))))};function xg(t,e){if(t){if("string"==typeof t)return wg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wg(t,e):void 0}}function wg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Sg=function(t,e){if(t.preventDefault(),t.stopPropagation(),t.dataTransfer.files.length>1)return Ue("Too many files","Please select only one file"),!1;e([t.dataTransfer.files[0]])},Eg=function(t,e){t.preventDefault(),t.stopPropagation();var n,r=[],i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=xg(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.dataTransfer.files);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o)}}catch(t){i.e(t)}finally{i.f()}e(r)},Mg=function(t){var e=t.setFile,r=t.singleFile?Sg:Eg,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||xg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(!1),2),o=i[0],a=i[1];return{isDragOver:o,onDragOver:function(t){t.preventDefault(),t.stopPropagation(),a(!0)},onDragLeave:function(t){t.preventDefault(),t.stopPropagation(),a(!1)},onDrop:function(t){r(t,e),a(!1)}}};const Tg=function(t){var e,r,i,o=Mg({setFile:t.setFiles,singleFile:t.singleFile}),a=o.onDragOver,s=o.onDragLeave,l=o.onDrop,u=t.singleFile?(100,(i=null===(e=t.files.first())||void 0===e?void 0:e.name)&&i.length>100?i.slice(0,100)+"...":i):null===(r=t.files)||void 0===r?void 0:r.length;return n.createElement("div",{className:xe(t.className,t.files?"border-dashed":"border-solid"),onDragOver:a,onDragLeave:s,onDragEndCapture:s,onDrop:l},t.files?n.createElement("p",{className:"break-words text-center p-2 text-sm text-gray-600"},u):n.createElement("p",{className:"text-center p-2 break-words text-sm"},"DROP HERE"))};function Ag(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Og(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Og(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pg=function(t){var e,r=[{menuName:"Raw EM/GR",menuType:Ve.Emgr}],i=Ag((0,n.useState)([]),2),o=i[0],a=i[1],s=Ag((0,n.useState)(r[0]),2),l=s[0],u=s[1],c=Os(t,Ge.BulkData,qe.Raw,l.menuType,o),h=(null==o||null===(e=o.first())||void 0===e?void 0:e.path.length)>0;return n.createElement("div",{className:"m-4 ml-0 p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8"},n.createElement("h2",{className:"text-center text-lg"},"Bulk Data"),n.createElement("p",{className:"text-xs text-center mb-2 text-gray-500"},"Unprocessed bulk data"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-gray-300",h?"bg-red-100 border-red-500":"bg-gray-100"),files:o,setFiles:a,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"record-format",className:"lbl-xs lbl-badge mb-1"},"Format"),n.createElement(wl,{name:"record-format",className:"text-sm string-select",menu:r,selected:l,setSelected:u})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("button",{className:xe("mt-7 text-normal p-2 bg-white border-gray-300 border-1 rounded hover:bg-gray-50",h?"bg-red-50 border-red-500 text-red-700":"bg-white text-gray-500"),onClick:function(){return function(t){var e=As(t);return new Promise((function(t,n){e?je("Upload","Not implemented"):n("Invalid meta")}))}(c).then((function(){return a([])}))}},"Import"))))};const Cg=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z",clipRule:"evenodd"}))}));var kg=function(t){var e=t.label,r=t.onClick,i=t.isLoading,o=t.activeClass,a=t.inactiveClass;return n.createElement("button",{className:xe("btn flex items-center justify-center",i?o+" animate-pulse":a),onClick:r},e,n.createElement(Cg,{className:xe("ml-3 h-5 inline",i?"animate-spin":"")}))},Rg=new ba("Network EmGr Upload Machine");function Ng(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Lg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Rg.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.meta;Ts(n).then((function(t){var e=t.data,n=t.mime;Ms(n,e,r).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/emgr"),{owner:n,manifest:e,payload:r}).then((function(t){Rg.service.send(pa),Rg.reset(),Pa(t)})).catch((function(t){Rg.service.send(ma)}))}))})).catch((function(t){Rg.service.send(ma),je("Importing EmGr Failed",t)}))}}});var Ig=function(t){var e;xa(km);var r,i=we(Qe).reverse(),o=[{menuName:"Em1S Raw",menuType:"em1s-raw"},{menuName:"Em1S Clean",menuType:"em1s-clean"},{menuName:"Em21S Raw",menuType:"em21s-raw"},{menuName:"Em21S Clean",menuType:"em21s-clean"},{menuName:"Gr Raw",menuType:"gr-raw"},{menuName:"Gr Clean",menuType:"gr-clean"}],a=Ng((0,n.useState)(i[0]),2),s=(a[0],a[1],Ng((0,n.useState)([]),2)),l=s[0],u=s[1],c=Ng((0,n.useState)(o[0]),2),h=c[0],f=c[1],d=Ng((0,n.useState)(!1),2),p=d[0],m=d[1];switch(h.menuType){case"em1s-raw":r=Os(t,Ge.Em,qe.Raw,Ve.Em1s,l);break;case"em1s-clean":r=Os(t,Ge.Em,qe.Clean,Ve.Em1s,l);break;case"em21s-raw":r=Os(t,Ge.Em,qe.Raw,Ve.Em21s,l);break;case"em21s-clean":r=Os(t,Ge.Em,qe.Clean,Ve.Em21s,l);break;case"gr-raw":r=Os(t,Ge.Gr,qe.Raw,Ve.GrTerrestrial,l);break;case"gr-clean":r=Os(t,Ge.Gr,qe.Clean,Ve.GrTerrestrial,l)}r.boundaryId=null==Fm||null===(e=Fm.meta)||void 0===e?void 0:e.uid;var v=void 0!==(null==l?void 0:l.first());return(0,n.useEffect)((function(){var t=Rg.observer.subscribe({next:function(t){t.event.type===pa&&(m(!1),u([])),t.event.type===ma&&m(!1)}});return function(){t.unsubscribe()}}),[]),n.createElement("div",{className:"m-4 ml-0 p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8"},n.createElement("h2",{className:"text-center text-lg"},"EM/GR"),n.createElement("p",{className:"text-xs text-center mb-2"},"Processed EM or GR data"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-dashed border-gray-300",v?"bg-green-100 border-green-500":"bg-gray-100"),files:l,setFiles:u,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"boundary",className:"lbl-xs lbl-badge mb-1"},"Type"),n.createElement(wl,{name:"boundary",className:"text-sm string-select",menu:o,selected:h,setSelected:f})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement(kg,{label:"Import",isLoading:p,onClick:function(){m(!0),As(r)?Rg.service.send({type:da,payload:{event:l.first(),meta:r}}):m(!1)},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900",inactiveClass:"mt-7 p-2 text-normal"}))))},Dg=new ba("Network Boundary Upload Machine");function jg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return zg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Dg.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.meta;Ts(n).then((function(t){var e=t.data,n=t.mime;Ms(n,e,r).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/boundary"),{owner:n,manifest:e,payload:r}).then((function(t){Dg.service.send(pa),Dg.reset(),Pa(t)})).catch((function(t){Dg.service.send(ma)}))}))})).catch((function(t){Dg.service.send(ma),je("Importing Boundary Failed",t)}))}}});var Ug=function(t){we(Qe);var e=[{menuName:"[SHP] All",menuType:Ve.AllFieldsShp},{menuName:"[SHP] Individual",menuType:Ve.IndividualFieldsShp}],r=jg((0,n.useState)([]),2),i=r[0],o=r[1],a=jg((0,n.useState)(e[0]),2),s=a[0],l=a[1],u=jg((0,n.useState)(!1),2),c=u[0],h=u[1],f=Os(t,Ge.Boundary,qe.Raw,s.menuType,i),d=void 0!==(null==i?void 0:i.first());return(0,n.useEffect)((function(){var t=Dg.observer.subscribe({next:function(t){t.event.type===pa&&(h(!1),o([])),t.event.type===ma&&h(!1)}});return function(){t.unsubscribe()}}),[]),n.createElement("div",{className:"m-4 ml-0  p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8"},n.createElement("h2",{className:"text-center text-lg"},"Boundary"),n.createElement("p",{className:"text-xs text-center mb-2"},"Boundary file as SHP or KML"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-dashed border-gray-300",d?"bg-blue-50 border-blue-500":"bg-gray-100"),files:i,setFiles:o,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"boundary",className:"lbl-xs lbl-badge mb-1"},"Boundary Type"),n.createElement(wl,{name:"boundary",className:"text-sm string-select",menu:e,selected:s,setSelected:l})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement(kg,{label:"Import",isLoading:c,onClick:function(){h(!0),As(f)?Dg.service.send({type:da,payload:{event:i.first(),meta:f}}):h(!1)},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900",inactiveClass:"mt-7 p-2 text-normal"}))))},Bg=new ba("Network Soil Raw Upload Machine");function Fg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Hg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Bg.observer.subscribe({next:function(t){switch(t.value){case sa:break;case ca:var e=t.event.payload,n=e.event,r=e.meta;Ts(n).then((function(t){var e=t.data,n=t.mime;Ms(n,e,r).then((function(t){var e=t.manifest,n=t.owner,r=t.payload;wr("".concat(vs,"/soil-raw"),{owner:n,manifest:e,payload:r}).then((function(t){Bg.service.send(pa),Bg.reset(),Pa(t)})).catch((function(t){Bg.service.send(ma)}))}))})).catch((function(t){Bg.service.send(ma),je("Importing Soil Raw Failed",t)}))}}});var Wg=function(t){var e=[{menuName:"CSBP",menuType:Ve.Csbp},{menuName:"APAL",menuType:Ve.Apal}],r=Fg((0,n.useState)([]),2),i=r[0],o=r[1],a=Fg((0,n.useState)(e[0]),2),s=a[0],l=a[1],u=Fg((0,n.useState)(!1),2),c=u[0],h=u[1],f=Os(t,Ge.SoilSamples,qe.Raw,s.menuType,i);(0,n.useEffect)((function(){var t=Bg.observer.subscribe({next:function(t){t.event.type===pa&&(h(!1),o([])),t.event.type===ma&&h(!1)}});return function(){t.unsubscribe()}}),[]);var d=void 0!==(null==i?void 0:i.first());return n.createElement("div",{className:"m-4 ml-0 p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8 border-"},n.createElement("h2",{className:"text-center text-lg"},"Raw Soil Data"),n.createElement("p",{className:"text-xs text-center mb-2"},"Raw CSBP, APAL or PCTV"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-dashed border-gray-300",d?"bg-cyan-50 border-cyan-500":"bg-gray-100"),files:i,setFiles:o,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"record-format",className:"lbl-xs lbl-badge mb-1"},"Format"),n.createElement(wl,{name:"record-format",className:"text-sm string-select",menu:e,selected:s,setSelected:l})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement(kg,{label:"Import",isLoading:c,onClick:function(){h(!0),As(f)?Bg.service.send({type:da,payload:{event:i.first(),meta:f}}):h(!1)},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900",inactiveClass:"mt-7 p-2 text-normal"}))))};function Vg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Gg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qg=function(t){var e=[{menuName:"VRTS",menuType:Ve.Vrts}],r=Vg((0,n.useState)([]),2),i=r[0],o=r[1],a=Vg((0,n.useState)(e[0]),2),s=a[0],l=a[1],u=Vg((0,n.useState)(!1),2),c=u[0],h=u[1],f=Os(t,Ge.SoilPoints,qe.Raw,s.menuType,i);(0,n.useEffect)((function(){var t=ks.observer.subscribe({next:function(t){t.event.type===pa&&(h(!1),o([])),t.event.type===ma&&h(!1)}});return function(){t.unsubscribe()}}),[]);var d=void 0!==(null==i?void 0:i.first());return n.createElement("div",{className:"m-4 ml-0 p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8"},n.createElement("h2",{className:"text-center text-lg"},"Soil Points"),n.createElement("p",{className:"text-xs text-center mb-2"},"Import id, lon, lat"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-dashed border-gray-300",d?"bg-fuchsia-50 border-fuchsia-500":"bg-gray-100"),files:i,setFiles:o,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"record-format",className:"lbl-xs lbl-badge mb-1"},"Format"),n.createElement(wl,{name:"record-format",className:"text-sm string-select",menu:e,selected:s,setSelected:l})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement(kg,{label:"Import",isLoading:c,onClick:function(){h(!0),As(f)?ks.service.send({type:da,payload:{event:i.first(),meta:f}}):h(!1)},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900",inactiveClass:"mt-7 p-2 text-normal"}))))};function Xg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Zg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yg=function(t){var e=[{menuName:"PCT",menuType:Ve.Pct}],r=Xg((0,n.useState)([]),2),i=r[0],o=r[1],a=Xg((0,n.useState)(e[0]),2),s=a[0],l=a[1],u=Xg((0,n.useState)(!1),2),c=u[0],h=u[1],f=Os(t,Ge.SoilSamples,qe.Clean,s.menuType,i);(0,n.useEffect)((function(){var t=Cs.observer.subscribe({next:function(t){t.event.type===pa&&(h(!1),o([])),t.event.type===ma&&h(!1)}});return function(){t.unsubscribe()}}),[]);var d=void 0!==(null==i?void 0:i.first());return n.createElement("div",{className:"m-4 ml-0 p-2"},n.createElement("div",{className:"border-r-2 border-gray-100 pr-8"},n.createElement("h2",{className:"text-center text-lg"},"Clean Soil Samples"),n.createElement("p",{className:"text-xs text-center mb-2"},"Processed soil data"),n.createElement(Tg,{className:xe("flex min-h-[10em] items-center justify-center rounded-md w-44 border-2 border-dashed border-gray-300",d?"bg-yellow-50 border-yellow-500":"bg-gray-100"),files:i,setFiles:o,singleFile:!0}),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement("label",{htmlFor:"record-horizon",className:"lbl-xs lbl-badge mb-1"},"Samples Type"),n.createElement(wl,{name:"record-horizon",className:"text-sm string-select",menu:e,selected:s,setSelected:l})),n.createElement("div",{className:"control-container-col w-46 mt-1"},n.createElement(kg,{label:"Import",isLoading:c,onClick:function(){h(!0),As(f)?Cs.service.send({type:da,payload:{event:i.first(),meta:f}}):h(!1)},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900",inactiveClass:"mt-7 p-2 text-normal"}))))};function $g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Kg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kg(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Jg=function(){_a([za,Fa]);var t=ja.client,e=Oa(ja.metas),r=e.dealers,i=e.clients,o=e.blocks,a=ja.seasonSelected,s=$g((0,n.useState)(""),2),l=s[0],u=s[1],c=$g((0,n.useState)(""),2),h=c[0],f=c[1],d=$g((0,n.useState)(""),2),p=d[0],m=d[1],v=$g((0,n.useState)(!1),2),g=v[0],y=v[1],b=$g((0,n.useState)((new Date).getFullYear().toString()),2),_=b[0],x=b[1];return(0,n.useEffect)((function(){t.isJust&&(x(a),u(t.value.dealer()),f(t.value.client()),m(t.value.block()))}),[t]),n.createElement("div",{className:"flex flex-col sticky top-16 mt-16"},n.createElement($a,{client:t,setSelectedClient:function(){}}),n.createElement("div",{className:"flex flex-row flex-wrap justify-center w-full  z-40 p-4 border-solid border-b-2 border-gray-100 bg-white"},n.createElement("div",{className:"control-container-col px-2"},n.createElement("label",{htmlFor:"season",className:"lbl-badge text-sm text-gray-500"},"Season"),n.createElement("input",{name:"season",className:"number-input-standard",type:"text",list:"seasons",value:_,onChange:function(t){return x(t.target.value)}}),n.createElement("datalist",{id:"seasons"},Ee().map((function(t,e){return n.createElement("option",{className:"bg-white text-gray-700",key:e},t)})))),n.createElement("div",{className:"control-container-col px-2"},n.createElement("label",{htmlFor:"dealer",className:"lbl-badge text-sm text-gray-500"},"Dealer"),n.createElement("input",{name:"dealer",className:"number-input-standard text-sm",type:"text",list:"dealers",value:l,onChange:function(t){return u(t.target.value)}}),n.createElement("datalist",{id:"dealers"},r.map((function(t,e){return n.createElement("option",{className:"bg-white text-gray-700",key:e},t)})))),n.createElement("div",{className:"control-container-col px-2"},n.createElement("label",{htmlFor:"client",className:"lbl-badge text-sm text-gray-500"},"Client"),n.createElement("input",{name:"client",className:"number-input-standard text-sm",type:"text",list:"clients",value:h,onChange:function(t){return f(t.target.value)}}),n.createElement("datalist",{id:"clients"},i.map((function(t,e){return n.createElement("option",{className:"text-sm",key:e},t)})))),n.createElement("div",{className:"control-container-col px-2"},n.createElement("label",{htmlFor:"block",className:"lbl-badge text-sm text-gray-500"},"Block"),n.createElement("input",{name:"block",className:"number-input-standard",type:"text",list:"blocks",value:p,onChange:function(t){return m(t.target.value)}}),n.createElement("datalist",{id:"blocks"},o.map((function(t,e){return n.createElement("option",{key:e},t)})))),n.createElement("div",{className:"control-container-col px-2"},n.createElement("label",{htmlFor:"scroll-zoom",className:"lbl-badge text-sm text-gray-500"},"Overwrite"),n.createElement("div",{className:"toggle-middle"},n.createElement(xu,{name:"",default:g,toggle:y}))),n.createElement("div",{className:"control-container-col px-4 text-sm"},n.createElement("label",{htmlFor:"scroll-zoom",className:"lbl-badge text-sm text-gray-500"},"Clear Inputs"),n.createElement("div",{className:"toggle-middle"},n.createElement("button",{className:xe("text-sm px-5 py-1 border-1 rounded hover:bg-gray-50",l.isEmpty()&&h.isEmpty()&&p.isEmpty()?"":"bg-blue-600 text-white hover:bg-blue-500"),onClick:function(){return u(""),f(""),m(""),void y(!1)}},"Clear")))),n.createElement("div",{className:"flex flex-wrap justify-center"},n.createElement(Pg,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g}),n.createElement(Ig,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g}),n.createElement(Ug,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g}),n.createElement(Wg,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g}),n.createElement(qg,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g}),n.createElement(Yg,{season:_,dealer:l,client:h,block:p,field:"All",overwrite:g})))};var Qg=function(t){var e=t.className;if(_a([za,Fa,km]),!ja.client.isJust)return n.createElement("div",{className:xe("flex flex-col items-center p-2 text-gray-600 text-xs justify-center",e)},n.createElement("div",{className:"text-base"},"Welcome"),n.createElement("div",{className:"text-xs text-gray-500"},Object.keys(ja.metasByGroup).length-1," Blocks, ",ja.metas.length-1," Records"));var r=ja.clientBools;return n.createElement("div",{className:"flex flex-col items-center p-2 text-gray-600 text-xs justify-center"},n.createElement("div",{className:"text-base"},r.name),n.createElement("div",{className:"text-xs"},r.block),n.createElement("div",{className:"text-xs text-gray-500"},gc(Fm.hectares,2),"ha"))};function ty(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ey(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ey(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ey(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ny=function(t){var e=t.className,r=_a([za,Fa]),i=ja.metaTree,o=ja.client,a=ty((0,n.useState)({menuName:"VRTS",menuType:"vrts"}),2),s=a[0],l=a[1],u=ty((0,n.useState)(""),2),c=u[0],h=u[1],f=ty((0,n.useState)(""),2),d=f[0],p=f[1],m=ty((0,n.useState)(""),2),v=m[0],g=m[1],y=ty((0,n.useState)(""),2),b=y[0],_=y[1],x=ty((0,n.useState)(""),2),w=x[0],S=x[1],E=Object.keys(i).sort();(0,n.useMemo)((function(){if(o.isJust&&o.value.dbMetas.length>0){var t=o.value.dbMetas[0];h(t.dealer),p(t.client),g(t.block),S(t.field),_(t.season)}}),[o,r]),(0,n.useEffect)((function(){s&&s.menuName.length>0&&h(s.menuName)}),[s]);var M=E.map((function(t){return{menuName:t,menuType:t}})),T=i[c];return T||(T={}),n.createElement("div",{className:xe("p-2 text-gray-500 text-sm",e)},n.createElement(wl,{name:"Dealers",className:"text-sm string-select mb-2",menu:M,selected:s,setSelected:l}),Object.keys(T).sort().map((function(t){return n.createElement("details",{key:"".concat(c,"-").concat(t),open:c==c&&t===d},n.createElement("summary",{className:xe("text-gray-600 cursor-pointer hover:underline")},t),Object.keys(i[c][t]).sort().map((function(e){return n.createElement("details",{key:"".concat(c,"-").concat(t,"-").concat(e),open:c==c&&t===d&&e===v},n.createElement("summary",{className:xe("ml-4 text-gray-600 cursor-pointer hover:underline")},e),Object.keys(i[c][t][e]).sort().map((function(r){return n.createElement("details",{key:"".concat(c,"-").concat(t,"-").concat(e,"-").concat(r),open:c==c&&t===d&&e===v&&r===b},n.createElement("summary",{className:xe("ml-8 text-gray-600 cursor-pointer hover:underline")},r),Object.keys(i[c][t][e][r]).sort().map((function(a){var l=i[c][t][e][r][a],u=o.isJust&&o.value.client()===t&&o.value.block()===e&&w===a&&b===r,h=l.getAllFieldsBoundary();return n.createElement("div",{onClick:function(){!function(t,e){Fa.reset(),Fa.service.send({type:fa,payload:{client:t,boundary:e}})}(kt(l),h)},key:"".concat(s,"-").concat(t,"-").concat(e,"-").concat(r),className:xe("ml-12 text-gray-600 cursor-pointer hover:underline",u?"font-bold text-blue-500":"")},a)})))})))})))})))},ry=function(t){var e=t.children,r=t.id,i=t.className;return n.createElement(is,null,n.createElement("main",{key:r,className:i},n.createElement("div",{className:"max-auto z-0 rounded-lg h-full"},e)))};function iy(){return iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iy.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const oy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const ay=r.startTransition;function sy(t){let{basename:r,children:i,future:l,window:f}=t,d=n.useRef();var p;null==d.current&&(d.current=(void 0===(p={window:f,v5Compat:!0})&&(p={}),function(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:f=!1}=i,d=l.history,p=e.Pop,m=null,v=g();function g(){return(d.state||{idx:null}).idx}function y(){p=e.Pop;let t=g(),n=null==t?null:t-v;v=t,m&&m({action:p,location:_.location,delta:n})}function b(t){let e="null"!==l.location.origin?l.location.origin:l.location.href,n="string"==typeof t?t:h(t);return s(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==v&&(v=0,d.replaceState(o({},d.state,{idx:v}),""));let _={get action(){return p},get location(){return t(l,d)},listen(t){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(a,y),m=t,()=>{l.removeEventListener(a,y),m=null}},createHref:t=>n(l,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,n){p=e.Push;let i=c(_.location,t,n);r&&r(i,t),v=g()+1;let o=u(i,v),a=_.createHref(i);try{d.pushState(o,"",a)}catch(t){if(t instanceof DOMException&&"DataCloneError"===t.name)throw t;l.location.assign(a)}f&&m&&m({action:p,location:_.location,delta:1})},replace:function(t,n){p=e.Replace;let i=c(_.location,t,n);r&&r(i,t),v=g();let o=u(i,v),a=_.createHref(i);d.replaceState(o,"",a),f&&m&&m({action:p,location:_.location,delta:0})},go:t=>d.go(t)};return _}((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return c("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"==typeof e?e:h(e)}),null,p)));let m=d.current,[v,g]=n.useState({action:m.action,location:m.location}),{v7_startTransition:y}=l||{},b=n.useCallback((t=>{y&&ay?ay((()=>g(t))):g(t)}),[g,y]);return n.useLayoutEffect((()=>m.listen(b)),[m,b]),n.createElement(at,{basename:r,children:i,location:v.location,navigationType:v.action,navigator:m})}Gu.flushSync;const ly="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,uy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cy=n.forwardRef((function(t,e){let r,{onClick:i,relative:o,reloadDocument:a,replace:l,state:u,target:c,to:f,preventScrollReset:d,unstable_viewTransition:p}=t,m=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,oy),{basename:v}=n.useContext(H),g=!1;if("string"==typeof f&&uy.test(f)&&(r=f,ly))try{let t=new URL(window.location.href),e=f.startsWith("//")?new URL(t.protocol+f):new URL(f),n=O(e.pathname,v);e.origin===t.origin&&null!=n?f=n+e.search+e.hash:g=!0}catch(t){}let y=function(t,e){let{relative:r}=void 0===e?{}:e;q()||s(!1);let{basename:i,navigator:o}=n.useContext(H),{hash:a,pathname:l,search:u}=$(t,{relative:r}),c=l;return"/"!==i&&(c="/"===l?i:R([i,l])),o.createHref({pathname:c,search:u,hash:a})}(f,{relative:o}),b=function(t,e){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,unstable_viewTransition:l}=void 0===e?{}:e,u=Y(),c=X(),f=$(t,{relative:s});return n.useCallback((e=>{if(function(t,e){return!(0!==t.button||e&&"_self"!==e||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t))}(e,r)){e.preventDefault();let n=void 0!==i?i:h(c)===h(f);u(t,{replace:n,state:o,preventScrollReset:a,relative:s,unstable_viewTransition:l})}}),[c,u,f,i,o,r,t,a,s,l])}(f,{replace:l,state:u,target:c,preventScrollReset:d,relative:o,unstable_viewTransition:p});return n.createElement("a",iy({},m,{href:r||y,onClick:g||a?i:function(t){i&&i(t),t.defaultPrevented||b(t)},ref:e,target:c}))}));var hy,fy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hy||(hy={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(fy||(fy={}));var dy=function(t){var e=t.mainMenu;return n.createElement("nav",{className:"flex flex-row space-x-4"},e.map((function(t){return n.createElement(cy,{key:t.name,to:t.href,className:xe(t.current?"bg-blue-200 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-4 text-sm font-medium rounded-md")},n.createElement(t.icon,{className:xe(t.current?"text-gray-500":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),t.name)})))};const py=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))})),my=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))})),vy=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}));function gy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return yy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yy(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var by=5e3;function _y(){var t,e,r=gy((0,n.useState)(!1),2),i=r[0],o=r[1],a=gy((0,n.useState)(null),2),s=a[0],l=a[1],u=gy((0,n.useState)(null),2),c=u[0],h=u[1],f=gy((0,n.useState)({}),2),d=f[0];f[1],(0,n.useEffect)((function(){var t,e=Ie.pipe((t=function(t){return t.level!==Le.Debug},Io((function(e,n){var r=0;e.subscribe(Do(n,(function(e){return t.call(undefined,e,r++)&&n.next(e)})))})))).subscribe((function(t){for(var e in d)d[e]<Date.now()-by&&delete d[e];void 0===d[t.checksum]&&(d[t.checksum]=Date.now(),l(t),o(!0))}));return function(){return e.unsubscribe()}}),[]),(0,n.useEffect)((function(){if(s)switch(s.level){case Le.Success:h(n.createElement(py,{className:"h-6 w-6 text-green-400","aria-hidden":"true"}));break;case Le.Warning:h(n.createElement(my,{className:"h-6 w-6 text-orange-400","aria-hidden":"true"}));break;case Le.Failure:h(n.createElement(my,{className:"h-6 w-6 text-red-400","aria-hidden":"true"}));break;case Le.Info:h(n.createElement(vy,{className:"h-6 w-6 text-blue-400","aria-hidden":"true"}))}}),[s]),(0,n.useEffect)((function(){s&&setTimeout((function(){o(!1),l(null)}),1e4)}),[s]);var p=s&&s.level===Le.Failure,m=s&&s.level===Le.Info,v=s&&s.level===Le.Success;return n.createElement(n.Fragment,null,n.createElement("div",{"aria-live":"assertive",className:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},n.createElement("div",{className:"flex w-full flex-col items-center space-y-4 sm:items-end"},n.createElement(_h,{show:i,as:n.Fragment,enter:"transform ease-out duration-300 transition",enterFrom:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterTo:"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},n.createElement("div",{className:xe("pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5",p?"border-failure":"",m?"border-info":"",v?"border-success":"")},n.createElement("div",{className:"p-4"},n.createElement("div",{className:"flex items-start"},n.createElement("div",{className:"flex-shrink-0"},c),n.createElement("div",{className:"ml-3 w-0 flex-1 pt-0.5"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},null==s||null===(t=s.label)||void 0===t?void 0:t.toString()),null==s||null===(e=s.message)||void 0===e?void 0:e.toString().split("\n").map((function(t,e){return n.createElement("p",{key:"n"+e,className:"mt-1 text-sm text-gray-500"},t)}))),n.createElement("div",{className:"ml-4 flex flex-shrink-0"},n.createElement("button",{type:"button",className:"inline-flex rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:function(){o(!1)}},n.createElement("span",{className:"sr-only"},"Close"),n.createElement(Va,{className:"h-5 w-5","aria-hidden":"true"}))))))))))}var xy=function(t){var e=t.className;return n.createElement("div",{className:e},n.createElement("img",{className:"h-20 w-auto",src:"/images/logo.png",alt:"Logo"}))},wy=function(t){function e(e,n){return t.call(this)||this}return It(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(Gt),Sy={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Sy.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,Ut([t,e],zt(n))):setInterval.apply(void 0,Ut([t,e],zt(n)))},clearInterval:function(t){var e=Sy.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Ey=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return It(e,t),e.prototype.schedule=function(t,e){var n;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),Sy.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&Sy.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Vt(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(wy),My={now:function(){return(My.delegate||Date).now()},delegate:void 0},Ty=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=My.now,t}(),Ay=new(function(t){function e(e,n){void 0===n&&(n=Ty.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r}return It(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(Ty))(Ey),Oy=Ay;function Py(t){return function(t){if(Array.isArray(t))return Ry(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ky(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||ky(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ky(t,e){if(t){if("string"==typeof t)return Ry(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ry(t,e):void 0}}function Ry(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ny=function(t){var e=t.className,r=Cy((0,n.useState)([]),2),i=r[0],o=r[1],a=Cy((0,n.useState)(Date.now()),2),s=a[0],l=a[1],u=Cy((0,n.useState)(0),2),c=u[0],h=u[1],f=Cy((0,n.useState)(!1),2),d=f[0],p=f[1],m=Cy((0,n.useState)(""),2),v=m[0],g=m[1],y=Cy((0,n.useState)(0),2),b=y[0],_=y[1];return(0,n.useEffect)((function(){var t=br.subscribe({next:function(t){p(!0),l(Date.now()),"start"===t.status&&(console.log("[ACTIVITY] START",t.name),g("[ACTIVITY] START ".concat(t.name)),h((function(t){return t+1})),o((function(e){return[].concat(Py(e),[t.name])}))),"stop"===t.status&&(console.log("[ACTIVITY] STOP",t.name),g("[ACTIVITY] STOP ".concat(t.name)),h((function(t){return t-1})),o((function(e){return Py(e).filter((function(e){return e!==t.name}))})))}});return function(){t.unsubscribe()}}),[]),(0,n.useEffect)((function(){var t,e,n=(t=1e3,void 0===t&&(t=0),void 0===e&&(e=Ay),t<0&&(t=0),function(t,e,n){void 0===t&&(t=0),void 0===n&&(n=Oy);var r=-1;return null!=e&&(Vo(e)?n=e:r=e),new de((function(e){var i=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;i<0&&(i=0);var o=0;return n.schedule((function(){e.closed||(e.next(o++),0<=r?this.schedule(void 0,r):e.complete())}),i)}))}(t,t,e)).subscribe({next:function(){_(Date.now())}});return function(){n.unsubscribe()}}),[]),(0,n.useEffect)((function(){var t=Date.now()-s;t>1e3&&0===c&&d&&(console.log("[ACTIVITY] CLEANUP No activity for ".concat(t,"ms, setting active to false (").concat(i.join(", "),")")),p(!1),h(0),o([])),d&&t>3e4&&(c<0||c>0)&&(console.warn("[ACTIVITY] CLEANUP (".concat(c,") No activity for ").concat(t,"ms (").concat(v," ").concat(i.join(", "),")")),p(!1),h(0),o([]))}),[b]),n.createElement("div",{className:xe(e,"fixed right-0")},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:xe(d?"animate-spin text-blue-600":"animate-none text-gray-600","w-6 h-6")},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})))},Ly=function(t){var e=t.className,r=(0,n.useContext)(Et),i=X().pathname,o=r.makeCurrentPageActive(i,r.mainNavigationMenu);return n.createElement("div",{className:xe(e,"")},n.createElement("div",{className:"px-2 flex justify-between p-2"},n.createElement(dy,{mainMenu:o})),n.createElement(Ny,{className:"fixed right-0 flex items-center h-16 w-16 p-4"}))},Iy=function(t){var e=t.id,r=t.className;return n.createElement("div",{key:e,className:r},n.createElement("div",{className:xe("flex flex-col flex-grow border-r border-gray-200 pt-5 bg-white overflow-y-auto")},n.createElement(xy,{className:"flex items-center justify-center flex-shrink-0 px-4 mb-4"}),n.createElement(Qg,{className:""}),n.createElement("div",{className:"flex-grow flex flex-col overflow-y-auto"},n.createElement("nav",{className:"flex-1 p-2 space-y-2"},n.createElement(ny,{className:""})))))};function Dy(t){var e=Cy((0,n.useState)(!1),2),r=e[0];return e[1],n.createElement(n.Fragment,null,n.createElement(Iy,{id:"lsb"+r.toString(),className:xe("flex flex-col fixed inset-y-0 w-64 z-1",r?"hidden":"")}),n.createElement("div",{className:xe("flex flex-col flex-1 h-full overflow-clip z-1",r?"pl-0":"pl-64")},n.createElement(Ly,{className:xe("fixed w-full flex h-16 bg-white shadow z-50",r?"hidden":"")}),n.createElement(ry,{id:"m"+r,className:xe("flex-1 z-1 bg-white h-full w-full overflow-y-auto text-gray-700"),children:t.children})),n.createElement(_y,null))}var jy=i(8267),zy=i(4293),Uy=i.n(zy),By=i(3560),Fy=i.n(By),Hy=i(6026),Wy=i.n(Hy),Vy=i(7361),Gy=i.n(Vy),qy=i(9734),Xy=i.n(qy),Zy=i(3493),Yy=i.n(Zy),$y=i(3311),Ky=i.n($y),Jy=i(711),Qy=i.n(Jy);function tb(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=tb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}const eb=function(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=tb(t))&&(r&&(r+=" "),r+=e);return r};function nb(t){return nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nb(t)}function rb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ib(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rb(Object(n),!0).forEach((function(e){ob(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ob(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==nb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nb(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ab=Math.PI/180,sb=function(t){return 180*t/Math.PI},lb=function(t,e,n,r){return{x:t+Math.cos(-ab*r)*n,y:e+Math.sin(-ab*r)*n}},ub=function(t,e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return t+360*Math.min(i,o)},cb=function(t,e){var n=function(t,e){var n=t.x,r=t.y,i=e.cx,o=e.cy,a=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:sb(l),angleInRadian:l}}({x:t.x,y:t.y},e),r=n.radius,i=n.angle,o=e.innerRadius,a=e.outerRadius;if(r<o||r>a)return!1;if(0===r)return!0;var s,l=function(t){var e=t.startAngle,n=t.endAngle,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-360*o,endAngle:n-360*o}}(e),u=l.startAngle,c=l.endAngle,h=i;if(u<=c){for(;h>c;)h-=360;for(;h<u;)h+=360;s=h>=u&&h<=c}else{for(;h>u;)h-=360;for(;h<c;)h+=360;s=h>=c&&h<=u}return s?ib(ib({},e),{},{radius:r,angle:ub(h,e)}):null};function hb(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle;return{points:[lb(e,n,r,i),lb(e,n,r,o)],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}var fb=i(7037),db=i.n(fb),pb=i(7654),mb=i.n(pb),vb=i(1763),gb=i.n(vb),yb=function(t){return 0===t?0:t>0?1:-1},bb=function(t){return db()(t)&&t.indexOf("%")===t.length-1},_b=function(t){return gb()(t)&&!mb()(t)},xb=function(t){return _b(t)||db()(t)},wb=0,Sb=function(t){var e=++wb;return"".concat(t||"").concat(e)},Eb=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!_b(t)&&!db()(t))return r;if(bb(t)){var o=t.indexOf("%");n=e*parseFloat(t.slice(0,o))/100}else n=+t;return mb()(n)&&(n=r),i&&n>e&&(n=e),n},Mb=function(t){if(!t)return null;var e=Object.keys(t);return e&&e.length?t[e[0]]:null},Tb=function(t,e){return _b(t)&&_b(e)?function(n){return t+n*(e-t)}:function(){return e}};function Ab(t,e,n){return t&&t.length?t.find((function(t){return t&&("function"==typeof e?e(t):Gy()(t,e))===n})):null}var Ob={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(t){return Ob[t]},set:function(t,e){if("string"==typeof t)Ob[t]=e;else{var n=Object.keys(t);n&&n.length&&n.forEach((function(e){Ob[e]=t[e]}))}}};function Pb(t){return Pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pb(t)}function Cb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cb(Object(n),!0).forEach((function(e){Rb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Pb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pb(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nb={widthCache:{},cacheCount:0},Lb={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ib="recharts_measurement_span",Db=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t||Ob.isSsr)return{width:0,height:0};var n,r=(n=kb({},e),Object.keys(n).forEach((function(t){n[t]||delete n[t]})),n),i=JSON.stringify({text:t,copyStyle:r});if(Nb.widthCache[i])return Nb.widthCache[i];try{var o=document.getElementById(Ib);o||((o=document.createElement("span")).setAttribute("id",Ib),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=kb(kb({},Lb),r);Object.assign(o.style,a),o.textContent="".concat(t);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Nb.widthCache[i]=l,++Nb.cacheCount>2e3&&(Nb.cacheCount=0,Nb.widthCache={}),l}catch(t){return{width:0,height:0}}},jb=i(6604),zb=i.n(jb);function Ub(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Bb(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}class Fb extends Map{constructor(t,e=qb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Wb(this,t))}has(t){return super.has(Wb(this,t))}set(t,e){return super.set(Vb(this,t),e)}delete(t){return super.delete(Gb(this,t))}}class Hb extends Set{constructor(t,e=qb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Wb(this,t))}add(t){return super.add(Vb(this,t))}delete(t){return super.delete(Gb(this,t))}}function Wb({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Vb({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Gb({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qb(t){return null!==t&&"object"==typeof t?t.valueOf():t}const Xb=Symbol("implicit");function Zb(){var t=new Fb,e=[],n=[],r=Xb;function i(i){let o=t.get(i);if(void 0===o){if(r!==Xb)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Fb;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Zb(e,n).unknown(r)},Ub.apply(i,arguments),i}function Yb(){var t,e,n=Zb().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,u=0,c=.5;function h(){var n=r().length,h=a<o,f=h?a:o,d=h?o:a;t=(d-f)/Math.max(1,n-l+2*u),s&&(t=Math.floor(t)),f+=(d-f-t*(n-l))*c,e=t*(1-l),s&&(f=Math.round(f),e=Math.round(e));var p=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(n).map((function(e){return f+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,u=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(u=+t,h()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return Yb(r(),[o,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},Ub.apply(h(),arguments)}function $b(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return $b(e())},t}function Kb(){return $b(Yb.apply(null,arguments).paddingInner(1))}const Jb=Math.sqrt(50),Qb=Math.sqrt(10),t_=Math.sqrt(2);function e_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Jb?10:o>=Qb?5:o>=t_?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?e_(t,e,2*n):[s,l,u]}function n_(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,o,a]=r?e_(e,t,n):e_(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)l[t]=(o-t)/-a;else for(let t=0;t<s;++t)l[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)l[t]=(i+t)/-a;else for(let t=0;t<s;++t)l[t]=(i+t)*a;return l}function r_(t,e,n){return e_(t=+t,e=+e,n=+n)[2]}function i_(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?r_(e,t,n):r_(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function o_(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function a_(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s_(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=o_,n=(e,n)=>o_(t(e),n),r=(e,n)=>t(e)-n):(e=t===o_||t===a_?t:l_,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function l_(){return 0}function u_(t){return null===t?NaN:+t}const c_=s_(o_),h_=c_.right,f_=(c_.left,s_(u_).center,h_);function d_(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function p_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function m_(){}var v_=.7,g_=1/v_,y_="\\s*([+-]?\\d+)\\s*",b_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",__="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x_=/^#([0-9a-f]{3,8})$/,w_=new RegExp(`^rgb\\(${y_},${y_},${y_}\\)$`),S_=new RegExp(`^rgb\\(${__},${__},${__}\\)$`),E_=new RegExp(`^rgba\\(${y_},${y_},${y_},${b_}\\)$`),M_=new RegExp(`^rgba\\(${__},${__},${__},${b_}\\)$`),T_=new RegExp(`^hsl\\(${b_},${__},${__}\\)$`),A_=new RegExp(`^hsla\\(${b_},${__},${__},${b_}\\)$`),O_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function P_(){return this.rgb().formatHex()}function C_(){return this.rgb().formatRgb()}function k_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=x_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?R_(e):3===n?new I_(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?N_(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?N_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=w_.exec(t))?new I_(e[1],e[2],e[3],1):(e=S_.exec(t))?new I_(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=E_.exec(t))?N_(e[1],e[2],e[3],e[4]):(e=M_.exec(t))?N_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=T_.exec(t))?F_(e[1],e[2]/100,e[3]/100,1):(e=A_.exec(t))?F_(e[1],e[2]/100,e[3]/100,e[4]):O_.hasOwnProperty(t)?R_(O_[t]):"transparent"===t?new I_(NaN,NaN,NaN,0):null}function R_(t){return new I_(t>>16&255,t>>8&255,255&t,1)}function N_(t,e,n,r){return r<=0&&(t=e=n=NaN),new I_(t,e,n,r)}function L_(t,e,n,r){return 1===arguments.length?function(t){return t instanceof m_||(t=k_(t)),t?new I_((t=t.rgb()).r,t.g,t.b,t.opacity):new I_}(t):new I_(t,e,n,null==r?1:r)}function I_(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function D_(){return`#${B_(this.r)}${B_(this.g)}${B_(this.b)}`}function j_(){const t=z_(this.opacity);return`${1===t?"rgb(":"rgba("}${U_(this.r)}, ${U_(this.g)}, ${U_(this.b)}${1===t?")":`, ${t})`}`}function z_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function U_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function B_(t){return((t=U_(t))<16?"0":"")+t.toString(16)}function F_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new W_(t,e,n,r)}function H_(t){if(t instanceof W_)return new W_(t.h,t.s,t.l,t.opacity);if(t instanceof m_||(t=k_(t)),!t)return new W_;if(t instanceof W_)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new W_(a,s,l,t.opacity)}function W_(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function V_(t){return(t=(t||0)%360)<0?t+360:t}function G_(t){return Math.max(0,Math.min(1,t||0))}function q_(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function X_(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}d_(m_,k_,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:P_,formatHex:P_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return H_(this).formatHsl()},formatRgb:C_,toString:C_}),d_(I_,L_,p_(m_,{brighter(t){return t=null==t?g_:Math.pow(g_,t),new I_(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?v_:Math.pow(v_,t),new I_(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new I_(U_(this.r),U_(this.g),U_(this.b),z_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D_,formatHex:D_,formatHex8:function(){return`#${B_(this.r)}${B_(this.g)}${B_(this.b)}${B_(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:j_,toString:j_})),d_(W_,(function(t,e,n,r){return 1===arguments.length?H_(t):new W_(t,e,n,null==r?1:r)}),p_(m_,{brighter(t){return t=null==t?g_:Math.pow(g_,t),new W_(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?v_:Math.pow(v_,t),new W_(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new I_(q_(t>=240?t-240:t+120,i,r),q_(t,i,r),q_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new W_(V_(this.h),G_(this.s),G_(this.l),z_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=z_(this.opacity);return`${1===t?"hsl(":"hsla("}${V_(this.h)}, ${100*G_(this.s)}%, ${100*G_(this.l)}%${1===t?")":`, ${t})`}`}}));const Z_=t=>()=>t;function Y_(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Z_(isNaN(t)?e:t)}const $_=function t(e){var n=function(t){return 1==(t=+t)?Y_:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Z_(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=L_(t)).r,(e=L_(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Y_(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function K_(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=L_(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function J_(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ax(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Q_(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ex(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ax(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}K_((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return X_((n-r/e)*e,a,i,o,s)}})),K_((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return X_((n-r/e)*e,i,o,a,s)}}));var nx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rx=new RegExp(nx.source,"g");function ix(t,e){var n,r,i,o=nx.lastIndex=rx.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=nx.exec(t))&&(r=rx.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:tx(n,r)})),o=rx.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function ox(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function ax(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?Z_(e):("number"===i?tx:"string"===i?(n=k_(e))?(e=n,$_):ix:e instanceof k_?$_:e instanceof Date?Q_:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?J_:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ex:tx:ox))(t,e)}function sx(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function lx(t){return+t}var ux=[0,1];function cx(t){return t}function hx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function fx(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=hx(i,r),o=n(a,o)):(r=hx(r,i),o=n(o,a)),function(t){return o(r(t))}}function dx(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=hx(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=f_(t,e,1,r)-1;return o[n](i[n](e))}}function px(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function mx(){var t,e,n,r,i,o,a=ux,s=ux,l=ax,u=cx;function c(){var t=Math.min(a.length,s.length);return u!==cx&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?dx:fx,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=r(s,a.map(t),tx)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,lx),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=sx,c()},h.clamp=function(t){return arguments.length?(u=!!t||cx,c()):u!==cx},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function vx(){return mx()(cx,cx)}var gx,yx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bx(t){if(!(e=yx.exec(t)))throw new Error("invalid format: "+t);var e;return new _x({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function _x(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function xx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wx(t){return(t=xx(Math.abs(t)))?t[1]:NaN}function Sx(t,e){var n=xx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}bx.prototype=_x.prototype,_x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ex={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Sx(100*t,e)},r:Sx,s:function(t,e){var n=xx(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(gx=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xx(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Mx(t){return t}var Tx,Ax,Ox,Px=Array.prototype.map,Cx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kx(t,e,n,r){var i,o=i_(t,e,n);switch((r=bx(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wx(e)/3)))-wx(Math.abs(t)))}(o,a))||(r.precision=i),Ox(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wx(e)-wx(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-wx(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Ax(r)}function Rx(t){var e=t.domain;return t.ticks=function(t){var n=e();return n_(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return kx(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=r_(l,u,n))===r)return o[a]=l,o[s]=u,e(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return t},t}function Nx(){var t=vx();return t.copy=function(){return px(t,Nx())},Ub.apply(t,arguments),Rx(t)}function Lx(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,lx),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Lx(t).unknown(e)},t=arguments.length?Array.from(t,lx):[0,1],Rx(n)}function Ix(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Dx(t){return Math.log(t)}function jx(t){return Math.exp(t)}function zx(t){return-Math.log(-t)}function Ux(t){return-Math.exp(-t)}function Bx(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fx(t){return(e,n)=>-t(-e,n)}function Hx(t){const e=t(Dx,jx),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?Bx:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=Fx(r),i=Fx(i),t(zx,Ux)):t(Dx,jx),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const l=s<a;l&&([a,s]=[s,a]);let u,c,h=r(a),f=r(s);const d=null==t?10:+t;let p=[];if(!(o%1)&&f-h<d){if(h=Math.floor(h),f=Math.ceil(f),a>0){for(;h<=f;++h)for(u=1;u<o;++u)if(c=h<0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;p.push(c)}}else for(;h<=f;++h)for(u=o-1;u>=1;--u)if(c=h>0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;p.push(c)}2*p.length<d&&(p=n_(a,s,d))}else p=n_(h,f,Math.min(f-h,d)).map(i);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=bx(n)).precision||(n.trim=!0),n=Ax(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(Ix(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Wx(){const t=Hx(mx()).domain([1,10]);return t.copy=()=>px(t,Wx()).base(t.base()),Ub.apply(t,arguments),t}function Vx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Gx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function qx(t){var e=1,n=t(Vx(e),Gx(e));return n.constant=function(n){return arguments.length?t(Vx(e=+n),Gx(e)):e},Rx(n)}function Xx(){var t=qx(mx());return t.copy=function(){return px(t,Xx()).constant(t.constant())},Ub.apply(t,arguments)}function Zx(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Yx(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $x(t){return t<0?-t*t:t*t}function Kx(t){var e=t(cx,cx),n=1;return e.exponent=function(e){return arguments.length?1==(n=+e)?t(cx,cx):.5===n?t(Yx,$x):t(Zx(n),Zx(1/n)):n},Rx(e)}function Jx(){var t=Kx(mx());return t.copy=function(){return px(t,Jx()).exponent(t.exponent())},Ub.apply(t,arguments),t}function Qx(){return Jx.apply(null,arguments).exponent(.5)}function tw(t){return Math.sign(t)*t*t}function ew(){var t,e=vx(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(tw(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,lx)).map(tw)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ew(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Ub.apply(i,arguments),Rx(i)}function nw(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function rw(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function iw(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function ow(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?iw:function(t=o_){if(t===o_)return iw;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ow(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}const o=t[e];let a=n,s=r;for(aw(t,n,e),i(t[r],o)>0&&aw(t,n,r);a<s;){for(aw(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?aw(t,n,s):(++s,aw(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function aw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function sw(t,e,n=u_){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function lw(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=sw(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[f_(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(o_),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return lw().domain(e).range(n).unknown(t)},Ub.apply(o,arguments)}function uw(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[f_(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return uw().domain([e,n]).range(o).unknown(t)},Ub.apply(Rx(a),arguments)}function cw(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[f_(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return cw().domain(e).range(n).unknown(t)},Ub.apply(i,arguments)}Tx=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Mx:(e=Px.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Mx:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Px.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=bx(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Ex[y]||(void 0===v&&(v=12),g=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===f?o:/[%p]/.test(y)?l:"",x=Ex[y],w=/[defgprs%]/.test(y);function S(t){var i,o,l,f=b,S=_;if("c"===y)S=x(t)+S,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:u:"-"===h||"("===h?"":h)+f,S=("s"===y?Cx[8+gx/3]:"")+S+(E&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){S=(46===l?a+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var M=f.length+t.length+S.length,T=M<p?new Array(p-M+1).join(e):"";switch(m&&d&&(t=r(T+t,T.length?p-S.length:1/0),T=""),n){case"<":t=f+t+S+T;break;case"=":t=f+T+t+S;break;case"^":t=T.slice(0,M=T.length>>1)+f+t+S+T.slice(M);break;default:t=T+f+t+S}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=bx(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(wx(e)/3))),i=Math.pow(10,-r),o=Cx[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Ax=Tx.format,Ox=Tx.formatPrefix;const hw=1e3,fw=6e4,dw=36e5,pw=864e5,mw=6048e5,vw=31536e6,gw=new Date,yw=new Date;function bw(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>bw((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(gw.setTime(+e),yw.setTime(+r),t(gw),t(yw),Math.floor(n(gw,yw))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const _w=bw((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));_w.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?bw((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):_w:null),_w.range;const xw=bw((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*hw)}),((t,e)=>(e-t)/hw),(t=>t.getUTCSeconds())),ww=(xw.range,bw((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hw)}),((t,e)=>{t.setTime(+t+e*fw)}),((t,e)=>(e-t)/fw),(t=>t.getMinutes()))),Sw=(ww.range,bw((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*fw)}),((t,e)=>(e-t)/fw),(t=>t.getUTCMinutes()))),Ew=(Sw.range,bw((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hw-t.getMinutes()*fw)}),((t,e)=>{t.setTime(+t+e*dw)}),((t,e)=>(e-t)/dw),(t=>t.getHours()))),Mw=(Ew.range,bw((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*dw)}),((t,e)=>(e-t)/dw),(t=>t.getUTCHours()))),Tw=(Mw.range,bw((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fw)/pw),(t=>t.getDate()-1))),Aw=(Tw.range,bw((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/pw),(t=>t.getUTCDate()-1))),Ow=(Aw.range,bw((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/pw),(t=>Math.floor(t/pw))));function Pw(t){return bw((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fw)/mw))}Ow.range;const Cw=Pw(0),kw=Pw(1),Rw=Pw(2),Nw=Pw(3),Lw=Pw(4),Iw=Pw(5),Dw=Pw(6);function jw(t){return bw((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/mw))}Cw.range,kw.range,Rw.range,Nw.range,Lw.range,Iw.range,Dw.range;const zw=jw(0),Uw=jw(1),Bw=jw(2),Fw=jw(3),Hw=jw(4),Ww=jw(5),Vw=jw(6),Gw=(zw.range,Uw.range,Bw.range,Fw.range,Hw.range,Ww.range,Vw.range,bw((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),qw=(Gw.range,bw((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),Xw=(qw.range,bw((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));Xw.every=t=>isFinite(t=Math.floor(t))&&t>0?bw((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Xw.range;const Zw=bw((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function Yw(t,e,n,r,i,o){const a=[[xw,1,hw],[xw,5,5e3],[xw,15,15e3],[xw,30,3e4],[o,1,fw],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,dw],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,pw],[r,2,1728e5],[n,1,mw],[e,1,2592e6],[e,3,7776e6],[t,1,vw]];function s(e,n,r){const i=Math.abs(n-e)/r,o=s_((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(i_(e/vw,n/vw,r));if(0===o)return _w.every(Math.max(i_(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}Zw.every=t=>isFinite(t=Math.floor(t))&&t>0?bw((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,Zw.range;const[$w,Kw]=Yw(Zw,qw,zw,Ow,Mw,Sw),[Jw,Qw]=Yw(Xw,Gw,Cw,Tw,Ew,ww);var tS=new Date,eS=new Date;function nS(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return nS((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return tS.setTime(+e),eS.setTime(+r),t(tS),t(eS),Math.floor(n(tS,eS))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var rS=864e5,iS=6048e5;function oS(t){return nS((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/iS}))}var aS=oS(0),sS=oS(1),lS=oS(2),uS=oS(3),cS=oS(4),hS=oS(5),fS=oS(6),dS=(aS.range,sS.range,lS.range,uS.range,cS.range,hS.range,fS.range,nS((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/rS}),(function(t){return t.getUTCDate()-1})));const pS=dS;function mS(t){return nS((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/iS}))}dS.range;var vS=mS(0),gS=mS(1),yS=mS(2),bS=mS(3),_S=mS(4),xS=mS(5),wS=mS(6),SS=(vS.range,gS.range,yS.range,bS.range,_S.range,xS.range,wS.range,nS((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/rS}),(function(t){return t.getDate()-1})));const ES=SS;SS.range;var MS=nS((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));MS.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nS((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const TS=MS;MS.range;var AS=nS((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));AS.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nS((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const OS=AS;function PS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function CS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kS(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}AS.range;var RS,NS,LS,IS={"-":"",_:" ",0:"0"},DS=/^\s*\d+/,jS=/^%/,zS=/[\\^$*+?|[\]().{}]/g;function US(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function BS(t){return t.replace(zS,"\\$&")}function FS(t){return new RegExp("^(?:"+t.map(BS).join("|")+")","i")}function HS(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function WS(t,e,n){var r=DS.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function VS(t,e,n){var r=DS.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function GS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function qS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function XS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ZS(t,e,n){var r=DS.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function YS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $S(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function KS(t,e,n){var r=DS.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function JS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function QS(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tE(t,e,n){var r=DS.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function eE(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nE(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rE(t,e,n){var r=DS.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iE(t,e,n){var r=DS.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function oE(t,e,n){var r=DS.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function aE(t,e,n){var r=jS.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sE(t,e,n){var r=DS.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lE(t,e,n){var r=DS.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function uE(t,e){return US(t.getDate(),e,2)}function cE(t,e){return US(t.getHours(),e,2)}function hE(t,e){return US(t.getHours()%12||12,e,2)}function fE(t,e){return US(1+ES.count(TS(t),t),e,3)}function dE(t,e){return US(t.getMilliseconds(),e,3)}function pE(t,e){return dE(t,e)+"000"}function mE(t,e){return US(t.getMonth()+1,e,2)}function vE(t,e){return US(t.getMinutes(),e,2)}function gE(t,e){return US(t.getSeconds(),e,2)}function yE(t){var e=t.getDay();return 0===e?7:e}function bE(t,e){return US(vS.count(TS(t)-1,t),e,2)}function _E(t){var e=t.getDay();return e>=4||0===e?_S(t):_S.ceil(t)}function xE(t,e){return t=_E(t),US(_S.count(TS(t),t)+(4===TS(t).getDay()),e,2)}function wE(t){return t.getDay()}function SE(t,e){return US(gS.count(TS(t)-1,t),e,2)}function EE(t,e){return US(t.getFullYear()%100,e,2)}function ME(t,e){return US((t=_E(t)).getFullYear()%100,e,2)}function TE(t,e){return US(t.getFullYear()%1e4,e,4)}function AE(t,e){var n=t.getDay();return US((t=n>=4||0===n?_S(t):_S.ceil(t)).getFullYear()%1e4,e,4)}function OE(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+US(e/60|0,"0",2)+US(e%60,"0",2)}function PE(t,e){return US(t.getUTCDate(),e,2)}function CE(t,e){return US(t.getUTCHours(),e,2)}function kE(t,e){return US(t.getUTCHours()%12||12,e,2)}function RE(t,e){return US(1+pS.count(OS(t),t),e,3)}function NE(t,e){return US(t.getUTCMilliseconds(),e,3)}function LE(t,e){return NE(t,e)+"000"}function IE(t,e){return US(t.getUTCMonth()+1,e,2)}function DE(t,e){return US(t.getUTCMinutes(),e,2)}function jE(t,e){return US(t.getUTCSeconds(),e,2)}function zE(t){var e=t.getUTCDay();return 0===e?7:e}function UE(t,e){return US(aS.count(OS(t)-1,t),e,2)}function BE(t){var e=t.getUTCDay();return e>=4||0===e?cS(t):cS.ceil(t)}function FE(t,e){return t=BE(t),US(cS.count(OS(t),t)+(4===OS(t).getUTCDay()),e,2)}function HE(t){return t.getUTCDay()}function WE(t,e){return US(sS.count(OS(t)-1,t),e,2)}function VE(t,e){return US(t.getUTCFullYear()%100,e,2)}function GE(t,e){return US((t=BE(t)).getUTCFullYear()%100,e,2)}function qE(t,e){return US(t.getUTCFullYear()%1e4,e,4)}function XE(t,e){var n=t.getUTCDay();return US((t=n>=4||0===n?cS(t):cS.ceil(t)).getUTCFullYear()%1e4,e,4)}function ZE(){return"+0000"}function YE(){return"%"}function $E(t){return+t}function KE(t){return Math.floor(+t/1e3)}function JE(t){return new Date(t)}function QE(t){return t instanceof Date?+t:+new Date(+t)}function tM(t,e,n,r,i,o,a,s,l,u){var c=vx(),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),y=u("%b %d"),b=u("%B"),_=u("%Y");function x(t){return(l(t)<t?d:s(t)<t?p:a(t)<t?m:o(t)<t?v:r(t)<t?i(t)<t?g:y:n(t)<t?b:_)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Array.from(t,QE)):f().map(JE)},c.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?x:u(e)},c.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(Ix(n,t)):c},c.copy=function(){return px(c,tM(t,e,n,r,i,o,a,s,l,u))},c}function eM(){return Ub.apply(tM(Jw,Qw,Xw,Gw,Cw,Tw,Ew,ww,xw,NS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nM(){return Ub.apply(tM($w,Kw,Zw,qw,zw,Aw,Mw,Sw,xw,LS).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rM(){var t,e,n,r,i,o=0,a=1,s=cx,l=!1;function u(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),u):[o,a]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.range=c(ax),u.rangeRound=c(sx),u.unknown=function(t){return arguments.length?(i=t,u):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),u}}function iM(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oM(){var t=Rx(rM()(cx));return t.copy=function(){return iM(t,oM())},Bb.apply(t,arguments)}function aM(){var t=Hx(rM()).domain([1,10]);return t.copy=function(){return iM(t,aM()).base(t.base())},Bb.apply(t,arguments)}function sM(){var t=qx(rM());return t.copy=function(){return iM(t,sM()).constant(t.constant())},Bb.apply(t,arguments)}function lM(){var t=Kx(rM());return t.copy=function(){return iM(t,lM()).exponent(t.exponent())},Bb.apply(t,arguments)}function uM(){return lM.apply(null,arguments).exponent(.5)}function cM(){var t=[],e=cx;function n(n){if(null!=n&&!isNaN(n=+n))return e((f_(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(o_),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>function(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return rw(t);if(e>=1)return nw(t);var r,i=(r-1)*e,o=Math.floor(i),a=nw(ow(t,o).subarray(0,o+1));return a+(rw(t.subarray(o+1))-a)*(i-o)}}(t,r/e)))},n.copy=function(){return cM(e).domain(t)},Bb.apply(n,arguments)}function hM(){var t,e,n,r,i,o,a,s=0,l=.5,u=1,c=1,h=cx,f=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=function(t,e){void 0===e&&(e=t,t=ax);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}(t,[n,r,i]),d):[h(0),h(.5),h(1)]}}return d.domain=function(a){return arguments.length?([s,l,u]=a,t=o(s=+s),e=o(l=+l),n=o(u=+u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[s,l,u]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=p(ax),d.rangeRound=p(sx),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(l),n=a(u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function fM(){var t=Rx(hM()(cx));return t.copy=function(){return iM(t,fM())},Bb.apply(t,arguments)}function dM(){var t=Hx(hM()).domain([.1,1,10]);return t.copy=function(){return iM(t,dM()).base(t.base())},Bb.apply(t,arguments)}function pM(){var t=qx(hM());return t.copy=function(){return iM(t,pM()).constant(t.constant())},Bb.apply(t,arguments)}function mM(){var t=Kx(hM());return t.copy=function(){return iM(t,mM()).exponent(t.exponent())},Bb.apply(t,arguments)}function vM(){return mM.apply(null,arguments).exponent(.5)}function gM(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function yM(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function bM(t){return function(){return t}}function _M(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function xM(t,e){return t[e]}function wM(t){const e=[];return e.key=t,e}RS=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=FS(i),c=HS(i),h=FS(o),f=HS(o),d=FS(a),p=HS(a),m=FS(s),v=HS(s),g=FS(l),y=HS(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:uE,e:uE,f:pE,g:ME,G:AE,H:cE,I:hE,j:fE,L:dE,m:mE,M:vE,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:$E,s:KE,S:gE,u:yE,U:bE,V:xE,w:wE,W:SE,x:null,X:null,y:EE,Y:TE,Z:OE,"%":YE},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:PE,e:PE,f:LE,g:GE,G:XE,H:CE,I:kE,j:RE,L:NE,m:IE,M:DE,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:$E,s:KE,S:jE,u:zE,U:UE,V:FE,w:HE,W:WE,x:null,X:null,y:VE,Y:qE,Z:ZE,"%":YE},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:QS,e:QS,f:oE,g:YS,G:ZS,H:eE,I:eE,j:tE,L:iE,m:JS,M:nE,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:KS,Q:sE,s:lE,S:rE,u:VS,U:GS,V:qS,w:WS,W:XS,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:YS,Y:ZS,Z:$S,"%":aE};function w(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=IS[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function S(t,e){return function(n){var r,i,o=kS(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=CS(kS(o.y,0,1))).getUTCDay(),r=i>4||0===i?sS.ceil(r):sS(r),r=pS.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=PS(kS(o.y,0,1))).getDay(),r=i>4||0===i?gS.ceil(r):gS(r),r=ES.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?CS(kS(o.y,0,1)).getUTCDay():PS(kS(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,CS(o)):PS(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in IS?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),NS=RS.format,RS.parse,LS=RS.utcFormat,RS.utcParse,Array.prototype.slice;var SM=i(6162),EM=i.n(SM),MM=i(3632),TM=i.n(MM),AM=i(4654),OM=i.n(AM),PM=i(1700),CM=i.n(PM),kM=i(8446),RM=i.n(kM),NM=i(9887),LM=i.n(NM);function IM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var DM=function(t){return t},jM={"@@functional/placeholder":!0},zM=function(t){return t===jM},UM=function(t){return function e(){return 0===arguments.length||1===arguments.length&&zM(arguments.length<=0?void 0:arguments[0])?e:t.apply(void 0,arguments)}},BM=function t(e,n){return 1===e?n:UM((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(t){return t!==jM})).length;return a>=e?n.apply(void 0,i):t(e-a,UM((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o,a=i.map((function(t){return zM(t)?e.shift():t}));return n.apply(void 0,(o=a,function(t){if(Array.isArray(t))return IM(t)}(o)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return IM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IM(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(e))})))}))},FM=function(t){return BM(t.length,t)},HM=function(t,e){for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},WM=FM((function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map((function(t){return e[t]})).map(t)})),VM=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)return DM;var r=e.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(t,e){return e(t)}),i.apply(void 0,arguments))}},GM=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},qM=function(t){var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((function(t,n){return t===e[n]}))?n:(e=i,n=t.apply(void 0,i))}},XM=FM((function(t,e,n){var r=+t;return r+n*(+e-r)})),ZM=FM((function(t,e,n){var r=e-+t;return(n-t)/(r||1/0)})),YM=FM((function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))}));const $M={rangeStep:function(t,e,n){for(var r=new(LM())(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(t){return 0===t?1:Math.floor(new(LM())(t).abs().log(10).toNumber())+1},interpolateNumber:XM,uninterpolateNumber:ZM,uninterpolateTruncation:YM};function KM(t){return function(t){if(Array.isArray(t))return tT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||QM(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||QM(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QM(t,e){if(t){if("string"==typeof t)return tT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tT(t,e):void 0}}function tT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eT(t){var e=JM(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function nT(t,e,n){if(t.lte(0))return new(LM())(0);var r=$M.getDigitCount(t.toNumber()),i=new(LM())(10).pow(r),o=t.div(i),a=1!==r?.05:.1,s=new(LM())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return e?s:new(LM())(Math.ceil(s))}function rT(t,e,n){var r=1,i=new(LM())(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new(LM())(10).pow($M.getDigitCount(t)-1),i=new(LM())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(LM())(Math.floor(t)))}else 0===t?i=new(LM())(Math.floor((e-1)/2)):n||(i=new(LM())(Math.floor(t)));var a=Math.floor((e-1)/2),s=VM(WM((function(t){return i.add(new(LM())(t-a).mul(r)).toNumber()})),HM);return s(0,e)}function iT(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new(LM())(0),tickMin:new(LM())(0),tickMax:new(LM())(0)};var o,a=nT(new(LM())(e).sub(t).div(n-1),r,i);o=t<=0&&e>=0?new(LM())(0):(o=new(LM())(t).add(e).div(2)).sub(new(LM())(o).mod(a));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new(LM())(e).sub(o).div(a).toNumber()),u=s+l+1;return u>n?iT(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,s=e>0?s:s+(n-u)),{step:a,tickMin:o.sub(new(LM())(s).mul(a)),tickMax:o.add(new(LM())(l).mul(a))})}var oT=qM((function(t){var e=JM(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=JM(eT([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0){var c=u===1/0?[l].concat(KM(HM(0,i-1).map((function(){return 1/0})))):[].concat(KM(HM(0,i-1).map((function(){return-1/0}))),[u]);return n>r?GM(c):c}if(l===u)return rT(l,i,o);var h=iT(l,u,a,o),f=h.step,d=h.tickMin,p=h.tickMax,m=$M.rangeStep(d,p.add(new(LM())(.1).mul(f)),f);return n>r?GM(m):m})),aT=(qM((function(t){var e=JM(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=JM(eT([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,r];if(l===u)return rT(l,i,o);var c=nT(new(LM())(u).sub(l).div(a-1),o,0),h=VM(WM((function(t){return new(LM())(l).add(new(LM())(t).mul(c)).toNumber()})),HM),f=h(0,a).filter((function(t){return t>=l&&t<=u}));return n>r?GM(f):f})),qM((function(t,e){var n=JM(t,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=JM(eT([r,i]),2),s=a[0],l=a[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var u=Math.max(e,2),c=nT(new(LM())(l).sub(s).div(u-1),o,0),h=[].concat(KM($M.rangeStep(new(LM())(s),new(LM())(l).sub(new(LM())(.99).mul(c)),c)),[l]);return r>i?GM(h):h}))),sT=i(3218),lT=i.n(sT),uT=i(8508);function cT(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function hT(t){return hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hT(t)}var fT=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dT=["points","pathLength"],pT={svg:["viewBox","children"],polygon:dT,polyline:dT},mT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vT=function(t,e){if(!t||"function"==typeof t||"boolean"==typeof t)return null;var r=t;if((0,n.isValidElement)(t)&&(r=t.props),!lT()(r))return null;var i={};return Object.keys(r).forEach((function(t){mT.includes(t)&&(i[t]=e||function(e){return r[t](r,e)})})),i},gT=function(t,e,n){if(!lT()(t)||"object"!==hT(t))return null;var r=null;return Object.keys(t).forEach((function(i){var o=t[i];mT.includes(i)&&"function"==typeof o&&(r||(r={}),r[i]=function(t,e,n){return function(r){return t(e,n,r),null}}(o,e,n))})),r},yT=["children"],bT=["children"];function _T(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var xT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},wT=function(t){return"string"==typeof t?t:t?t.displayName||t.name||"Component":""},ST=null,ET=null,MT=function t(e){if(e===ST&&Array.isArray(ET))return ET;var r=[];return n.Children.forEach(e,(function(e){Uy()(e)||((0,uT.isFragment)(e)?r=r.concat(t(e.props.children)):r.push(e))})),ET=r,ST=e,r};function TT(t,e){var n=[],r=[];return r=Array.isArray(e)?e.map((function(t){return wT(t)})):[wT(e)],MT(t).forEach((function(t){var e=Gy()(t,"type.displayName")||Gy()(t,"type.name");-1!==r.indexOf(e)&&n.push(t)})),n}function AT(t,e){var n=TT(t,e);return n&&n[0]}var OT=function(t){if(!t||!t.props)return!1;var e=t.props,n=e.width,r=e.height;return!(!_b(n)||n<=0||!_b(r)||r<=0)},PT=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],CT=function(t,e,r){if(!t||"function"==typeof t||"boolean"==typeof t)return null;var i=t;if((0,n.isValidElement)(t)&&(i=t.props),!lT()(i))return null;var o={};return Object.keys(i).forEach((function(t){var n;(function(t,e,n,r){var i,o=null!==(i=null==pT?void 0:pT[r])&&void 0!==i?i:[];return!Fy()(t)&&(r&&o.includes(e)||fT.includes(e))||n&&mT.includes(e)})(null===(n=i)||void 0===n?void 0:n[t],t,e,r)&&(o[t]=i[t])})),o},kT=function t(e,r){if(e===r)return!0;var i=n.Children.count(e);if(i!==n.Children.count(r))return!1;if(0===i)return!0;if(1===i)return RT(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var o=0;o<i;o++){var a=e[o],s=r[o];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!RT(a,s))return!1}return!0},RT=function(t,e){if(Uy()(t)&&Uy()(e))return!0;if(!Uy()(t)&&!Uy()(e)){var n=t.props||{},r=n.children,i=_T(n,yT),o=e.props||{},a=o.children,s=_T(o,bT);return r&&a?cT(i,s)&&kT(r,a):!r&&!a&&cT(i,s)}return!1},NT=function(t,e){var n=[],r={};return MT(t).forEach((function(t,i){if(function(t){return t&&t.type&&db()(t.type)&&PT.indexOf(t.type)>=0}(t))n.push(t);else if(t){var o=wT(t.type),a=e[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var u=s(t,o,i);n.push(u),r[o]=!0}}})),n},LT=function(t,e){return MT(e).indexOf(t)},IT=["children","className"];function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DT.apply(this,arguments)}var jT=n.forwardRef((function(t,e){var r=t.children,i=t.className,o=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,IT),a=eb("recharts-layer",i);return n.createElement("g",DT({className:a},CT(o,!0),{ref:e}),r)})),zT=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UT.apply(this,arguments)}function BT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FT(t){var e=t.offset,r=t.layout,i=t.width,o=t.dataKey,a=t.data,s=t.dataPointFormatter,l=t.xAxis,u=t.yAxis,c=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,zT),h=CT(c),f=a.map((function(t,a){var c=s(t,o),f=c.x,d=c.y,p=c.value,m=c.errorVal;if(!m)return null;var v,g,y=[];if(Array.isArray(m)){var b=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return BT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BT(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(m,2);v=b[0],g=b[1]}else v=g=m;if("vertical"===r){var _=l.scale,x=d+e,w=x+i,S=x-i,E=_(p-v),M=_(p+g);y.push({x1:M,y1:w,x2:M,y2:S}),y.push({x1:E,y1:x,x2:M,y2:x}),y.push({x1:E,y1:w,x2:E,y2:S})}else if("horizontal"===r){var T=u.scale,A=f+e,O=A-i,P=A+i,C=T(p-v),k=T(p+g);y.push({x1:O,y1:k,x2:P,y2:k}),y.push({x1:A,y1:C,x2:A,y2:k}),y.push({x1:O,y1:C,x2:P,y2:C})}return n.createElement(jT,UT({className:"recharts-errorBar",key:"bar-".concat(a)},h),y.map((function(t,e){return n.createElement("line",UT({},t,{key:"line-".concat(e)}))})))}));return n.createElement(jT,{className:"recharts-errorBars"},f)}FT.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},FT.displayName="ErrorBar";var HT=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},WT=["children","width","height","viewBox","className","style","title","desc"];function VT(){return VT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VT.apply(this,arguments)}function GT(t){var e=t.children,r=t.width,i=t.height,o=t.viewBox,a=t.className,s=t.style,l=t.title,u=t.desc,c=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,WT),h=o||{width:r,height:i,x:0,y:0},f=eb("recharts-surface",a);return n.createElement("svg",VT({},CT(c,!0,"svg"),{className:f,width:r,height:i,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),n.createElement("title",null,l),n.createElement("desc",null,u),e)}Math.abs,Math.atan2;const qT=Math.cos,XT=(Math.max,Math.min,Math.sin),ZT=Math.sqrt,YT=Math.PI,$T=2*YT,KT={draw(t,e){const n=ZT(e/YT);t.moveTo(n,0),t.arc(0,0,n,0,$T)}},JT={draw(t,e){const n=ZT(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},QT=ZT(1/3),tA=2*QT,eA={draw(t,e){const n=ZT(e/tA),r=n*QT;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},nA={draw(t,e){const n=ZT(e),r=-n/2;t.rect(r,r,n,n)}},rA=XT(YT/10)/XT(7*YT/10),iA=XT($T/10)*rA,oA=-qT($T/10)*rA,aA={draw(t,e){const n=ZT(.8908130915292852*e),r=iA*n,i=oA*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=$T*e/5,a=qT(o),s=XT(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}},sA=ZT(3),lA={draw(t,e){const n=-ZT(e/(3*sA));t.moveTo(0,2*n),t.lineTo(-sA*n,-n),t.lineTo(sA*n,-n),t.closePath()}},uA=-.5,cA=ZT(3)/2,hA=1/ZT(12),fA=3*(hA/2+1),dA={draw(t,e){const n=ZT(e/fA),r=n/2,i=n*hA,o=r,a=n*hA+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(uA*r-cA*i,cA*r+uA*i),t.lineTo(uA*o-cA*a,cA*o+uA*a),t.lineTo(uA*s-cA*l,cA*s+uA*l),t.lineTo(uA*r+cA*i,uA*i-cA*r),t.lineTo(uA*o+cA*a,uA*a-cA*o),t.lineTo(uA*s+cA*l,uA*l-cA*s),t.closePath()}},pA=Math.PI,mA=2*pA,vA=1e-6,gA=mA-vA;function yA(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class bA{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?yA:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yA;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,l=r-e,u=o-t,c=a-e,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>vA)if(Math.abs(c*s-l*u)>vA&&i){let f=n-o,d=r-a,p=s*s+l*l,m=f*f+d*d,v=Math.sqrt(p),g=Math.sqrt(h),y=i*Math.tan((pA-Math.acos((p+h-m)/(2*v*g)))/2),b=y/g,_=y/v;Math.abs(b-1)>vA&&this._append`L${t+b*u},${e+b*c}`,this._append`A${i},${i},0,0,${+(c*f>u*d)},${this._x1=t+_*s},${this._y1=e+_*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,u=e+s,c=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>vA||Math.abs(this._y1-u)>vA)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%mA+mA),h>gA?this._append`A${n},${n},0,1,${c},${t-a},${e-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:h>vA&&this._append`A${n},${n},0,${+(h>=pA)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function _A(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new bA(e)}function xA(t){return xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xA(t)}bA.prototype,ZT(3),ZT(3);var wA=["type","size","sizeType"];function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SA.apply(this,arguments)}function EA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function MA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?EA(Object(n),!0).forEach((function(e){TA(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function TA(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==xA(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===xA(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var AA={symbolCircle:KT,symbolCross:JT,symbolDiamond:eA,symbolSquare:nA,symbolStar:aA,symbolTriangle:lA,symbolWye:dA},OA=Math.PI/180,PA=function(t){var e,r,i=t.type,o=void 0===i?"circle":i,a=t.size,s=void 0===a?64:a,l=t.sizeType,u=void 0===l?"area":l,c=MA(MA({},function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,wA)),{},{type:o,size:s,sizeType:u}),h=c.className,f=c.cx,d=c.cy,p=CT(c,!0);return f===+f&&d===+d&&s===+s?n.createElement("path",SA({},p,{className:eb("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(d,")"),d:(e=function(t){var e="symbol".concat(CM()(t));return AA[e]||KT}(o),r=function(t,e){let n=null,r=_A(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:bM(t||KT),e="function"==typeof e?e:bM(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:bM(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:bM(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(e).size(function(t,e,n){if("area"===e)return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return.5*t*t/Math.sqrt(3);case"square":return t*t;case"star":var r=18*OA;return 1.25*t*t*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}}(s,u,o)),r())})):null};function CA(t){return CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CA(t)}function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(this,arguments)}function RA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function NA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jA(r.key),r)}}function LA(t,e){return LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LA(t,e)}function IA(t){return IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IA(t)}function DA(t,e,n){return(e=jA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jA(t){var e=function(t,e){if("object"!==CA(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==CA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===CA(e)?e:String(e)}PA.registerSymbol=function(t,e){AA["symbol".concat(CM()(t))]=e};var zA=32,UA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LA(t,e)}(s,t);var e,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=IA(i);if(o){var n=IA(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===CA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return e=s,r=[{key:"renderIcon",value:function(t){var e=this.props.inactiveColor,r=16,i=zA/6,o=zA/3,a=t.inactive?e:t.color;if("plainline"===t.type)return n.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:r,x2:zA,y2:r,className:"recharts-legend-icon"});if("line"===t.type)return n.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(r,"h").concat(o,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,"\n            H").concat(zA,"M").concat(2*o,",").concat(r,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if("rect"===t.type)return n.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(zA,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(n.isValidElement(t.legendIcon)){var s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RA(Object(n),!0).forEach((function(e){DA(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return delete s.legendIcon,n.cloneElement(t.legendIcon,s)}return n.createElement(PA,{fill:a,cx:r,cy:r,size:zA,sizeType:"diameter",type:t.type})}},{key:"renderItems",value:function(){var t=this,e=this.props,r=e.payload,i=e.iconSize,o=e.layout,a=e.formatter,s=e.inactiveColor,l={x:0,y:0,width:zA,height:zA},u={display:"horizontal"===o?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(e,r){var o,h=e.formatter||a,f=eb((DA(o={"recharts-legend-item":!0},"legend-item-".concat(r),!0),DA(o,"inactive",e.inactive),o));if("none"===e.type)return null;var d=Fy()(e.value)?null:e.value;HT(!Fy()(e.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=e.inactive?s:e.color;return n.createElement("li",kA({className:f,style:u,key:"legend-item-".concat(r)},gT(t.props,e,r)),n.createElement(GT,{width:i,height:i,viewBox:l,style:c},t.renderIcon(e)),n.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},h?h(d,e,r):d))}))}},{key:"render",value:function(){var t=this.props,e=t.payload,r=t.layout,i=t.align;if(!e||!e.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===r?i:"left"};return n.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],r&&NA(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.PureComponent);DA(UA,"displayName","Legend"),DA(UA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var BA=i(5578),FA=i.n(BA);function HA(t,e,n){return!0===e?FA()(t,n):Fy()(e)?FA()(t,e):t}function WA(t){return WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WA(t)}var VA=["ref"];function GA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?GA(Object(n),!0).forEach((function(e){KA(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function XA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JA(r.key),r)}}function ZA(t,e){return ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZA(t,e)}function YA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $A(t){return $A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$A(t)}function KA(t,e,n){return(e=JA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JA(t){var e=function(t,e){if("object"!==WA(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==WA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===WA(e)?e:String(e)}function QA(t){return t.value}var tO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZA(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$A(o);if(a){var n=$A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===WA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YA(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return KA(YA(t=s.call.apply(s,[this].concat(n))),"lastBoundingBox",{width:-1,height:-1}),t}return e=l,r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var t=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.lastBoundingBox.width)>1||Math.abs(e.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=e.width,this.lastBoundingBox.height=e.height,t&&t(e))}else-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,t&&t(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qA({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(t){var e,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,u=r.chartHeight;return t&&(void 0!==t.left&&null!==t.left||void 0!==t.right&&null!==t.right)||(e="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),t&&(void 0!==t.top&&null!==t.top||void 0!==t.bottom&&null!==t.bottom)||(n="middle"===a?{top:((u||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),qA(qA({},e),n)}},{key:"render",value:function(){var t=this,e=this.props,r=e.content,i=e.width,o=e.height,a=e.wrapperStyle,s=e.payloadUniqBy,l=e.payload,u=qA(qA({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(a)),a);return n.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(e){t.wrapperNode=e}},function(t,e){if(n.isValidElement(t))return n.cloneElement(t,e);if("function"==typeof t)return n.createElement(t,e);e.ref;var r=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,VA);return n.createElement(UA,r)}(r,qA(qA({},this.props),{},{payload:HA(l,s,QA)})))}}],i=[{key:"getWithHeight",value:function(t,e){var n=t.props.layout;return"vertical"===n&&_b(t.props.height)?{height:t.props.height}:"horizontal"===n?{width:t.props.width||e}:null}}],r&&XA(e.prototype,r),i&&XA(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.PureComponent);function eO(t){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eO(t)}function nO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nO(Object(n),!0).forEach((function(e){iO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iO(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==eO(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==eO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===eO(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}KA(tO,"displayName","Legend"),KA(tO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var oO=function(t){var e,n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,a=AT(n,tO);return a?(e=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(t,e){var n=e.item,r=e.props,i=r.sectors||r.data||[];return t.concat(i.map((function(t){return{type:a.props.iconType||n.props.legendType,value:t.name,color:t.fill,payload:t}})))}),[]):(r||[]).map((function(t){var e=t.item,n=e.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:pO(e),value:i||r,payload:e.props}})),rO(rO(rO({},a.props),tO.getWithHeight(a,i)),{},{payload:e,item:a})):null};function aO(t){return aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aO(t)}function sO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sO(Object(n),!0).forEach((function(e){uO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function uO(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==aO(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==aO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===aO(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cO(t){return function(t){if(Array.isArray(t))return hO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hO(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fO(t,e,n){return Uy()(t)||Uy()(e)?n:xb(e)?Gy()(t,e,n):Fy()(e)?e(t):n}function dO(t,e,n,r){var i=OM()(t,(function(t){return fO(t,e)}));if("number"===n){var o=i.filter((function(t){return _b(t)||parseFloat(t)}));return o.length?[TM()(o),EM()(o)]:[1/0,-1/0]}return(r?i.filter((function(t){return!Uy()(t)})):i).map((function(t){return xb(t)||t instanceof Date?t:""}))}var pO=function(t){var e,n=t.type.displayName,r=t.props,i=r.stroke,o=r.fill;switch(n){case"Line":e=i;break;case"Area":case"Radar":e=i&&"none"!==i?i:o;break;default:e=o}return e},mO=function(t,e,n,r,i){var o=TT(e.props.children,FT).filter((function(t){return function(t,e,n){return!!Uy()(e)||("horizontal"===t?"yAxis"===e:"vertical"===t||"x"===n?"xAxis"===e:"y"!==n||"yAxis"===e)}(r,i,t.props.direction)}));if(o&&o.length){var a=o.map((function(t){return t.props.dataKey}));return t.reduce((function(t,e){var r=fO(e,n,0),i=Array.isArray(r)?[TM()(r),EM()(r)]:[r,r],o=a.reduce((function(t,n){var r=fO(e,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,t[0]),Math.max(a,t[1])]}),[1/0,-1/0]);return[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}),[1/0,-1/0])}return null},vO=function(t,e,n,r,i){var o=e.map((function(e){var o=e.props.dataKey;return"number"===n&&o&&mO(t,e,o,r)||dO(t,o,n,i)}));if("number"===n)return o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(t,e){for(var n=0,r=e.length;n<r;n++)a[e[n]]||(a[e[n]]=!0,t.push(e[n]));return t}),[])},gO=function(t,e){return"horizontal"===t&&"xAxis"===e||"vertical"===t&&"yAxis"===e||"centric"===t&&"angleAxis"===e||"radial"===t&&"radiusAxis"===e},yO=function(t,e,n,r){if(r)return t.map((function(t){return t.coordinate}));var i,o,a=t.map((function(t){return t.coordinate===e&&(i=!0),t.coordinate===n&&(o=!0),t.coordinate}));return i||a.push(e),o||a.push(n),a},bO=function(t,e,n){if(!t)return null;var r=t.scale,i=t.duplicateDomain,o=t.type,a=t.range,s="scaleBand"===t.realScaleType?r.bandwidth()/2:2,l=(e||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===t.axisType&&(null==a?void 0:a.length)>=2?2*yb(a[0]-a[1])*l:l,e&&(t.ticks||t.niceTicks)?(t.ticks||t.niceTicks).map((function(t){var e=i?i.indexOf(t):t;return{coordinate:r(e)+l,value:t,offset:l}})).filter((function(t){return!mb()(t.coordinate)})):t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map((function(t,e){return{coordinate:r(t)+l,value:t,index:e,offset:l}})):r.ticks&&!n?r.ticks(t.tickCount).map((function(t){return{coordinate:r(t)+l,value:t,offset:l}})):r.domain().map((function(t,e){return{coordinate:r(t)+l,value:i?i[t]:t,index:e,offset:l}}))},_O=new WeakMap,xO=function(t,e){if("function"!=typeof e)return t;_O.has(t)||_O.set(t,new WeakMap);var n=_O.get(t);if(n.has(e))return n.get(e);var r=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)};return n.set(e,r),r},wO=1e-4,SO={sign:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,a=0;a<e;++a){var s=mb()(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=o,t[a][n][1]=o+s,o=t[a][n][1])}},expand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}gM(t,e)}},none:gM,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}gM(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,u=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=(h-(c[a-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,u+=f*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,gM(t,e)}},positive:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var a=mb()(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=i,t[o][n][1]=i+a,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}}},EO=function(t,e,n){var r=e.map((function(t){return t.props.dataKey})),i=SO[n],o=function(){var t=bM([]),e=_M,n=gM,r=xM;function i(i){var o,a,s=Array.from(t.apply(this,arguments),wM),l=s.length,u=-1;for(const t of i)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(t,s[o].key,u,i)]).data=t;for(o=0,a=yM(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:bM(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:bM(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?_M:"function"==typeof t?t:bM(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?gM:t,i):n},i}().keys(r).value((function(t,e){return+fO(t,e,0)})).order(_M).offset(i);return o(t)},MO=function(t){var e=t.axis,n=t.ticks,r=t.offset,i=t.bandSize,o=t.entry,a=t.index;if("category"===e.type)return n[a]?n[a].coordinate+r:null;var s=fO(o,e.dataKey,e.domain[a]);return Uy()(s)?null:e.scale(s)-i/2+r},TO=function(t,e,n){return Object.keys(t).reduce((function(r,i){var o=t[i].stackedData.reduce((function(t,r){var i=r.slice(e,n+1).reduce((function(t,e){return[TM()(e.concat([t[0]]).filter(_b)),EM()(e.concat([t[1]]).filter(_b))]}),[1/0,-1/0]);return[Math.min(t[0],i[0]),Math.max(t[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(t){return t===1/0||t===-1/0?0:t}))},AO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PO=function(t,e,n){if(Fy()(t))return t(e,n);if(!Array.isArray(t))return e;var r=[];if(_b(t[0]))r[0]=n?t[0]:Math.min(t[0],e[0]);else if(AO.test(t[0])){var i=+AO.exec(t[0])[1];r[0]=e[0]-i}else Fy()(t[0])?r[0]=t[0](e[0]):r[0]=e[0];if(_b(t[1]))r[1]=n?t[1]:Math.max(t[1],e[1]);else if(OO.test(t[1])){var o=+OO.exec(t[1])[1];r[1]=e[1]+o}else Fy()(t[1])?r[1]=t[1](e[1]):r[1]=e[1];return r},CO=function(t,e,n){if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Xy()(e,(function(t){return t.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],u=i[a-1];o=Math.min((l.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},kO=function(t,e,n){return t&&t.length?RM()(t,Gy()(n,"type.defaultProps.domain"))?e:t:e},RO=function(t,e){var n=t.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType;return lO(lO({},CT(t)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:pO(t),value:fO(e,r),type:s,payload:e,chartType:l})},NO=i(5697),LO=i.n(NO),IO=Object.getOwnPropertyNames,DO=Object.getOwnPropertySymbols,jO=Object.prototype.hasOwnProperty;function zO(t,e){return function(n,r,i){return t(n,r,i)&&e(n,r,i)}}function UO(t){return function(e,n,r){if(!e||!n||"object"!=typeof e||"object"!=typeof n)return t(e,n,r);var i=r.cache,o=i.get(e),a=i.get(n);if(o&&a)return o===n&&a===e;i.set(e,n),i.set(n,e);var s=t(e,n,r);return i.delete(e),i.delete(n),s}}function BO(t){return IO(t).concat(DO(t))}var FO=Object.hasOwn||function(t,e){return jO.call(t,e)};function HO(t,e){return t||e?t===e:t===e||t!=t&&e!=e}var WO="_owner",VO=Object.getOwnPropertyDescriptor,GO=Object.keys;function qO(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function XO(t,e){return HO(t.getTime(),e.getTime())}function ZO(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.entries(),s=0;(r=a.next())&&!r.done;){for(var l=e.entries(),u=!1,c=0;(i=l.next())&&!i.done;){var h=r.value,f=h[0],d=h[1],p=i.value,m=p[0],v=p[1];u||o[c]||!(u=n.equals(f,m,s,c,t,e,n)&&n.equals(d,v,f,m,t,e,n))||(o[c]=!0),c++}if(!u)return!1;s++}return!0}function YO(t,e,n){var r,i=GO(t),o=i.length;if(GO(e).length!==o)return!1;for(;o-- >0;){if((r=i[o])===WO&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!FO(e,r)||!n.equals(t[r],e[r],r,r,t,e,n))return!1}return!0}function $O(t,e,n){var r,i,o,a=BO(t),s=a.length;if(BO(e).length!==s)return!1;for(;s-- >0;){if((r=a[s])===WO&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!FO(e,r))return!1;if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;if(i=VO(t,r),o=VO(e,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function KO(t,e){return HO(t.valueOf(),e.valueOf())}function JO(t,e){return t.source===e.source&&t.flags===e.flags}function QO(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.values();(r=a.next())&&!r.done;){for(var s=e.values(),l=!1,u=0;(i=s.next())&&!i.done;)l||o[u]||!(l=n.equals(r.value,i.value,r.value,i.value,t,e,n))||(o[u]=!0),u++;if(!l)return!1}return!0}function tP(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var eP=Array.isArray,nP="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,rP=Object.assign,iP=Object.prototype.toString.call.bind(Object.prototype.toString),oP=aP();function aP(t){void 0===t&&(t={});var e,n=t.circular,r=void 0!==n&&n,i=t.createInternalComparator,o=t.createState,a=t.strict,s=void 0!==a&&a,l=function(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?$O:qO,areDatesEqual:XO,areMapsEqual:r?zO(ZO,$O):ZO,areObjectsEqual:r?$O:YO,arePrimitiveWrappersEqual:KO,areRegExpsEqual:JO,areSetsEqual:r?zO(QO,$O):QO,areTypedArraysEqual:r?$O:tP};if(n&&(i=rP({},i,n(i))),e){var o=UO(i.areArraysEqual),a=UO(i.areMapsEqual),s=UO(i.areObjectsEqual),l=UO(i.areSetsEqual);i=rP({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}(t),u=function(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(t,u,c){if(t===u)return!0;if(null==t||null==u||"object"!=typeof t||"object"!=typeof u)return t!=t&&u!=u;var h=t.constructor;if(h!==u.constructor)return!1;if(h===Object)return i(t,u,c);if(eP(t))return e(t,u,c);if(null!=nP&&nP(t))return l(t,u,c);if(h===Date)return n(t,u,c);if(h===RegExp)return a(t,u,c);if(h===Map)return r(t,u,c);if(h===Set)return s(t,u,c);var f=iP(t);return"[object Date]"===f?n(t,u,c):"[object RegExp]"===f?a(t,u,c):"[object Map]"===f?r(t,u,c):"[object Set]"===f?s(t,u,c):"[object Object]"===f?"function"!=typeof t.then&&"function"!=typeof u.then&&i(t,u,c):"[object Arguments]"===f?i(t,u,c):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&o(t,u,c)}}(l);return function(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(t,a){var s=r(),l=s.cache,u=void 0===l?e?new WeakMap:void 0:l,c=s.meta;return n(t,a,{cache:u,equals:i,meta:c,strict:o})};if(e)return function(t,e){return n(t,e,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(t,e){return n(t,e,a)}}({circular:r,comparator:u,createState:o,equals:i?i(u):(e=u,function(t,n,r,i,o,a,s){return e(t,n,s)}),strict:s})}function sP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>e?(t(i),n=-1):function(t){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(t)}(r)}))}function lP(t){return lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lP(t)}function uP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cP(){var t=function(){return null},e=!1,n=function n(r){if(!e){if(Array.isArray(r)){if(!r.length)return;var i=function(t){if(Array.isArray(t))return t}(s=r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return uP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uP(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i.slice(1);return"number"==typeof o?void sP(n.bind(null,a),o):(n(o),void sP(n.bind(null,a)))}"object"===lP(r)&&t(r),"function"==typeof r&&r()}var s};return{stop:function(){e=!0},start:function(t){e=!1,n(t)},subscribe:function(e){return t=e,function(){t=function(){return null}}}}}function hP(t){return hP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hP(t)}function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fP(Object(n),!0).forEach((function(e){pP(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pP(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==hP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==hP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===hP(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}aP({strict:!0}),aP({circular:!0}),aP({circular:!0,strict:!0}),aP({createInternalComparator:function(){return HO}}),aP({strict:!0,createInternalComparator:function(){return HO}}),aP({circular:!0,createInternalComparator:function(){return HO}}),aP({circular:!0,createInternalComparator:function(){return HO},strict:!0});var mP=["Webkit","Moz","O","ms"],vP=["-webkit-","-moz-","-o-","-ms-"],gP=["transform","transformOrigin","transition"],yP=function(t){return t},bP=function(t,e){return Object.keys(e).reduce((function(n,r){return dP(dP({},n),{},pP({},r,t(r,e[r])))}),{})},_P=function(t){return Object.keys(t).reduce((function(t,e){return dP(dP({},t),function(t,e){if(-1===gP.indexOf(t))return pP({},t,Number.isNaN(e)?0:e);var n="transition"===t,r=t.replace(/(\w)/,(function(t){return t.toUpperCase()})),i=e;return mP.reduce((function(t,o,a){return n&&(i=e.replace(/(transform|transform-origin)/gim,"".concat(vP[a],"$1"))),dP(dP({},t),{},pP({},o+r,i))}),{})}(e,t[e]))}),t)},xP=function(t,e,n){return t.map((function(t){return"".concat(function(t){return t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))}(t)," ").concat(e,"ms ").concat(n)})).join(",")};function wP(t,e){if(t){if("string"==typeof t)return SP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SP(t,e):void 0}}function SP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var EP=1e-4,MP=function(t,e){return[0,3*t,3*e-6*t,3*t-3*e+1]},TP=function(t,e){return t.map((function(t,n){return t*Math.pow(e,n)})).reduce((function(t,e){return t+e}))},AP=function(t,e){return function(n){var r=MP(t,e);return TP(r,n)}},OP=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];if(1===e.length)switch(e[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=e[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||wP(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s[1].split(")")[0].split(",").map((function(t){return parseFloat(t)})),4);r=l[0],i=l[1],o=l[2],a=l[3]}}[r,o,i,a].every((function(t){return"number"==typeof t&&t>=0&&t<=1}));var u,c,h=AP(r,o),f=AP(i,a),d=(u=r,c=o,function(t){var e,n=MP(u,c),r=[].concat((e=n.map((function(t,e){return t*e})).slice(1),function(t){if(Array.isArray(t))return SP(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||wP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[0]);return TP(r,t)}),p=function(t){return t>1?1:t<0?0:t},m=function(t){for(var e=t>1?1:t,n=e,r=0;r<8;++r){var i=h(n)-e,o=d(n);if(Math.abs(i-e)<EP||o<EP)return f(n);n=p(n-i/o)}return f(n)};return m.isStepper=!1,m};function PP(t){return PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PP(t)}function CP(t){return function(t){if(Array.isArray(t))return IP(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||LP(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kP(Object(n),!0).forEach((function(e){NP(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function NP(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==PP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==PP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===PP(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LP(t,e){if(t){if("string"==typeof t)return IP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IP(t,e):void 0}}function IP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var DP=function(t,e,n){return t+(e-t)*n},jP=function(t){return t.from!==t.to},zP=function t(e,n,r){var i=bP((function(t,n){if(jP(n)){var r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||LP(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return RP(RP({},n),{},{from:i,velocity:o})}return n}),n);return r<1?bP((function(t,e){return jP(e)?RP(RP({},e),{},{velocity:DP(e.velocity,i[t].velocity,r),from:DP(e.from,i[t].from,r)}):e}),n):t(e,i,r-1)};function UP(t){return UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UP(t)}var BP=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function FP(t){return function(t){if(Array.isArray(t))return HP(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return HP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HP(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function VP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?WP(Object(n),!0).forEach((function(e){GP(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function GP(t,e,n){return(e=XP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XP(r.key),r)}}function XP(t){var e=function(t,e){if("object"!==UP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==UP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===UP(e)?e:String(e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZP(t,e)}function YP(t,e){if(e&&("object"===UP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $P(t)}function $P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KP(t){return KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KP(t)}var JP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}(s,t);var e,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=KP(i);if(o){var n=KP(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return YP(this,t)});function s(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(n=a.call(this,t,e)).props,i=r.isActive,o=r.attributeName,l=r.from,u=r.to,c=r.steps,h=r.children,f=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind($P(n)),n.changeStyle=n.changeStyle.bind($P(n)),!i||f<=0)return n.state={style:{}},"function"==typeof h&&(n.state={style:u}),YP(n);if(c&&c.length)n.state={style:c[0].style};else if(l){if("function"==typeof h)return n.state={style:l},YP(n);n.state={style:o?GP({},o,l):l}}else n.state={style:{}};return n}return e=s,r=[{key:"componentDidMount",value:function(){var t=this.props,e=t.isActive,n=t.canBegin;this.mounted=!0,e&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isActive,r=e.canBegin,i=e.attributeName,o=e.shouldReAnimate,a=e.to,s=e.from,l=this.state.style;if(r)if(n){if(!(oP(t.to,a)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=u||o?s:t.to;if(this.state&&l){var h={style:i?GP({},i,c):c};(i&&[i]!==c||!i&&l!==c)&&this.setState(h)}this.runAnimation(VP(VP({},this.props),{},{from:c,begin:0}))}}else{var f={style:i?GP({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(f)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var t=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}},{key:"handleStyleChange",value:function(t){this.changeStyle(t)}},{key:"changeStyle",value:function(t){this.mounted&&this.setState({style:t})}},{key:"runJSAnimation",value:function(t){var e=this,n=t.from,r=t.to,i=t.duration,o=t.easing,a=t.begin,s=t.onAnimationEnd,l=t.onAnimationStart,u=function(t,e,n,r,i){var o,a,s,l,u=(o=t,a=e,[Object.keys(o),Object.keys(a)].reduce((function(t,e){return t.filter((function(t){return e.includes(t)}))}))),c=u.reduce((function(n,r){return RP(RP({},n),{},NP({},r,[t[r],e[r]]))}),{}),h=u.reduce((function(n,r){return RP(RP({},n),{},NP({},r,{from:t[r],velocity:0,to:e[r]}))}),{}),f=-1,d=function(){return null};return d=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=zP(n,h,o),i(RP(RP(RP({},t),e),bP((function(t,e){return e.from}),h))),s=r,Object.values(h).filter(jP).length&&(f=requestAnimationFrame(d))}:function(o){l||(l=o);var a=(o-l)/r,s=bP((function(t,e){return DP.apply(void 0,CP(e).concat([n(a)]))}),c);if(i(RP(RP(RP({},t),e),s)),a<1)f=requestAnimationFrame(d);else{var u=bP((function(t,e){return DP.apply(void 0,CP(e).concat([n(1)]))}),c);i(RP(RP(RP({},t),e),u))}},function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(f)}}}(n,r,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OP(r);case"spring":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stiff,n=void 0===e?100:e,r=t.damping,i=void 0===r?8:r,o=t.dt,a=void 0===o?17:o,s=function(t,e,r){var o=r+(-(t-e)*n-r*i)*a/1e3,s=r*a/1e3+t;return Math.abs(s-e)<EP&&Math.abs(o)<EP?[e,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return OP(r)}return"function"==typeof r?r:null}(o),i,this.changeStyle);this.manager.start([l,a,function(){e.stopJSAnimation=u()},i,s])}},{key:"runStepAnimation",value:function(t){var e=this,n=t.steps,r=t.begin,i=t.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(FP(n.reduce((function(t,r,i){if(0===i)return t;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,u=r.properties,c=r.onAnimationEnd,h=i>0?n[i-1]:r,f=u||Object.keys(l);if("function"==typeof s||"spring"===s)return[].concat(FP(t),[e.runJSAnimation.bind(e,{from:h.style,to:l,duration:o,easing:s}),o]);var d=xP(f,o,s),p=VP(VP(VP({},h.style),l),{},{transition:d});return[].concat(FP(t),[p,o,c]).filter(yP)}),[a,Math.max(l,r)])),[t.onAnimationEnd]))}},{key:"runAnimation",value:function(t){this.manager||(this.manager=cP());var e=t.begin,n=t.duration,r=t.attributeName,i=t.to,o=t.easing,a=t.onAnimationStart,s=t.onAnimationEnd,l=t.steps,u=t.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!=typeof o&&"function"!=typeof u&&"spring"!==o)if(l.length>1)this.runStepAnimation(t);else{var h=r?GP({},r,i):i,f=xP(Object.keys(h),n,o);c.start([a,e,VP(VP({},h),{},{transition:f}),n,s])}else this.runJSAnimation(t)}},{key:"render",value:function(){var t=this.props,e=t.children,r=(t.begin,t.duration),i=(t.attributeName,t.easing,t.isActive),o=(t.steps,t.from,t.to,t.canBegin,t.onAnimationEnd,t.shouldReAnimate,t.onAnimationReStart,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,BP)),a=n.Children.count(e),s=_P(this.state.style);if("function"==typeof e)return e(s);if(!i||0===a||r<=0)return e;var l=function(t){var e=t.props,r=e.style,i=void 0===r?{}:r,a=e.className;return(0,n.cloneElement)(t,VP(VP({},o),{},{style:VP(VP({},i),s),className:a}))};return 1===a?l(n.Children.only(e)):n.createElement("div",null,n.Children.map(e,(function(t){return l(t)})))}}],r&&qP(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.PureComponent);JP.displayName="Animate",JP.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},JP.propTypes={from:LO().oneOfType([LO().object,LO().string]),to:LO().oneOfType([LO().object,LO().string]),attributeName:LO().string,duration:LO().number,begin:LO().number,easing:LO().oneOfType([LO().string,LO().func]),steps:LO().arrayOf(LO().shape({duration:LO().number.isRequired,style:LO().object.isRequired,easing:LO().oneOfType([LO().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),LO().func]),properties:LO().arrayOf("string"),onAnimationEnd:LO().func})),children:LO().oneOfType([LO().node,LO().func]),isActive:LO().bool,canBegin:LO().bool,onAnimationEnd:LO().func,shouldReAnimate:LO().bool,onAnimationStart:LO().func,onAnimationReStart:LO().func};const QP=JP;var tC=i(4317),eC=["children","appearOptions","enterOptions","leaveOptions"];function nC(t){return nC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nC(t)}function rC(){return rC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rC.apply(this,arguments)}function iC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oC(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?iC(Object(n),!0).forEach((function(e){cC(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function aC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hC(r.key),r)}}function sC(t,e){return sC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sC(t,e)}function lC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uC(t){return uC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uC(t)}function cC(t,e,n){return(e=hC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hC(t){var e=function(t,e){if("object"!==nC(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nC(e)?e:String(e)}void 0===Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)});var fC=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.steps,n=t.duration;return e&&e.length?e.reduce((function(t,e){return t+(Number.isFinite(e.duration)&&e.duration>0?e.duration:0)}),0):Number.isFinite(n)?n:0},dC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sC(t,e)}(s,t);var e,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uC(i);if(o){var n=uC(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lC(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),cC(lC(t=a.call(this)),"handleEnter",(function(e,n){var r=t.props,i=r.appearOptions,o=r.enterOptions;t.handleStyleActive(n?i:o)})),cC(lC(t),"handleExit",(function(){var e=t.props.leaveOptions;t.handleStyleActive(e)})),t.state={isActive:!1},t}return e=s,r=[{key:"handleStyleActive",value:function(t){if(t){var e=t.onAnimationEnd?function(){t.onAnimationEnd()}:null;this.setState(oC(oC({},t),{},{onAnimationEnd:e,isActive:!0}))}}},{key:"parseTimeout",value:function(){var t=this.props,e=t.appearOptions,n=t.enterOptions,r=t.leaveOptions;return fC(e)+fC(n)+fC(r)}},{key:"render",value:function(){var t=this,e=this.props,r=e.children,i=(e.appearOptions,e.enterOptions,e.leaveOptions,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,eC));return n.createElement(tC.Transition,rC({},i,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return n.createElement(QP,t.state,n.Children.only(r))}))}}],r&&aC(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.Component);dC.propTypes={appearOptions:LO().object,enterOptions:LO().object,leaveOptions:LO().object,children:LO().element};const pC=dC;function mC(t){var e=t.component,r=t.children,i=t.appear,o=t.enter,a=t.leave;return n.createElement(tC.TransitionGroup,{component:e},n.Children.map(r,(function(t,e){return n.createElement(pC,{appearOptions:i,enterOptions:o,leaveOptions:a,key:"child-".concat(e)},t)})))}mC.propTypes={appear:LO().object,enter:LO().object,leave:LO().object,children:LO().oneOfType([LO().array,LO().element]),component:LO().any},mC.defaultProps={component:"span"};const vC=QP;var gC=function(t){return null};gC.displayName="Cell";var yC=i(928),bC=i.n(yC);function _C(t){return _C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_C(t)}function xC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wC(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==_C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_C(i)?i:String(i)),r)}var i}var EC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TC=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AC=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OC={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},PC=Object.keys(OC),CC="NaN",kC=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),""===n||TC.test(n)||(this.num=NaN,this.unit=""),PC.includes(n)&&(this.num=function(t,e){return t*OC[e]}(e,n),this.unit="px")}var e,n,r;return e=t,r=[{key:"parse",value:function(e){var n,r=xC(null!==(n=AC.exec(e))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new t(parseFloat(i),null!=o?o:"")}}],(n=[{key:"add",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&SC(e.prototype,n),r&&SC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RC(t){if(t.includes(CC))return CC;for(var e=t;e.includes("*")||e.includes("/");){var n,r=xC(null!==(n=EC.exec(e))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=kC.parse(null!=i?i:""),l=kC.parse(null!=a?a:""),u="*"===o?s.multiply(l):s.divide(l);if(u.isNaN())return CC;e=e.replace(EC,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,h=xC(null!==(c=MC.exec(e))&&void 0!==c?c:[],4),f=h[1],d=h[2],p=h[3],m=kC.parse(null!=f?f:""),v=kC.parse(null!=p?p:""),g="+"===d?m.add(v):m.subtract(v);if(g.isNaN())return CC;e=e.replace(MC,g.toString())}return e}var NC=/\(([^()]*)\)/;function LC(t){var e=function(t){try{return function(t){var e=t.replace(/\s+/g,"");return e=function(t){for(var e=t;e.includes("(");){var n=xC(NC.exec(e),2)[1];e=e.replace(NC,RC(n))}return e}(e),RC(e)}(t)}catch(t){return CC}}(t.slice(5,-1));return e===CC?"":e}var IC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],DC=["dx","dy","angle","className","breakAll"];function jC(){return jC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jC.apply(this,arguments)}function zC(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return BC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BC(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var FC=/[ \f\n\r\t\v\u2028\u2029]+/,HC=function(t){var e=t.children,n=t.breakAll,r=t.style;try{var i=[];return Uy()(e)||(i=n?e.toString().split(""):e.toString().split(FC)),{wordsWithComputedWidth:i.map((function(t){return{word:t,width:Db(t,r).width}})),spaceWidth:n?0:Db(" ",r).width}}catch(t){return null}},WC=function(t){return[{words:Uy()(t)?[]:t.toString().split(FC)}]},VC="#808080",GC=function(t){var e=t.x,r=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.lineHeight,s=void 0===a?"1em":a,l=t.capHeight,u=void 0===l?"0.71em":l,c=t.scaleToFit,h=void 0!==c&&c,f=t.textAnchor,d=void 0===f?"start":f,p=t.verticalAnchor,m=void 0===p?"end":p,v=t.fill,g=void 0===v?VC:v,y=zC(t,IC),b=(0,n.useMemo)((function(){return function(t){var e=t.width,n=t.scaleToFit,r=t.children,i=t.style,o=t.breakAll,a=t.maxLines;if((e||n)&&!Ob.isSsr){var s=HC({breakAll:o,children:r,style:i});return s?function(t,e,n,r,i){var o=t.maxLines,a=t.children,s=t.style,l=t.breakAll,u=_b(o),c=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){var o=e.word,a=e.width,s=t[t.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};t.push(l)}return t}),[])},f=h(e);if(!u)return f;for(var d,p=function(t){var e=c.slice(0,t),n=HC({breakAll:l,style:s,children:e+"…"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(t){return t.reduce((function(t,e){return t.width>e.width?t:e}))}(i).width>Number(r);return[a,i]},m=0,v=c.length-1,g=0;m<=v&&g<=c.length-1;){var y=Math.floor((m+v)/2),b=UC(p(y-1),2),_=b[0],x=b[1],w=UC(p(y),1)[0];if(_||w||(m=y+1),_&&w&&(v=y-1),!_&&w){d=x;break}g++}return d||f}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,e,n):WC(r)}return WC(r)}({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})}),[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),_=y.dx,x=y.dy,w=y.angle,S=y.className,E=y.breakAll,M=zC(y,DC);if(!xb(r)||!xb(o))return null;var T,A=r+(_b(_)?_:0),O=o+(_b(x)?x:0);switch(m){case"start":T=LC("calc(".concat(u,")"));break;case"middle":T=LC("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:T=LC("calc(".concat(b.length-1," * -").concat(s,")"))}var P=[];if(h){var C=b[0].width,k=y.width;P.push("scale(".concat((_b(k)?k/C:1)/C,")"))}return w&&P.push("rotate(".concat(w,", ").concat(A,", ").concat(O,")")),P.length&&(M.transform=P.join(" ")),n.createElement("text",jC({},CT(M,!0),{x:A,y:O,className:eb("recharts-text",S),textAnchor:d,fill:g.includes("url")?VC:g}),b.map((function(t,e){return n.createElement("tspan",{x:A,dy:0===e?T:s,key:e},t.words.join(E?"":" "))})))};function qC(t){return qC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qC(t)}var XC=["offset"];function ZC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?YC(Object(n),!0).forEach((function(e){KC(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function KC(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==qC(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===qC(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JC(){return JC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JC.apply(this,arguments)}var QC=function(t){var e=t.value,n=t.formatter,r=Uy()(t.children)?e:t.children;return Fy()(n)?n(r):r},tk=function(t,e,r){var i,o,a=t.position,s=t.viewBox,l=t.offset,u=t.className,c=s,h=c.cx,f=c.cy,d=c.innerRadius,p=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,y=(d+p)/2,b=function(t,e){return yb(e-t)*Math.min(Math.abs(e-t),360)}(m,v),_=b>=0?1:-1;"insideStart"===a?(i=m+_*l,o=g):"insideEnd"===a?(i=v-_*l,o=!g):"end"===a&&(i=v+_*l,o=g),o=b<=0?o:!o;var x=lb(h,f,y,i),w=lb(h,f,y,i+359*(o?1:-1)),S="M".concat(x.x,",").concat(x.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),E=Uy()(t.id)?Sb("recharts-radial-line-"):t.id;return n.createElement("text",JC({},r,{dominantBaseline:"central",className:eb("recharts-radial-bar-label",u)}),n.createElement("defs",null,n.createElement("path",{id:E,d:S})),n.createElement("textPath",{xlinkHref:"#".concat(E)},e))},ek=function(t){var e=t.viewBox,n=t.offset,r=t.position,i=e,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,u=(i.startAngle+i.endAngle)/2;if("outside"===r){var c=lb(o,a,l+n,u),h=c.x;return{x:h,y:c.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var f=lb(o,a,(s+l)/2,u);return{x:f.x,y:f.y,textAnchor:"middle",verticalAnchor:"middle"}},nk=function(t){var e=t.viewBox,n=t.parentViewBox,r=t.offset,i=t.position,o=e,a=o.x,s=o.y,l=o.width,u=o.height,c=u>=0?1:-1,h=c*r,f=c>0?"end":"start",d=c>0?"start":"end",p=l>=0?1:-1,m=p*r,v=p>0?"end":"start",g=p>0?"start":"end";if("top"===i)return $C($C({},{x:a+l/2,y:s-c*r,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return $C($C({},{x:a+l/2,y:s+u+h,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(n.y+n.height-(s+u),0),width:l}:{});if("left"===i){var y={x:a-m,y:s+u/2,textAnchor:v,verticalAnchor:"middle"};return $C($C({},y),n?{width:Math.max(y.x-n.x,0),height:u}:{})}if("right"===i){var b={x:a+l+m,y:s+u/2,textAnchor:g,verticalAnchor:"middle"};return $C($C({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:u}:{})}var _=n?{width:l,height:u}:{};return"insideLeft"===i?$C({x:a+m,y:s+u/2,textAnchor:g,verticalAnchor:"middle"},_):"insideRight"===i?$C({x:a+l-m,y:s+u/2,textAnchor:v,verticalAnchor:"middle"},_):"insideTop"===i?$C({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:d},_):"insideBottom"===i?$C({x:a+l/2,y:s+u-h,textAnchor:"middle",verticalAnchor:f},_):"insideTopLeft"===i?$C({x:a+m,y:s+h,textAnchor:g,verticalAnchor:d},_):"insideTopRight"===i?$C({x:a+l-m,y:s+h,textAnchor:v,verticalAnchor:d},_):"insideBottomLeft"===i?$C({x:a+m,y:s+u-h,textAnchor:g,verticalAnchor:f},_):"insideBottomRight"===i?$C({x:a+l-m,y:s+u-h,textAnchor:v,verticalAnchor:f},_):lT()(i)&&(_b(i.x)||bb(i.x))&&(_b(i.y)||bb(i.y))?$C({x:a+Eb(i.x,l),y:s+Eb(i.y,u),textAnchor:"end",verticalAnchor:"end"},_):$C({x:a+l/2,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},rk=function(t){return"cx"in t&&_b(t.cx)};function ik(t){var e,r=t.offset,i=$C({offset:void 0===r?5:r},function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,XC)),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,c=i.className,h=void 0===c?"":c,f=i.textBreakAll;if(!o||Uy()(s)&&Uy()(l)&&!(0,n.isValidElement)(u)&&!Fy()(u))return null;if((0,n.isValidElement)(u))return(0,n.cloneElement)(u,i);if(Fy()(u)){if(e=(0,n.createElement)(u,i),(0,n.isValidElement)(e))return e}else e=QC(i);var d=rk(o),p=CT(i,!0);if(d&&("insideStart"===a||"insideEnd"===a||"end"===a))return tk(i,e,p);var m=d?ek(i):nk(i);return n.createElement(GC,JC({className:eb("recharts-label",h)},p,m,{breakAll:f}),e)}ik.displayName="Label";var ok=function(t){var e=t.cx,n=t.cy,r=t.angle,i=t.startAngle,o=t.endAngle,a=t.r,s=t.radius,l=t.innerRadius,u=t.outerRadius,c=t.x,h=t.y,f=t.top,d=t.left,p=t.width,m=t.height,v=t.clockWise,g=t.labelViewBox;if(g)return g;if(_b(p)&&_b(m)){if(_b(c)&&_b(h))return{x:c,y:h,width:p,height:m};if(_b(f)&&_b(d))return{x:f,y:d,width:p,height:m}}return _b(c)&&_b(h)?{x:c,y:h,width:0,height:0}:_b(e)&&_b(n)?{cx:e,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:u||s||a||0,clockWise:v}:t.viewBox?t.viewBox:{}};function ak(t){return ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ak(t)}ik.parseViewBox=ok,ik.renderCallByParent=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&r&&!t.label)return null;var i=t.children,o=ok(t),a=TT(i,ik).map((function(t,r){return(0,n.cloneElement)(t,{viewBox:e||o,key:"label-".concat(r)})}));if(!r)return a;var s,l=function(t,e){return t?!0===t?n.createElement(ik,{key:"label-implicit",viewBox:e}):xb(t)?n.createElement(ik,{key:"label-implicit",viewBox:e,value:t}):(0,n.isValidElement)(t)?t.type===ik?(0,n.cloneElement)(t,{key:"label-implicit",viewBox:e}):n.createElement(ik,{key:"label-implicit",content:t,viewBox:e}):Fy()(t)?n.createElement(ik,{key:"label-implicit",content:t,viewBox:e}):lT()(t)?n.createElement(ik,JC({viewBox:e},t,{key:"label-implicit"})):null:null}(t.label,e||o);return[l].concat(function(t){if(Array.isArray(t))return ZC(t)}(s=a)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return ZC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZC(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};var sk=["valueAccessor"],lk=["data","dataKey","clockWise","id","textBreakAll"];function uk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ck(){return ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ck.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hk(Object(n),!0).forEach((function(e){dk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dk(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ak(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ak(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ak(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pk(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var mk=function(t){return Array.isArray(t.value)?bC()(t.value):t.value};function vk(t){var e=t.valueAccessor,r=void 0===e?mk:e,i=pk(t,sk),o=i.data,a=i.dataKey,s=i.clockWise,l=i.id,u=i.textBreakAll,c=pk(i,lk);return o&&o.length?n.createElement(jT,{className:"recharts-label-list"},o.map((function(t,e){var i=Uy()(a)?r(t,e):fO(t&&t.payload,a),o=Uy()(l)?{}:{id:"".concat(l,"-").concat(e)};return n.createElement(ik,ck({},CT(t,!0),c,o,{parentViewBox:t.parentViewBox,value:i,textBreakAll:u,viewBox:ik.parseViewBox(Uy()(s)?t:fk(fk({},t),{},{clockWise:s})),key:"label-".concat(e),index:e}))}))):null}vk.displayName="LabelList",vk.renderCallByParent=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&r&&!t.label)return null;var i,o=TT(t.children,vk).map((function(t,r){return(0,n.cloneElement)(t,{data:e,key:"labelList-".concat(r)})}));return r?[function(t,e){return t?!0===t?n.createElement(vk,{key:"labelList-implicit",data:e}):n.isValidElement(t)||Fy()(t)?n.createElement(vk,{key:"labelList-implicit",data:e,content:t}):lT()(t)?n.createElement(vk,ck({data:e},t,{key:"labelList-implicit"})):null:null}(t.label,e)].concat(function(t){if(Array.isArray(t))return uk(t)}(i=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return uk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uk(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):o};var gk=i(8630),yk=i.n(gk),bk=i(1584),_k=i.n(bk);function xk(t){return xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xk(t)}function wk(){return wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wk.apply(this,arguments)}function Sk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ek(Object(n),!0).forEach((function(e){Tk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tk(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==xk(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===xk(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ak=function(t,e,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var c=[0,0,0,0],h=0;h<4;h++)c[h]=i[h]>a?a:i[h];o="M".concat(t,",").concat(e+s*c[0]),c[0]>0&&(o+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(t+l*c[0],",").concat(e)),o+="L ".concat(t+n-l*c[1],",").concat(e),c[1]>0&&(o+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,",\n        ").concat(t+n,",").concat(e+s*c[1])),o+="L ".concat(t+n,",").concat(e+r-s*c[2]),c[2]>0&&(o+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,",\n        ").concat(t+n-l*c[2],",").concat(e+r)),o+="L ".concat(t+l*c[3],",").concat(e+r),c[3]>0&&(o+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,",\n        ").concat(t,",").concat(e+r-s*c[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var f=Math.min(a,i);o="M ".concat(t,",").concat(e+s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(t+l*f,",").concat(e,"\n            L ").concat(t+n-l*f,",").concat(e,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(t+n,",").concat(e+s*f,"\n            L ").concat(t+n,",").concat(e+r-s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(t+n-l*f,",").concat(e+r,"\n            L ").concat(t+l*f,",").concat(e+r,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(t,",").concat(e+r-s*f," Z")}else o="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},Ok=function(t,e){if(!t||!e)return!1;var n=t.x,r=t.y,i=e.x,o=e.y,a=e.width,s=e.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),u=Math.max(i,i+a),c=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=u&&r>=c&&r<=h}return!1},Pk={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ck=function(t){var e=Mk(Mk({},Pk),t),r=(0,n.useRef)(),i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Sk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sk(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(-1),2),o=i[0],a=i[1];(0,n.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var t=r.current.getTotalLength();t&&a(t)}catch(t){}}),[]);var s=e.x,l=e.y,u=e.width,c=e.height,h=e.radius,f=e.className,d=e.animationEasing,p=e.animationDuration,m=e.animationBegin,v=e.isAnimationActive,g=e.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||c!==+c||0===u||0===c)return null;var y=eb("recharts-rectangle",f);return g?n.createElement(vC,{canBegin:o>0,from:{width:u,height:c,x:s,y:l},to:{width:u,height:c,x:s,y:l},duration:p,animationEasing:d,isActive:g},(function(t){var i=t.width,a=t.height,s=t.x,l=t.y;return n.createElement(vC,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:v,easing:d},n.createElement("path",wk({},CT(e,!0),{className:y,d:Ak(s,l,i,a,h),ref:r})))})):n.createElement("path",wk({},CT(e,!0),{className:y,d:Ak(s,l,u,c,h)}))};function kk(t){return kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kk(t)}function Rk(){return Rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rk.apply(this,arguments)}function Nk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ik(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lk(Object(n),!0).forEach((function(e){Dk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dk(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==kk(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==kk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===kk(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jk=function(t,e,n,r,i){var o,a=n-r;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-a/2,",").concat(e+i),(o+="L ".concat(t+n-a/2-r,",").concat(e+i))+"L ".concat(t,",").concat(e," Z")},zk={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uk=function(t){var e=Ik(Ik({},zk),t),r=(0,n.useRef)(),i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Nk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nk(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(-1),2),o=i[0],a=i[1];(0,n.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var t=r.current.getTotalLength();t&&a(t)}catch(t){}}),[]);var s=e.x,l=e.y,u=e.upperWidth,c=e.lowerWidth,h=e.height,f=e.className,d=e.animationEasing,p=e.animationDuration,m=e.animationBegin,v=e.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||c!==+c||h!==+h||0===u&&0===c||0===h)return null;var g=eb("recharts-trapezoid",f);return v?n.createElement(vC,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:s,y:l},to:{upperWidth:u,lowerWidth:c,height:h,x:s,y:l},duration:p,animationEasing:d,isActive:v},(function(t){var i=t.upperWidth,a=t.lowerWidth,s=t.height,l=t.x,u=t.y;return n.createElement(vC,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:d},n.createElement("path",Rk({},CT(e,!0),{className:g,d:jk(l,u,i,a,s),ref:r})))})):n.createElement("g",null,n.createElement("path",Rk({},CT(e,!0),{className:g,d:jk(s,l,u,c,h)})))};function Bk(t){return Bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bk(t)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fk.apply(this,arguments)}function Hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hk(Object(n),!0).forEach((function(e){Vk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vk(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Bk(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Bk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Bk(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gk=function(t){var e=t.cx,n=t.cy,r=t.radius,i=t.angle,o=t.sign,a=t.isExternal,s=t.cornerRadius,l=t.cornerIsExternal,u=s*(a?1:-1)+r,c=Math.asin(s/u)/ab,h=l?i:i+o*c,f=l?i-o*c:i;return{center:lb(e,n,u,h),circleTangency:lb(e,n,r,h),lineTangency:lb(e,n,u*Math.cos(c*ab),f),theta:c}},qk=function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.startAngle,a=function(t,e){return yb(e-t)*Math.min(Math.abs(e-t),359.999)}(o,t.endAngle),s=o+a,l=lb(e,n,i,o),u=lb(e,n,i,s),c="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(r>0){var h=lb(e,n,r,o),f=lb(e,n,r,s);c+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else c+="L ".concat(e,",").concat(n," Z");return c},Xk={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Zk=function(t){var e=Wk(Wk({},Xk),t),r=e.cx,i=e.cy,o=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,l=e.forceCornerRadius,u=e.cornerIsExternal,c=e.startAngle,h=e.endAngle,f=e.className;if(a<o||c===h)return null;var d,p=eb("recharts-sector",f),m=a-o,v=Eb(s,m,0,!0);return d=v>0&&Math.abs(c-h)<360?function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,a=t.forceCornerRadius,s=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,c=yb(u-l),h=Gk({cx:e,cy:n,radius:i,angle:l,sign:c,cornerRadius:o,cornerIsExternal:s}),f=h.circleTangency,d=h.lineTangency,p=h.theta,m=Gk({cx:e,cy:n,radius:i,angle:u,sign:-c,cornerRadius:o,cornerIsExternal:s}),v=m.circleTangency,g=m.lineTangency,y=m.theta,b=s?Math.abs(l-u):Math.abs(l-u)-p-y;if(b<0)return a?"M ".concat(d.x,",").concat(d.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):qk({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var _="M ".concat(d.x,",").concat(d.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(v.x,",").concat(v.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n  ");if(r>0){var x=Gk({cx:e,cy:n,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),w=x.circleTangency,S=x.lineTangency,E=x.theta,M=Gk({cx:e,cy:n,radius:r,angle:u,sign:-c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),T=M.circleTangency,A=M.lineTangency,O=M.theta,P=s?Math.abs(l-u):Math.abs(l-u)-E-O;if(P<0&&0===o)return"".concat(_,"L").concat(e,",").concat(n,"Z");_+="L".concat(A.x,",").concat(A.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(c>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else _+="L".concat(e,",").concat(n,"Z");return _}({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:h}):qk({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:h}),n.createElement("path",Fk({},CT(e,!0),{className:p,d,role:"img"}))},Yk=["option","shapeType","propTransformer","activeClassName","isActive"];function $k(t){return $k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$k(t)}function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kk(Object(n),!0).forEach((function(e){Qk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qk(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==$k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===$k(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tR(t,e){return Jk(Jk({},e),t)}function eR(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return n.createElement(Ck,r);case"trapezoid":return n.createElement(Uk,r);case"sector":return n.createElement(Zk,r);case"symbols":if(function(t,e){return"symbols"===t}(e))return n.createElement(PA,r);break;default:return null}}function nR(t){var e,r=t.option,i=t.shapeType,o=t.propTransformer,a=void 0===o?tR:o,s=t.activeClassName,l=void 0===s?"recharts-active-shape":s,u=t.isActive,c=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,Yk);if((0,n.isValidElement)(r))e=(0,n.cloneElement)(r,Jk(Jk({},c),function(t){return(0,n.isValidElement)(t)?t.props:t}(r)));else if(Fy()(r))e=r(c);else if(yk()(r)&&!_k()(r)){var h=a(r,c);e=n.createElement(eR,{shapeType:i,elementProps:h})}else{var f=c;e=n.createElement(eR,{shapeType:i,elementProps:f})}return u?n.createElement(jT,{className:l},e):e}function rR(t,e){return"trapezoids"in t.props}function iR(t,e){return"sectors"in t.props}function oR(t,e){return"points"in t.props}function aR(t,e){var n,r,i=t.x===(null==e||null===(n=e.labelViewBox)||void 0===n?void 0:n.x)||t.x===e.x,o=t.y===(null==e||null===(r=e.labelViewBox)||void 0===r?void 0:r.y)||t.y===e.y;return i&&o}function sR(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function lR(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function uR(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=function(t,e){var n;return rR(t)?n="trapezoids":iR(t)?n="sectors":oR(t)&&(n="points"),n}(n),o=function(t,e){var n,r;return rR(t)?null===(n=e.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:iR(t)?null===(r=e.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:oR(t)?e.payload:{}}(n,e),a=r.filter((function(t,r){var a=RM()(o,t),s=n.props[i].filter((function(t){var r=function(t,e){var n;return rR(t)?n=aR:iR(t)?n=sR:oR(t)&&(n=lR),n}(n);return r(t,e)})),l=n.props[i].indexOf(s[s.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}function cR(t){return cR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cR(t)}var hR=["x","y"];function fR(){return fR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fR.apply(this,arguments)}function dR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dR(Object(n),!0).forEach((function(e){mR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mR(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==cR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==cR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===cR(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vR(t,e){var n=t.x,r=t.y,i=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,hR),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return pR(pR(pR(pR(pR({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:f,name:e.name,radius:e.radius})}function gR(t){return n.createElement(nR,fR({shapeType:"rectangle",propTransformer:vR,activeClassName:"recharts-active-bar"},t))}var yR=["value","background"];function bR(t){return bR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bR(t)}function _R(){return _R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_R.apply(this,arguments)}function xR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xR(Object(n),!0).forEach((function(e){AR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function SR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OR(r.key),r)}}function ER(t,e){return ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ER(t,e)}function MR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TR(t){return TR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TR(t)}function AR(t,e,n){return(e=OR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OR(t){var e=function(t,e){if("object"!==bR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bR(e)?e:String(e)}var PR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ER(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=TR(o);if(a){var n=TR(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return MR(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return AR(MR(t=s.call.apply(s,[this].concat(n))),"state",{isAnimationFinished:!1}),AR(MR(t),"id",Sb("recharts-bar-")),AR(MR(t),"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),AR(MR(t),"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}return e=l,r=[{key:"renderRectanglesStatically",value:function(t){var e=this,r=this.props,i=r.shape,o=r.dataKey,a=r.activeIndex,s=r.activeBar,l=CT(this.props);return t&&t.map((function(t,r){var u=r===a,c=u?s:i,h=wR(wR(wR({},l),t),{},{isActive:u,option:c,index:r,dataKey:o,onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd});return n.createElement(jT,_R({className:"recharts-bar-rectangle"},gT(e.props,t,r),{key:"rectangle-".concat(r)}),n.createElement(gR,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var t=this,e=this.props,r=e.data,i=e.layout,o=e.isAnimationActive,a=e.animationBegin,s=e.animationDuration,l=e.animationEasing,u=e.animationId,c=this.state.prevData;return n.createElement(vC,{begin:a,duration:s,isActive:o,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(e){var o=e.t,a=r.map((function(t,e){var n=c&&c[e];if(n){var r=Tb(n.x,t.x),a=Tb(n.y,t.y),s=Tb(n.width,t.width),l=Tb(n.height,t.height);return wR(wR({},t),{},{x:r(o),y:a(o),width:s(o),height:l(o)})}if("horizontal"===i){var u=Tb(0,t.height)(o);return wR(wR({},t),{},{y:t.y+t.height-u,height:u})}var h=Tb(0,t.width)(o);return wR(wR({},t),{},{width:h})}));return n.createElement(jT,null,t.renderRectanglesStatically(a))}))}},{key:"renderRectangles",value:function(){var t=this.props,e=t.data,n=t.isAnimationActive,r=this.state.prevData;return!(n&&e&&e.length)||r&&RM()(r,e)?this.renderRectanglesStatically(e):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var t=this,e=this.props,r=e.data,i=e.dataKey,o=e.activeIndex,a=CT(this.props.background);return r.map((function(e,r){e.value;var s=e.background,l=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,yR);if(!s)return null;var u=wR(wR(wR(wR(wR({},l),{},{fill:"#eee"},s),a),gT(t.props,e,r)),{},{onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd,dataKey:i,index:r,key:"background-bar-".concat(r),className:"recharts-bar-background-rectangle"});return n.createElement(gR,_R({option:t.props.background,isActive:r===o},u))}))}},{key:"renderErrorBar",value:function(t,e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.data,o=r.xAxis,a=r.yAxis,s=r.layout,l=TT(r.children,FT);if(!l)return null;var u="vertical"===s?i[0].height/2:i[0].width/2,c=function(t,e){var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:fO(t,e)}},h={clipPath:t?"url(#clipPath-".concat(e,")"):null};return n.createElement(jT,h,l.map((function(t,e){return n.cloneElement(t,{key:"error-bar-".concat(e),data:i,xAxis:o,yAxis:a,layout:s,offset:u,dataPointFormatter:c})})))}},{key:"render",value:function(){var t=this.props,e=t.hide,r=t.data,i=t.className,o=t.xAxis,a=t.yAxis,s=t.left,l=t.top,u=t.width,c=t.height,h=t.isAnimationActive,f=t.background,d=t.id;if(e||!r||!r.length)return null;var p=this.state.isAnimationFinished,m=eb("recharts-bar",i),v=o&&o.allowDataOverflow,g=a&&a.allowDataOverflow,y=v||g,b=Uy()(d)?this.id:d;return n.createElement(jT,{className:m},v||g?n.createElement("defs",null,n.createElement("clipPath",{id:"clipPath-".concat(b)},n.createElement("rect",{x:v?s:s-u/2,y:g?l:l-c/2,width:v?u:2*u,height:g?c:2*c}))):null,n.createElement(jT,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(b,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,b),(!h||p)&&vk.renderCallByParent(this.props,r))}}],i=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curData:t.data,prevData:e.curData}:t.data!==e.curData?{curData:t.data}:null}}],r&&SR(e.prototype,r),i&&SR(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.PureComponent);function CR(t){return CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CR(t)}function kR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IR(r.key),r)}}function RR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function NR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RR(Object(n),!0).forEach((function(e){LR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function LR(t,e,n){return(e=IR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IR(t){var e=function(t,e){if("object"!==CR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==CR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===CR(e)?e:String(e)}AR(PR,"displayName","Bar"),AR(PR,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!Ob.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),AR(PR,"getComposedData",(function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,h=t.displayedData,f=t.offset,d=function(t,e){if(!t)return null;for(var n=0,r=t.length;n<r;n++)if(t[n].item===e)return t[n].position;return null}(r,n);if(!d)return null;var p=e.layout,m=n.props,v=m.dataKey,g=m.children,y=m.minPointSize,b="horizontal"===p?a:o,_=u?b.scale.domain():null,x=function(t){var e=t.numericAxis,n=e.scale.domain();if("number"===e.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:b}),w=TT(g,gC),S=h.map((function(t,e){var r,h,f,m,g,b;if(u?r=function(t,e){if(!e||2!==e.length||!_b(e[0])||!_b(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!_b(t[0])||t[0]<n)&&(i[0]=n),(!_b(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(u[c+e],_):(r=fO(t,v),Array.isArray(r)||(r=[x,r])),"horizontal"===p){var S,E=[a.scale(r[0]),a.scale(r[1])],M=E[0],T=E[1];h=MO({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:t,index:e}),f=null!==(S=null!=T?T:M)&&void 0!==S?S:void 0,m=d.size;var A=M-T;if(g=Number.isNaN(A)?0:A,b={x:h,y:a.y,width:m,height:a.height},Math.abs(y)>0&&Math.abs(g)<Math.abs(y)){var O=yb(g||y)*(Math.abs(y)-Math.abs(g));f-=O,g+=O}}else{var P=[o.scale(r[0]),o.scale(r[1])],C=P[0],k=P[1];h=C,f=MO({axis:a,ticks:l,bandSize:i,offset:d.offset,entry:t,index:e}),m=k-C,g=d.size,b={x:o.x,y:f,width:o.width,height:g},Math.abs(y)>0&&Math.abs(m)<Math.abs(y)&&(m+=yb(m||y)*(Math.abs(y)-Math.abs(m)))}return wR(wR(wR({},t),{},{x:h,y:f,width:m,height:g,value:u?r:r[1],payload:t,background:b},w&&w[e]&&w[e].props),{},{tooltipPayload:[RO(n,t)],tooltipPosition:{x:h+m/2,y:f+g/2}})}));return wR({data:S,layout:p},f)}));var DR=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},jR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scale=e}var e,n,r;return e=t,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bandAware,r=e.position;if(void 0!==t){if(r)switch(r){case"start":default:return this.scale(t);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}},{key:"isInRange",value:function(t){var e=this.range(),n=e[0],r=e[e.length-1];return n<=r?t>=n&&t<=r:t>=r&&t<=n}}],r=[{key:"create",value:function(e){return new t(e)}}],n&&kR(e.prototype,n),r&&kR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();LR(jR,"EPS",1e-4);var zR=function(t){var e=Object.keys(t).reduce((function(e,n){return NR(NR({},e),{},LR({},n,jR.create(t[n])))}),{});return NR(NR({},e),{},{apply:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return zb()(t,(function(t,n){return e[n].apply(t,{bandAware:r,position:i})}))},isInRange:function(t){return Qy()(t,(function(t,n){return e[n].isInRange(t)}))}})};function UR(t,e,n){if(e<1)return[];if(1===e&&void 0===n)return t;for(var r=[],i=0;i<t.length;i+=e){if(void 0!==n&&!0!==n(t[i]))return;r.push(t[i])}return r}function BR(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function FR(t){return FR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FR(t)}function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function WR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?HR(Object(n),!0).forEach((function(e){VR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VR(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==FR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==FR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===FR(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GR(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(_b(l)||Ob.isSsr)return function(t,e){return UR(t,e+1)}(i,"number"==typeof l&&_b(l)?l:0);var f=[],d="top"===s||"bottom"===s?"width":"height",p=c&&"width"===d?Db(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(t,r){var i=Fy()(u)?u(t.value,r):t.value;return"width"===d?function(t,e,n){return function(t){var e=t.width,n=t.height,r=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)%180+180)%180*Math.PI/180,i=Math.atan(n/e),o=r>i&&r<Math.PI-i?n/Math.sin(r):e/Math.cos(r);return Math.abs(o)}({width:t.width+e.width,height:t.height+e.height},n)}(Db(i,{fontSize:e,letterSpacing:n}),p,h):Db(i,{fontSize:e,letterSpacing:n})[d]},v=i.length>=2?yb(i[1].coordinate-i[0].coordinate):1,g=function(t,e,n){var r="width"===n,i=t.x,o=t.y,a=t.width,s=t.height;return 1===e?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,v,d);return"equidistantPreserveStart"===l?function(t,e,n,r,i){for(var o,a=(r||[]).slice(),s=e.start,l=e.end,u=0,c=1,h=s,f=function(){var e=null==r?void 0:r[u];if(void 0===e)return{v:UR(r,c)};var o,a=u,f=function(){return void 0===o&&(o=n(e,a)),o},d=e.coordinate,p=0===u||BR(t,d,f,h,l);p||(u=0,h=s,c+=1),p&&(h=d+t*(f()/2+i),u+=c)};c<=a.length;)if(o=f())return o.v;return[]}(v,g,m,i,a):(f="preserveStart"===l||"preserveStartEnd"===l?function(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,u=e.end;if(o){var c=r[s-1],h=n(c,s-1),f=t*(c.coordinate+t*h/2-u);a[s-1]=c=WR(WR({},c),{},{tickCoord:f>0?c.coordinate-f*t:c.coordinate}),BR(t,c.tickCoord,(function(){return h}),l,u)&&(u=c.tickCoord-t*(h/2+i),a[s-1]=WR(WR({},c),{},{isShow:!0}))}for(var d=o?s-1:s,p=function(e){var r,o=a[e],s=function(){return void 0===r&&(r=n(o,e)),r};if(0===e){var c=t*(o.coordinate-t*s()/2-l);a[e]=o=WR(WR({},o),{},{tickCoord:c<0?o.coordinate-c*t:o.coordinate})}else a[e]=o=WR(WR({},o),{},{tickCoord:o.coordinate});BR(t,o.tickCoord,s,l,u)&&(l=o.tickCoord+t*(s()/2+i),a[e]=WR(WR({},o),{},{isShow:!0}))},m=0;m<d;m++)p(m);return a}(v,g,m,i,a,"preserveStartEnd"===l):function(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,u=function(e){var r,u=o[e],c=function(){return void 0===r&&(r=n(u,e)),r};if(e===a-1){var h=t*(u.coordinate+t*c()/2-l);o[e]=u=WR(WR({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate})}else o[e]=u=WR(WR({},u),{},{tickCoord:u.coordinate});BR(t,u.tickCoord,c,s,l)&&(l=u.tickCoord-t*(c()/2+i),o[e]=WR(WR({},u),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}(v,g,m,i,a),f.filter((function(t){return t.isShow})))}function qR(t){return qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qR(t)}function XR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function YR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZR(Object(n),!0).forEach((function(e){$R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $R(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==qR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===qR(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KR(t){return Array.isArray(t)&&xb(t[0])&&xb(t[1])?t.join(" ~ "):t}var JR=function(t){var e=t.separator,r=void 0===e?" : ":e,i=t.contentStyle,o=void 0===i?{}:i,a=t.itemStyle,s=void 0===a?{}:a,l=t.labelStyle,u=void 0===l?{}:l,c=t.payload,h=t.formatter,f=t.itemSorter,d=t.wrapperClassName,p=t.labelClassName,m=t.label,v=t.labelFormatter,g=YR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),y=YR({margin:0},u),b=!Uy()(m),_=b?m:"",x=eb("recharts-default-tooltip",d),w=eb("recharts-tooltip-label",p);return b&&v&&null!=c&&(_=v(m,c)),n.createElement("div",{className:x,style:g},n.createElement("p",{className:w,style:y},n.isValidElement(_)?_:"".concat(_)),function(){if(c&&c.length){var t=(f?Xy()(c,f):c).map((function(t,e){if("none"===t.type)return null;var i=YR({display:"block",paddingTop:4,paddingBottom:4,color:t.color||"#000"},s),o=t.formatter||h||KR,a=t.value,l=t.name,u=a,f=l;if(o&&null!=u&&null!=f){var d=o(a,l,t,e,c);if(Array.isArray(d)){var p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return XR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XR(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d,2);u=p[0],f=p[1]}else u=d}return n.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(e),style:i},xb(f)?n.createElement("span",{className:"recharts-tooltip-item-name"},f):null,xb(f)?n.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,n.createElement("span",{className:"recharts-tooltip-item-value"},u),n.createElement("span",{className:"recharts-tooltip-item-unit"},t.unit||""))}));return n.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},t)}return null}())};function QR(t){return QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QR(t)}function tN(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==QR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==QR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===QR(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eN="recharts-tooltip-wrapper",nN={visibility:"hidden"};function rN(t){var e,n=t.coordinate,r=t.translateX,i=t.translateY;return eb(eN,(tN(e={},"".concat(eN,"-right"),_b(r)&&n&&_b(n.x)&&r>=n.x),tN(e,"".concat(eN,"-left"),_b(r)&&n&&_b(n.x)&&r<n.x),tN(e,"".concat(eN,"-bottom"),_b(i)&&n&&_b(n.y)&&i>=n.y),tN(e,"".concat(eN,"-top"),_b(i)&&n&&_b(n.y)&&i<n.y),e))}function iN(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(o&&_b(o[r]))return o[r];var c=n[r]-s-i,h=n[r]+i;return e[r]?a[r]?c:h:a[r]?c<l[r]?Math.max(h,l[r]):Math.max(c,l[r]):h+s>l[r]+u?Math.max(c,l[r]):Math.max(h,l[r])}function oN(t){return oN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oN(t)}function aN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sN(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aN(Object(n),!0).forEach((function(e){fN(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dN(r.key),r)}}function uN(t,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uN(t,e)}function cN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hN(t){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hN(t)}function fN(t,e,n){return(e=dN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dN(t){var e=function(t,e){if("object"!==oN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==oN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===oN(e)?e:String(e)}var pN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}(s,t);var e,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hN(i);if(o){var n=hN(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===oN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cN(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return fN(cN(t=a.call.apply(a,[this].concat(n))),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fN(cN(t),"lastBoundingBox",{width:-1,height:-1}),fN(cN(t),"handleKeyDown",(function(e){var n,r,i,o;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=t.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),t}return e=s,r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height)}else-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var t,e;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(t=this.props.coordinate)||void 0===t?void 0:t.x)===this.state.dismissedAtCoordinate.x&&(null===(e=this.props.coordinate)||void 0===e?void 0:e.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var t=this,e=this.props,r=e.active,i=e.allowEscapeViewBox,o=e.animationDuration,a=e.animationEasing,s=e.children,l=e.coordinate,u=e.hasPayload,c=e.isAnimationActive,h=e.offset,f=e.position,d=e.reverseDirection,p=e.useTranslate3d,m=e.viewBox,v=e.wrapperStyle,g=function(t){var e,n,r=t.allowEscapeViewBox,i=t.coordinate,o=t.offsetTopLeft,a=t.position,s=t.reverseDirection,l=t.tooltipBox,u=t.useTranslate3d,c=t.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(t){var e=t.translateX,n=t.translateY;return _P({transform:t.useTranslate3d?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")})}({translateX:e=iN({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),translateY:n=iN({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),useTranslate3d:u}):nN,cssClasses:rN({translateX:e,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:h,position:f,reverseDirection:d,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:p,viewBox:m}),y=g.cssClasses,b=g.cssProperties,_=sN(sN(sN({},c&&r&&_P({transition:"transform ".concat(o,"ms ").concat(a)})),b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&u?"visible":"hidden",position:"absolute",top:0,left:0},v);return n.createElement("div",{tabIndex:-1,role:"dialog",className:y,style:_,ref:function(e){t.wrapperNode=e}},s)}}],r&&lN(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.PureComponent);function mN(t){return mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mN(t)}function vN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gN(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vN(Object(n),!0).forEach((function(e){xN(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vN(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wN(r.key),r)}}function bN(t,e){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bN(t,e)}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_N(t)}function xN(t,e,n){return(e=wN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wN(t){var e=function(t,e){if("object"!==mN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==mN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===mN(e)?e:String(e)}function SN(t){return t.dataKey}var EN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bN(t,e)}(s,t);var e,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_N(i);if(o){var n=_N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return e=s,(r=[{key:"render",value:function(){var t=this.props,e=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,a=t.content,s=t.coordinate,l=t.filterNull,u=t.isAnimationActive,c=t.offset,h=t.payload,f=t.payloadUniqBy,d=t.position,p=t.reverseDirection,m=t.useTranslate3d,v=t.viewBox,g=t.wrapperStyle,y=null!=h?h:[];l&&y.length&&(y=HA(h.filter((function(t){return null!=t.value})),f,SN));var b=y.length>0;return n.createElement(pN,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:u,active:e,coordinate:s,hasPayload:b,offset:c,position:d,reverseDirection:p,useTranslate3d:m,viewBox:v,wrapperStyle:g},function(t,e){return n.isValidElement(t)?n.cloneElement(t,e):"function"==typeof t?n.createElement(t,e):n.createElement(JR,e)}(a,gN(gN({},this.props),{},{payload:y})))}}])&&yN(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(n.PureComponent);function MN(){}function TN(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function AN(t){this._context=t}function ON(t){this._context=t}function PN(t){this._context=t}xN(EN,"displayName","Tooltip"),xN(EN,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ob.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}}),AN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:TN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:TN(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ON.prototype={areaStart:MN,areaEnd:MN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:TN(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},PN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:TN(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class CN{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function kN(t){this._context=t}function RN(t){this._context=t}function NN(t){return new RN(t)}function LN(t){return t<0?-1:1}function IN(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(LN(o)+LN(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function DN(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function jN(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function zN(t){this._context=t}function UN(t){this._context=new BN(t)}function BN(t){this._context=t}function FN(t){this._context=t}function HN(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function WN(t,e){this._context=t,this._t=e}function VN(t){return t[0]}function GN(t){return t[1]}function qN(t,e){var n=bM(!0),r=null,i=NN,o=null,a=_A(s);function s(s){var l,u,c,h=(s=yM(s)).length,f=!1;for(null==r&&(o=i(c=a())),l=0;l<=h;++l)!(l<h&&n(u=s[l],l,s))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,l,s),+e(u,l,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?VN:bM(t),e="function"==typeof e?e:void 0===e?GN:bM(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:bM(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:bM(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:bM(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function XN(t,e,n){var r=null,i=bM(!0),o=null,a=NN,s=null,l=_A(u);function u(u){var c,h,f,d,p,m=(u=yM(u)).length,v=!1,g=new Array(m),y=new Array(m);for(null==o&&(s=a(p=l())),c=0;c<=m;++c){if(!(c<m&&i(d=u[c],c,u))===v)if(v=!v)h=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=h;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}v&&(g[c]=+t(d,c,u),y[c]=+e(d,c,u),s.point(r?+r(d,c,u):g[c],n?+n(d,c,u):y[c]))}if(p)return s=null,p+""||null}function c(){return qN().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?VN:bM(+t),e="function"==typeof e?e:bM(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?GN:bM(+n),u.x=function(e){return arguments.length?(t="function"==typeof e?e:bM(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:bM(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:bM(+t),u):r},u.y=function(t){return arguments.length?(e="function"==typeof t?t:bM(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:bM(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:bM(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:bM(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u}function ZN(t){return ZN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZN(t)}function YN(){return YN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YN.apply(this,arguments)}function $N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function KN(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$N(Object(n),!0).forEach((function(e){JN(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function JN(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ZN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ZN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ZN(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}kN.prototype={areaStart:MN,areaEnd:MN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},RN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jN(this,this._t0,DN(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jN(this,DN(this,n=IN(this,t,e)),n);break;default:jN(this,this._t0,n=IN(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(UN.prototype=Object.create(zN.prototype)).point=function(t,e){zN.prototype.point.call(this,e,t)},BN.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},FN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=HN(t),i=HN(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},WN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var QN={curveBasisClosed:function(t){return new ON(t)},curveBasisOpen:function(t){return new PN(t)},curveBasis:function(t){return new AN(t)},curveBumpX:function(t){return new CN(t,!0)},curveBumpY:function(t){return new CN(t,!1)},curveLinearClosed:function(t){return new kN(t)},curveLinear:NN,curveMonotoneX:function(t){return new zN(t)},curveMonotoneY:function(t){return new UN(t)},curveNatural:function(t){return new FN(t)},curveStep:function(t){return new WN(t,.5)},curveStepAfter:function(t){return new WN(t,1)},curveStepBefore:function(t){return new WN(t,0)}},tL=function(t){return t.x===+t.x&&t.y===+t.y},eL=function(t){return t.x},nL=function(t){return t.y},rL=function(t){var e=t.className,r=t.points,i=t.path,o=t.pathRef;if(!(r&&r.length||i))return null;var a=r&&r.length?function(t){var e,n=t.type,r=void 0===n?"linear":n,i=t.points,o=void 0===i?[]:i,a=t.baseLine,s=t.layout,l=t.connectNulls,u=void 0!==l&&l,c=function(t,e){if(Fy()(t))return t;var n="curve".concat(CM()(t));return"curveMonotone"!==n&&"curveBump"!==n||!e?QN[n]||NN:QN["".concat(n).concat("vertical"===e?"Y":"X")]}(r,s),h=u?o.filter((function(t){return tL(t)})):o;if(Array.isArray(a)){var f=u?a.filter((function(t){return tL(t)})):a,d=h.map((function(t,e){return KN(KN({},t),{},{base:f[e]})}));return(e="vertical"===s?XN().y(nL).x1(eL).x0((function(t){return t.base.x})):XN().x(eL).y1(nL).y0((function(t){return t.base.y}))).defined(tL).curve(c),e(d)}return(e="vertical"===s&&_b(a)?XN().y(nL).x1(eL).x0(a):_b(a)?XN().x(eL).y1(nL).y0(a):qN().x(eL).y(nL)).defined(tL).curve(c),e(h)}(t):i;return n.createElement("path",YN({},CT(t),vT(t),{className:eb("recharts-curve",e),d:a,ref:o}))};function iL(t){return iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iL(t)}var oL=["x","y","top","left","width","height","className"];function aL(){return aL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aL.apply(this,arguments)}function sL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lL(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==iL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==iL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===iL(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uL=function(t,e,n,r,i,o){return"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n)},cL=function(t){var e=t.x,r=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.top,s=void 0===a?0:a,l=t.left,u=void 0===l?0:l,c=t.width,h=void 0===c?0:c,f=t.height,d=void 0===f?0:f,p=t.className,m=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sL(Object(n),!0).forEach((function(e){lL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({x:r,y:o,top:s,left:u,width:h,height:d},function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,oL));return _b(r)&&_b(o)&&_b(h)&&_b(d)&&_b(s)&&_b(u)?n.createElement("path",aL({},CT(m,!0),{className:eb("recharts-cross",p),d:uL(r,o,h,d,s,u)})):null};function hL(){return hL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hL.apply(this,arguments)}var fL=function(t){var e=t.cx,r=t.cy,i=t.r,o=t.className,a=eb("recharts-dot",o);return e===+e&&r===+r&&i===+i?n.createElement("circle",hL({},CT(t),vT(t),{className:a,cx:e,cy:r,r:i})):null},dL=["viewBox"],pL=["viewBox"],mL=["ticks"];function vL(t){return vL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vL(t)}function gL(){return gL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gL.apply(this,arguments)}function yL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yL(Object(n),!0).forEach((function(e){EL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _L(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ML(r.key),r)}}function wL(t,e){return wL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wL(t,e)}function SL(t){return SL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SL(t)}function EL(t,e,n){return(e=ML(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ML(t){var e=function(t,e){if("object"!==vL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==vL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===vL(e)?e:String(e)}var TL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wL(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=SL(o);if(a){var n=SL(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===vL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,t)).state={fontSize:"",letterSpacing:""},e}return e=l,r=[{key:"shouldComponentUpdate",value:function(t,e){var n=t.viewBox,r=_L(t,dL),i=this.props,o=i.viewBox,a=_L(i,pL);return!cT(n,o)||!cT(r,a)||!cT(e,this.state)}},{key:"componentDidMount",value:function(){var t=this.layerReference;if(t){var e=t.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];e&&this.setState({fontSize:window.getComputedStyle(e).fontSize,letterSpacing:window.getComputedStyle(e).letterSpacing})}}},{key:"getTickLineCoord",value:function(t){var e,n,r,i,o,a,s=this.props,l=s.x,u=s.y,c=s.width,h=s.height,f=s.orientation,d=s.tickSize,p=s.mirror,m=s.tickMargin,v=p?-1:1,g=t.tickSize||d,y=_b(t.tickCoord)?t.tickCoord:t.coordinate;switch(f){case"top":e=n=t.coordinate,a=(r=(i=u+ +!p*h)-v*g)-v*m,o=y;break;case"left":r=i=t.coordinate,o=(e=(n=l+ +!p*c)-v*g)-v*m,a=y;break;case"right":r=i=t.coordinate,o=(e=(n=l+ +p*c)+v*g)+v*m,a=y;break;default:e=n=t.coordinate,a=(r=(i=u+ +p*h)+v*g)+v*m,o=y}return{line:{x1:e,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var t,e=this.props,n=e.orientation,r=e.mirror;switch(n){case"left":t=r?"start":"end";break;case"right":t=r?"end":"start";break;default:t="middle"}return t}},{key:"getTickVerticalAnchor",value:function(){var t=this.props,e=t.orientation,n=t.mirror,r="end";switch(e){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var t=this.props,e=t.x,r=t.y,i=t.width,o=t.height,a=t.orientation,s=t.mirror,l=t.axisLine,u=bL(bL(bL({},CT(this.props)),CT(l)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!s||"bottom"===a&&s);u=bL(bL({},u),{},{x1:e,y1:r+c*o,x2:e+i,y2:r+c*o})}else{var h=+("left"===a&&!s||"right"===a&&s);u=bL(bL({},u),{},{x1:e+h*i,y1:r,x2:e+h*i,y2:r+o})}return n.createElement("line",gL({},u,{className:eb("recharts-cartesian-axis-line",Gy()(l,"className"))}))}},{key:"renderTicks",value:function(t,e,r){var i=this,o=this.props,a=o.tickLine,s=o.stroke,u=o.tick,c=o.tickFormatter,h=o.unit,f=GR(bL(bL({},this.props),{},{ticks:t}),e,r),d=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=CT(this.props),v=CT(u),g=bL(bL({},m),{},{fill:"none"},CT(a)),y=f.map((function(t,e){var r=i.getTickLineCoord(t),o=r.line,y=r.tick,b=bL(bL(bL(bL({textAnchor:d,verticalAnchor:p},m),{},{stroke:"none",fill:s},v),y),{},{index:e,payload:t,visibleTicksCount:f.length,tickFormatter:c});return n.createElement(jT,gL({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e)},gT(i.props,t,e)),a&&n.createElement("line",gL({},g,o,{className:eb("recharts-cartesian-axis-tick-line",Gy()(a,"className"))})),u&&l.renderTickItem(u,b,"".concat(Fy()(c)?c(t.value,e):t.value).concat(h||"")))}));return n.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var t=this,e=this.props,r=e.axisLine,i=e.width,o=e.height,a=e.ticksGenerator,s=e.className;if(e.hide)return null;var l=this.props,u=l.ticks,c=_L(l,mL),h=u;return Fy()(a)&&(h=u&&u.length>0?a(this.props):a(c)),i<=0||o<=0||!h||!h.length?null:n.createElement(jT,{className:eb("recharts-cartesian-axis",s),ref:function(e){t.layerReference=e}},r&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),ik.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(t,e,r){return n.isValidElement(t)?n.cloneElement(t,e):Fy()(t)?t(e):n.createElement(GC,gL({},e,{className:"recharts-cartesian-axis-tick-value"}),r)}}],r&&xL(e.prototype,r),i&&xL(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.Component);function AL(t){return AL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AL(t)}function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function PL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OL(Object(n),!0).forEach((function(e){CL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function CL(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==AL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==AL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===AL(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}EL(TL,"displayName","CartesianAxis"),EL(TL,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kL=["Webkit","Moz","O","ms"];function RL(t){return RL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RL(t)}function NL(){return NL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NL.apply(this,arguments)}function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function IL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?LL(Object(n),!0).forEach((function(e){BL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function DL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FL(r.key),r)}}function jL(t,e){return jL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jL(t,e)}function zL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UL(t){return UL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UL(t)}function BL(t,e,n){return(e=FL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FL(t){var e=function(t,e){if("object"!==RL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==RL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===RL(e)?e:String(e)}var HL=function(t){return t.changedTouches&&!!t.changedTouches.length},WL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jL(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=UL(o);if(a){var n=UL(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===RL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zL(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),BL(zL(e=s.call(this,t)),"handleDrag",(function(t){e.leaveTimer&&(clearTimeout(e.leaveTimer),e.leaveTimer=null),e.state.isTravellerMoving?e.handleTravellerMove(t):e.state.isSlideMoving&&e.handleSlideDrag(t)})),BL(zL(e),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&e.handleDrag(t.changedTouches[0])})),BL(zL(e),"handleDragEnd",(function(){e.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var t=e.props,n=t.endIndex,r=t.onDragEnd,i=t.startIndex;null==r||r({endIndex:n,startIndex:i})})),e.detachDragEndListener()})),BL(zL(e),"handleLeaveWrapper",(function(){(e.state.isTravellerMoving||e.state.isSlideMoving)&&(e.leaveTimer=window.setTimeout(e.handleDragEnd,e.props.leaveTimeOut))})),BL(zL(e),"handleEnterSlideOrTraveller",(function(){e.setState({isTextActive:!0})})),BL(zL(e),"handleLeaveSlideOrTraveller",(function(){e.setState({isTextActive:!1})})),BL(zL(e),"handleSlideDragStart",(function(t){var n=HL(t)?t.changedTouches[0]:t;e.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),e.attachDragEndListener()})),e.travellerDragStartHandlers={startX:e.handleTravellerDragStart.bind(zL(e),"startX"),endX:e.handleTravellerDragStart.bind(zL(e),"endX")},e.state={},e}return e=l,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var e=t.startX,n=t.endX,r=this.state.scaleValues,i=this.props,o=i.gap,a=i.data.length-1,s=Math.min(e,n),u=Math.max(e,n),c=l.getIndexInRange(r,s),h=l.getIndexInRange(r,u);return{startIndex:c-c%o,endIndex:h===a?a:h-h%o}}},{key:"getTextOfTick",value:function(t){var e=this.props,n=e.data,r=e.tickFormatter,i=e.dataKey,o=fO(n[t],i,t);return Fy()(r)?r(o,t):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(t){var e=this.state,n=e.slideMoveStartX,r=e.startX,i=e.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,u=o.startIndex,c=o.endIndex,h=o.onChange,f=t.pageX-n;f>0?f=Math.min(f,a+s-l-i,a+s-l-r):f<0&&(f=Math.max(f,a-r,a-i));var d=this.getIndex({startX:r+f,endX:i+f});d.startIndex===u&&d.endIndex===c||!h||h(d),this.setState({startX:r+f,endX:i+f,slideMoveStartX:t.pageX})}},{key:"handleTravellerDragStart",value:function(t,e){var n=HL(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:t,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(t){var e,n=this.state,r=n.brushMoveStartX,i=n.movingTravellerId,o=n.endX,a=n.startX,s=this.state[i],l=this.props,u=l.x,c=l.width,h=l.travellerWidth,f=l.onChange,d=l.gap,p=l.data,m={startX:this.state.startX,endX:this.state.endX},v=t.pageX-r;v>0?v=Math.min(v,u+c-h-s):v<0&&(v=Math.max(v,u-s)),m[i]=s+v;var g=this.getIndex(m),y=g.startIndex,b=g.endIndex;this.setState((BL(e={},i,s+v),BL(e,"brushMoveStartX",t.pageX),e),(function(){var t;f&&(t=p.length-1,("startX"===i&&(o>a?y%d==0:b%d==0)||o<a&&b===t||"endX"===i&&(o>a?b%d==0:y%d==0)||o>a&&b===t)&&f(g))}))}},{key:"handleTravellerMoveKeyboard",value:function(t,e){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[e],l=i.indexOf(s);if(-1!==l){var u=l+t;if(!(-1===u||u>=i.length)){var c=i[u];"startX"===e&&c>=a||"endX"===e&&c<=o||this.setState(BL({},e,c),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var t=this.props,e=t.x,r=t.y,i=t.width,o=t.height,a=t.fill,s=t.stroke;return n.createElement("rect",{stroke:s,fill:a,x:e,y:r,width:i,height:o})}},{key:"renderPanorama",value:function(){var t=this.props,e=t.x,r=t.y,i=t.width,o=t.height,a=t.data,s=t.children,l=t.padding,u=n.Children.only(s);return u?n.cloneElement(u,{x:e,y:r,width:i,height:o,margin:l,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(t,e){var r=this,i=this.props,o=i.y,a=i.travellerWidth,s=i.height,u=i.traveller,c=Math.max(t,this.props.x),h=IL(IL({},CT(this.props)),{},{x:c,y:o,width:a,height:s});return n.createElement(jT,{tabIndex:0,role:"slider",className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[e],onTouchStart:this.travellerDragStartHandlers[e],onKeyDown:function(t){["ArrowLeft","ArrowRight"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),r.handleTravellerMoveKeyboard("ArrowRight"===t.key?1:-1,e))},onFocus:function(){r.setState({isTravellerFocused:!0})},onBlur:function(){r.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},l.renderTraveller(u,h))}},{key:"renderSlide",value:function(t,e){var r=this.props,i=r.y,o=r.height,a=r.stroke,s=r.travellerWidth,l=Math.min(t,e)+s,u=Math.max(Math.abs(e-t)-s,0);return n.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:l,y:i,width:u,height:o})}},{key:"renderText",value:function(){var t=this.props,e=t.startIndex,r=t.endIndex,i=t.y,o=t.height,a=t.travellerWidth,s=t.stroke,l=this.state,u=l.startX,c=l.endX,h={pointerEvents:"none",fill:s};return n.createElement(jT,{className:"recharts-brush-texts"},n.createElement(GC,NL({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,c)-5,y:i+o/2},h),this.getTextOfTick(e)),n.createElement(GC,NL({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,c)+a+5,y:i+o/2},h),this.getTextOfTick(r)))}},{key:"render",value:function(){var t=this.props,e=t.data,r=t.className,i=t.children,o=t.x,a=t.y,s=t.width,l=t.height,u=t.alwaysShowText,c=this.state,h=c.startX,f=c.endX,d=c.isTextActive,p=c.isSlideMoving,m=c.isTravellerMoving,v=c.isTravellerFocused;if(!e||!e.length||!_b(o)||!_b(a)||!_b(s)||!_b(l)||s<=0||l<=0)return null;var g=eb("recharts-brush",r),y=1===n.Children.count(i),b=function(t,e){var n=t.replace(/(\w)/,(function(t){return t.toUpperCase()})),r=kL.reduce((function(t,r){return PL(PL({},t),{},CL({},r+n,e))}),{});return r[t]=e,r}("userSelect","none");return n.createElement(jT,{className:g,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(h,f),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(f,"endX"),(d||p||m||v||u)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(t){var e=t.x,r=t.y,i=t.width,o=t.height,a=t.stroke,s=Math.floor(r+o/2)-1;return n.createElement(n.Fragment,null,n.createElement("rect",{x:e,y:r,width:i,height:o,fill:a,stroke:"none"}),n.createElement("line",{x1:e+1,y1:s,x2:e+i-1,y2:s,fill:"none",stroke:"#fff"}),n.createElement("line",{x1:e+1,y1:s+2,x2:e+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,e){return n.isValidElement(t)?n.cloneElement(t,e):Fy()(t)?t(e):l.renderDefaultTraveller(e)}},{key:"getDerivedStateFromProps",value:function(t,e){var n=t.data,r=t.width,i=t.x,o=t.travellerWidth,a=t.updateId,s=t.startIndex,l=t.endIndex;if(n!==e.prevData||a!==e.prevUpdateId)return IL({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(t){var e=t.data,n=t.startIndex,r=t.endIndex,i=t.x,o=t.width,a=t.travellerWidth;if(!e||!e.length)return{};var s=e.length,l=Kb().domain(Wy()(0,s)).range([i,i+o-a]),u=l.domain().map((function(t){return l(t)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:u}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(e.scale&&(r!==e.prevWidth||i!==e.prevX||o!==e.prevTravellerWidth)){e.scale.range([i,i+r-o]);var u=e.scale.domain().map((function(t){return e.scale(t)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:e.scale(t.startIndex),endX:e.scale(t.endIndex),scaleValues:u}}return null}},{key:"getIndexInRange",value:function(t,e){for(var n=0,r=t.length-1;r-n>1;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i}return e>=t[r]?r:n}}],r&&DL(e.prototype,r),i&&DL(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.PureComponent);BL(WL,"displayName","Brush"),BL(WL,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var VL=function(t,e){var n=t.alwaysShow,r=t.ifOverflow;return n&&(r="extendDomain"),r===e};function GL(t){return GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GL(t)}function qL(){return qL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qL.apply(this,arguments)}function XL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ZL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?XL(Object(n),!0).forEach((function(e){YL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function YL(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==GL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==GL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===GL(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $L(t){var e=t.x,r=t.y,i=t.r,o=t.alwaysShow,a=t.clipPathId,s=xb(e),l=xb(r);if(HT(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!l)return null;var u=function(t){var e=t.x,n=t.y,r=t.xAxis,i=t.yAxis,o=zR({x:r.scale,y:i.scale}),a=o.apply({x:e,y:n},{bandAware:!0});return VL(t,"discard")&&!o.isInRange(a)?null:a}(t);if(!u)return null;var c=u.x,h=u.y,f=t.shape,d=t.className,p=ZL(ZL({clipPath:VL(t,"hidden")?"url(#".concat(a,")"):void 0},CT(t,!0)),{},{cx:c,cy:h});return n.createElement(jT,{className:eb("recharts-reference-dot",d)},$L.renderDot(f,p),ik.renderCallByParent(t,{x:c-i,y:h-i,width:2*i,height:2*i}))}$L.displayName="ReferenceDot",$L.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},$L.renderDot=function(t,e){return n.isValidElement(t)?n.cloneElement(t,e):Fy()(t)?t(e):n.createElement(fL,qL({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"}))};var KL=i(9704),JL=i.n(KL);function QL(t){return QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QL(t)}function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function eI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tI(Object(n),!0).forEach((function(e){nI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nI(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==QL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==QL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===QL(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(this,arguments)}function oI(t){var e=t.x,r=t.y,i=t.segment,o=t.xAxis,a=t.yAxis,s=t.shape,l=t.className,u=t.alwaysShow,c=t.clipPathId;HT(void 0===u,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(t,e,n,r,i){var o=i.viewBox,a=o.x,s=o.y,l=o.width,u=o.height,c=i.position;if(n){var h=i.y,f=i.yAxis.orientation,d=t.y.apply(h,{position:c});if(VL(i,"discard")&&!t.y.isInRange(d))return null;var p=[{x:a+l,y:d},{x:a,y:d}];return"left"===f?p.reverse():p}if(e){var m=i.x,v=i.xAxis.orientation,g=t.x.apply(m,{position:c});if(VL(i,"discard")&&!t.x.isInRange(g))return null;var y=[{x:g,y:s+u},{x:g,y:s}];return"top"===v?y.reverse():y}if(r){var b=i.segment.map((function(e){return t.apply(e,{position:c})}));return VL(i,"discard")&&JL()(b,(function(e){return!t.isInRange(e)}))?null:b}return null}(zR({x:o.scale,y:a.scale}),xb(e),xb(r),i&&2===i.length,t);if(!h)return null;var f,d=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return rI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rI(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h,2),p=d[0],m=p.x,v=p.y,g=d[1],y=g.x,b=g.y,_=eI(eI({clipPath:VL(t,"hidden")?"url(#".concat(c,")"):void 0},CT(t,!0)),{},{x1:m,y1:v,x2:y,y2:b});return n.createElement(jT,{className:eb("recharts-reference-line",l)},function(t,e){return n.isValidElement(t)?n.cloneElement(t,e):Fy()(t)?t(e):n.createElement("line",iI({},e,{className:"recharts-reference-line-line"}))}(s,_),ik.renderCallByParent(t,DR({x:(f={x1:m,y1:v,x2:y,y2:b}).x1,y:f.y1},{x:f.x2,y:f.y2})))}function aI(t){return aI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aI(t)}function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sI.apply(this,arguments)}function lI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function uI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lI(Object(n),!0).forEach((function(e){cI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cI(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==aI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==aI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===aI(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hI(t){var e=t.x1,r=t.x2,i=t.y1,o=t.y2,a=t.className,s=t.alwaysShow,l=t.clipPathId;HT(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=xb(e),c=xb(r),h=xb(i),f=xb(o),d=t.shape;if(!(u||c||h||f||d))return null;var p=function(t,e,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,u=i.xAxis,c=i.yAxis;if(!u||!c)return null;var h=zR({x:u.scale,y:c.scale}),f={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},d={x:e?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!VL(i,"discard")||h.isInRange(f)&&h.isInRange(d)?DR(f,d):null}(u,c,h,f,t);if(!p&&!d)return null;var m=VL(t,"hidden")?"url(#".concat(l,")"):void 0;return n.createElement(jT,{className:eb("recharts-reference-area",a)},hI.renderRect(d,uI(uI({clipPath:m},CT(t,!0)),p)),ik.renderCallByParent(t,p))}function fI(t){return function(t){if(Array.isArray(t))return dI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return dI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dI(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}oI.displayName="ReferenceLine",oI.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"},hI.displayName="ReferenceArea",hI.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},hI.renderRect=function(t,e){return n.isValidElement(t)?n.cloneElement(t,e):Fy()(t)?t(e):n.createElement(Ck,sI({},e,{className:"recharts-reference-area-rect"}))};var pI=function(t,e,n,r,i){var o=TT(t,oI),a=TT(t,$L),s=[].concat(fI(o),fI(a)),l=TT(t,hI),u="".concat(r,"Id"),c=r[0],h=e;if(s.length&&(h=s.reduce((function(t,e){if(e.props[u]===n&&VL(e.props,"extendDomain")&&_b(e.props[c])){var r=e.props[c];return[Math.min(t[0],r),Math.max(t[1],r)]}return t}),h)),l.length){var f="".concat(c,"1"),d="".concat(c,"2");h=l.reduce((function(t,e){if(e.props[u]===n&&VL(e.props,"extendDomain")&&_b(e.props[f])&&_b(e.props[d])){var r=e.props[f],i=e.props[d];return[Math.min(t[0],r,i),Math.max(t[1],r,i)]}return t}),h)}return i&&i.length&&(h=i.reduce((function(t,e){return _b(e)?[Math.min(t[0],e),Math.max(t[1],e)]:t}),h)),h},mI=i(4745),vI=new(i.n(mI)()),gI="recharts.syncMouseEvents";function yI(t){return yI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yI(t)}function bI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xI(r.key),r)}}function _I(t,e,n){return(e=xI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xI(t){var e=function(t,e){if("object"!==yI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==yI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===yI(e)?e:String(e)}var wI=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_I(this,"activeIndex",0),_I(this,"coordinateList",[]),_I(this,"layout","horizontal")}var e,n;return e=t,n=[{key:"setDetails",value:function(t){var e=t.coordinateList,n=void 0===e?[]:e,r=t.container,i=void 0===r?null:r,o=t.layout,a=void 0===o?null:o,s=t.offset,l=void 0===s?null:s,u=t.mouseHandlerCallback,c=void 0===u?null:u;this.coordinateList=null!=n?n:this.coordinateList,this.container=null!=i?i:this.container,this.layout=null!=a?a:this.layout,this.offset=null!=l?l:this.offset,this.mouseHandlerCallback=null!=c?c:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(0!==this.coordinateList.length)switch(t.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"spoofMouse",value:function(){var t,e;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(t=window)||void 0===t?void 0:t.scrollX)||0,l=(null===(e=window)||void 0===e?void 0:e.scrollY)||0,u=r+a+s,c=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:u,pageY:c})}}}],n&&bI(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SI(t,e,n){var r,i,o,a;if("horizontal"===t)o=r=e.x,i=n.top,a=n.top+n.height;else if("vertical"===t)a=i=e.y,r=n.left,o=n.left+n.width;else if(null!=e.cx&&null!=e.cy){if("centric"!==t)return hb(e);var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,h=e.angle,f=lb(s,l,u,h),d=lb(s,l,c,h);r=f.x,i=f.y,o=d.x,a=d.y}return[{x:r,y:i},{x:o,y:a}]}var EI=["item"],MI=["children","className","width","height","style","compact","title","desc"];function TI(t){return TI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TI(t)}function AI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||II(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}function PI(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function CI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BI(r.key),r)}}function kI(t,e){return kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kI(t,e)}function RI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NI(t){return NI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NI(t)}function LI(t){return function(t){if(Array.isArray(t))return DI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||II(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function II(t,e){if(t){if("string"==typeof t)return DI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DI(t,e):void 0}}function DI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jI(Object(n),!0).forEach((function(e){UI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function UI(t,e,n){return(e=BI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BI(t){var e=function(t,e){if("object"!==TI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==TI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===TI(e)?e:String(e)}var FI={xAxis:["bottom","top"],yAxis:["left","right"]},HI={width:"100%",height:"100%"},WI={x:0,y:0},VI=function(t,e){var n=e.graphicalItems,r=e.dataStartIndex,i=e.dataEndIndex,o=(null!=n?n:[]).reduce((function(t,e){var n=e.props.data;return n&&n.length?[].concat(LI(t),LI(n)):t}),[]);return o.length>0?o:t&&t.length&&_b(r)&&_b(i)?t.slice(r,i+1):[]};function GI(t){return"number"===t?[0,"auto"]:void 0}var qI=function(t,e,n,r){var i=t.graphicalItems,o=t.tooltipAxis,a=VI(e,t);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var l;if(s.props.hide)return i;var u,c=null!==(l=s.props.data)&&void 0!==l?l:e;return c&&t.dataStartIndex+t.dataEndIndex!==0&&(c=c.slice(t.dataStartIndex,t.dataEndIndex+1)),(u=o.dataKey&&!o.allowDuplicatedCategory?Ab(void 0===c?a:c,o.dataKey,r):c&&c[n]||a[n])?[].concat(LI(i),[RO(s,u)]):i}),[])},XI=function(t,e,n,r){var i=r||{x:t.chartX,y:t.chartY},o=function(t,e){return"horizontal"===e?t.x:"vertical"===e?t.y:"centric"===e?t.angle:t.radius}(i,n),a=t.orderedTooltipTicks,s=t.tooltipAxis,l=t.tooltipTicks,u=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var u=l>0?r[l-1].coordinate:r[a-1].coordinate,c=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(yb(c-u)!==yb(h-c)){var d=[];if(yb(h-c)===yb(s[1]-s[0])){f=h;var p=c+s[1]-s[0];d[0]=Math.min(p,(p+u)/2),d[1]=Math.max(p,(p+u)/2)}else{f=u;var m=h+s[1]-s[0];d[0]=Math.min(c,(m+c)/2),d[1]=Math.max(c,(m+c)/2)}var v=[Math.min(c,(f+c)/2),Math.max(c,(f+c)/2)];if(t>v[0]&&t<=v[1]||t>=d[0]&&t<=d[1]){o=r[l].index;break}}else{var g=Math.min(u,h),y=Math.max(u,h);if(t>(g+c)/2&&t<=(y+c)/2){o=r[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&t>(n[b].coordinate+n[b-1].coordinate)/2&&t<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&t>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o}(o,a,l,s);if(u>=0&&l){var c=l[u]&&l[u].value,h=qI(t,e,u,c),f=function(t,e,n,r){var i=e.find((function(t){return t&&t.index===n}));if(i){if("horizontal"===t)return{x:i.coordinate,y:r.y};if("vertical"===t)return{x:r.x,y:i.coordinate};if("centric"===t){var o=i.coordinate,a=r.radius;return zI(zI(zI({},r),lb(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return zI(zI(zI({},r),lb(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return WI}(n,a,u,i);return{activeTooltipIndex:u,activeLabel:c,activePayload:h,activeCoordinate:f}}return null},ZI=function(t,e){var n=e.axisType,r=void 0===n?"xAxis":n,i=e.AxisComp,o=e.graphicalItems,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,u=t.children,c="".concat(r,"Id"),h=TT(u,i),f={};return h&&h.length?f=function(t,e){var n=e.axes,r=e.graphicalItems,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,u=t.layout,c=t.children,h=t.stackOffset,f=gO(u,i);return n.reduce((function(e,n){var d,p=n.props,m=p.type,v=p.dataKey,g=p.allowDataOverflow,y=p.allowDuplicatedCategory,b=p.scale,_=p.ticks,x=p.includeHidden,w=n.props[o];if(e[w])return e;var S,E,M,T=VI(t.data,{graphicalItems:r.filter((function(t){return t.props[o]===w})),dataStartIndex:s,dataEndIndex:l}),A=T.length;(function(t,e,n){if("number"===n&&!0===e&&Array.isArray(t)){var r=null==t?void 0:t[0],i=null==t?void 0:t[1];if(r&&i&&_b(r)&&_b(i))return!0}return!1})(n.props.domain,g,m)&&(S=PO(n.props.domain,null,g),!f||"number"!==m&&"auto"===b||(M=dO(T,v,"category")));var O=GI(m);if(!S||0===S.length){var P,C=null!==(P=n.props.domain)&&void 0!==P?P:O;if(v){if(S=dO(T,v,m),"category"===m&&f){var k=function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++){if(n[t[r]])return!0;n[t[r]]=!0}return!1}(S);y&&k?(E=S,S=Wy()(0,A)):y||(S=kO(C,S,n).reduce((function(t,e){return t.indexOf(e)>=0?t:[].concat(LI(t),[e])}),[]))}else if("category"===m)S=y?S.filter((function(t){return""!==t&&!Uy()(t)})):kO(C,S,n).reduce((function(t,e){return t.indexOf(e)>=0||""===e||Uy()(e)?t:[].concat(LI(t),[e])}),[]);else if("number"===m){var R=function(t,e,n,r,i){var o=e.map((function(e){return mO(t,e,n,i,r)})).filter((function(t){return!Uy()(t)}));return o&&o.length?o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]):null}(T,r.filter((function(t){return t.props[o]===w&&(x||!t.props.hide)})),v,i,u);R&&(S=R)}!f||"number"!==m&&"auto"===b||(M=dO(T,v,"category"))}else S=f?Wy()(0,A):a&&a[w]&&a[w].hasStack&&"number"===m?"expand"===h?[0,1]:TO(a[w].stackGroups,s,l):vO(T,r.filter((function(t){return t.props[o]===w&&(x||!t.props.hide)})),m,u,!0);if("number"===m)S=pI(c,S,w,i,_),C&&(S=PO(C,S,g));else if("category"===m&&C){var N=C;S.every((function(t){return N.indexOf(t)>=0}))&&(S=N)}}return zI(zI({},e),{},UI({},w,zI(zI({},n.props),{},{axisType:i,domain:S,categoricalDomain:M,duplicateDomain:E,originalDomain:null!==(d=n.props.domain)&&void 0!==d?d:O,isCategorical:f,layout:u})))}),{})}(t,{axes:h,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(f=function(t,e){var n=e.graphicalItems,r=e.Axis,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,u=t.layout,c=t.children,h=VI(t.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),f=h.length,d=gO(u,i),p=-1;return n.reduce((function(t,e){var m,v=e.props[o],g=GI("number");return t[v]?t:(p++,d?m=Wy()(0,f):a&&a[v]&&a[v].hasStack?(m=TO(a[v].stackGroups,s,l),m=pI(c,m,v,i)):(m=PO(g,vO(h,n.filter((function(t){return t.props[o]===v&&!t.props.hide})),"number",u),r.defaultProps.allowDataOverflow),m=pI(c,m,v,i)),zI(zI({},t),{},UI({},v,zI(zI({axisType:i},r.defaultProps),{},{hide:!0,orientation:Gy()(FI,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:g,isCategorical:d,layout:u}))))}),{})}(t,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),f},YI=function(t){var e,n,r=t.children,i=t.defaultShowTooltip,o=AT(r,WL);return{chartX:0,chartY:0,dataStartIndex:o&&o.props&&o.props.startIndex||0,dataEndIndex:void 0!==(null==o||null===(e=o.props)||void 0===e?void 0:e.endIndex)?null==o||null===(n=o.props)||void 0===n?void 0:n.endIndex:t.data&&t.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:Boolean(i)}},$I=function(t){return"horizontal"===t?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===t?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===t?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},KI=function(){return null};KI.displayName="XAxis",KI.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var JI=function(){return null};JI.displayName="YAxis",JI.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var QI=function(t){var e,r=t.chartName,i=t.GraphicalChild,o=t.defaultTooltipEventType,a=void 0===o?"axis":o,s=t.validateTooltipEventTypes,l=void 0===s?["axis"]:s,u=t.axisComponents,c=t.legendContent,h=t.formatAxisMap,f=t.defaultProps,d=function(t,e){var n=t.props,o=t.dataStartIndex,a=t.dataEndIndex,s=t.updateId;if(!OT({props:n}))return null;var l=n.children,c=n.layout,f=n.stackOffset,d=n.data,p=n.reverseStackOrder,m=$I(c),v=m.numericAxisName,g=m.cateAxisName,y=TT(l,i),b=function(t,e,n,r,i,o){if(!t)return null;var a=(o?e.reverse():e).reduce((function(t,e){var i=e.props,o=i.stackId;if(i.hide)return t;var a=e.props[n],s=t[a]||{hasStack:!1,stackGroups:{}};if(xb(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(e),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[Sb("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[e]};return lO(lO({},t),{},uO({},a,s))}),{});return Object.keys(a).reduce((function(e,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(e,o){var a=s.stackGroups[o];return lO(lO({},e),{},uO({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:EO(t,a.items,i)}))}),{})),lO(lO({},e),{},uO({},o,s))}),{})}(d,y,"".concat(v,"Id"),"".concat(g,"Id"),f,p),_=u.reduce((function(t,e){var r="".concat(e.axisType,"Map");return zI(zI({},t),{},UI({},r,ZI(n,zI(zI({},e),{},{graphicalItems:y,stackGroups:e.axisType===v&&b,dataStartIndex:o,dataEndIndex:a}))))}),{}),x=function(t,e){var n=t.props,r=(t.graphicalItems,t.xAxisMap),i=void 0===r?{}:r,o=t.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,u=n.children,c=n.margin||{},h=AT(u,WL),f=AT(u,tO),d=Object.keys(a).reduce((function(t,e){var n=a[e],r=n.orientation;return n.mirror||n.hide?t:zI(zI({},t),{},UI({},r,t[r]+n.width))}),{left:c.left||0,right:c.right||0}),p=Object.keys(i).reduce((function(t,e){var n=i[e],r=n.orientation;return n.mirror||n.hide?t:zI(zI({},t),{},UI({},r,Gy()(t,"".concat(r))+n.height))}),{top:c.top||0,bottom:c.bottom||0}),m=zI(zI({},p),d),v=m.bottom;h&&(m.bottom+=h.props.height||WL.defaultProps.height),f&&e&&(m=function(t,e,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=oO({children:i,legendWidth:s});if(l){var u=r||{},c=u.width,h=u.height,f=l.align,d=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===d)&&"center"!==f&&_b(t[f]))return lO(lO({},t),{},uO({},f,t[f]+(c||0)));if(("horizontal"===p||"vertical"===p&&"center"===f)&&"middle"!==d&&_b(t[d]))return lO(lO({},t),{},uO({},d,t[d]+(h||0)))}return t}(m,0,n,e));var g=s-m.left-m.right,y=l-m.top-m.bottom;return zI(zI({brushBottom:v},m),{},{width:Math.max(g,0),height:Math.max(y,0)})}(zI(zI({},_),{},{props:n,graphicalItems:y}),null==e?void 0:e.legendBBox);Object.keys(_).forEach((function(t){_[t]=h(n,_[t],x,t.replace("Map",""),r)}));var w,S,E=_["".concat(g,"Map")],M=(w=Mb(E),{tooltipTicks:S=bO(w,!1,!0),orderedTooltipTicks:Xy()(S,(function(t){return t.coordinate})),tooltipAxis:w,tooltipAxisBandSize:CO(w,S)}),T=function(t,e){var n=e.graphicalItems,r=e.stackGroups,i=e.offset,o=e.updateId,a=e.dataStartIndex,s=e.dataEndIndex,l=t.barSize,c=t.layout,h=t.barGap,f=t.barCategoryGap,d=t.maxBarSize,p=$I(c),m=p.numericAxisName,v=p.cateAxisName,g=function(t){return!(!t||!t.length)&&t.some((function(t){var e=wT(t&&t.type);return e&&e.indexOf("Bar")>=0}))}(n),y=g&&function(t){var e=t.barSize,n=t.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var i={},o=Object.keys(r),a=0,s=o.length;a<s;a++)for(var l=r[o[a]].stackGroups,u=Object.keys(l),c=0,h=u.length;c<h;c++){var f=l[u[c]],d=f.items,p=f.cateAxisId,m=d.filter((function(t){return wT(t.type).indexOf("Bar")>=0}));if(m&&m.length){var v=m[0].props.barSize,g=m[0].props[p];i[g]||(i[g]=[]),i[g].push({item:m[0],stackList:m.slice(1),barSize:Uy()(v)?e:v})}}return i}({barSize:l,stackGroups:r}),b=[];return n.forEach((function(n,l){var p=VI(t.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),g=n.props,_=g.dataKey,x=g.maxBarSize,w=n.props["".concat(m,"Id")],S=n.props["".concat(v,"Id")],E=u.reduce((function(t,r){var i,o=e["".concat(r.axisType,"Map")],a=n.props["".concat(r.axisType,"Id")];o&&o[a]||"zAxis"===r.axisType||function(t,e){throw new Error("Invariant failed")}();var s=o[a];return zI(zI({},t),{},(UI(i={},r.axisType,s),UI(i,"".concat(r.axisType,"Ticks"),bO(s)),i))}),{}),M=E[v],T=E["".concat(v,"Ticks")],A=r&&r[w]&&r[w].hasStack&&function(t,e){var n=t.props.stackId;if(xb(n)){var r=e[n];if(r){var i=r.items.indexOf(t);return i>=0?r.stackedData[i]:null}}return null}(n,r[w].stackGroups),O=wT(n.type).indexOf("Bar")>=0,P=CO(M,T),C=[];if(O){var k,R,N=Uy()(x)?d:x,L=null!==(k=null!==(R=CO(M,T,!0))&&void 0!==R?R:N)&&void 0!==k?k:0;C=function(t){var e=t.barGap,n=t.barCategoryGap,r=t.bandSize,i=t.sizeList,o=void 0===i?[]:i,a=t.maxBarSize,s=o.length;if(s<1)return null;var l,u=Eb(e,r,0,!0),c=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=r/s,d=o.reduce((function(t,e){return t+e.barSize||0}),0);(d+=(s-1)*u)>=r&&(d-=(s-1)*u,u=0),d>=r&&f>0&&(h=!0,d=s*(f*=.9));var p={offset:((r-d)/2>>0)-u,size:0};l=o.reduce((function(t,e){var n={item:e.item,position:{offset:p.offset+p.size+u,size:h?f:e.barSize}},r=[].concat(cO(t),[n]);return p=r[r.length-1].position,e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:p})})),r}),c)}else{var m=Eb(n,r,0,!0);r-2*m-(s-1)*u<=0&&(u=0);var v=(r-2*m-(s-1)*u)/s;v>1&&(v>>=0);var g=a===+a?Math.min(v,a):v;l=o.reduce((function(t,e,n){var r=[].concat(cO(t),[{item:e.item,position:{offset:m+(v+u)*n+(v-g)/2,size:g}}]);return e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:r[r.length-1].position})})),r}),c)}return l}({barGap:h,barCategoryGap:f,bandSize:L!==P?L:P,sizeList:y[S],maxBarSize:N}),L!==P&&(C=C.map((function(t){return zI(zI({},t),{},{position:zI(zI({},t.position),{},{offset:t.position.offset-L/2})})})))}var I,D=n&&n.type&&n.type.getComposedData;D&&b.push({props:zI(zI({},D(zI(zI({},E),{},{displayedData:p,props:t,dataKey:_,item:n,bandSize:P,barPosition:C,offset:i,stackedData:A,layout:c,dataStartIndex:a,dataEndIndex:s}))),{},(I={key:n.key||"item-".concat(l)},UI(I,m,E[m]),UI(I,v,E[v]),UI(I,"animationId",o),I)),childIndex:LT(n,t.children),item:n})})),b}(n,zI(zI({},_),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:y,stackGroups:b,offset:x}));return zI(zI({formattedGraphicalItems:T,graphicalItems:y,offset:x,stackGroups:b},M),_)};return e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kI(t,e)}(h,t);var e,i,o,s,u=(o=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=NI(o);if(s){var n=NI(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===TI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return RI(t)}(this,t)});function h(t){var e,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),UI(RI(o=u.call(this,t)),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),UI(RI(o),"accessibilityManager",new wI),UI(RI(o),"handleLegendBBoxUpdate",(function(t){if(t){var e=o.state,n=e.dataStartIndex,r=e.dataEndIndex,i=e.updateId;o.setState(zI({legendBBox:t},d({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},zI(zI({},o.state),{},{legendBBox:t}))))}})),UI(RI(o),"handleReceiveSyncEvent",(function(t,e,n){if(o.props.syncId===t){if(n===o.eventEmitterSymbol&&"function"!=typeof o.props.syncMethod)return;o.applySyncEvent(e)}})),UI(RI(o),"handleBrushChange",(function(t){var e=t.startIndex,n=t.endIndex;if(e!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return zI({dataStartIndex:e,dataEndIndex:n},d({props:o.props,dataStartIndex:e,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:e,dataEndIndex:n})}})),UI(RI(o),"handleMouseEnter",(function(t){var e=o.getMouseInfo(t);if(e){var n=zI(zI({},e),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;Fy()(r)&&r(n,t)}})),UI(RI(o),"triggeredAfterMouseMove",(function(t){var e=o.getMouseInfo(t),n=e?zI(zI({},e),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;Fy()(r)&&r(n,t)})),UI(RI(o),"handleItemMouseEnter",(function(t){o.setState((function(){return{isTooltipActive:!0,activeItem:t,activePayload:t.tooltipPayload,activeCoordinate:t.tooltipPosition||{x:t.cx,y:t.cy}}}))})),UI(RI(o),"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),UI(RI(o),"handleMouseMove",(function(t){t.persist(),o.throttleTriggeredAfterMouseMove(t)})),UI(RI(o),"handleMouseLeave",(function(t){var e={isTooltipActive:!1};o.setState(e),o.triggerSyncEvent(e);var n=o.props.onMouseLeave;Fy()(n)&&n(e,t)})),UI(RI(o),"handleOuterEvent",(function(t){var e,n=function(t){var e=t&&t.type;return e&&xT[e]?xT[e]:null}(t),r=Gy()(o.props,"".concat(n));n&&Fy()(r)&&r(null!==(e=/.*touch.*/i.test(n)?o.getMouseInfo(t.changedTouches[0]):o.getMouseInfo(t))&&void 0!==e?e:{},t)})),UI(RI(o),"handleClick",(function(t){var e=o.getMouseInfo(t);if(e){var n=zI(zI({},e),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;Fy()(r)&&r(n,t)}})),UI(RI(o),"handleMouseDown",(function(t){var e=o.props.onMouseDown;Fy()(e)&&e(o.getMouseInfo(t),t)})),UI(RI(o),"handleMouseUp",(function(t){var e=o.props.onMouseUp;Fy()(e)&&e(o.getMouseInfo(t),t)})),UI(RI(o),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(t.changedTouches[0])})),UI(RI(o),"handleTouchStart",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.handleMouseDown(t.changedTouches[0])})),UI(RI(o),"handleTouchEnd",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&o.handleMouseUp(t.changedTouches[0])})),UI(RI(o),"triggerSyncEvent",(function(t){void 0!==o.props.syncId&&vI.emit(gI,o.props.syncId,t,o.eventEmitterSymbol)})),UI(RI(o),"applySyncEvent",(function(t){var e=o.props,n=e.layout,r=e.syncMethod,i=o.state.updateId,a=t.dataStartIndex,s=t.dataEndIndex;if(void 0!==t.dataStartIndex||void 0!==t.dataEndIndex)o.setState(zI({dataStartIndex:a,dataEndIndex:s},d({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==t.activeTooltipIndex){var l=t.chartX,u=t.chartY,c=t.activeTooltipIndex,h=o.state,f=h.offset,p=h.tooltipTicks;if(!f)return;if("function"==typeof r)c=r(p,t);else if("value"===r){c=-1;for(var m=0;m<p.length;m++)if(p[m].value===t.activeLabel){c=m;break}}var v=zI(zI({},f),{},{x:f.left,y:f.top}),g=Math.min(l,v.x+v.width),y=Math.min(u,v.y+v.height),b=p[c]&&p[c].value,_=qI(o.state,o.props.data,c),x=p[c]?{x:"horizontal"===n?p[c].coordinate:g,y:"horizontal"===n?y:p[c].coordinate}:WI;o.setState(zI(zI({},t),{},{activeLabel:b,activeCoordinate:x,activePayload:_,activeTooltipIndex:c}))}else o.setState(t)})),UI(RI(o),"verticalCoordinatesGenerator",(function(t,e){var n=t.xAxis,r=t.width,i=t.height,o=t.offset;return yO(GR(zI(zI(zI({},TL.defaultProps),n),{},{ticks:bO(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,e)})),UI(RI(o),"horizontalCoordinatesGenerator",(function(t,e){var n=t.yAxis,r=t.width,i=t.height,o=t.offset;return yO(GR(zI(zI(zI({},TL.defaultProps),n),{},{ticks:bO(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,e)})),UI(RI(o),"axesTicksGenerator",(function(t){return bO(t,!0)})),UI(RI(o),"renderCursor",(function(t){var e,i=o.state,a=i.isTooltipActive,s=i.activeCoordinate,l=i.activePayload,u=i.offset,c=i.activeTooltipIndex,h=i.tooltipAxisBandSize,f=o.getTooltipEventType(),d=null!==(e=t.props.active)&&void 0!==e?e:a;if(!t||!t.props.cursor||!d||!s||"ScatterChart"!==r&&"axis"!==f)return null;var p,m=o.props.layout,v=rL;if("ScatterChart"===r)p=s,v=cL;else if("BarChart"===r)p=function(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===t?e.x-i:n.left+.5,y:"horizontal"===t?n.top+.5:e.y-i,width:"horizontal"===t?r:n.width-1,height:"horizontal"===t?n.height-1:r}}(m,s,u,h),v=Ck;else if("radial"===m){var g=hb(s),y=g.cx,b=g.cy,_=g.radius;p={cx:y,cy:b,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:_,outerRadius:_},v=Zk}else p={points:SI(m,s,u)},v=rL;var x=t.key||"_recharts-cursor",w=zI(zI(zI(zI({stroke:"#ccc",pointerEvents:"none"},u),p),CT(t.props.cursor)),{},{payload:l,payloadIndex:c,key:x,className:"recharts-tooltip-cursor"});return(0,n.isValidElement)(t.props.cursor)?(0,n.cloneElement)(t.props.cursor,w):(0,n.createElement)(v,w)})),UI(RI(o),"renderPolarAxis",(function(t,e,r){var i=Gy()(t,"type.axisType"),a=Gy()(o.state,"".concat(i,"Map")),s=a&&a[t.props["".concat(i,"Id")]];return(0,n.cloneElement)(t,zI(zI({},s),{},{className:i,key:t.key||"".concat(e,"-").concat(r),ticks:bO(s,!0)}))})),UI(RI(o),"renderXAxis",(function(t,e,n){var r=o.state.xAxisMap[t.props.xAxisId];return o.renderAxis(r,t,e,n)})),UI(RI(o),"renderYAxis",(function(t,e,n){var r=o.state.yAxisMap[t.props.yAxisId];return o.renderAxis(r,t,e,n)})),UI(RI(o),"renderGrid",(function(t){var e=o.state,r=e.xAxisMap,i=e.yAxisMap,a=e.offset,s=o.props,l=s.width,u=s.height,c=Mb(r),h=Ky()(i,(function(t){return Qy()(t.domain,Number.isFinite)}))||Mb(i),f=t.props||{};return(0,n.cloneElement)(t,{key:t.key||"grid",x:_b(f.x)?f.x:a.left,y:_b(f.y)?f.y:a.top,width:_b(f.width)?f.width:a.width,height:_b(f.height)?f.height:a.height,xAxis:c,yAxis:h,offset:a,chartWidth:l,chartHeight:u,verticalCoordinatesGenerator:f.verticalCoordinatesGenerator||o.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:f.horizontalCoordinatesGenerator||o.horizontalCoordinatesGenerator})})),UI(RI(o),"renderPolarGrid",(function(t){var e=t.props,r=e.radialLines,i=e.polarAngles,a=e.polarRadius,s=o.state,l=s.radiusAxisMap,u=s.angleAxisMap,c=Mb(l),h=Mb(u),f=h.cx,d=h.cy,p=h.innerRadius,m=h.outerRadius;return(0,n.cloneElement)(t,{polarAngles:Array.isArray(i)?i:bO(h,!0).map((function(t){return t.coordinate})),polarRadius:Array.isArray(a)?a:bO(c,!0).map((function(t){return t.coordinate})),cx:f,cy:d,innerRadius:p,outerRadius:m,key:t.key||"polar-grid",radialLines:r})})),UI(RI(o),"renderLegend",(function(){var t=o.state.formattedGraphicalItems,e=o.props,r=e.children,i=e.width,a=e.height,s=o.props.margin||{},l=i-(s.left||0)-(s.right||0),u=oO({children:r,formattedGraphicalItems:t,legendWidth:l,legendContent:c});if(!u)return null;var h=u.item,f=PI(u,EI);return(0,n.cloneElement)(h,zI(zI({},f),{},{chartWidth:i,chartHeight:a,margin:s,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),UI(RI(o),"renderTooltip",(function(){var t,e=AT(o.props.children,EN);if(!e)return null;var r=o.state,i=r.isTooltipActive,a=r.activeCoordinate,s=r.activePayload,l=r.activeLabel,u=r.offset,c=null!==(t=e.props.active)&&void 0!==t?t:i;return(0,n.cloneElement)(e,{viewBox:zI(zI({},u),{},{x:u.left,y:u.top}),active:c,label:l,payload:c?s:[],coordinate:a})})),UI(RI(o),"renderBrush",(function(t){var e=o.props,r=e.margin,i=e.data,a=o.state,s=a.offset,l=a.dataStartIndex,u=a.dataEndIndex,c=a.updateId;return(0,n.cloneElement)(t,{key:t.key||"_recharts-brush",onChange:xO(o.handleBrushChange,t.props.onChange),data:i,x:_b(t.props.x)?t.props.x:s.left,y:_b(t.props.y)?t.props.y:s.top+s.height+s.brushBottom-(r.bottom||0),width:_b(t.props.width)?t.props.width:s.width,startIndex:l,endIndex:u,updateId:"brush-".concat(c)})})),UI(RI(o),"renderReferenceElement",(function(t,e,r){if(!t)return null;var i=RI(o).clipPathId,a=o.state,s=a.xAxisMap,l=a.yAxisMap,u=a.offset,c=t.props,h=c.xAxisId,f=c.yAxisId;return(0,n.cloneElement)(t,{key:t.key||"".concat(e,"-").concat(r),xAxis:s[h],yAxis:l[f],viewBox:{x:u.left,y:u.top,width:u.width,height:u.height},clipPathId:i})})),UI(RI(o),"renderActivePoints",(function(t){var e=t.item,n=t.activePoint,r=t.basePoint,i=t.childIndex,o=t.isRange,a=[],s=e.props.key,l=e.item.props,u=l.activeDot,c=zI(zI({index:i,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:pO(e.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(i)},CT(u)),vT(u));return a.push(h.renderActiveDot(u,c)),r?a.push(h.renderActiveDot(u,zI(zI({},c),{},{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(i)}))):o&&a.push(null),a})),UI(RI(o),"renderGraphicChild",(function(t,e,r){var i=o.filterFormatItem(t,e,r);if(!i)return null;var a=o.getTooltipEventType(),s=o.state,l=s.isTooltipActive,u=s.tooltipAxis,c=s.activeTooltipIndex,h=s.activeLabel,f=AT(o.props.children,EN),d=i.props,p=d.points,m=d.isRange,v=d.baseLine,g=i.item.props,y=g.activeDot,b=g.hide,_=g.activeBar,x=g.activeShape,w=Boolean(!b&&l&&f&&(y||_||x)),S={};"axis"!==a&&f&&"click"===f.props.trigger?S={onClick:xO(o.handleItemMouseEnter,t.props.onClick)}:"axis"!==a&&(S={onMouseLeave:xO(o.handleItemMouseLeave,t.props.onMouseLeave),onMouseEnter:xO(o.handleItemMouseEnter,t.props.onMouseEnter)});var E=(0,n.cloneElement)(t,zI(zI({},i.props),S));if(w){if(!(c>=0)){var M,T=(null!==(M=o.getItemByXY(o.state.activeCoordinate))&&void 0!==M?M:{graphicalItem:E}).graphicalItem,A=T.item,O=void 0===A?t:A,P=T.childIndex,C=zI(zI(zI({},i.props),S),{},{activeIndex:P});return[(0,n.cloneElement)(O,C),null,null]}var k,R;if(u.dataKey&&!u.allowDuplicatedCategory){var N="function"==typeof u.dataKey?function(t){return"function"==typeof u.dataKey?u.dataKey(t.payload):null}:"payload.".concat(u.dataKey.toString());k=Ab(p,N,h),R=m&&v&&Ab(v,N,h)}else k=null==p?void 0:p[c],R=m&&v&&v[c];if(x||_){var L=void 0!==t.props.activeIndex?t.props.activeIndex:c;return[(0,n.cloneElement)(t,zI(zI(zI({},i.props),S),{},{activeIndex:L})),null,null]}if(!Uy()(k))return[E].concat(LI(o.renderActivePoints({item:i,activePoint:k,basePoint:R,childIndex:c,isRange:m})))}return m?[E,null,null]:[E,null]})),UI(RI(o),"renderCustomized",(function(t,e,r){return(0,n.cloneElement)(t,zI(zI({key:"recharts-customized-".concat(r)},o.props),o.state))})),UI(RI(o),"renderMap",{CartesianGrid:{handler:o.renderGrid,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:o.renderReferenceElement},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:o.renderXAxis},YAxis:{handler:o.renderYAxis},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(e=t.id)&&void 0!==e?e:Sb("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=Yy()(o.triggeredAfterMouseMove,null!==(i=t.throttleDelay)&&void 0!==i?i:1e3/60),o.state={},o}return e=h,i=[{key:"componentDidMount",value:function(){var t,e;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(t=this.props.margin.left)&&void 0!==t?t:0,top:null!==(e=this.props.margin.top)&&void 0!==e?e:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.accessibilityLayer?(this.state.tooltipTicks!==e.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==t.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==t.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var t=AT(this.props.children,EN);if(t&&Boolean(t.props.shared)){var e=t.props.shared?"axis":"item";return l.indexOf(e)>=0?e:a}return a}},{key:"getMouseInfo",value:function(t){if(!this.container)return null;var e,n=this.container,r=n.getBoundingClientRect(),i=(e=r).top+window.scrollY-document.documentElement.clientTop,o=e.left+window.scrollX-document.documentElement.clientLeft,a={chartX:Math.round(t.pageX-o),chartY:Math.round(t.pageY-i)},s=r.width/n.offsetWidth||1,l=this.inRange(a.chartX,a.chartY,s);if(!l)return null;var u=this.state,c=u.xAxisMap,h=u.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&h){var f=Mb(c).scale,d=Mb(h).scale,p=f&&f.invert?f.invert(a.chartX):null,m=d&&d.invert?d.invert(a.chartY):null;return zI(zI({},a),{},{xValue:p,yValue:m})}var v=XI(this.state,this.props.data,this.props.layout,l);return v?zI(zI({},a),v):null}},{key:"inRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=t/n,o=e/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,l=s.angleAxisMap,u=s.radiusAxisMap;if(l&&u){var c=Mb(l);return cb({x:i,y:o},c)}return null}},{key:"parseEventsOfWrapper",value:function(){var t=this.props.children,e=this.getTooltipEventType(),n=AT(t,EN),r={};return n&&"axis"===e&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),zI(zI({},vT(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){vI.on(gI,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vI.removeListener(gI,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(t,e,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===t||a.props.key===t.key||e===wT(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderAxis",value:function(t,e,r,i){var o=this.props,a=o.width,s=o.height;return n.createElement(TL,OI({},t,{className:eb("recharts-".concat(t.axisType," ").concat(t.axisType),t.className),key:e.key||"".concat(r,"-").concat(i),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var t=this.clipPathId,e=this.state.offset,r=e.left,i=e.top,o=e.height,a=e.width;return n.createElement("defs",null,n.createElement("clipPath",{id:t},n.createElement("rect",{x:r,y:i,height:o,width:a})))}},{key:"getXScales",value:function(){var t=this.state.xAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=AI(e,2),r=n[0],i=n[1];return zI(zI({},t),{},UI({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var t=this.state.yAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=AI(e,2),r=n[0],i=n[1];return zI(zI({},t),{},UI({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(t){var e;return null===(e=this.state.xAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getYScaleByAxisId",value:function(t){var e;return null===(e=this.state.yAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getItemByXY",value:function(t){var e=this.state,n=e.formattedGraphicalItems,r=e.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,l=a.item,u=wT(l.type);if("Bar"===u){var c=(s.data||[]).find((function(e){return Ok(t,e)}));if(c)return{graphicalItem:a,payload:c}}else if("RadialBar"===u){var h=(s.data||[]).find((function(e){return cb(t,e)}));if(h)return{graphicalItem:a,payload:h}}else if(rR(a)||iR(a)||oR(a)){var f=uR({graphicalItem:a,activeTooltipItem:r,itemData:l.props.data}),d=void 0===l.props.activeIndex?f:l.props.activeIndex;return{graphicalItem:zI(zI({},a),{},{childIndex:d}),payload:oR(a)?l.props.data[f]:a.props.data[f]}}}return null}},{key:"render",value:function(){var t=this;if(!OT(this))return null;var e,r,i=this.props,o=i.children,a=i.className,s=i.width,l=i.height,u=i.style,c=i.compact,h=i.title,f=i.desc,d=PI(i,MI),p=CT(d);if(c)return n.createElement(GT,OI({},p,{width:s,height:l,title:h,desc:f}),this.renderClipPath(),NT(o,this.renderMap));this.props.accessibilityLayer&&(p.tabIndex=null!==(e=this.props.tabIndex)&&void 0!==e?e:0,p.role=null!==(r=this.props.role)&&void 0!==r?r:"img",p.onKeyDown=function(e){t.accessibilityManager.keyboardEvent(e)},p.onFocus=function(){t.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return n.createElement("div",OI({className:eb("recharts-wrapper",a),style:zI({position:"relative",cursor:"default",width:s,height:l},u)},m,{ref:function(e){t.container=e},role:"region"}),n.createElement(GT,OI({},p,{width:s,height:l,title:h,desc:f,style:HI}),this.renderClipPath(),NT(o,this.renderMap)),this.renderLegend(),this.renderTooltip())}}],i&&CI(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),h}(n.Component),UI(e,"displayName",r),UI(e,"defaultProps",zI({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),UI(e,"getDerivedStateFromProps",(function(t,e){var n=t.dataKey,r=t.data,i=t.children,o=t.width,a=t.height,s=t.layout,l=t.stackOffset,u=t.margin;if(void 0===e.updateId){var c=YI(t);return zI(zI(zI({},c),{},{updateId:0},d(zI(zI({props:t},c),{},{updateId:0}),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(n!==e.prevDataKey||r!==e.prevData||o!==e.prevWidth||a!==e.prevHeight||s!==e.prevLayout||l!==e.prevStackOffset||!cT(u,e.prevMargin)){var h=YI(t),f={chartX:e.chartX,chartY:e.chartY,isTooltipActive:e.isTooltipActive},p=zI(zI({},XI(e,r,s)),{},{updateId:e.updateId+1}),m=zI(zI(zI({},h),f),p);return zI(zI(zI({},m),d(zI({props:t},m),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(!kT(i,e.prevChildren)){var v=Uy()(r)?e.updateId+1:e.updateId;return zI(zI({updateId:v},d(zI(zI({props:t},e),{},{updateId:v}),e)),{},{prevChildren:i})}return null})),UI(e,"renderActiveDot",(function(t,e){var r;return r=(0,n.isValidElement)(t)?(0,n.cloneElement)(t,e):Fy()(t)?t(e):n.createElement(fL,e),n.createElement(jT,{className:"recharts-active-dot",key:e.key},r)})),e}({chartName:"BarChart",GraphicalChild:PR,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:KI},{axisType:"yAxis",AxisComp:JI}],formatAxisMap:function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(n),h={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},f=!!AT(u,PR);return c.reduce((function(a,s){var u,c,d,p,m,v=n[s],g=v.orientation,y=v.domain,b=v.padding,_=void 0===b?{}:b,x=v.mirror,w=v.reversed,S="".concat(g).concat(x?"Mirror":"");if("number"===v.type&&("gap"===v.padding||"no-gap"===v.padding)){var E=y[1]-y[0],M=1/0,T=v.categoricalDomain.sort();T.forEach((function(t,e){e>0&&(M=Math.min((t||0)-(T[e-1]||0),M))}));var A=M/E,O="vertical"===v.layout?r.height:r.width;if("gap"===v.padding&&(u=A*O/2),"no-gap"===v.padding){var P=Eb(e.barCategoryGap,A*O),C=A*O/2;u=C-P-(C-P)/O*P}}c="xAxis"===i?[r.left+(_.left||0)+(u||0),r.left+r.width-(_.right||0)-(u||0)]:"yAxis"===i?"horizontal"===l?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(u||0),r.top+r.height-(_.bottom||0)-(u||0)]:v.range,w&&(c=[c[1],c[0]]);var k=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:Yb(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:Nx(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kb(),realScaleType:"point"}:"category"===o?{scale:Yb(),realScaleType:"band"}:{scale:Nx(),realScaleType:"linear"};if(db()(i)){var l="scale".concat(CM()(i));return{scale:(t[l]||Kb)(),realScaleType:t[l]?l:"point"}}return Fy()(i)?{scale:i}:{scale:Kb(),realScaleType:"point"}}(v,o,f),R=k.scale,N=k.realScaleType;R.domain(y).range(c),function(t){var e=t.domain();if(e&&!(e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-wO,o=Math.max(r[0],r[1])+wO,a=t(e[0]),s=t(e[n-1]);(a<i||a>o||s<i||s>o)&&t.domain([e[0],e[n-1]])}}(R);var L=function(t,e){var n=e.realScaleType,r=e.type,i=e.tickCount,o=e.originalDomain,a=e.allowDecimals,s=n||e.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=t.domain();if(!l.length)return null;var u=oT(l,i,a);return t.domain([TM()(u),EM()(u)]),{niceTicks:u}}if(i&&"number"===r){var c=t.domain();return{niceTicks:aT(c,i,a)}}return null}(R,NR(NR({},v),{},{realScaleType:N}));"xAxis"===i?(m="top"===g&&!x||"bottom"===g&&x,d=r.left,p=h[S]-m*v.height):"yAxis"===i&&(m="left"===g&&!x||"right"===g&&x,d=h[S]-m*v.width,p=r.top);var I=NR(NR(NR({},v),L),{},{realScaleType:N,x:d,y:p,scale:R,width:"xAxis"===i?r.width:v.width,height:"yAxis"===i?r.height:v.height});return I.bandSize=CO(I,L),v.hide||"xAxis"!==i?v.hide||(h[S]+=(m?-1:1)*I.width):h[S]+=(m?-1:1)*I.height,NR(NR({},a),{},LR({},s,I))}),{})}}),tD=["x1","y1","x2","y2","key"],eD=["offset"];function nD(t){return nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nD(t)}function rD(){return rD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rD.apply(this,arguments)}function iD(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function aD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oD(Object(n),!0).forEach((function(e){cD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hD(r.key),r)}}function lD(t,e){return lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lD(t,e)}function uD(t){return uD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uD(t)}function cD(t,e,n){return(e=hD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hD(t){var e=function(t,e){if("object"!==nD(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nD(e)?e:String(e)}var fD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}(l,t);var e,r,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uD(o);if(a){var n=uD(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return e=l,r=[{key:"renderHorizontal",value:function(t){var e=this,r=this.props,i=r.x,o=r.width,a=r.horizontal;if(!t||!t.length)return null;var s=t.map((function(t,n){var r=aD(aD({},e.props),{},{x1:i,y1:t,x2:i+o,y2:t,key:"line-".concat(n),index:n});return l.renderLineItem(a,r)}));return n.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}},{key:"renderVertical",value:function(t){var e=this,r=this.props,i=r.y,o=r.height,a=r.vertical;if(!t||!t.length)return null;var s=t.map((function(t,n){var r=aD(aD({},e.props),{},{x1:t,y1:i,x2:t,y2:i+o,key:"line-".concat(n),index:n});return l.renderLineItem(a,r)}));return n.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}},{key:"renderVerticalStripes",value:function(t){var e=this.props.verticalFill;if(!e||!e.length)return null;var r=this.props,i=r.fillOpacity,o=r.x,a=r.y,s=r.width,l=r.height,u=t.map((function(t){return Math.round(t+o-o)})).sort((function(t,e){return t-e}));o!==u[0]&&u.unshift(0);var c=u.map((function(t,r){var c=u[r+1]?u[r+1]-t:o+s-t;if(c<=0)return null;var h=r%e.length;return n.createElement("rect",{key:"react-".concat(r),x:t,y:a,width:c,height:l,stroke:"none",fill:e[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return n.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}},{key:"renderHorizontalStripes",value:function(t){var e=this.props.horizontalFill;if(!e||!e.length)return null;var r=this.props,i=r.fillOpacity,o=r.x,a=r.y,s=r.width,l=r.height,u=t.map((function(t){return Math.round(t+a-a)})).sort((function(t,e){return t-e}));a!==u[0]&&u.unshift(0);var c=u.map((function(t,r){var c=u[r+1]?u[r+1]-t:a+l-t;if(c<=0)return null;var h=r%e.length;return n.createElement("rect",{key:"react-".concat(r),y:t,x:o,height:c,width:s,stroke:"none",fill:e[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return n.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}},{key:"renderBackground",value:function(){var t=this.props.fill;if(!t||"none"===t)return null;var e=this.props,r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height;return n.createElement("rect",{x:i,y:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var t=this.props,e=t.x,r=t.y,i=t.width,o=t.height,a=t.horizontal,s=t.vertical,l=t.horizontalCoordinatesGenerator,u=t.verticalCoordinatesGenerator,c=t.xAxis,h=t.yAxis,f=t.offset,d=t.chartWidth,p=t.chartHeight,m=t.syncWithTicks,v=t.horizontalValues,g=t.verticalValues;if(!_b(i)||i<=0||!_b(o)||o<=0||!_b(e)||e!==+e||!_b(r)||r!==+r)return null;var y=this.props,b=y.horizontalPoints,_=y.verticalPoints;if((!b||!b.length)&&Fy()(l)){var x=v&&v.length;b=l({yAxis:h?aD(aD({},h),{},{ticks:x?v:h.ticks}):void 0,width:d,height:p,offset:f},!!x||m)}if((!_||!_.length)&&Fy()(u)){var w=g&&g.length;_=u({xAxis:c?aD(aD({},c),{},{ticks:w?g:c.ticks}):void 0,width:d,height:p,offset:f},!!w||m)}return n.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),a&&this.renderHorizontal(b),s&&this.renderVertical(_),a&&this.renderHorizontalStripes(b),s&&this.renderVerticalStripes(_))}}],i=[{key:"renderLineItem",value:function(t,e){var r;if(n.isValidElement(t))r=n.cloneElement(t,e);else if(Fy()(t))r=t(e);else{var i=e.x1,o=e.y1,a=e.x2,s=e.y2,l=e.key,u=iD(e,tD),c=CT(u),h=(c.offset,iD(c,eD));r=n.createElement("line",rD({},h,{x1:i,y1:o,x2:a,y2:s,fill:"none",key:l}))}return r}}],r&&sD(e.prototype,r),i&&sD(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(n.PureComponent);function dD(t){return dD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dD(t)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pD(Object(n),!0).forEach((function(e){vD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vD(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==dD(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==dD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===dD(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return yD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yD(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cD(fD,"displayName","CartesianGrid"),cD(fD,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]}),jy.Simulate.select;var bD=function(t){return n.createElement("button",{onClick:function(){return t.setSelected(!t.selected)},className:xe("p-2 border-1 text-center rounded text-sm",t.selected?"text-white bg-blue-500 border-blue-500 shadow-md":"border-blue-500 bg-white text-blue-500 shadow-inner")},t.selected?"Hide "+t.label:"Show "+t.label)},_D=function(t){var e=function(){t.setSelected(!t.selected)};return n.createElement("div",{className:"flex"},n.createElement("input",{type:"radio",className:"mr-2",name:t.name,value:t.value,checked:t.selected,onChange:e}),n.createElement("label",{className:"text-sm",onClick:e},t.title))},xD=function(t){var e=t.data,r=t.colors,i=t.width;return 0==e.length?null:n.createElement(QI,{className:"h-full w-full",width:i,height:250,data:e,layout:"horizontal",margin:{top:20,right:20,left:20,bottom:0}},n.createElement(fD,{strokeDasharray:"3 3"}),n.createElement(KI,{type:"category",dataKey:"name",tick:{fontSize:11,width:5}}),n.createElement(JI,{type:"number",tick:{fontSize:11,width:5}}),n.createElement(EN,null),n.createElement(PR,{dataKey:"count"},e.map((function(t,e){return n.createElement(gC,{key:"cell-".concat(e),fill:r[e%r.length]})}))))},wD=function(t){return t.toString(16).padStart(2,"0")},SD=function(){var t=_a([km,Fa,js]);xa(ml);var e=gD(wa(pl),2),r=(e[0],e[1]),i=gD((0,n.useState)({bins:[],palettes:[],selectedPalette:0}),2),o=(i[0],i[1],ja.seasonSelected,ja.client),a=dl.toolbarState.selectedMapMenuEntry,s=dl.toolbarState.mapMenu,l=dl.toolbarState.mapVariant,u=gD((0,n.useState)([]),2),c=u[0],h=u[1],f=gD((0,n.useState)([]),2),d=f[0],p=f[1],m=gD((0,n.useState)([]),2),v=m[0],g=m[1],y=gD((0,n.useState)(700),2),b=y[0],_=(y[1],gD((0,n.useState)({}),2)),x=_[0],w=_[1],S=gD((0,n.useState)({}),2),E=S[0],M=S[1],T=function(t){return r({mapVariant:t})};(0,n.useEffect)((function(){r({mapFit:dl.toolbarState.mapFit+1})}),[]);var A,O=Ds.maps.soilMapMetas[a.menuName];return(0,n.useEffect)((function(){if(O){var t=JSON.parse(O.attributes.bins),e=function(t){return t.map((function(t){var e=wD(t.r),n=wD(t.g),r=wD(t.b);return wD(Math.round(255*t.a/100)),"#".concat(e).concat(n).concat(r)}))}(O.attributes.palette_colors.split("), ").map((function(t){var e=t.match(/\d+/g).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}))),n=O.schemata.first()||{};h(t),p(e),g(t.map((function(t){return t.schema=n,t})).map((function(t){return{name:"".concat(gc(t.start_value,2),"\r\n").concat(gc(t.end_value,2)),count:t.total}}))),w(n),M(JSON.parse(O.attributes.interpolation_parameters))}}),[O]),console.log(O),n.createElement("div",{className:"w-full flex-col h-full flex items-center justify-start"},n.createElement("div",{className:"min-h-[4rem]"}),n.createElement("div",{className:"flex flex-row w-full bg-gray-50 p-4"},n.createElement("div",{className:"flex w-1/6 flex-col space-y-4"},n.createElement("h1",{className:"text-xl text-secondary text-center"},o.isJust?o.value.client():"No Client Selected"),n.createElement(bD,{label:"Points",selected:dl.toolbarState.showPoints,setSelected:function(t){return r({showPoints:t})}}),n.createElement(bD,{label:"Boundaries",selected:dl.toolbarState.showBoundaries,setSelected:function(t){return r({showBoundaries:t})}}),n.createElement("div",{className:"bg-gray-100"},n.createElement("div",{className:"flex justify-between flex-col"},n.createElement(_D,{name:"map-type",value:l.toString(),title:"Default",setSelected:function(){return T(Gs.Default)},selected:l===Gs.Default}),n.createElement(_D,{name:"map-type",value:l.toString(),title:"Gradient",setSelected:function(){return T(Gs.Gradient)},selected:l===Gs.Gradient}),n.createElement(_D,{name:"map-type",value:l.toString(),title:"Black and White",setSelected:function(){return T(Gs.BlackAndWhite)},selected:l===Gs.BlackAndWhite})),n.createElement(wu,{menu:s,selected:a,setSelected:function(t){!function(t){r({selectedMapMenuEntry:t})}(t)}}))),n.createElement(xD,{data:v,colors:d,width:b}),O?n.createElement("div",{className:"w-3/6 flex items-center justify-center text-xs p-2"},n.createElement("table",{className:"min-w-full table-auto"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Description"),n.createElement("td",{className:"px-4 py-1 border"},x.description)),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Unit"),n.createElement("td",{className:"px-4 py-1 border"},x.unit," (",x.unit_abbreviation,")")),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Stats"),n.createElement("td",{className:"px-4 py-1 border"},"Min: ",c.length?c[0].start_value:0,", Max: ",c.length?c[c.length-1].end_value:0,", Mean: ",gc(Number(O.attributes.mean),2),", StdDev: ",gc(Number(O.attributes.std_dev),2))),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Hectares"),n.createElement("td",{className:"px-4 py-1 border"},gc(Number(O.attributes.hectares),2))),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Samples"),n.createElement("td",{className:"px-4 py-1 border"},O.attributes.sample_count)),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Density"),n.createElement("td",{className:"px-4 py-1 border"},gc(Number(O.attributes.density),2)," (samples/hectare)")),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Projection"),n.createElement("td",{className:"px-4 py-1 border"},O.attributes.projection)),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Binning"),n.createElement("td",{className:"px-4 py-1 border"},"Strategy: ",O.attributes.binning_strategy,", ",function(t,e){switch(t){case"Euler":return"Bins: ".concat(e.bin_count);case"Elevation":return"Interval: ".concat(e.interval_in_meters,"m");case"StandardDeviation":return"Bins: ".concat(e.bin_count,", Intervals: ").concat(e.intervals,", Scalar: ").concat(e.scalar);case"Em50HardBreaks":return"";default:return JSON.stringify(e)}}(O.attributes.binning_strategy,mD(mD({},JSON.parse(O.attributes.binning_parameters)),{},{bin_count:c.length})))),n.createElement("tr",null,n.createElement("td",{className:"px-4 py-1 border"},"Interpolation"),n.createElement("td",{className:"px-4 py-1 border"},"Method: ",E.type,", ","ExponentialDecay"===(A=E).type?"Resolution: ".concat(A.resolution_in_meters,"m, Radius: ").concat(A.radius,"m, Samples: ").concat(A.max_samples,", Weight: ").concat(A.weight):JSON.stringify(A)))))):null),n.createElement("div",{className:"flex flex-col w-full h-full bg-gray-50 items-center"},n.createElement(Gm,{key:t,className:"w-full h-full z-0",mapBoxSetup:Vs,mapSize:Bs[2],points:dl.soilDataState.selectedHorizonDataPoints,showZoomControl:!1,scrollToZoom:!0,showPoints:dl.toolbarState.showPoints,showBoundaries:dl.toolbarState.showBoundaries,showAttributes:!0,selectedMap:a,mapOpacity:dl.toolbarState.mapOpacity,mapZoom:dl.toolbarState.mapZoom,setMapZoom:function(t){return r({mapZoom:t})},mapFit:dl.toolbarState.mapFit})))};const ED=function(){return xa(ml),n.createElement("div",{className:"flex items-center justify-center h-full w-full"},n.createElement(SD,null))},MD="158",TD=1,AD=2,OD=3,PD=100,CD=0,kD=1,RD=2,ND=0,LD=1,ID=2,DD=3,jD=4,zD=5,UD=301,BD=302,FD=306,HD=1e3,WD=1001,VD=1002,GD=1003,qD=1005,XD=1006,ZD=1008,YD=1009,$D=1012,KD=1014,JD=1015,QD=1016,tj=1020,ej=1023,nj=1026,rj=1027,ij=33776,oj=33777,aj=33778,sj=33779,lj=36492,uj=2300,cj=2301,hj=2302,fj=3001,dj="",pj="srgb",mj="srgb-linear",vj="display-p3",gj="display-p3-linear",yj="linear",bj="srgb",_j="rec709",xj="p3",wj=7680,Sj="300 es",Ej=1035,Mj=2e3,Tj=2001;class Aj{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const Oj=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Pj=Math.PI/180,Cj=180/Math.PI;function kj(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Oj[255&t]+Oj[t>>8&255]+Oj[t>>16&255]+Oj[t>>24&255]+"-"+Oj[255&e]+Oj[e>>8&255]+"-"+Oj[e>>16&15|64]+Oj[e>>24&255]+"-"+Oj[63&n|128]+Oj[n>>8&255]+"-"+Oj[n>>16&255]+Oj[n>>24&255]+Oj[255&r]+Oj[r>>8&255]+Oj[r>>16&255]+Oj[r>>24&255]).toLowerCase()}function Rj(t,e,n){return Math.max(e,Math.min(n,t))}function Nj(t,e){return(t%e+e)%e}function Lj(t,e,n){return(1-n)*t+n*e}function Ij(t){return 0==(t&t-1)&&0!==t}function Dj(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function jj(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function zj(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Uj=Pj,Bj=function(t){return t*Pj};class Fj{constructor(t=0,e=0){Fj.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Rj(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hj{constructor(t,e,n,r,i,o,a,s,l){Hj.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,l)}set(t,e,n,r,i,o,a,s,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*x,i[6]=o*v+a*b+s*w,i[1]=l*p+u*g+c*_,i[4]=l*m+u*y+c*x,i[7]=l*v+u*b+c*w,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*x,i[8]=h*v+f*b+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*o*u-e*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=u*o-a*l,h=a*s-u*i,f=l*i-o*s,d=e*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=c*p,t[1]=(r*l-u*n)*p,t[2]=(a*n-r*o)*p,t[3]=h*p,t[4]=(u*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=f*p,t[7]=(n*s-l*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-r*l,r*s,-r*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Wj.makeScale(t,e)),this}rotate(t){return this.premultiply(Wj.makeRotation(-t)),this}translate(t,e){return this.premultiply(Wj.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Wj=new Hj;function Vj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Gj(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function qj(){const t=Gj("canvas");return t.style.display="block",t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Xj={};function Zj(t){t in Xj||(Xj[t]=!0,console.warn(t))}const Yj=(new Hj).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),$j=(new Hj).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Kj={[mj]:{transfer:yj,primaries:_j,toReference:t=>t,fromReference:t=>t},[pj]:{transfer:bj,primaries:_j,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[gj]:{transfer:yj,primaries:xj,toReference:t=>t.applyMatrix3($j),fromReference:t=>t.applyMatrix3(Yj)},[vj]:{transfer:bj,primaries:xj,toReference:t=>t.convertSRGBToLinear().applyMatrix3($j),fromReference:t=>t.applyMatrix3(Yj).convertLinearToSRGB()}},Jj=new Set([mj,gj]),Qj={enabled:!0,_workingColorSpace:mj,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Jj.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Kj[e].toReference;return(0,Kj[n].fromReference)(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Kj[t].primaries},getTransfer:function(t){return t===dj?yj:Kj[t].transfer}};function tz(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ez(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let nz;class rz{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===nz&&(nz=Gj("canvas")),nz.width=t.width,nz.height=t.height;const n=nz.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=nz}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Gj("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*tz(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*tz(e[t]/255)):e[t]=tz(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let iz=0;class oz{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:iz++}),this.uuid=kj(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(az(r[e].image)):t.push(az(r[e]))}else t=az(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function az(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?rz.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let sz=0;class lz extends Aj{constructor(t=lz.DEFAULT_IMAGE,e=lz.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,l=lz.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sz++}),this.uuid=kj(),this.name="",this.source=new oz(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Fj(0,0),this.repeat=new Fj(1,1),this.center=new Fj(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hj,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(Zj("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===fj?pj:dj),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case HD:t.x=t.x-Math.floor(t.x);break;case WD:t.x=t.x<0?0:1;break;case VD:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case HD:t.y=t.y-Math.floor(t.y);break;case WD:t.y=t.y<0?0:1;break;case VD:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Zj("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===pj?fj:3e3}set encoding(t){Zj("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===fj?pj:dj}}lz.DEFAULT_IMAGE=null,lz.DEFAULT_MAPPING=300,lz.DEFAULT_ANISOTROPY=1;class uz{constructor(t=0,e=0,n=0,r=1){uz.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,l=s[0],u=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<o&&Math.abs(c-p)<o&&Math.abs(d-m)<o){if(Math.abs(u+h)<a&&Math.abs(c+p)<a&&Math.abs(d+m)<a&&Math.abs(l+f+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(f+1)/2,g=(v+1)/2,y=(u+h)/4,b=(c+p)/4,_=(d+m)/4;return t>s&&t>g?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):s>g?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=_/r):g<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=b/i,r=_/i),this.set(n,r,i,e),this}let g=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(m-d)/g,this.y=(c-p)/g,this.z=(h-u)/g,this.w=Math.acos((l+f+v-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cz extends Aj{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new uz(0,0,t,e),this.scissorTest=!1,this.viewport=new uz(0,0,t,e);const r={width:t,height:e,depth:1};void 0!==n.encoding&&(Zj("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===fj?pj:dj),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:XD,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new lz(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new oz(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hz extends cz{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class fz extends lz{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=GD,this.minFilter=GD,this.wrapR=WD,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dz extends lz{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=GD,this.minFilter=GD,this.wrapR=WD,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pz{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=d,void(t[e+3]=p);if(c!==p||s!==h||l!==f||u!==d){let t=1-a;const e=s*h+l*f+u*d+c*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,l=l*t+f*i,u=u*t+d*i,c=c*t+p*i,t===1-a){const t=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=t,l*=t,u*=t,c*=t}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return t[e]=a*d+u*c+s*f-l*h,t[e+1]=s*d+u*h+l*c-a*f,t[e+2]=l*d+u*f+a*h-s*c,t[e+3]=u*d-a*c-s*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"YXZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"ZXY":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"ZYX":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"YZX":this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d;break;case"XZY":this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],l=e[2],u=e[6],c=e[10],h=n+a+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-s)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(u-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+u)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(s+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Rj(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mz{constructor(t=0,e=0,n=0){mz.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(gz.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(gz.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,l=2*(o*r-a*n),u=2*(a*e-i*r),c=2*(i*n-o*e);return this.x=e+s*l+o*c-a*u,this.y=n+s*u+a*l-i*c,this.z=r+s*c+i*u-o*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return vz.copy(this).projectOnVector(t),this.sub(vz)}reflect(t){return this.sub(vz.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Rj(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vz=new mz,gz=new pz;class yz{constructor(t=new mz(1/0,1/0,1/0),e=new mz(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(_z.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(_z.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=_z.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,n=r.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,_z):_z.fromBufferAttribute(r,e),_z.applyMatrix4(t.matrixWorld),this.expandByPoint(_z);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),xz.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),xz.copy(n.boundingBox)),xz.applyMatrix4(t.matrixWorld),this.union(xz)}const r=t.children;for(let t=0,n=r.length;t<n;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,_z),_z.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Oz),Pz.subVectors(this.max,Oz),wz.subVectors(t.a,Oz),Sz.subVectors(t.b,Oz),Ez.subVectors(t.c,Oz),Mz.subVectors(Sz,wz),Tz.subVectors(Ez,Sz),Az.subVectors(wz,Ez);let e=[0,-Mz.z,Mz.y,0,-Tz.z,Tz.y,0,-Az.z,Az.y,Mz.z,0,-Mz.x,Tz.z,0,-Tz.x,Az.z,0,-Az.x,-Mz.y,Mz.x,0,-Tz.y,Tz.x,0,-Az.y,Az.x,0];return!!Rz(e,wz,Sz,Ez,Pz)&&(e=[1,0,0,0,1,0,0,0,1],!!Rz(e,wz,Sz,Ez,Pz)&&(Cz.crossVectors(Mz,Tz),e=[Cz.x,Cz.y,Cz.z],Rz(e,wz,Sz,Ez,Pz)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,_z).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(_z).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(bz[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bz[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bz[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bz[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bz[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bz[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bz[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bz[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bz)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const bz=[new mz,new mz,new mz,new mz,new mz,new mz,new mz,new mz],_z=new mz,xz=new yz,wz=new mz,Sz=new mz,Ez=new mz,Mz=new mz,Tz=new mz,Az=new mz,Oz=new mz,Pz=new mz,Cz=new mz,kz=new mz;function Rz(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){kz.fromArray(t,o);const a=i.x*Math.abs(kz.x)+i.y*Math.abs(kz.y)+i.z*Math.abs(kz.z),s=e.dot(kz),l=n.dot(kz),u=r.dot(kz);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const Nz=new yz,Lz=new mz,Iz=new mz;class Dz{constructor(t=new mz,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Nz.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Lz.subVectors(t,this.center);const e=Lz.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(Lz,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Iz.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Lz.copy(t.center).add(Iz)),this.expandByPoint(Lz.copy(t.center).sub(Iz))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const jz=new mz,zz=new mz,Uz=new mz,Bz=new mz,Fz=new mz,Hz=new mz,Wz=new mz;class Vz{constructor(t=new mz,e=new mz(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,jz)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=jz.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(jz.copy(this.origin).addScaledVector(this.direction,e),jz.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){zz.copy(t).add(e).multiplyScalar(.5),Uz.copy(e).sub(t).normalize(),Bz.copy(this.origin).sub(zz);const i=.5*t.distanceTo(e),o=-this.direction.dot(Uz),a=Bz.dot(this.direction),s=-Bz.dot(Uz),l=Bz.lengthSq(),u=Math.abs(1-o*o);let c,h,f,d;if(u>0)if(c=o*s-a,h=o*a-s,d=i*u,c>=0)if(h>=-d)if(h<=d){const t=1/u;c*=t,h*=t,f=c*(c+o*h+2*a)+h*(o*c+h+2*s)+l}else h=i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;else h=-i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;else h<=-d?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+l):h<=d?(c=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+l):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(zz).addScaledVector(Uz,h),f}intersectSphere(t,e){jz.subVectors(t.center,this.origin);const n=jz.dot(this.direction),r=jz.dot(jz)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,jz)}intersectTriangle(t,e,n,r,i){Fz.subVectors(e,t),Hz.subVectors(n,t),Wz.crossVectors(Fz,Hz);let o,a=this.direction.dot(Wz);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Bz.subVectors(this.origin,t);const s=o*this.direction.dot(Hz.crossVectors(Bz,Hz));if(s<0)return null;const l=o*this.direction.dot(Fz.cross(Bz));if(l<0)return null;if(s+l>a)return null;const u=-o*Bz.dot(Wz);return u<0?null:this.at(u/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Gz{constructor(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m){Gz.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m)}set(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m){const v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Gz).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/qz.setFromMatrixColumn(t,0).length(),i=1/qz.setFromMatrixColumn(t,1).length(),o=1/qz.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-a*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*u,e[9]=i-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Zz,t,Yz)}lookAt(t,e,n){const r=this.elements;return Jz.subVectors(t,e),0===Jz.lengthSq()&&(Jz.z=1),Jz.normalize(),$z.crossVectors(n,Jz),0===$z.lengthSq()&&(1===Math.abs(n.z)?Jz.x+=1e-4:Jz.z+=1e-4,Jz.normalize(),$z.crossVectors(n,Jz)),$z.normalize(),Kz.crossVectors(Jz,$z),r[0]=$z.x,r[4]=Kz.x,r[8]=Jz.x,r[1]=$z.y,r[5]=Kz.y,r[9]=Jz.y,r[2]=$z.z,r[6]=Kz.z,r[10]=Jz.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],E=r[12],M=r[1],T=r[5],A=r[9],O=r[13],P=r[2],C=r[6],k=r[10],R=r[14],N=r[3],L=r[7],I=r[11],D=r[15];return i[0]=o*x+a*M+s*P+l*N,i[4]=o*w+a*T+s*C+l*L,i[8]=o*S+a*A+s*k+l*I,i[12]=o*E+a*O+s*R+l*D,i[1]=u*x+c*M+h*P+f*N,i[5]=u*w+c*T+h*C+f*L,i[9]=u*S+c*A+h*k+f*I,i[13]=u*E+c*O+h*R+f*D,i[2]=d*x+p*M+m*P+v*N,i[6]=d*w+p*T+m*C+v*L,i[10]=d*S+p*A+m*k+v*I,i[14]=d*E+p*O+m*R+v*D,i[3]=g*x+y*M+b*P+_*N,i[7]=g*w+y*T+b*C+_*L,i[11]=g*S+y*A+b*k+_*I,i[15]=g*E+y*O+b*R+_*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*l*h+i*o*h-r*o*f+r*l*u-i*s*u)+t[11]*(+e*l*c-e*a*f-i*o*c+n*o*f+i*a*u-n*l*u)+t[15]*(-r*a*u-e*s*c+e*a*h+r*o*c-n*o*h+n*s*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],g=c*m*l-p*h*l+p*s*f-a*m*f-c*s*v+a*h*v,y=d*h*l-u*m*l-d*s*f+o*m*f+u*s*v-o*h*v,b=u*p*l-d*c*l+d*a*f-o*p*f-u*a*v+o*c*v,_=d*c*s-u*p*s-d*a*h+o*p*h+u*a*m-o*c*m,x=e*g+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=g*w,t[1]=(p*h*i-c*m*i-p*r*f+n*m*f+c*r*v-n*h*v)*w,t[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*v+n*s*v)*w,t[3]=(c*s*i-a*h*i-c*r*l+n*h*l+a*r*f-n*s*f)*w,t[4]=y*w,t[5]=(u*m*i-d*h*i+d*r*f-e*m*f-u*r*v+e*h*v)*w,t[6]=(d*s*i-o*m*i-d*r*l+e*m*l+o*r*v-e*s*v)*w,t[7]=(o*h*i-u*s*i+u*r*l-e*h*l-o*r*f+e*s*f)*w,t[8]=b*w,t[9]=(d*c*i-u*p*i-d*n*f+e*p*f+u*n*v-e*c*v)*w,t[10]=(o*p*i-d*a*i+d*n*l-e*p*l-o*n*v+e*a*v)*w,t[11]=(u*a*i-o*c*i-u*n*l+e*c*l+o*n*f-e*a*f)*w,t[12]=_*w,t[13]=(u*p*r-d*c*r+d*n*h-e*p*h-u*n*m+e*c*m)*w,t[14]=(d*a*r-o*p*r-d*n*s+e*p*s+o*n*m-e*a*m)*w,t[15]=(o*c*r-u*a*r+u*n*s-e*c*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,l=i+i,u=o+o,c=a+a,h=i*l,f=i*u,d=i*c,p=o*u,m=o*c,v=a*c,g=s*l,y=s*u,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=qz.set(r[0],r[1],r[2]).length();const o=qz.set(r[4],r[5],r[6]).length(),a=qz.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Xz.copy(this);const s=1/i,l=1/o,u=1/a;return Xz.elements[0]*=s,Xz.elements[1]*=s,Xz.elements[2]*=s,Xz.elements[4]*=l,Xz.elements[5]*=l,Xz.elements[6]*=l,Xz.elements[8]*=u,Xz.elements[9]*=u,Xz.elements[10]*=u,e.setFromRotationMatrix(Xz),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o,a=2e3){const s=this.elements,l=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),h=(n+r)/(n-r);let f,d;if(a===Mj)f=-(o+i)/(o-i),d=-2*o*i/(o-i);else{if(a!==Tj)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-i),d=-o*i/(o-i)}return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,o,a=2e3){const s=this.elements,l=1/(e-t),u=1/(n-r),c=1/(o-i),h=(e+t)*l,f=(n+r)*u;let d,p;if(a===Mj)d=(o+i)*c,p=-2*c;else{if(a!==Tj)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);d=i*c,p=-1*c}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=p,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const qz=new mz,Xz=new Gz,Zz=new mz(0,0,0),Yz=new mz(1,1,1),$z=new mz,Kz=new mz,Jz=new mz,Qz=new Gz,tU=new pz;class eU{constructor(t=0,e=0,n=0,r=eU.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(Rj(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Rj(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Rj(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Rj(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Rj(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Rj(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Qz.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Qz,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return tU.setFromEuler(this),this.setFromQuaternion(tU,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}eU.DEFAULT_ORDER="XYZ";class nU{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let rU=0;const iU=new mz,oU=new pz,aU=new Gz,sU=new mz,lU=new mz,uU=new mz,cU=new pz,hU=new mz(1,0,0),fU=new mz(0,1,0),dU=new mz(0,0,1),pU={type:"added"},mU={type:"removed"};class vU extends Aj{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rU++}),this.uuid=kj(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vU.DEFAULT_UP.clone();const t=new mz,e=new eU,n=new pz,r=new mz(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Gz},normalMatrix:{value:new Hj}}),this.matrix=new Gz,this.matrixWorld=new Gz,this.matrixAutoUpdate=vU.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=vU.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new nU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return oU.setFromAxisAngle(t,e),this.quaternion.multiply(oU),this}rotateOnWorldAxis(t,e){return oU.setFromAxisAngle(t,e),this.quaternion.premultiply(oU),this}rotateX(t){return this.rotateOnAxis(hU,t)}rotateY(t){return this.rotateOnAxis(fU,t)}rotateZ(t){return this.rotateOnAxis(dU,t)}translateOnAxis(t,e){return iU.copy(t).applyQuaternion(this.quaternion),this.position.add(iU.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(hU,t)}translateY(t){return this.translateOnAxis(fU,t)}translateZ(t){return this.translateOnAxis(dU,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(aU.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?sU.copy(t):sU.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),lU.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aU.lookAt(lU,sU,this.up):aU.lookAt(sU,lU,this.up),this.quaternion.setFromRotationMatrix(aU),r&&(aU.extractRotation(r.matrixWorld),oU.setFromRotationMatrix(aU),this.quaternion.premultiply(oU.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(pU)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(mU)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),aU.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),aU.multiply(t.parent.matrixWorld)),t.applyMatrix4(aU),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lU,t,uU),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lU,cU,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}vU.DEFAULT_UP=new mz(0,1,0),vU.DEFAULT_MATRIX_AUTO_UPDATE=!0,vU.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gU=new mz,yU=new mz,bU=new mz,_U=new mz,xU=new mz,wU=new mz,SU=new mz,EU=new mz,MU=new mz,TU=new mz;let AU=!1;class OU{constructor(t=new mz,e=new mz,n=new mz){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),gU.subVectors(t,e),r.cross(gU);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){gU.subVectors(r,e),yU.subVectors(n,e),bU.subVectors(t,e);const o=gU.dot(gU),a=gU.dot(yU),s=gU.dot(bU),l=yU.dot(yU),u=yU.dot(bU),c=o*l-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,f=(l*s-a*u)*h,d=(o*u-a*s)*h;return i.set(1-f-d,d,f)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,_U),_U.x>=0&&_U.y>=0&&_U.x+_U.y<=1}static getUV(t,e,n,r,i,o,a,s){return!1===AU&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),AU=!0),this.getInterpolation(t,e,n,r,i,o,a,s)}static getInterpolation(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,_U),s.setScalar(0),s.addScaledVector(i,_U.x),s.addScaledVector(o,_U.y),s.addScaledVector(a,_U.z),s}static isFrontFacing(t,e,n,r){return gU.subVectors(n,e),yU.subVectors(t,e),gU.cross(yU).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return gU.subVectors(this.c,this.b),yU.subVectors(this.a,this.b),.5*gU.cross(yU).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return OU.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return OU.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return!1===AU&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),AU=!0),OU.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}getInterpolation(t,e,n,r,i){return OU.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return OU.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return OU.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;xU.subVectors(r,n),wU.subVectors(i,n),EU.subVectors(t,n);const s=xU.dot(EU),l=wU.dot(EU);if(s<=0&&l<=0)return e.copy(n);MU.subVectors(t,r);const u=xU.dot(MU),c=wU.dot(MU);if(u>=0&&c<=u)return e.copy(r);const h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return o=s/(s-u),e.copy(n).addScaledVector(xU,o);TU.subVectors(t,i);const f=xU.dot(TU),d=wU.dot(TU);if(d>=0&&f<=d)return e.copy(i);const p=f*l-s*d;if(p<=0&&l>=0&&d<=0)return a=l/(l-d),e.copy(n).addScaledVector(wU,a);const m=u*d-f*c;if(m<=0&&c-u>=0&&f-d>=0)return SU.subVectors(i,r),a=(c-u)/(c-u+(f-d)),e.copy(r).addScaledVector(SU,a);const v=1/(m+p+h);return o=p*v,a=h*v,e.copy(n).addScaledVector(xU,o).addScaledVector(wU,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const PU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},CU={h:0,s:0,l:0},kU={h:0,s:0,l:0};function RU(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class NU{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=pj){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Qj.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Qj.workingColorSpace){return this.r=t,this.g=e,this.b=n,Qj.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Qj.workingColorSpace){if(t=Nj(t,1),e=Rj(e,0,1),n=Rj(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=RU(i,r,t+1/3),this.g=RU(i,r,t),this.b=RU(i,r,t-1/3)}return Qj.toWorkingColorSpace(this,r),this}setStyle(t,e=pj){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=pj){const n=PU[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=tz(t.r),this.g=tz(t.g),this.b=tz(t.b),this}copyLinearToSRGB(t){return this.r=ez(t.r),this.g=ez(t.g),this.b=ez(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=pj){return Qj.fromWorkingColorSpace(LU.copy(this),t),65536*Math.round(Rj(255*LU.r,0,255))+256*Math.round(Rj(255*LU.g,0,255))+Math.round(Rj(255*LU.b,0,255))}getHexString(t=pj){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Qj.workingColorSpace){Qj.fromWorkingColorSpace(LU.copy(this),e);const n=LU.r,r=LU.g,i=LU.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=u<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=l,t.l=u,t}getRGB(t,e=Qj.workingColorSpace){return Qj.fromWorkingColorSpace(LU.copy(this),e),t.r=LU.r,t.g=LU.g,t.b=LU.b,t}getStyle(t=pj){Qj.fromWorkingColorSpace(LU.copy(this),t);const e=LU.r,n=LU.g,r=LU.b;return t!==pj?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(CU),this.setHSL(CU.h+t,CU.s+e,CU.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(CU),t.getHSL(kU);const n=Lj(CU.h,kU.h,e),r=Lj(CU.s,kU.s,e),i=Lj(CU.l,kU.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const LU=new NU;NU.NAMES=PU;let IU=0;class DU extends Aj{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:IU++}),this.uuid=kj(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=PD,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new NU(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wj,this.stencilZFail=wj,this.stencilZPass=wj,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==PD&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wj&&(n.stencilFail=this.stencilFail),this.stencilZFail!==wj&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==wj&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class jU extends DU{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new NU(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=CD,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const zU=new mz,UU=new Fj;class BU{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=JD,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)UU.fromBufferAttribute(this,e),UU.applyMatrix3(t),this.setXY(e,UU.x,UU.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)zU.fromBufferAttribute(this,e),zU.applyMatrix3(t),this.setXYZ(e,zU.x,zU.y,zU.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)zU.fromBufferAttribute(this,e),zU.applyMatrix4(t),this.setXYZ(e,zU.x,zU.y,zU.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)zU.fromBufferAttribute(this,e),zU.applyNormalMatrix(t),this.setXYZ(e,zU.x,zU.y,zU.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)zU.fromBufferAttribute(this,e),zU.transformDirection(t),this.setXYZ(e,zU.x,zU.y,zU.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=jj(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=zj(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=jj(e,this.array)),e}setX(t,e){return this.normalized&&(e=zj(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=jj(e,this.array)),e}setY(t,e){return this.normalized&&(e=zj(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=jj(e,this.array)),e}setZ(t,e){return this.normalized&&(e=zj(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=jj(e,this.array)),e}setW(t,e){return this.normalized&&(e=zj(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=zj(e,this.array),n=zj(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=zj(e,this.array),n=zj(n,this.array),r=zj(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=zj(e,this.array),n=zj(n,this.array),r=zj(r,this.array),i=zj(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class FU extends BU{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class HU extends BU{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class WU extends BU{constructor(t,e,n){super(new Float32Array(t),e,n)}}let VU=0;const GU=new Gz,qU=new vU,XU=new mz,ZU=new yz,YU=new yz,$U=new mz;class KU extends Aj{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:VU++}),this.uuid=kj(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Vj(t)?HU:FU)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Hj).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return GU.makeRotationFromQuaternion(t),this.applyMatrix4(GU),this}rotateX(t){return GU.makeRotationX(t),this.applyMatrix4(GU),this}rotateY(t){return GU.makeRotationY(t),this.applyMatrix4(GU),this}rotateZ(t){return GU.makeRotationZ(t),this.applyMatrix4(GU),this}translate(t,e,n){return GU.makeTranslation(t,e,n),this.applyMatrix4(GU),this}scale(t,e,n){return GU.makeScale(t,e,n),this.applyMatrix4(GU),this}lookAt(t){return qU.lookAt(t),qU.updateMatrix(),this.applyMatrix4(qU.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(XU).negate(),this.translate(XU.x,XU.y,XU.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new WU(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new yz);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new mz(-1/0,-1/0,-1/0),new mz(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];ZU.setFromBufferAttribute(n),this.morphTargetsRelative?($U.addVectors(this.boundingBox.min,ZU.min),this.boundingBox.expandByPoint($U),$U.addVectors(this.boundingBox.max,ZU.max),this.boundingBox.expandByPoint($U)):(this.boundingBox.expandByPoint(ZU.min),this.boundingBox.expandByPoint(ZU.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Dz);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new mz,1/0);if(t){const n=this.boundingSphere.center;if(ZU.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];YU.setFromBufferAttribute(n),this.morphTargetsRelative?($U.addVectors(ZU.min,YU.min),ZU.expandByPoint($U),$U.addVectors(ZU.max,YU.max),ZU.expandByPoint($U)):(ZU.expandByPoint(YU.min),ZU.expandByPoint(YU.max))}ZU.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)$U.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared($U));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)$U.fromBufferAttribute(o,e),a&&(XU.fromBufferAttribute(t,e),$U.add(XU)),r=Math.max(r,n.distanceToSquared($U))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BU(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<a;t++)l[t]=new mz,u[t]=new mz;const c=new mz,h=new mz,f=new mz,d=new Fj,p=new Fj,m=new Fj,v=new mz,g=new mz;function y(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),f.fromArray(r,3*n),d.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),f.sub(c),p.sub(d),m.sub(d);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),g.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(v),l[e].add(v),l[n].add(v),u[t].add(g),u[e].add(g),u[n].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)y(n[t+0],n[t+1],n[t+2])}const _=new mz,x=new mz,w=new mz,S=new mz;function E(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),x.crossVectors(S,e);const n=x.dot(u[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new BU(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new mz,i=new mz,o=new mz,a=new mz,s=new mz,l=new mz,u=new mz,c=new mz;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),d=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,f),i.fromBufferAttribute(e,d),o.fromBufferAttribute(e,p),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),a.add(u),s.add(u),l.add(u),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)$U.fromBufferAttribute(t,e),$U.normalize(),t.setXYZ(e,$U.x,$U.y,$U.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let i=0,l=e.length;i<l;i++){a=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new BU(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new KU,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const JU=new Gz,QU=new Vz,tB=new Dz,eB=new mz,nB=new mz,rB=new mz,iB=new mz,oB=new mz,aB=new mz,sB=new Fj,lB=new Fj,uB=new Fj,cB=new mz,hB=new mz,fB=new mz,dB=new mz,pB=new mz;class mB extends vU{constructor(t=new KU,e=new jU){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const a=this.morphTargetInfluences;if(i&&a){aB.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(oB.fromBufferAttribute(s,t),o?aB.addScaledVector(oB,r):aB.addScaledVector(oB.sub(e),r))}e.add(aB)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),tB.copy(n.boundingSphere),tB.applyMatrix4(i),QU.copy(t.ray).recast(t.near),!1===tB.containsPoint(QU.origin)){if(null===QU.intersectSphere(tB,eB))return;if(QU.origin.distanceToSquared(eB)>(t.far-t.near)**2)return}JU.copy(i).invert(),QU.copy(t.ray).applyMatrix4(JU),null!==n.boundingBox&&!1===QU.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,QU)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,a=i.index,s=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,h=i.groups,f=i.drawRange;if(null!==a)if(Array.isArray(o))for(let i=0,s=h.length;i<s;i++){const s=h[i],d=o[s.materialIndex];for(let i=Math.max(s.start,f.start),o=Math.min(a.count,Math.min(s.start+s.count,f.start+f.count));i<o;i+=3)r=vB(this,d,t,n,l,u,c,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,e.push(r))}else for(let i=Math.max(0,f.start),s=Math.min(a.count,f.start+f.count);i<s;i+=3)r=vB(this,o,t,n,l,u,c,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),e.push(r));else if(void 0!==s)if(Array.isArray(o))for(let i=0,a=h.length;i<a;i++){const a=h[i],d=o[a.materialIndex];for(let i=Math.max(a.start,f.start),o=Math.min(s.count,Math.min(a.start+a.count,f.start+f.count));i<o;i+=3)r=vB(this,d,t,n,l,u,c,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,e.push(r))}else for(let i=Math.max(0,f.start),a=Math.min(s.count,f.start+f.count);i<a;i+=3)r=vB(this,o,t,n,l,u,c,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),e.push(r))}}function vB(t,e,n,r,i,o,a,s,l,u){t.getVertexPosition(s,nB),t.getVertexPosition(l,rB),t.getVertexPosition(u,iB);const c=function(t,e,n,r,i,o,a,s){let l;if(l=1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,0===e.side,s),null===l)return null;pB.copy(s),pB.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(pB);return u<n.near||u>n.far?null:{distance:u,point:pB.clone(),object:t}}(t,e,n,r,nB,rB,iB,dB);if(c){i&&(sB.fromBufferAttribute(i,s),lB.fromBufferAttribute(i,l),uB.fromBufferAttribute(i,u),c.uv=OU.getInterpolation(dB,nB,rB,iB,sB,lB,uB,new Fj)),o&&(sB.fromBufferAttribute(o,s),lB.fromBufferAttribute(o,l),uB.fromBufferAttribute(o,u),c.uv1=OU.getInterpolation(dB,nB,rB,iB,sB,lB,uB,new Fj),c.uv2=c.uv1),a&&(cB.fromBufferAttribute(a,s),hB.fromBufferAttribute(a,l),fB.fromBufferAttribute(a,u),c.normal=OU.getInterpolation(dB,nB,rB,iB,cB,hB,fB,new mz),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const t={a:s,b:l,c:u,normal:new mz,materialIndex:0};OU.getNormal(nB,rB,iB,t.normal),c.face=t}return c}class gB extends KU{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],u=[],c=[];let h=0,f=0;function d(t,e,n,r,i,o,d,p,m,v,g){const y=o/m,b=d/v,_=o/2,x=d/2,w=p/2,S=m+1,E=v+1;let M=0,T=0;const A=new mz;for(let o=0;o<E;o++){const a=o*b-x;for(let s=0;s<S;s++){const h=s*y-_;A[t]=h*r,A[e]=a*i,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,u.push(A.x,A.y,A.z),c.push(s/m),c.push(1-o/v),M+=1}}for(let t=0;t<v;t++)for(let e=0;e<m;e++){const n=h+e+S*t,r=h+e+S*(t+1),i=h+(e+1)+S*(t+1),o=h+(e+1)+S*t;s.push(n,r,o),s.push(r,i,o),T+=6}a.addGroup(f,T,g),f+=T,h+=M}d("z","y","x",-1,-1,n,e,t,o,i,0),d("z","y","x",1,-1,n,e,-t,o,i,1),d("x","z","y",1,1,t,n,e,r,o,2),d("x","z","y",1,-1,t,n,-e,r,o,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new WU(l,3)),this.setAttribute("normal",new WU(u,3)),this.setAttribute("uv",new WU(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gB(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function yB(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function bB(t){const e={};for(let n=0;n<t.length;n++){const r=yB(t[n]);for(const t in r)e[t]=r[t]}return e}function _B(t){return null===t.getRenderTarget()?t.outputColorSpace:Qj.workingColorSpace}const xB={clone:yB,merge:bB};class wB extends DU{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=yB(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class SB extends vU{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gz,this.projectionMatrix=new Gz,this.projectionMatrixInverse=new Gz,this.coordinateSystem=Mj}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class EB extends SB{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Cj*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Pj*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Cj*Math.atan(Math.tan(.5*Pj*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Pj*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const MB=-90;class TB extends vU{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new EB(MB,1,t,e);r.layers=this.layers,this.add(r);const i=new EB(MB,1,t,e);i.layers=this.layers,this.add(i);const o=new EB(MB,1,t,e);o.layers=this.layers,this.add(o);const a=new EB(MB,1,t,e);a.layers=this.layers,this.add(a);const s=new EB(MB,1,t,e);s.layers=this.layers,this.add(s);const l=new EB(MB,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,a,s]=e;for(const t of e)this.remove(t);if(t===Mj)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(t!==Tj)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,o,a,s,l,u]=this.children,c=t.getRenderTarget(),h=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),d=t.xr.enabled;t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,i),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,s),t.setRenderTarget(n,4,r),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5,r),t.render(e,u),t.setRenderTarget(c,h,f),t.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class AB extends lz{constructor(t,e,n,r,i,o,a,s,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:UD,n,r,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class OB extends hz{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];void 0!==e.encoding&&(Zj("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===fj?pj:dj),this.texture=new AB(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:XD}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new gB(5,5,5),a=new wB({name:"CubemapFromEquirect",uniforms:yB(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=e;const s=new mB(o,a),l=e.minFilter;return e.minFilter===ZD&&(e.minFilter=XD),new TB(1,10,this).update(t,s),e.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}const PB=new mz,CB=new mz,kB=new Hj;class RB{constructor(t=new mz(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=PB.subVectors(n,e).cross(CB.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(PB),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||kB.getNormalMatrix(t),r=this.coplanarPoint(PB).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const NB=new Dz,LB=new mz;class IB{constructor(t=new RB,e=new RB,n=new RB,r=new RB,i=new RB,o=new RB){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=2e3){const n=this.planes,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15];if(n[0].setComponents(s-i,h-l,m-f,b-v).normalize(),n[1].setComponents(s+i,h+l,m+f,b+v).normalize(),n[2].setComponents(s+o,h+u,m+d,b+g).normalize(),n[3].setComponents(s-o,h-u,m-d,b-g).normalize(),n[4].setComponents(s-a,h-c,m-p,b-y).normalize(),e===Mj)n[5].setComponents(s+a,h+c,m+p,b+y).normalize();else{if(e!==Tj)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,c,p,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),NB.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),NB.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(NB)}intersectsSprite(t){return NB.center.set(0,0,0),NB.radius=.7071067811865476,NB.applyMatrix4(t.matrixWorld),this.intersectsSphere(NB)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(LB.x=r.normal.x>0?t.max.x:t.min.x,LB.y=r.normal.y>0?t.max.y:t.min.y,LB.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(LB)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function DB(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function jB(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=t.FLOAT;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=t.HALF_FLOAT}else s=t.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=t.SHORT;else if(i instanceof Uint32Array)s=t.UNSIGNED_INT;else if(i instanceof Int32Array)s=t.INT;else if(i instanceof Int8Array)s=t.BYTE;else if(i instanceof Uint8Array)s=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=t.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,e,i),o.version=e.version)}}}class zB extends KU{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),l=a+1,u=s+1,c=t/a,h=e/s,f=[],d=[],p=[],m=[];for(let t=0;t<u;t++){const e=t*h-o;for(let n=0;n<l;n++){const r=n*c-i;d.push(r,-e,0),p.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+l*t,r=e+l*(t+1),i=e+1+l*(t+1),o=e+1+l*t;f.push(n,r,o),f.push(r,i,o)}this.setIndex(f),this.setAttribute("position",new WU(d,3)),this.setAttribute("normal",new WU(p,3)),this.setAttribute("uv",new WU(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zB(t.width,t.height,t.widthSegments,t.heightSegments)}}const UB={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},BB={common:{diffuse:{value:new NU(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Hj},alphaMap:{value:null},alphaMapTransform:{value:new Hj},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Hj}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Hj}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Hj}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Hj},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Hj},normalScale:{value:new Fj(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Hj},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Hj}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Hj}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Hj}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new NU(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new NU(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Hj},alphaTest:{value:0},uvTransform:{value:new Hj}},sprite:{diffuse:{value:new NU(16777215)},opacity:{value:1},center:{value:new Fj(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Hj},alphaMap:{value:null},alphaMapTransform:{value:new Hj},alphaTest:{value:0}}},FB={basic:{uniforms:bB([BB.common,BB.specularmap,BB.envmap,BB.aomap,BB.lightmap,BB.fog]),vertexShader:UB.meshbasic_vert,fragmentShader:UB.meshbasic_frag},lambert:{uniforms:bB([BB.common,BB.specularmap,BB.envmap,BB.aomap,BB.lightmap,BB.emissivemap,BB.bumpmap,BB.normalmap,BB.displacementmap,BB.fog,BB.lights,{emissive:{value:new NU(0)}}]),vertexShader:UB.meshlambert_vert,fragmentShader:UB.meshlambert_frag},phong:{uniforms:bB([BB.common,BB.specularmap,BB.envmap,BB.aomap,BB.lightmap,BB.emissivemap,BB.bumpmap,BB.normalmap,BB.displacementmap,BB.fog,BB.lights,{emissive:{value:new NU(0)},specular:{value:new NU(1118481)},shininess:{value:30}}]),vertexShader:UB.meshphong_vert,fragmentShader:UB.meshphong_frag},standard:{uniforms:bB([BB.common,BB.envmap,BB.aomap,BB.lightmap,BB.emissivemap,BB.bumpmap,BB.normalmap,BB.displacementmap,BB.roughnessmap,BB.metalnessmap,BB.fog,BB.lights,{emissive:{value:new NU(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:UB.meshphysical_vert,fragmentShader:UB.meshphysical_frag},toon:{uniforms:bB([BB.common,BB.aomap,BB.lightmap,BB.emissivemap,BB.bumpmap,BB.normalmap,BB.displacementmap,BB.gradientmap,BB.fog,BB.lights,{emissive:{value:new NU(0)}}]),vertexShader:UB.meshtoon_vert,fragmentShader:UB.meshtoon_frag},matcap:{uniforms:bB([BB.common,BB.bumpmap,BB.normalmap,BB.displacementmap,BB.fog,{matcap:{value:null}}]),vertexShader:UB.meshmatcap_vert,fragmentShader:UB.meshmatcap_frag},points:{uniforms:bB([BB.points,BB.fog]),vertexShader:UB.points_vert,fragmentShader:UB.points_frag},dashed:{uniforms:bB([BB.common,BB.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:UB.linedashed_vert,fragmentShader:UB.linedashed_frag},depth:{uniforms:bB([BB.common,BB.displacementmap]),vertexShader:UB.depth_vert,fragmentShader:UB.depth_frag},normal:{uniforms:bB([BB.common,BB.bumpmap,BB.normalmap,BB.displacementmap,{opacity:{value:1}}]),vertexShader:UB.meshnormal_vert,fragmentShader:UB.meshnormal_frag},sprite:{uniforms:bB([BB.sprite,BB.fog]),vertexShader:UB.sprite_vert,fragmentShader:UB.sprite_frag},background:{uniforms:{uvTransform:{value:new Hj},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:UB.background_vert,fragmentShader:UB.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:UB.backgroundCube_vert,fragmentShader:UB.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:UB.cube_vert,fragmentShader:UB.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:UB.equirect_vert,fragmentShader:UB.equirect_frag},distanceRGBA:{uniforms:bB([BB.common,BB.displacementmap,{referencePosition:{value:new mz},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:UB.distanceRGBA_vert,fragmentShader:UB.distanceRGBA_frag},shadow:{uniforms:bB([BB.lights,BB.fog,{color:{value:new NU(0)},opacity:{value:1}}]),vertexShader:UB.shadow_vert,fragmentShader:UB.shadow_frag}};FB.physical={uniforms:bB([FB.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Hj},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Hj},clearcoatNormalScale:{value:new Fj(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Hj},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Hj},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Hj},sheen:{value:0},sheenColor:{value:new NU(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Hj},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Hj},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Hj},transmissionSamplerSize:{value:new Fj},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Hj},attenuationDistance:{value:0},attenuationColor:{value:new NU(0)},specularColor:{value:new NU(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Hj},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Hj},anisotropyVector:{value:new Fj},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Hj}}]),vertexShader:UB.meshphysical_vert,fragmentShader:UB.meshphysical_frag};const HB={r:0,b:0,g:0};function WB(t,e,n,r,i,o,a){const s=new NU(0);let l,u,c=!0===o?0:1,h=null,f=0,d=null;function p(e,n){e.getRGB(HB,_B(t)),r.buffers.color.setClear(HB.r,HB.g,HB.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(t,e=1){s.set(t),c=e,p(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,p(s,c)},render:function(o,m){let v=!1,g=!0===m.isScene?m.background:null;g&&g.isTexture&&(g=(m.backgroundBlurriness>0?n:e).get(g)),null===g?p(s,c):g&&g.isColor&&(p(g,1),v=!0);const y=t.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===FD)?(void 0===u&&(u=new mB(new gB(1,1,1),new wB({name:"BackgroundCubeMaterial",uniforms:yB(FB.backgroundCube.uniforms),vertexShader:FB.backgroundCube.vertexShader,fragmentShader:FB.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=Qj.getTransfer(g.colorSpace)!==bj,h===g&&f===g.version&&d===t.toneMapping||(u.material.needsUpdate=!0,h=g,f=g.version,d=t.toneMapping),u.layers.enableAll(),o.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===l&&(l=new mB(new zB(2,2),new wB({name:"BackgroundMaterial",uniforms:yB(FB.background.uniforms),vertexShader:FB.background.vertexShader,fragmentShader:FB.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=Qj.getTransfer(g.colorSpace)!==bj,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),h===g&&f===g.version&&d===t.toneMapping||(l.material.needsUpdate=!0,h=g,f=g.version,d=t.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}}}function VB(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=d(null);let u=l,c=!1;function h(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function f(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){v(t,0)}function v(n,i){const o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function y(e,n,r,i,o,a,s){!0===s?t.vertexAttribIPointer(e,n,r,o,a):t.vertexAttribPointer(e,n,r,i,o,a)}function b(){_(),c=!0,u!==l&&(u=l,h(u.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,f,b,_){let x=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[a];return void 0===c&&(c=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),u[a]=c),c}(b,f,l);u!==e&&(u=e,h(u.object)),x=function(t,e,n,r){const i=u.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s)if(s[e].location>=0){const n=i[e];let r=o[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return u.attributesNum!==a||u.index!==r}(i,b,f,_),x&&function(t,e,n,r){const i={},o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s)if(s[e].location>=0){let n=o[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[e]=r,a++}u.attributes=i,u.attributesNum=a,u.index=r}(i,b,f,_)}else{const t=!0===l.wireframe;u.geometry===b.id&&u.program===f.id&&u.wireframe===t||(u.geometry=b.id,u.program=f.id,u.wireframe=t,x=!0)}null!==_&&n.update(_,t.ELEMENT_ARRAY_BUFFER),(x||c)&&(c=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,u=a.getAttributes(),c=o.defaultAttributeValues;for(const e in u){const o=u[e];if(o.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const e=a.normalized,l=a.itemSize,u=n.get(a);if(void 0===u)continue;const c=u.buffer,h=u.type,f=u.bytesPerElement,d=!0===r.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||1013===a.gpuType);if(a.isInterleavedBufferAttribute){const n=a.data,r=n.stride,u=a.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)v(o.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<o.locationSize;t++)m(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<o.locationSize;t++)y(o.location+t,l/o.locationSize,h,e,r*f,(u+l/o.locationSize*t)*f,d)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)v(o.location+t,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<o.locationSize;t++)m(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<o.locationSize;t++)y(o.location+t,l/o.locationSize,h,e,l*f,l/o.locationSize*t*f,d)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(o.location,n);break;case 3:t.vertexAttrib3fv(o.location,n);break;case 4:t.vertexAttrib4fv(o.location,n);break;default:t.vertexAttrib1fv(o.location,n)}}}}g()}(i,l,f,b),null!==_&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)f(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}function GB(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,u;if(i)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,a,s),n.update(a,o,s)}}function qB(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?t.getParameter(t.MAX_SAMPLES):0}}function XB(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new RB,s=new Hj,l={value:null,needsUpdate:!1};function u(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(u,n),u[n+3]=a.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(a,s,c){const h=a.clippingPlanes,f=a.clipIntersection,d=a.clipShadows,p=t.get(a);if(!i||null===h||0===h.length||o&&!d)o?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0);else{const t=o?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(h,s,e,c);for(let t=0;t!==e;++t)i[t]=n[t];p.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}function ZB(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=UD:304===e&&(t.mapping=BD),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(303===o||304===o){if(e.has(i))return n(e.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new OB(o.height/2);return a.fromEquirectangularTexture(t,i),e.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class YB extends SB{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const $B=[.125,.215,.35,.446,.526,.582],KB=new YB,JB=new NU;let QB=null,tF=0,eF=0;const nF=(1+Math.sqrt(5))/2,rF=1/nF,iF=[new mz(1,1,1),new mz(-1,1,1),new mz(1,1,-1),new mz(-1,1,-1),new mz(0,nF,rF),new mz(0,nF,-rF),new mz(rF,0,nF),new mz(-rF,0,nF),new mz(nF,rF,0),new mz(-nF,rF,0)];class oF{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){QB=this._renderer.getRenderTarget(),tF=this._renderer.getActiveCubeFace(),eF=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=uF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=lF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(QB,tF,eF),t.scissorTest=!1,sF(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===UD||t.mapping===BD?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),QB=this._renderer.getRenderTarget(),tF=this._renderer.getActiveCubeFace(),eF=this._renderer.getActiveMipmapLevel();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:XD,minFilter:XD,generateMipmaps:!1,type:QD,format:ej,colorSpace:mj,depthBuffer:!1},r=aF(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=aF(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+$B.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-4?s=$B[a-t+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,d=6,p=3,m=2,v=1,g=new Float32Array(p*d*f),y=new Float32Array(m*d*f),b=new Float32Array(v*d*f);for(let t=0;t<f;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,p*d*t),y.set(h,m*d*t);const i=[t,t,t,t,t,t];b.set(i,v*d*t)}const _=new KU;_.setAttribute("position",new BU(g,p)),_.setAttribute("uv",new BU(y,m)),_.setAttribute("faceIndex",new BU(b,v)),e.push(_),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(20),i=new mz(0,1,0);return new wB({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new mB(this._lodPlanes[0],t);this._renderer.compile(e,KB)}_sceneToCubeUV(t,e,n,r){const i=new EB(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(JB),s.toneMapping=ND,s.autoClear=!1;const c=new jU({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new mB(new gB,c);let f=!1;const d=t.background;d?d.isColor&&(c.color.copy(d),t.background=null,f=!0):(c.color.copy(JB),f=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(i.up.set(0,o[e],0),i.lookAt(a[e],0,0)):1===n?(i.up.set(0,0,o[e]),i.lookAt(0,a[e],0)):(i.up.set(0,o[e],0),i.lookAt(0,0,a[e]));const l=this._cubeSize;sF(r,n*l,e>2?l:0,l,l),s.setRenderTarget(r),f&&s.render(h,i),s.render(t,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,t.background=d}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===UD||t.mapping===BD;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=uF()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=lF());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new mB(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const a=this._cubeSize;sF(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,KB)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),r=iF[(e-1)%iF.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new mB(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let v=0;for(let t=0;t<20;++t){const e=t/d,n=Math.exp(-e*e/2);m.push(n),0===t?v+=n:t<p&&(v+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/v;c.envMap.value=t.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a);const{_lodMax:g}=this;c.dTheta.value=f,c.mipInt.value=g-n;const y=this._sizeLods[r];sF(e,3*y*(r>g-4?r-g+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(e),s.render(u,KB)}}function aF(t,e,n){const r=new hz(t,e,n);return r.texture.mapping=FD,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function sF(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function lF(){return new wB({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function uF(){return new wB({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function cF(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=303===o||304===o,s=o===UD||o===BD;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new oF(t)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(o)){null===n&&(n=new oF(t));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function hF(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function fF(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);for(const t in s.morphAttributes){const n=s.morphAttributes[t];for(let t=0,r=n.length;t<r;t++)e.remove(n[t])}s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}}const s=new(Vj(n)?HU:FU)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(n){const r=n.attributes;for(const n in r)e.update(r[n],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)e.update(r[n],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function dF(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,l,u){if(0===u)return;let c,h;if(i)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,l,a,r*s,u),n.update(l,o,u)}}function pF(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=i*(n/3);break;case t.LINES:e.lines+=i*(n/2);break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function mF(t,e){return t[0]-e[0]}function vF(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gF(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new uz,s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(l,u,c){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,d=void 0!==f?f.length:0;let p=o.get(u);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();const g=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,b=void 0!==u.morphAttributes.color,_=u.morphAttributes.position||[],x=u.morphAttributes.normal||[],w=u.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===y&&(S=2),!0===b&&(S=3);let E=u.attributes.position.count*S,M=1;E>e.maxTextureSize&&(M=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*M*4*d),A=new fz(T,E,M,d);A.type=JD,A.needsUpdate=!0;const O=4*S;for(let C=0;C<d;C++){const k=_[C],R=x[C],N=w[C],L=E*M*4*C;for(let I=0;I<k.count;I++){const D=I*O;!0===g&&(a.fromBufferAttribute(k,I),T[L+D+0]=a.x,T[L+D+1]=a.y,T[L+D+2]=a.z,T[L+D+3]=0),!0===y&&(a.fromBufferAttribute(R,I),T[L+D+4]=a.x,T[L+D+5]=a.y,T[L+D+6]=a.z,T[L+D+7]=0),!0===b&&(a.fromBufferAttribute(N,I),T[L+D+8]=a.x,T[L+D+9]=a.y,T[L+D+10]=a.z,T[L+D+11]=4===N.itemSize?a.w:1)}}function P(){A.dispose(),o.delete(u),u.removeEventListener("dispose",P)}p={count:d,texture:A,size:new Fj(E,M)},o.set(u,p),u.addEventListener("dispose",P)}let m=0;for(let j=0;j<h.length;j++)m+=h[j];const v=u.morphTargetsRelative?1:1-m;c.getUniforms().setValue(t,"morphTargetBaseInfluence",v),c.getUniforms().setValue(t,"morphTargetInfluences",h),c.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const z=void 0===h?0:h.length;let U=r[u.id];if(void 0===U||U.length!==z){U=[];for(let V=0;V<z;V++)U[V]=[V,0];r[u.id]=U}for(let G=0;G<z;G++){const q=U[G];q[0]=G,q[1]=h[G]}U.sort(vF);for(let X=0;X<8;X++)X<z&&U[X][1]?(s[X][0]=U[X][0],s[X][1]=U[X][1]):(s[X][0]=Number.MAX_SAFE_INTEGER,s[X][1]=0);s.sort(mF);const B=u.morphAttributes.position,F=u.morphAttributes.normal;let H=0;for(let Z=0;Z<8;Z++){const Y=s[Z],$=Y[0],K=Y[1];$!==Number.MAX_SAFE_INTEGER&&K?(B&&u.getAttribute("morphTarget"+Z)!==B[$]&&u.setAttribute("morphTarget"+Z,B[$]),F&&u.getAttribute("morphNormal"+Z)!==F[$]&&u.setAttribute("morphNormal"+Z,F[$]),i[Z]=K,H+=K):(B&&!0===u.hasAttribute("morphTarget"+Z)&&u.deleteAttribute("morphTarget"+Z),F&&!0===u.hasAttribute("morphNormal"+Z)&&u.deleteAttribute("morphNormal"+Z),i[Z]=0)}const W=u.morphTargetsRelative?1:1-H;c.getUniforms().setValue(t,"morphTargetBaseInfluence",W),c.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function yF(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(a){const s=r.render.frame,l=a.geometry,u=e.get(a,l);if(i.get(u)!==s&&(e.update(u),i.set(u,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),i.get(a)!==s&&(n.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,t.ARRAY_BUFFER),i.set(a,s))),a.isSkinnedMesh){const t=a.skeleton;i.get(t)!==s&&(t.update(),i.set(t,s))}return u},dispose:function(){i=new WeakMap}}}const bF=new lz,_F=new fz,xF=new dz,wF=new AB,SF=[],EF=[],MF=new Float32Array(16),TF=new Float32Array(9),AF=new Float32Array(4);function OF(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=SF[i];if(void 0===o&&(o=new Float32Array(i),SF[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function PF(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function CF(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function kF(t,e){let n=EF[e];void 0===n&&(n=new Int32Array(e),EF[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function RF(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function NF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(PF(n,e))return;t.uniform2fv(this.addr,e),CF(n,e)}}function LF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(PF(n,e))return;t.uniform3fv(this.addr,e),CF(n,e)}}function IF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(PF(n,e))return;t.uniform4fv(this.addr,e),CF(n,e)}}function DF(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(PF(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),CF(n,e)}else{if(PF(n,r))return;AF.set(r),t.uniformMatrix2fv(this.addr,!1,AF),CF(n,r)}}function jF(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(PF(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),CF(n,e)}else{if(PF(n,r))return;TF.set(r),t.uniformMatrix3fv(this.addr,!1,TF),CF(n,r)}}function zF(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(PF(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),CF(n,e)}else{if(PF(n,r))return;MF.set(r),t.uniformMatrix4fv(this.addr,!1,MF),CF(n,r)}}function UF(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function BF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(PF(n,e))return;t.uniform2iv(this.addr,e),CF(n,e)}}function FF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(PF(n,e))return;t.uniform3iv(this.addr,e),CF(n,e)}}function HF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(PF(n,e))return;t.uniform4iv(this.addr,e),CF(n,e)}}function WF(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function VF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(PF(n,e))return;t.uniform2uiv(this.addr,e),CF(n,e)}}function GF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(PF(n,e))return;t.uniform3uiv(this.addr,e),CF(n,e)}}function qF(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(PF(n,e))return;t.uniform4uiv(this.addr,e),CF(n,e)}}function XF(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||bF,i)}function ZF(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||xF,i)}function YF(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||wF,i)}function $F(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||_F,i)}function KF(t,e){t.uniform1fv(this.addr,e)}function JF(t,e){const n=OF(e,this.size,2);t.uniform2fv(this.addr,n)}function QF(t,e){const n=OF(e,this.size,3);t.uniform3fv(this.addr,n)}function tH(t,e){const n=OF(e,this.size,4);t.uniform4fv(this.addr,n)}function eH(t,e){const n=OF(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function nH(t,e){const n=OF(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function rH(t,e){const n=OF(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function iH(t,e){t.uniform1iv(this.addr,e)}function oH(t,e){t.uniform2iv(this.addr,e)}function aH(t,e){t.uniform3iv(this.addr,e)}function sH(t,e){t.uniform4iv(this.addr,e)}function lH(t,e){t.uniform1uiv(this.addr,e)}function uH(t,e){t.uniform2uiv(this.addr,e)}function cH(t,e){t.uniform3uiv(this.addr,e)}function hH(t,e){t.uniform4uiv(this.addr,e)}function fH(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);PF(r,o)||(t.uniform1iv(this.addr,o),CF(r,o));for(let t=0;t!==i;++t)n.setTexture2D(e[t]||bF,o[t])}function dH(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);PF(r,o)||(t.uniform1iv(this.addr,o),CF(r,o));for(let t=0;t!==i;++t)n.setTexture3D(e[t]||xF,o[t])}function pH(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);PF(r,o)||(t.uniform1iv(this.addr,o),CF(r,o));for(let t=0;t!==i;++t)n.setTextureCube(e[t]||wF,o[t])}function mH(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);PF(r,o)||(t.uniform1iv(this.addr,o),CF(r,o));for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||_F,o[t])}class vH{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return RF;case 35664:return NF;case 35665:return LF;case 35666:return IF;case 35674:return DF;case 35675:return jF;case 35676:return zF;case 5124:case 35670:return UF;case 35667:case 35671:return BF;case 35668:case 35672:return FF;case 35669:case 35673:return HF;case 5125:return WF;case 36294:return VF;case 36295:return GF;case 36296:return qF;case 35678:case 36198:case 36298:case 36306:case 35682:return XF;case 35679:case 36299:case 36307:return ZF;case 35680:case 36300:case 36308:case 36293:return YF;case 36289:case 36303:case 36311:case 36292:return $F}}(e.type)}}class gH{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return KF;case 35664:return JF;case 35665:return QF;case 35666:return tH;case 35674:return eH;case 35675:return nH;case 35676:return rH;case 5124:case 35670:return iH;case 35667:case 35671:return oH;case 35668:case 35672:return aH;case 35669:case 35673:return sH;case 5125:return lH;case 36294:return uH;case 36295:return cH;case 36296:return hH;case 35678:case 36198:case 36298:case 36306:case 35682:return fH;case 35679:case 36299:case 36307:return dH;case 35680:case 36300:case 36308:case 36293:return pH;case 36289:case 36303:case 36311:case 36292:return mH}}(e.type)}}class yH{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const bH=/(\w+)(\])?(\[|\.)?/g;function _H(t,e){t.seq.push(e),t.map[e.id]=e}function xH(t,e,n){const r=t.name,i=r.length;for(bH.lastIndex=0;;){const o=bH.exec(r),a=bH.lastIndex;let s=o[1];const l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){_H(n,void 0===u?new vH(s,t,e):new gH(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new yH(s),_H(n,t)),n=t}}}class wH{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);xH(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function SH(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const EH=37297;let MH=0;function TH(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let t=i;t<o;t++){const i=t+1;r.push(`${i===e?">":" "} ${i}: ${n[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function AH(t,e){const n=function(t){const e=Qj.getPrimaries(Qj.workingColorSpace),n=Qj.getPrimaries(t);let r;switch(e===n?r="":e===xj&&n===_j?r="LinearDisplayP3ToLinearSRGB":e===_j&&n===xj&&(r="LinearSRGBToLinearDisplayP3"),t){case mj:case gj:return[r,"LinearTransferOETF"];case pj:case vj:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function OH(t,e){let n;switch(e){case LD:n="Linear";break;case ID:n="Reinhard";break;case DD:n="OptimizedCineon";break;case jD:n="ACESFilmic";break;case zD:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function PH(t){return""!==t}function CH(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kH(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const RH=/^[ \t]*#include +<([\w\d./]+)>/gm;function NH(t){return t.replace(RH,IH)}const LH=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function IH(t,e){let n=UB[e];if(void 0===n){const t=LH.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=UB[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return NH(n)}const DH=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jH(t){return t.replace(DH,zH)}function zH(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function UH(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function BH(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===TD?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===AD?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===OD&&(e="SHADOWMAP_TYPE_VSM"),e}(n),u=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case UD:case BD:e="ENVMAP_TYPE_CUBE";break;case FD:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),c=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===BD&&(e="ENVMAP_MODE_REFRACTION"),e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case CD:e="ENVMAP_BLENDING_MULTIPLY";break;case kD:e="ENVMAP_BLENDING_MIX";break;case RD:e="ENVMAP_BLENDING_ADD"}return e}(n),f=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),d=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(PH).join("\n")}(n),p=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(PH).join("\n"),v.length>0&&(v+="\n"),g=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(PH).join("\n"),g.length>0&&(g+="\n")):(v=[UH(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(PH).join("\n"),g=[d,UH(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ND?"#define TONE_MAPPING":"",n.toneMapping!==ND?UB.tonemapping_pars_fragment:"",n.toneMapping!==ND?OH("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",UB.colorspace_pars_fragment,AH("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(PH).join("\n")),a=NH(a),a=CH(a,n),a=kH(a,n),s=NH(s),s=CH(s,n),s=kH(s,n),a=jH(a),s=jH(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===Sj?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Sj?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const b=y+v+a,_=y+g+s,x=SH(i,i.VERTEX_SHADER,b),w=SH(i,i.FRAGMENT_SHADER,_);function S(e){if(t.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(x).trim(),o=i.getShaderInfoLog(w).trim();let a=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(a=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(i,m,x,w);else{const t=TH(i,x,"vertex"),e=TH(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+t+"\n"+e)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(s=!1);s&&(e.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:v},fragmentShader:{log:o,prefix:g}})}i.deleteShader(x),i.deleteShader(w),E=new wH(i,m),M=function(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;r.type===t.FLOAT_MAT2&&(a=2),r.type===t.FLOAT_MAT3&&(a=3),r.type===t.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(i,m)}let E,M;i.attachShader(m,x),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===M&&S(this),M};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=i.getProgramParameter(m,EH)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=MH++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let FH=0;class HH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new WH(t),e.set(t,n)),n}}class WH{constructor(t){this.id=FH++,this.code=t,this.usedTimes=0}}function VH(t,e,n,r,i,o,a){const s=new nU,l=new HH,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 0===t?"uv":`uv${t}`}return{getParameters:function(o,s,u,v,g){const y=v.fog,b=g.geometry,_=o.isMeshStandardMaterial?v.environment:null,x=(o.isMeshStandardMaterial?n:e).get(o.envMap||_),w=x&&x.mapping===FD?x.image.height:null,S=p[o.type];null!==o.precision&&(d=i.getMaxPrecision(o.precision),d!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",d,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,M=void 0!==E?E.length:0;let T,A,O,P,C=0;if(void 0!==b.morphAttributes.position&&(C=1),void 0!==b.morphAttributes.normal&&(C=2),void 0!==b.morphAttributes.color&&(C=3),S){const t=FB[S];T=t.vertexShader,A=t.fragmentShader}else T=o.vertexShader,A=o.fragmentShader,l.update(o),O=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const k=t.getRenderTarget(),R=!0===g.isInstancedMesh,N=!!o.map,L=!!o.matcap,I=!!x,D=!!o.aoMap,j=!!o.lightMap,z=!!o.bumpMap,U=!!o.normalMap,B=!!o.displacementMap,F=!!o.emissiveMap,H=!!o.metalnessMap,W=!!o.roughnessMap,V=o.anisotropy>0,G=o.clearcoat>0,q=o.iridescence>0,X=o.sheen>0,Z=o.transmission>0,Y=V&&!!o.anisotropyMap,$=G&&!!o.clearcoatMap,K=G&&!!o.clearcoatNormalMap,J=G&&!!o.clearcoatRoughnessMap,Q=q&&!!o.iridescenceMap,tt=q&&!!o.iridescenceThicknessMap,et=X&&!!o.sheenColorMap,nt=X&&!!o.sheenRoughnessMap,rt=!!o.specularMap,it=!!o.specularColorMap,ot=!!o.specularIntensityMap,at=Z&&!!o.transmissionMap,st=Z&&!!o.thicknessMap,lt=!!o.gradientMap,ut=!!o.alphaMap,ct=o.alphaTest>0,ht=!!o.alphaHash,ft=!!o.extensions,dt=!!b.attributes.uv1,pt=!!b.attributes.uv2,mt=!!b.attributes.uv3;let vt=ND;return o.toneMapped&&(null!==k&&!0!==k.isXRRenderTarget||(vt=t.toneMapping)),{isWebGL2:c,shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:T,fragmentShader:A,defines:o.defines,customVertexShaderID:O,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:d,instancing:R,instancingColor:R&&null!==g.instanceColor,supportsVertexTextures:f,outputColorSpace:null===k?t.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:mj,map:N,matcap:L,envMap:I,envMapMode:I&&x.mapping,envMapCubeUVHeight:w,aoMap:D,lightMap:j,bumpMap:z,normalMap:U,displacementMap:f&&B,emissiveMap:F,normalMapObjectSpace:U&&1===o.normalMapType,normalMapTangentSpace:U&&0===o.normalMapType,metalnessMap:H,roughnessMap:W,anisotropy:V,anisotropyMap:Y,clearcoat:G,clearcoatMap:$,clearcoatNormalMap:K,clearcoatRoughnessMap:J,iridescence:q,iridescenceMap:Q,iridescenceThicknessMap:tt,sheen:X,sheenColorMap:et,sheenRoughnessMap:nt,specularMap:rt,specularColorMap:it,specularIntensityMap:ot,transmission:Z,transmissionMap:at,thicknessMap:st,gradientMap:lt,opaque:!1===o.transparent&&1===o.blending,alphaMap:ut,alphaTest:ct,alphaHash:ht,combine:o.combine,mapUv:N&&m(o.map.channel),aoMapUv:D&&m(o.aoMap.channel),lightMapUv:j&&m(o.lightMap.channel),bumpMapUv:z&&m(o.bumpMap.channel),normalMapUv:U&&m(o.normalMap.channel),displacementMapUv:B&&m(o.displacementMap.channel),emissiveMapUv:F&&m(o.emissiveMap.channel),metalnessMapUv:H&&m(o.metalnessMap.channel),roughnessMapUv:W&&m(o.roughnessMap.channel),anisotropyMapUv:Y&&m(o.anisotropyMap.channel),clearcoatMapUv:$&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:K&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:et&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:nt&&m(o.sheenRoughnessMap.channel),specularMapUv:rt&&m(o.specularMap.channel),specularColorMapUv:it&&m(o.specularColorMap.channel),specularIntensityMapUv:ot&&m(o.specularIntensityMap.channel),transmissionMapUv:at&&m(o.transmissionMap.channel),thicknessMapUv:st&&m(o.thicknessMap.channel),alphaMapUv:ut&&m(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(U||V),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUv1s:dt,vertexUv2s:pt,vertexUv3s:mt,pointsUvs:!0===g.isPoints&&!!b.attributes.uv&&(N||ut),fog:!!y,useFog:!0===o.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:M,morphTextureStride:C,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:vt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:N&&!0===o.map.isVideoTexture&&Qj.getTransfer(o.map.colorSpace)===bj,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:ft&&!0===o.extensions.derivatives,extensionFragDepth:ft&&!0===o.extensions.fragDepth,extensionDrawBuffers:ft&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:ft&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){s.disableAll(),e.isWebGL2&&s.enable(0),e.supportsVertexTextures&&s.enable(1),e.instancing&&s.enable(2),e.instancingColor&&s.enable(3),e.matcap&&s.enable(4),e.envMap&&s.enable(5),e.normalMapObjectSpace&&s.enable(6),e.normalMapTangentSpace&&s.enable(7),e.clearcoat&&s.enable(8),e.iridescence&&s.enable(9),e.alphaTest&&s.enable(10),e.vertexColors&&s.enable(11),e.vertexAlphas&&s.enable(12),e.vertexUv1s&&s.enable(13),e.vertexUv2s&&s.enable(14),e.vertexUv3s&&s.enable(15),e.vertexTangents&&s.enable(16),e.anisotropy&&s.enable(17),e.alphaHash&&s.enable(18),t.push(s.mask),s.disableAll(),e.fog&&s.enable(0),e.useFog&&s.enable(1),e.flatShading&&s.enable(2),e.logarithmicDepthBuffer&&s.enable(3),e.skinning&&s.enable(4),e.morphTargets&&s.enable(5),e.morphNormals&&s.enable(6),e.morphColors&&s.enable(7),e.premultipliedAlpha&&s.enable(8),e.shadowMapEnabled&&s.enable(9),e.useLegacyLights&&s.enable(10),e.doubleSided&&s.enable(11),e.flipSided&&s.enable(12),e.useDepthPacking&&s.enable(13),e.dithering&&s.enable(14),e.transmission&&s.enable(15),e.sheen&&s.enable(16),e.opaque&&s.enable(17),e.pointsUvs&&s.enable(18),e.decodeVideoTexture&&s.enable(19),t.push(s.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=FB[e];n=xB.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=u.length;t<e;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new BH(t,n,e,o),u.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function GH(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function qH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function XH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ZH(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,a,s,l,u){const c=o(t,e,a,s,l,u);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(t,e,a,s,l,u){const c=o(t,e,a,s,l,u);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||qH),r.length>1&&r.sort(e||XH),i.length>1&&i.sort(e||XH)}}}function YH(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new ZH,t.set(e,[i])):n>=r.length?(i=new ZH,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function $H(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new mz,color:new NU};break;case"SpotLight":n={position:new mz,direction:new mz,color:new NU,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new mz,color:new NU,distance:0,decay:0};break;case"HemisphereLight":n={direction:new mz,skyColor:new NU,groundColor:new NU};break;case"RectAreaLight":n={color:new NU,position:new mz,halfWidth:new mz,halfHeight:new mz}}return t[e.id]=n,n}}}let KH=0;function JH(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function QH(t,e){const n=new $H,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fj};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fj,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let t=0;t<9;t++)i.probe.push(new mz);const o=new mz,a=new Gz,s=new Gz;return{setup:function(o,a){let s=0,l=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,f=0,d=0,p=0,m=0,v=0,g=0,y=0,b=0,_=0;o.sort(JH);const x=!0===a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,w=e.intensity,S=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*w*x,l+=a.g*w*x,u+=a.b*w*x;else if(e.isLightProbe){for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],w);_++}else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=E,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(w*x),t.distance=S,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[f]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&b++),i.spotLightMatrix[f]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[f]=t,i.spotShadowMap[f]=E,g++}f++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=E,i.pointShadowMatrix[h]=e.shadow.matrix,v++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*x),t.groundColor.copy(e.groundColor).multiplyScalar(w*x),i.hemi[p]=t,p++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=BB.LTC_FLOAT_1,i.rectAreaLTC2=BB.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=BB.LTC_HALF_1,i.rectAreaLTC2=BB.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;const w=i.hash;w.directionalLength===c&&w.pointLength===h&&w.spotLength===f&&w.rectAreaLength===d&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===v&&w.numSpotShadows===g&&w.numSpotMaps===y&&w.numLightProbes===_||(i.directional.length=c,i.spot.length=f,i.rectArea.length=d,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=g+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=_,w.directionalLength=c,w.pointLength=h,w.spotLength=f,w.rectAreaLength=d,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=v,w.numSpotShadows=g,w.numSpotMaps=y,w.numLightProbes=_,i.version=KH++)},setupView:function(t,e){let n=0,r=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let e=0,f=t.length;e<f;e++){const f=t[e];if(f.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(f.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(f.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(f.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*f.width,0,0),t.halfHeight.set(0,.5*f.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),u++}else if(f.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),r++}else if(f.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(f.matrixWorld),t.direction.transformDirection(h),c++}}},state:i}}function tW(t,e){const n=new QH(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function eW(t,e){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new tW(t,e),n.set(r,[a])):i>=o.length?(a=new tW(t,e),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class nW extends DU{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class rW extends DU{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function iW(t,e,n){let r=new IB;const i=new Fj,o=new Fj,a=new uz,s=new nW({depthPacking:3201}),l=new rW,u={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new wB({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fj},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new KU;p.setAttribute("position",new BU(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new mB(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=TD;let g=this.type;function y(n,r){const o=e.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new hz(i.x,i.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,d,m,null)}function b(e,n,r,i){let o=null;const a=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===OD?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial&&(t.properties.get(o).light=r),o}function _(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===OD)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=i[u.materialIndex];if(c&&c.visible){const e=b(n,c,a,s);t.renderBufferDirect(o,null,r,e,n,u)}}}else if(i.visible){const e=b(n,i,a,s);t.renderBufferDirect(o,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)_(l[t],i,o,a,s)}this.render=function(e,n,s){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);const d=g!==OD&&this.type===OD,p=g===OD&&this.type!==OD;for(let l=0,u=e.length;l<u;l++){const u=e[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const m=h.getFrameExtents();if(i.multiply(m),o.copy(h.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/m.x),i.x=o.x*m.x,h.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/m.y),i.y=o.y*m.y,h.mapSize.y=o.y)),null===h.map||!0===d||!0===p){const t=this.type!==OD?{minFilter:GD,magFilter:GD}:{};null!==h.map&&h.map.dispose(),h.map=new hz(i.x,i.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const v=h.getViewportCount();for(let t=0;t<v;t++){const e=h.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),f.viewport(a),h.updateMatrices(u,t),r=h.getFrustum(),_(n,s,h.camera,u,this.type)}!0!==h.isPointLightShadow&&this.type===OD&&y(h,s),h.needsUpdate=!1}g=this.type,v.needsUpdate=!1,t.setRenderTarget(l,u,h)}}function oW(t,e,n){const r=n.isWebGL2,i=new function(){let e=!1;const n=new uz;let r=null;const i=new uz(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?H(t.DEPTH_TEST):W(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(n){e||(n?H(t.STENCIL_TEST):W(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&l===r||(t.stencilOp(e,n,r),a=e,s=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}},s=new WeakMap,l=new WeakMap;let u={},c={},h=new WeakMap,f=[],d=null,p=!1,m=null,v=null,g=null,y=null,b=null,_=null,x=null,w=new NU(0,0,0),S=0,E=!1,M=null,T=null,A=null,O=null,P=null;const C=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,R=0;const N=t.getParameter(t.VERSION);-1!==N.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(N)[1]),k=R>=1):-1!==N.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),k=R>=2);let L=null,I={};const D=t.getParameter(t.SCISSOR_BOX),j=t.getParameter(t.VIEWPORT),z=(new uz).fromArray(D),U=(new uz).fromArray(j);function B(e,n,i,o){const a=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let s=0;s<i;s++)!r||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,a);return s}const F={};function H(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function W(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}F[t.TEXTURE_2D]=B(t.TEXTURE_2D,t.TEXTURE_2D,1),F[t.TEXTURE_CUBE_MAP]=B(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(F[t.TEXTURE_2D_ARRAY]=B(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),F[t.TEXTURE_3D]=B(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),H(t.DEPTH_TEST),o.setFunc(3),X(!1),Z(1),H(t.CULL_FACE),q(0);const V={[PD]:t.FUNC_ADD,101:t.FUNC_SUBTRACT,102:t.FUNC_REVERSE_SUBTRACT};if(r)V[103]=t.MIN,V[104]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(V[103]=t.MIN_EXT,V[104]=t.MAX_EXT)}const G={200:t.ZERO,201:t.ONE,202:t.SRC_COLOR,204:t.SRC_ALPHA,210:t.SRC_ALPHA_SATURATE,208:t.DST_COLOR,206:t.DST_ALPHA,203:t.ONE_MINUS_SRC_COLOR,205:t.ONE_MINUS_SRC_ALPHA,209:t.ONE_MINUS_DST_COLOR,207:t.ONE_MINUS_DST_ALPHA,211:t.CONSTANT_COLOR,212:t.ONE_MINUS_CONSTANT_COLOR,213:t.CONSTANT_ALPHA,214:t.ONE_MINUS_CONSTANT_ALPHA};function q(e,n,r,i,o,a,s,l,u,c){if(0!==e){if(!1===p&&(H(t.BLEND),p=!0),5===e)o=o||n,a=a||r,s=s||i,n===v&&o===b||(t.blendEquationSeparate(V[n],V[o]),v=n,b=o),r===g&&i===y&&a===_&&s===x||(t.blendFuncSeparate(G[r],G[i],G[a],G[s]),g=r,y=i,_=a,x=s),!1!==l.equals(w)&&u===S||(t.blendColor(l.r,l.g,l.b,u),w.copy(l),S=u),m=e,E=!1;else if(e!==m||c!==E){if(v===PD&&b===PD||(t.blendEquation(t.FUNC_ADD),v=PD,b=PD),c)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}g=null,y=null,_=null,x=null,w.set(0,0,0),S=0,m=e,E=c}}else!0===p&&(W(t.BLEND),p=!1)}function X(e){M!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),M=e)}function Z(e){0!==e?(H(t.CULL_FACE),e!==T&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):W(t.CULL_FACE),T=e}function Y(e,n,r){e?(H(t.POLYGON_OFFSET_FILL),O===n&&P===r||(t.polygonOffset(n,r),O=n,P=r)):W(t.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:o,stencil:a},enable:H,disable:W,bindFramebuffer:function(e,n){return c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,r&&(e===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let o=f,a=!1;if(r)if(o=h.get(i),void 0===o&&(o=[],h.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||o[0]!==t.COLOR_ATTACHMENT0){for(let n=0,r=e.length;n<r;n++)o[n]=t.COLOR_ATTACHMENT0+n;o.length=e.length,a=!0}}else o[0]!==t.COLOR_ATTACHMENT0&&(o[0]=t.COLOR_ATTACHMENT0,a=!0);else o[0]!==t.BACK&&(o[0]=t.BACK,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:q,setMaterial:function(e,n){2===e.side?W(t.CULL_FACE):H(t.CULL_FACE);let r=1===e.side;n&&(r=!r),X(r),1===e.blending&&!1===e.transparent?q(0):q(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const s=e.stencilWrite;a.setTest(s),s&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?H(t.SAMPLE_ALPHA_TO_COVERAGE):W(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:Z,setLineWidth:function(e){e!==A&&(k&&t.lineWidth(e),A=e)},setPolygonOffset:Y,setScissorTest:function(e){e?H(t.SCISSOR_TEST):W(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+C-1),L!==e&&(t.activeTexture(e),L=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===L?t.TEXTURE0+C-1:L);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===e&&i.texture===n||(L!==r&&(t.activeTexture(r),L=r),t.bindTexture(e,n||F[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=I[L];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=l.get(n).get(e);s.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===z.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),z.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===r&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},L=null,I={},c={},h=new WeakMap,f=[],d=null,p=!1,m=null,v=null,g=null,y=null,b=null,_=null,x=null,w=new NU(0,0,0),S=0,E=!1,M=null,T=null,A=null,O=null,P=null,z.set(0,0,t.canvas.width,t.canvas.height),U.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function aW(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function y(t,e){return g?new OffscreenCanvas(t,e):Gj("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?Dj:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;return s.width=o,s.height=a,s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return Ij(t.width)&&Ij(t.height)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==GD&&t.minFilter!==XD}function w(e){t.generateMipmap(e)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===t.RED&&(i===t.FLOAT&&(l=t.R32F),i===t.HALF_FLOAT&&(l=t.R16F),i===t.UNSIGNED_BYTE&&(l=t.R8)),r===t.RED_INTEGER&&(i===t.UNSIGNED_BYTE&&(l=t.R8UI),i===t.UNSIGNED_SHORT&&(l=t.R16UI),i===t.UNSIGNED_INT&&(l=t.R32UI),i===t.BYTE&&(l=t.R8I),i===t.SHORT&&(l=t.R16I),i===t.INT&&(l=t.R32I)),r===t.RG&&(i===t.FLOAT&&(l=t.RG32F),i===t.HALF_FLOAT&&(l=t.RG16F),i===t.UNSIGNED_BYTE&&(l=t.RG8)),r===t.RGBA){const e=a?yj:Qj.getTransfer(o);i===t.FLOAT&&(l=t.RGBA32F),i===t.HALF_FLOAT&&(l=t.RGBA16F),i===t.UNSIGNED_BYTE&&(l=e===bj?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)}return l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function E(t,e,n){return!0===x(t,n)||t.isFramebufferTexture&&t.minFilter!==GD&&t.minFilter!==XD?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(e){return e===GD||1004===e||e===qD?t.NEAREST:t.LINEAR}function T(t){const e=t.target;e.removeEventListener("dispose",T),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=v.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&O(t),0===Object.keys(i).length&&v.delete(n)}r.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function A(e){const n=e.target;n.removeEventListener("dispose",A),function(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++){if(Array.isArray(i.__webglFramebuffer[e]))for(let n=0;n<i.__webglFramebuffer[e].length;n++)t.deleteFramebuffer(i.__webglFramebuffer[e][n]);else t.deleteFramebuffer(i.__webglFramebuffer[e]);i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e])}else{if(Array.isArray(i.__webglFramebuffer))for(let e=0;e<i.__webglFramebuffer.length;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[e])}r.remove(n),r.remove(e)}(n)}function O(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete v.get(i)[n.__cacheKey],a.memory.textures--}let P=0;function C(e,i){const o=r.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void D(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}const k={[HD]:t.REPEAT,[WD]:t.CLAMP_TO_EDGE,[VD]:t.MIRRORED_REPEAT},R={[GD]:t.NEAREST,1004:t.NEAREST_MIPMAP_NEAREST,[qD]:t.NEAREST_MIPMAP_LINEAR,[XD]:t.LINEAR,1007:t.LINEAR_MIPMAP_NEAREST,[ZD]:t.LINEAR_MIPMAP_LINEAR},N={512:t.NEVER,519:t.ALWAYS,513:t.LESS,515:t.LEQUAL,514:t.EQUAL,518:t.GEQUAL,516:t.GREATER,517:t.NOTEQUAL};function L(n,o,a){if(a?(t.texParameteri(n,t.TEXTURE_WRAP_S,k[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,k[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,k[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,R[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,R[o.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o.wrapS===WD&&o.wrapT===WD||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,M(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,M(o.minFilter)),o.minFilter!==GD&&o.minFilter!==XD&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,N[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===GD)return;if(o.minFilter!==qD&&o.minFilter!==ZD)return;if(o.type===JD&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===QD&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function I(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=v.get(i);void 0===o&&(o={},v.set(i,o));const s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&O(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function D(e,i,a){let l=t.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=t.TEXTURE_3D);const u=I(e,i),h=i.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+a);const f=r.get(h);if(h.version!==f.__version||!0===u){n.activeTexture(t.TEXTURE0+a);const e=Qj.getPrimaries(Qj.workingColorSpace),r=i.colorSpace===dj?null:Qj.getPrimaries(i.colorSpace),d=i.colorSpace===dj||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const p=function(t){return!s&&(t.wrapS!==WD||t.wrapT!==WD||t.minFilter!==GD&&t.minFilter!==XD)}(i)&&!1===_(i.image);let m=b(i.image,p,!1,c);m=H(i,m);const v=_(m)||s,g=o.convert(i.format,i.colorSpace);let y,M=o.convert(i.type),T=S(i.internalFormat,g,M,i.colorSpace,i.isVideoTexture);L(l,i,v);const A=i.mipmaps,O=s&&!0!==i.isVideoTexture,P=void 0===f.__version||!0===u,C=E(i,m,v);if(i.isDepthTexture)T=t.DEPTH_COMPONENT,s?T=i.type===JD?t.DEPTH_COMPONENT32F:i.type===KD?t.DEPTH_COMPONENT24:i.type===tj?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:i.type===JD&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===nj&&T===t.DEPTH_COMPONENT&&i.type!==$D&&i.type!==KD&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=KD,M=o.convert(i.type)),i.format===rj&&T===t.DEPTH_COMPONENT&&(T=t.DEPTH_STENCIL,i.type!==tj&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=tj,M=o.convert(i.type))),P&&(O?n.texStorage2D(t.TEXTURE_2D,1,T,m.width,m.height):n.texImage2D(t.TEXTURE_2D,0,T,m.width,m.height,0,g,M,null));else if(i.isDataTexture)if(A.length>0&&v){O&&P&&n.texStorage2D(t.TEXTURE_2D,C,T,A[0].width,A[0].height);for(let e=0,r=A.length;e<r;e++)y=A[e],O?n.texSubImage2D(t.TEXTURE_2D,e,0,0,y.width,y.height,g,M,y.data):n.texImage2D(t.TEXTURE_2D,e,T,y.width,y.height,0,g,M,y.data);i.generateMipmaps=!1}else O?(P&&n.texStorage2D(t.TEXTURE_2D,C,T,m.width,m.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,m.width,m.height,g,M,m.data)):n.texImage2D(t.TEXTURE_2D,0,T,m.width,m.height,0,g,M,m.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){O&&P&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,T,A[0].width,A[0].height,m.depth);for(let e=0,r=A.length;e<r;e++)y=A[e],i.format!==ej?null!==g?O?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,y.width,y.height,m.depth,g,y.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,T,y.width,y.height,m.depth,0,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):O?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,y.width,y.height,m.depth,g,M,y.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,T,y.width,y.height,m.depth,0,g,M,y.data)}else{O&&P&&n.texStorage2D(t.TEXTURE_2D,C,T,A[0].width,A[0].height);for(let e=0,r=A.length;e<r;e++)y=A[e],i.format!==ej?null!==g?O?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,y.width,y.height,g,y.data):n.compressedTexImage2D(t.TEXTURE_2D,e,T,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):O?n.texSubImage2D(t.TEXTURE_2D,e,0,0,y.width,y.height,g,M,y.data):n.texImage2D(t.TEXTURE_2D,e,T,y.width,y.height,0,g,M,y.data)}else if(i.isDataArrayTexture)O?(P&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,T,m.width,m.height,m.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,g,M,m.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,T,m.width,m.height,m.depth,0,g,M,m.data);else if(i.isData3DTexture)O?(P&&n.texStorage3D(t.TEXTURE_3D,C,T,m.width,m.height,m.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,g,M,m.data)):n.texImage3D(t.TEXTURE_3D,0,T,m.width,m.height,m.depth,0,g,M,m.data);else if(i.isFramebufferTexture){if(P)if(O)n.texStorage2D(t.TEXTURE_2D,C,T,m.width,m.height);else{let e=m.width,r=m.height;for(let i=0;i<C;i++)n.texImage2D(t.TEXTURE_2D,i,T,e,r,0,g,M,null),e>>=1,r>>=1}}else if(A.length>0&&v){O&&P&&n.texStorage2D(t.TEXTURE_2D,C,T,A[0].width,A[0].height);for(let e=0,r=A.length;e<r;e++)y=A[e],O?n.texSubImage2D(t.TEXTURE_2D,e,0,0,g,M,y):n.texImage2D(t.TEXTURE_2D,e,T,g,M,y);i.generateMipmaps=!1}else O?(P&&n.texStorage2D(t.TEXTURE_2D,C,T,m.width,m.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,g,M,m)):n.texImage2D(t.TEXTURE_2D,0,T,g,M,m);x(i,v)&&w(l),f.__version=h.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function j(e,i,a,s,l,u){const c=o.convert(a.format,a.colorSpace),h=o.convert(a.type),d=S(a.internalFormat,c,h,a.colorSpace);if(!r.get(i).__hasExternalTextures){const e=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,u,d,e,r,i.depth,0,c,h,null):n.texImage2D(l,u,d,e,r,0,c,h,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),F(i)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,s,l,r.get(a).__webglTexture,0,B(i)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,s,l,r.get(a).__webglTexture,u),n.bindFramebuffer(t.FRAMEBUFFER,null)}function z(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let i=!0===s?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(r||F(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===JD?i=t.DEPTH_COMPONENT32F:e.type===KD&&(i=t.DEPTH_COMPONENT24));const r=B(n);F(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,i,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,r,i,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,i,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=B(n);r&&!1===F(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):F(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const a=e[i],s=o.convert(a.format,a.colorSpace),l=o.convert(a.type),u=S(a.internalFormat,s,l,a.colorSpace),c=B(n);r&&!1===F(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,u,n.width,n.height):F(n)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function U(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=B(i);if(i.depthTexture.format===nj)F(i)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==rj)throw new Error("Unknown depthTexture format");F(i)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),z(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),z(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function B(t){return Math.min(h,t.samples)}function F(t){const n=r.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(t,n){const r=t.colorSpace,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Ej||r!==mj&&r!==dj&&(Qj.getTransfer(r)===bj?!1===s?!0===e.has("EXT_sRGB")&&i===ej?(t.format=Ej,t.minFilter=XD,t.generateMipmaps=!1):n=rz.sRGBToLinear(n):i===ej&&o===YD||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const t=P;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),P+=1,t},this.resetTextureUnits=function(){P=0},this.setTexture2D=C,this.setTexture2DArray=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?D(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)},this.setTexture3D=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?D(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)},this.setTextureCube=function(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,i,a){if(6!==i.image.length)return;const l=I(e,i),c=i.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+a);const h=r.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+a);const e=Qj.getPrimaries(Qj.workingColorSpace),r=i.colorSpace===dj?null:Qj.getPrimaries(i.colorSpace),f=i.colorSpace===dj||e===r?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const d=i.isCompressedTexture||i.image[0].isCompressedTexture,p=i.image[0]&&i.image[0].isDataTexture,m=[];for(let t=0;t<6;t++)m[t]=d||p?p?i.image[t].image:i.image[t]:b(i.image[t],!1,!0,u),m[t]=H(i,m[t]);const v=m[0],g=_(v)||s,y=o.convert(i.format,i.colorSpace),M=o.convert(i.type),T=S(i.internalFormat,y,M,i.colorSpace),A=s&&!0!==i.isVideoTexture,O=void 0===h.__version||!0===l;let P,C=E(i,v,g);if(L(t.TEXTURE_CUBE_MAP,i,g),d){A&&O&&n.texStorage2D(t.TEXTURE_CUBE_MAP,C,T,v.width,v.height);for(let e=0;e<6;e++){P=m[e].mipmaps;for(let r=0;r<P.length;r++){const o=P[r];i.format!==ej?null!==y?A?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,y,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,T,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,y,M,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,T,o.width,o.height,0,y,M,o.data)}}}else{P=i.mipmaps,A&&O&&(P.length>0&&C++,n.texStorage2D(t.TEXTURE_CUBE_MAP,C,T,m[0].width,m[0].height));for(let e=0;e<6;e++)if(p){A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,m[e].width,m[e].height,y,M,m[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,T,m[e].width,m[e].height,0,y,M,m[e].data);for(let r=0;r<P.length;r++){const i=P[r].image[e].image;A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,i.width,i.height,y,M,i.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,T,i.width,i.height,0,y,M,i.data)}}else{A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,y,M,m[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,T,y,M,m[e]);for(let r=0;r<P.length;r++){const i=P[r];A?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,y,M,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,T,y,M,i.image[e])}}}x(i,g)&&w(t.TEXTURE_CUBE_MAP),h.__version=c.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}(a,e,i):n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture,t.TEXTURE0+i)},this.rebindTextures=function(e,n,i){const o=r.get(e);void 0!==n&&j(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==i&&U(e)},this.setupRenderTarget=function(e){const l=e.texture,u=r.get(e),c=r.get(l);e.addEventListener("dispose",A),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,f=!0===e.isWebGLMultipleRenderTargets,d=_(e)||s;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)if(s&&l.mipmaps&&l.mipmaps.length>0){u.__webglFramebuffer[e]=[];for(let n=0;n<l.mipmaps.length;n++)u.__webglFramebuffer[e][n]=t.createFramebuffer()}else u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(s&&l.mipmaps&&l.mipmaps.length>0){u.__webglFramebuffer=[];for(let e=0;e<l.mipmaps.length;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else u.__webglFramebuffer=t.createFramebuffer();if(f)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&e.samples>0&&!1===F(e)){const r=f?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.colorSpace),s=o.convert(i.type),l=S(i.internalFormat,a,s,i.colorSpace,!0===e.isXRRenderTarget),c=B(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,c,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),z(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),L(t.TEXTURE_CUBE_MAP,l,d);for(let n=0;n<6;n++)if(s&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)j(u.__webglFramebuffer[n][r],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else j(u.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);x(l,d)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(f){const i=e.texture;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r.get(a);n.bindTexture(t.TEXTURE_2D,s.__webglTexture),L(t.TEXTURE_2D,a,d),j(u.__webglFramebuffer,e,a,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D,0),x(a,d)&&w(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,c.__webglTexture),L(r,l,d),s&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)j(u.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,r,n);else j(u.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,r,0);x(l,d)&&w(r),n.unbindTexture()}e.depthBuffer&&U(e)},this.updateRenderTargetMipmap=function(e){const i=_(e)||s,o=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,s=o.length;a<s;a++){const s=o[a];if(x(s,i)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(s).__webglTexture;n.bindTexture(i,o),w(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(s&&e.samples>0&&!1===F(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let s=t.COLOR_BUFFER_BIT;const l=[],u=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(u);const f=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===f&&(e.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(s|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c.__webglColorRenderbuffer[n]),!0===f&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[u]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[u])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=j,this.useMultisampledRTT=F}function sW(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=""){let o;const a=Qj.getTransfer(i);if(n===YD)return t.UNSIGNED_BYTE;if(1017===n)return t.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return t.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return t.BYTE;if(1011===n)return t.SHORT;if(n===$D)return t.UNSIGNED_SHORT;if(1013===n)return t.INT;if(n===KD)return t.UNSIGNED_INT;if(n===JD)return t.FLOAT;if(n===QD)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return t.ALPHA;if(n===ej)return t.RGBA;if(1024===n)return t.LUMINANCE;if(1025===n)return t.LUMINANCE_ALPHA;if(n===nj)return t.DEPTH_COMPONENT;if(n===rj)return t.DEPTH_STENCIL;if(n===Ej)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1028===n)return t.RED;if(1029===n)return t.RED_INTEGER;if(1030===n)return t.RG;if(1031===n)return t.RG_INTEGER;if(1033===n)return t.RGBA_INTEGER;if(n===ij||n===oj||n===aj||n===sj)if(a===bj){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===ij)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===oj)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===aj)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===sj)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===ij)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===oj)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===aj)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===sj)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===n)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===n)return a===bj?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return a===bj?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===lj||36494===n||36495===n){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===lj)return a===bj?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===lj)return o.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===tj?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class lW extends EB{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class uW extends vU{constructor(){super(),this.isGroup=!0,this.type="Group"}}const cW={type:"move"};class hW{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new uW,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new uW,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mz,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mz),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new uW,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mz,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mz),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),i=this._getHandJoint(l,r);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&a>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cW)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new uW;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class fW extends lz{constructor(t,e,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:nj)!==nj&&u!==rj)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===nj&&(n=KD),void 0===n&&u===rj&&(n=tj),super(null,r,i,o,a,s,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:GD,this.minFilter=void 0!==s?s:GD,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class dW extends Aj{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,u=null,c=null,h=null,f=null,d=null;const p=e.getContextAttributes();let m=null,v=null;const g=[],y=[],b=new EB;b.layers.enable(1),b.viewport=new uz;const _=new EB;_.layers.enable(2),_.viewport=new uz;const x=[b,_],w=new lW;w.layers.enable(1),w.layers.enable(2);let S=null,E=null;function M(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=g[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",A);for(let t=0;t<g.length;t++){const e=y[t];null!==e&&(y[t]=null,g[t].disconnect(e))}S=null,E=null,t.setRenderTarget(m),f=null,h=null,c=null,r=null,v=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<g.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=g[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new hW,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new hW,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new hW,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",A),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};f=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:f}),v=new hz(f.framebufferWidth,f.framebufferHeight,{format:ej,type:YD,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?rj:nj,o=p.stencil?tj:KD);const s={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,e),h=c.createProjectionLayer(s),r.updateRenderState({layers:[h]}),v=new hz(h.textureWidth,h.textureHeight,{format:ej,type:YD,depthTexture:new fW(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0}),t.properties.get(v).__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const O=new mz,P=new mz;function C(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;w.near=_.near=b.near=t.near,w.far=_.far=b.far=t.far,S===w.near&&E===w.far||(r.updateRenderState({depthNear:w.near,depthFar:w.far}),S=w.near,E=w.far);const e=t.parent,n=w.cameras;C(w,e);for(let t=0;t<n.length;t++)C(n[t],e);2===n.length?function(t,e,n){O.setFromMatrixPosition(e.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=O.distanceTo(P),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,d=a*h,p=r/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const v=a+p,g=s+p,y=f-m,b=d+(r-m),_=l*s/g*v,x=u*s/g*v;t.projectionMatrix.makePerspective(y,b,_,x,v,g),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(w,b,_):w.projectionMatrix.copy(b.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*Cj*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,w,e)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==f)return s},this.setFoveation=function(t){s=t,null!==h&&(h.fixedFoveation=t),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=t)};let k=null;const R=new DB;R.setAnimationLoop((function(e,r){if(u=r.getViewerPose(l||o),d=r,null!==u){const e=u.views;null!==f&&(t.setRenderTargetFramebuffer(v,f.framebuffer),t.setRenderTarget(v));let n=!1;e.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==f)o=f.getViewport(i);else{const e=c.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(v,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(v))}let a=x[r];void 0===a&&(a=new EB,a.layers.enable(r),a.viewport=new uz,x[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(w.matrix.copy(a.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===n&&w.cameras.push(a)}}for(let t=0;t<g.length;t++){const e=y[t],n=g[t];null!==e&&void 0!==n&&n.update(e,r,l||o)}k&&k(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),d=null})),this.setAnimationLoop=function(t){k=t},this.dispose=function(){}}}function pW(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,_B(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(t,i):i.isMeshToonMaterial?(r(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(r(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(r(t,i),function(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform));e.get(r).envMap&&(t.envMapIntensity.value=r.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,i,s)):i.isMeshMatcapMaterial?(r(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?r(t,i):i.isMeshDistanceMaterial?(r(t,i),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,i)):i.isMeshNormalMaterial?r(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i,o,a):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function mW(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,n){const r=t.value;if(void 0===n[e]){if("number"==typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function u(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let f=i[n.id];void 0===f&&(function(t){const e=t.uniforms;let n=0;let r=0;for(let t=0,i=e.length;t<i;t++){const i=e[t],o={boundary:0,storage:0},a=Array.isArray(i.value)?i.value:[i.value];for(let t=0,e=a.length;t<e;t++){const e=u(a[t]);o.boundary+=e.boundary,o.storage+=e.storage}i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,t>0&&(r=n%16,0!==r&&16-r-o.boundary<0&&(n+=16-r,i.__offset=n)),n+=o.storage}r=n%16,r>0&&(n+=16-r),t.__size=n,t.__cache={}}(n),f=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",c));const d=h.program;r.updateUBOMapping(n,d);const p=e.render.frame;o[n.id]!==p&&(function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let e=0,n=r.length;e<n;e++){const n=r[e];if(!0===l(n,e,o)){const e=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let o=0;o<r.length;o++){const a=r[o],s=u(a);"number"==typeof a?(n.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,e+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,n.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),o[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);a=[],i={},o={}}}}class vW{constructor(t={}){const{canvas:e=qj(),context:n=null,depth:r=!0,stencil:i=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:c=!1}=t;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:o;const f=new Uint32Array(4),d=new Int32Array(4);let p=null,m=null;const v=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=pj,this._useLegacyLights=!1,this.toneMapping=ND,this.toneMappingExposure=1;const y=this;let b=!1,_=0,x=0,w=null,S=-1,E=null;const M=new uz,T=new uz;let A=null;const O=new NU(0);let P=0,C=e.width,k=e.height,R=1,N=null,L=null;const I=new uz(0,0,C,k),D=new uz(0,0,C,k);let j=!1;const z=new IB;let U=!1,B=!1,F=null;const H=new Gz,W=new Fj,V=new mz,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===w?R:1}let X,Z,Y,$,K,J,Q,tt,et,nt,rt,it,ot,at,st,lt,ut,ct,ht,ft,dt,pt,mt,vt,gt=n;function yt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${MD}`),e.addEventListener("webglcontextlost",xt,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",St,!1),null===gt){const e=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&e.shift(),gt=yt(e,t),null===gt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&gt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function bt(){X=new hF(gt),Z=new qB(gt,X,t),X.init(Z),pt=new sW(gt,X,Z),Y=new oW(gt,X,Z),$=new pF(gt),K=new GH,J=new aW(gt,X,Y,K,Z,pt,$),Q=new ZB(y),tt=new cF(y),et=new jB(gt,Z),mt=new VB(gt,X,et,Z),nt=new fF(gt,et,$,mt),rt=new yF(gt,nt,et,$),ht=new gF(gt,Z,J),lt=new XB(K),it=new VH(y,Q,tt,X,Z,mt,lt),ot=new pW(y,K),at=new YH,st=new eW(X,Z),ct=new WB(y,Q,tt,Y,rt,h,s),ut=new iW(y,rt,Z),vt=new mW(gt,$,Z,Y),ft=new GB(gt,X,$,Z),dt=new dF(gt,X,$,Z),$.programs=it.programs,y.capabilities=Z,y.extensions=X,y.properties=K,y.renderLists=at,y.shadowMap=ut,y.state=Y,y.info=$}bt();const _t=new dW(y,gt);function xt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=$.autoReset,e=ut.enabled,n=ut.autoUpdate,r=ut.needsUpdate,i=ut.type;bt(),$.autoReset=t,ut.enabled=e,ut.autoUpdate=n,ut.needsUpdate=r,ut.type=i}function St(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=K.get(t).programs;void 0!==e&&(e.forEach((function(t){it.releaseProgram(t)})),t.isShaderMaterial&&it.releaseShaderCache(t))})(t),K.remove(t)}(e)}function Mt(t,e,n){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=1,t.needsUpdate=!0,Lt(t,e,n),t.side=0,t.needsUpdate=!0,Lt(t,e,n),t.side=2):Lt(t,e,n)}this.xr=_t,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){const t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(C,k,!1))},this.getSize=function(t){return t.set(C,k)},this.setSize=function(t,n,r=!0){_t.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=t,k=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(C*R,k*R).floor()},this.setDrawingBufferSize=function(t,n,r){C=t,k=n,R=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(M)},this.getViewport=function(t){return t.copy(I)},this.setViewport=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),Y.viewport(M.copy(I).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(D)},this.setScissor=function(t,e,n,r){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,r),Y.scissor(T.copy(D).multiplyScalar(R).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(t){Y.setScissorTest(j=t)},this.setOpaqueSort=function(t){N=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(t){return t.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;if(t){let t=!1;if(null!==w){const e=w.texture.format;t=1033===e||1031===e||1029===e}if(t){const t=w.texture.type,e=t===YD||t===KD||t===$D||t===tj||1017===t||1018===t,n=ct.getClearColor(),r=ct.getClearAlpha(),i=n.r,o=n.g,a=n.b;e?(f[0]=i,f[1]=o,f[2]=a,f[3]=r,gt.clearBufferuiv(gt.COLOR,0,f)):(d[0]=i,d[1]=o,d[2]=a,d[3]=r,gt.clearBufferiv(gt.COLOR,0,d))}else r|=gt.COLOR_BUFFER_BIT}e&&(r|=gt.DEPTH_BUFFER_BIT),n&&(r|=gt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),gt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",xt,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",St,!1),at.dispose(),st.dispose(),K.dispose(),Q.dispose(),tt.dispose(),rt.dispose(),mt.dispose(),vt.dispose(),it.dispose(),_t.dispose(),_t.removeEventListener("sessionstart",At),_t.removeEventListener("sessionend",Ot),F&&(F.dispose(),F=null),Pt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=G);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(t,e,n,r,i){!0!==e.isScene&&(e=G),J.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===w?y.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:mj,l=(r.isMeshStandardMaterial?tt:Q).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,d=!!n.morphAttributes.color;let p=ND;r.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(p=y.toneMapping));const v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==v?v.length:0,b=K.get(r),_=m.state.lights;if(!0===U&&(!0===B||t!==E)){const e=t===E&&r.id===S;lt.setState(r,t,e)}let x=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==_.state.version||b.outputColorSpace!==s||i.isInstancedMesh&&!1===b.instancing?x=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?x=!0:i.isSkinnedMesh||!0!==b.skinning?i.isInstancedMesh&&!0===b.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===b.instancingColor&&null!==i.instanceColor||b.envMap!==l||!0===r.fog&&b.fog!==o?x=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===lt.numPlanes&&b.numIntersection===lt.numIntersection?(b.vertexAlphas!==u||b.vertexTangents!==c||b.morphTargets!==h||b.morphNormals!==f||b.morphColors!==d||b.toneMapping!==p||!0===Z.isWebGL2&&b.morphTargetsCount!==g)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,b.__version=r.version);let M=b.currentProgram;!0===x&&(M=Lt(r,e,i));let T=!1,A=!1,O=!1;const P=M.getUniforms(),C=b.uniforms;if(Y.useProgram(M.program)&&(T=!0,A=!0,O=!0),r.id!==S&&(S=r.id,A=!0),T||E!==t){P.setValue(gt,"projectionMatrix",t.projectionMatrix),P.setValue(gt,"viewMatrix",t.matrixWorldInverse);const e=P.map.cameraPosition;void 0!==e&&e.setValue(gt,V.setFromMatrixPosition(t.matrixWorld)),Z.logarithmicDepthBuffer&&P.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),E!==t&&(E=t,A=!0,O=!0)}if(i.isSkinnedMesh){P.setOptional(gt,i,"bindMatrix"),P.setOptional(gt,i,"bindMatrixInverse");const t=i.skeleton;t&&(Z.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(gt,"boneTexture",t.boneTexture,J),P.setValue(gt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const N=n.morphAttributes;if((void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===Z.isWebGL2)&&ht.update(i,n,M),(A||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,P.setValue(gt,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(C.envMap.value=l,C.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),A&&(P.setValue(gt,"toneMappingExposure",y.toneMappingExposure),b.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(C,O),o&&!0===r.fog&&ot.refreshFogUniforms(C,o),ot.refreshMaterialUniforms(C,r,R,k,F),wH.upload(gt,It(b),C,J)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(wH.upload(gt,It(b),C,J),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&P.setValue(gt,"center",i.center),P.setValue(gt,"modelViewMatrix",i.modelViewMatrix),P.setValue(gt,"normalMatrix",i.normalMatrix),P.setValue(gt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Z.isWebGL2){const n=t[e];vt.update(n,M),vt.bind(n,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(t,e,n,r,i);Y.setMaterial(r,a);let l=n.index,u=1;if(!0===r.wireframe){if(l=nt.getWireframeAttribute(n),void 0===l)return;u=2}const c=n.drawRange,h=n.attributes.position;let f=c.start*u,d=(c.start+c.count)*u;null!==o&&(f=Math.max(f,o.start*u),d=Math.min(d,(o.start+o.count)*u)),null!==l?(f=Math.max(f,0),d=Math.min(d,l.count)):null!=h&&(f=Math.max(f,0),d=Math.min(d,h.count));const p=d-f;if(p<0||p===1/0)return;let v;mt.setup(i,r,s,n,l);let g=ft;if(null!==l&&(v=et.get(l),g=dt,g.setIndex(v)),i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*q()),g.setMode(gt.LINES)):g.setMode(gt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Y.setLineWidth(t*q()),i.isLineSegments?g.setMode(gt.LINES):i.isLineLoop?g.setMode(gt.LINE_LOOP):g.setMode(gt.LINE_STRIP)}else i.isPoints?g.setMode(gt.POINTS):i.isSprite&&g.setMode(gt.TRIANGLES);if(i.isInstancedMesh)g.renderInstances(f,p,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(f,p,e)}else g.render(f,p)},this.compile=function(t,e,n=null){null===n&&(n=t),m=st.get(n),m.init(),g.push(m),n.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),t!==n&&t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),m.setupLights(y._useLegacyLights);const r=new Set;return t.traverse((function(t){const e=t.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const o=e[i];Mt(o,n,t),r.add(o)}else Mt(e,n,t),r.add(e)})),g.pop(),m=null,r},this.compileAsync=function(t,e,n=null){const r=this.compile(t,e,n);return new Promise((e=>{function n(){r.forEach((function(t){K.get(t).currentProgram.isReady()&&r.delete(t)})),0!==r.size?setTimeout(n,10):e(t)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Tt=null;function At(){Pt.stop()}function Ot(){Pt.start()}const Pt=new DB;function Ct(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){r&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);const e=rt.update(t),i=t.material;i.visible&&p.push(t,e,i,n,V.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||z.intersectsObject(t))){const e=rt.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),V.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),V.copy(e.boundingSphere.center)),V.applyMatrix4(t.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&p.push(t,e,s,n,V.z,a)}}else i.visible&&p.push(t,e,i,n,V.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)Ct(i[t],e,n,r)}function kt(t,e,n,r){const i=t.opaque,o=t.transmissive,a=t.transparent;m.setupLightsView(n),!0===U&&lt.setGlobalState(y.clippingPlanes,n),o.length>0&&function(t,e,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;const i=Z.isWebGL2;null===F&&(F=new hz(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?QD:YD,minFilter:ZD,samples:i?4:0})),y.getDrawingBufferSize(W),i?F.setSize(W.x,W.y):F.setSize(Dj(W.x),Dj(W.y));const o=y.getRenderTarget();y.setRenderTarget(F),y.getClearColor(O),P=y.getClearAlpha(),P<1&&y.setClearColor(16777215,.5),y.clear();const a=y.toneMapping;y.toneMapping=ND,Rt(t,n,r),J.updateMultisampleRenderTarget(F),J.updateRenderTargetMipmap(F);let s=!1;for(let t=0,i=e.length;t<i;t++){const i=e[t],o=i.object,a=i.geometry,l=i.material,u=i.group;if(2===l.side&&o.layers.test(r.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Nt(o,n,r,a,l,u),l.side=t,l.needsUpdate=!0,s=!0}}!0===s&&(J.updateMultisampleRenderTarget(F),J.updateRenderTargetMipmap(F)),y.setRenderTarget(o),y.setClearColor(O,P),y.toneMapping=a}(i,o,e,n),r&&Y.viewport(M.copy(r)),i.length>0&&Rt(i,e,n),o.length>0&&Rt(o,e,n),a.length>0&&Rt(a,e,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Rt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=null===r?o.material:r,u=o.group;a.layers.test(n.layers)&&Nt(a,e,n,s,l,u)}}function Nt(t,e,n,r,i,o){t.onBeforeRender(y,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(y,e,n,r,t,o),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,y.renderBufferDirect(n,e,r,i,t,o),i.side=0,i.needsUpdate=!0,y.renderBufferDirect(n,e,r,i,t,o),i.side=2):y.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(y,e,n,r,i,o)}function Lt(t,e,n){!0!==e.isScene&&(e=G);const r=K.get(t),i=m.state.lights,o=m.state.shadowsArray,a=i.state.version,s=it.getParameters(t,i.state,o,e,n),l=it.getProgramCacheKey(s);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?tt:Q).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",Et),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Dt(t,s),c}else s.uniforms=it.getUniforms(t),t.onBuild(n,s,y),t.onBeforeCompile(s,y),c=it.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const h=r.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=lt.uniform),Dt(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function It(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=wH.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function Dt(t,e){const n=K.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Pt.setAnimationLoop((function(t){Tt&&Tt(t)})),"undefined"!=typeof self&&Pt.setContext(self),this.setAnimationLoop=function(t){Tt=t,_t.setAnimationLoop(t),null===t?Pt.stop():Pt.start()},_t.addEventListener("sessionstart",At),_t.addEventListener("sessionend",Ot),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===_t.enabled&&!0===_t.isPresenting&&(!0===_t.cameraAutoUpdate&&_t.updateCamera(e),e=_t.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,w),m=st.get(t,g.length),m.init(),g.push(m),H.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(H),B=this.localClippingEnabled,U=lt.init(this.clippingPlanes,B),p=at.get(t,v.length),p.init(),v.push(p),Ct(t,e,0,y.sortObjects),p.finish(),!0===y.sortObjects&&p.sort(N,L),this.info.render.frame++,!0===U&&lt.beginShadows();const n=m.state.shadowsArray;if(ut.render(n,t,e),!0===U&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ct.render(p,t),m.setupLights(y._useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];kt(p,t,r,r.viewport)}}else kt(p,t,e);null!==w&&(J.updateMultisampleRenderTarget(w),J.updateRenderTargetMipmap(w)),!0===t.isScene&&t.onAfterRender(y,t,e),mt.resetDefaultState(),S=-1,E=null,g.pop(),m=g.length>0?g[g.length-1]:null,v.pop(),p=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(t,e,n){K.get(t.texture).__webglTexture=e,K.get(t.depthTexture).__webglTexture=n;const r=K.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=K.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){w=t,_=e,x=n;let r=!0,i=null,o=!1,a=!1;if(t){const s=K.get(t);void 0!==s.__useDefaultFramebuffer?(Y.bindFramebuffer(gt.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?J.setupRenderTarget(t):s.__hasExternalTextures&&J.rebindTextures(t,K.get(t.texture).__webglTexture,K.get(t.depthTexture).__webglTexture);const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const u=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=Array.isArray(u[e])?u[e][n]:u[e],o=!0):i=Z.isWebGL2&&t.samples>0&&!1===J.useMultisampledRTT(t)?K.get(t).__webglMultisampledFramebuffer:Array.isArray(u)?u[n]:u,M.copy(t.viewport),T.copy(t.scissor),A=t.scissorTest}else M.copy(I).multiplyScalar(R).floor(),T.copy(D).multiplyScalar(R).floor(),A=j;if(Y.bindFramebuffer(gt.FRAMEBUFFER,i)&&Z.drawBuffers&&r&&Y.drawBuffers(t,i),Y.viewport(M),Y.scissor(T),Y.setScissorTest(A),o){const r=K.get(t.texture);gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(a){const r=K.get(t.texture),i=e||0;gt.framebufferTextureLayer(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(gt.FRAMEBUFFER,s);try{const a=t.texture,s=a.format,l=a.type;if(s!==ej&&pt.convert(s)!==gt.getParameter(gt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===QD&&(X.has("EXT_color_buffer_half_float")||Z.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(l===YD||pt.convert(l)===gt.getParameter(gt.IMPLEMENTATION_COLOR_READ_TYPE)||l===JD&&(Z.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&gt.readPixels(e,n,r,i,pt.convert(s),pt.convert(l),o)}finally{const t=null!==w?K.get(w).__webglFramebuffer:null;Y.bindFramebuffer(gt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);J.setTexture2D(e,0),gt.copyTexSubImage2D(gt.TEXTURE_2D,n,0,0,t.x,t.y,i,o),Y.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=pt.convert(n.format),s=pt.convert(n.type);J.setTexture2D(n,0),gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL,n.flipY),gt.pixelStorei(gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),gt.pixelStorei(gt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?gt.texSubImage2D(gt.TEXTURE_2D,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(gt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):gt.texSubImage2D(gt.TEXTURE_2D,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&gt.generateMipmap(gt.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=pt.convert(r.format),u=pt.convert(r.type);let c;if(r.isData3DTexture)J.setTexture3D(r,0),c=gt.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(r,0),c=gt.TEXTURE_2D_ARRAY}gt.pixelStorei(gt.UNPACK_FLIP_Y_WEBGL,r.flipY),gt.pixelStorei(gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),gt.pixelStorei(gt.UNPACK_ALIGNMENT,r.unpackAlignment);const h=gt.getParameter(gt.UNPACK_ROW_LENGTH),f=gt.getParameter(gt.UNPACK_IMAGE_HEIGHT),d=gt.getParameter(gt.UNPACK_SKIP_PIXELS),p=gt.getParameter(gt.UNPACK_SKIP_ROWS),m=gt.getParameter(gt.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;gt.pixelStorei(gt.UNPACK_ROW_LENGTH,v.width),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,v.height),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,t.min.x),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,t.min.y),gt.pixelStorei(gt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?gt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),gt.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,v.data)):gt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v),gt.pixelStorei(gt.UNPACK_ROW_LENGTH,h),gt.pixelStorei(gt.UNPACK_IMAGE_HEIGHT,f),gt.pixelStorei(gt.UNPACK_SKIP_PIXELS,d),gt.pixelStorei(gt.UNPACK_SKIP_ROWS,p),gt.pixelStorei(gt.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&gt.generateMipmap(c),Y.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?J.setTextureCube(t,0):t.isData3DTexture?J.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?J.setTexture2DArray(t,0):J.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,Y.reset(),mt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mj}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===vj?"display-p3":"srgb",e.unpackColorSpace=Qj.workingColorSpace===gj?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===pj?fj:3e3}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===fj?pj:mj}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}(class extends vW{}).prototype.isWebGL1Renderer=!0;class gW extends vU{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}}class yW extends BU{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const bW=new Gz,_W=new Gz,xW=[],wW=new yz,SW=new Gz,EW=new mB,MW=new Dz;class TW extends mB{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new yW(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<n;t++)this.setMatrixAt(t,SW)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new yz),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,bW),wW.copy(t.boundingBox).applyMatrix4(bW),this.boundingBox.union(wW)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Dz),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,bW),MW.copy(t.boundingSphere).applyMatrix4(bW),this.boundingSphere.union(MW)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(EW.geometry=this.geometry,EW.material=this.material,void 0!==EW.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),MW.copy(this.boundingSphere),MW.applyMatrix4(n),!1!==t.ray.intersectsSphere(MW)))for(let i=0;i<r;i++){this.getMatrixAt(i,bW),_W.multiplyMatrices(n,bW),EW.matrixWorld=_W,EW.raycast(t,xW);for(let t=0,n=xW.length;t<n;t++){const n=xW[t];n.instanceId=i,n.object=this,e.push(n)}xW.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new yW(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class AW extends DU{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new NU(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const OW=new mz,PW=new mz,CW=new Gz,kW=new Vz,RW=new Dz;class NW extends vU{constructor(t=new KU,e=new AW){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)OW.fromBufferAttribute(e,t-1),PW.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=OW.distanceTo(PW);t.setAttribute("lineDistance",new WU(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),RW.copy(n.boundingSphere),RW.applyMatrix4(r),RW.radius+=i,!1===t.ray.intersectsSphere(RW))return;CW.copy(r).invert(),kW.copy(t.ray).applyMatrix4(CW);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new mz,u=new mz,c=new mz,h=new mz,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(let n=Math.max(0,o.start),r=Math.min(d.count,o.start+o.count)-1;n<r;n+=f){const r=d.getX(n),i=d.getX(n+1);if(l.fromBufferAttribute(p,r),u.fromBufferAttribute(p,i),kW.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(h);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=f){if(l.fromBufferAttribute(p,n),u.fromBufferAttribute(p,n+1),kW.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}class LW extends lz{constructor(t,e,n,r,i,o,a,s,l){super(t,e,n,r,i,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class IW extends DU{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new NU(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new NU(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fj(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class DW extends IW{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fj(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rj(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new NU(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new NU(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new NU(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function jW(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}class zW{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class UW extends zW{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p;for(let t=0;t!==a;++t)i[t]=v*o[u+t]+g*o[l+t]+y*o[s+t]+b*o[c+t];return i}}class BW extends zW{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=(n-e)/(r-e),c=1-u;for(let t=0;t!==a;++t)i[t]=o[l+t]*c+o[s+t]*u;return i}}class FW extends zW{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class HW{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=jW(e,this.TimeBufferType),this.values=jW(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:jW(t.times,Array),values:jW(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new FW(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new BW(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new UW(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case uj:e=this.InterpolantFactoryMethodDiscrete;break;case cj:e=this.InterpolantFactoryMethodLinear;break;case hj:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uj;case this.InterpolantFactoryMethodLinear:return cj;case this.InterpolantFactoryMethodSmooth:return hj}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===hj,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}HW.prototype.TimeBufferType=Float32Array,HW.prototype.ValueBufferType=Float32Array,HW.prototype.DefaultInterpolation=cj;class WW extends HW{}WW.prototype.ValueTypeName="bool",WW.prototype.ValueBufferType=Array,WW.prototype.DefaultInterpolation=uj,WW.prototype.InterpolantFactoryMethodLinear=void 0,WW.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends HW{}).prototype.ValueTypeName="color";(class extends HW{}).prototype.ValueTypeName="number";class VW extends zW{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let l=t*a;for(let t=l+a;l!==t;l+=4)pz.slerpFlat(i,0,o,l-a,o,l,s);return i}}class GW extends HW{InterpolantFactoryMethodLinear(t){return new VW(this.times,this.values,this.getValueSize(),t)}}GW.prototype.ValueTypeName="quaternion",GW.prototype.DefaultInterpolation=cj,GW.prototype.InterpolantFactoryMethodSmooth=void 0;class qW extends HW{}qW.prototype.ValueTypeName="string",qW.prototype.ValueBufferType=Array,qW.prototype.DefaultInterpolation=uj,qW.prototype.InterpolantFactoryMethodLinear=void 0,qW.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends HW{}).prototype.ValueTypeName="vector";const XW={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ZW{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const YW=new ZW;class $W{constructor(t){this.manager=void 0!==t?t:YW,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}$W.DEFAULT_MATERIAL_NAME="__DEFAULT";class KW extends Error{constructor(t,e){super(t),this.response=e}}class JW extends $W{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=XW.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=Gj("img");function s(){u(),XW.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){u(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function u(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class QW extends $W{constructor(t){super(t)}load(t,e,n,r){const i=new lz,o=new JW(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class tV extends vU{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new NU(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const eV=new Gz,nV=new mz,rV=new mz;class iV{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fj(512,512),this.map=null,this.mapPass=null,this.matrix=new Gz,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IB,this._frameExtents=new Fj(1,1),this._viewportCount=1,this._viewports=[new uz(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;nV.setFromMatrixPosition(t.matrixWorld),e.position.copy(nV),rV.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rV),e.updateMatrixWorld(),eV.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eV),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(eV)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class oV extends iV{constructor(){super(new YB(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aV extends tV{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vU.DEFAULT_UP),this.updateMatrix(),this.target=new vU,this.shadow=new oV}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class sV extends tV{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const lV="\\[\\]\\.:\\/",uV=new RegExp("["+lV+"]","g"),cV="[^"+lV+"]",hV="[^"+lV.replace("\\.","")+"]",fV=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",cV)+/(WCOD+)?/.source.replace("WCOD",hV)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cV)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cV)+"$"),dV=["material","materials","bones","map"];class pV{constructor(t,e,n){this.path=e,this.parsedPath=n||pV.parseTrackName(e),this.node=pV.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new pV.Composite(t,e,n):new pV(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(uV,"")}static parseTrackName(t){const e=fV.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==dV.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=pV.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pV.Composite=class{constructor(t,e,n){const r=n||pV.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},pV.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},pV.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},pV.prototype.GetterByBindingType=[pV.prototype._getValue_direct,pV.prototype._getValue_array,pV.prototype._getValue_arrayElement,pV.prototype._getValue_toArray],pV.prototype.SetterByBindingTypeAndVersioning=[[pV.prototype._setValue_direct,pV.prototype._setValue_direct_setNeedsUpdate,pV.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pV.prototype._setValue_array,pV.prototype._setValue_array_setNeedsUpdate,pV.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pV.prototype._setValue_arrayElement,pV.prototype._setValue_arrayElement_setNeedsUpdate,pV.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pV.prototype._setValue_fromArray,pV.prototype._setValue_fromArray_setNeedsUpdate,pV.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class mV{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Rj(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}var vV;function gV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yV(){yV=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(k([])));w&&w!==n&&r.call(w,a)&&(_=w);var S=b.prototype=g.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,o,a,s){var l=h(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==xV(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?m:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(xV(e)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(M.prototype),u(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new M(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(S),u(S,l,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function bV(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function _V(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){bV(o,r,i,a,s,"next",t)}function s(t){bV(o,r,i,a,s,"throw",t)}a(void 0)}))}}function xV(t){return xV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xV(t)}function wV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MV(r.key),r)}}function SV(t,e,n){return e&&wV(t.prototype,e),n&&wV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function EV(t,e,n){return(e=MV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MV(t){var e=function(t,e){if("object"!==xV(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===xV(e)?e:String(e)}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:MD}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=MD);var TV=SV((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function AV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return OV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OV(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PV(t){var e=new QW;return new Promise((function(n,r){e.load(t,(function(t){return n(t)}),void 0,(function(t){return r(t)}))}))}vV=TV,EV(TV,"CleanupScene",function(){var t=_V(yV().mark((function t(e){var n;return yV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.traverse((function(t){t instanceof mB&&n.push(t)})),n.forEach((function(t){e.remove(t),t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach((function(t){t.map&&t.map.dispose(),t.dispose()})):(t.material.map&&t.material.map.dispose(),t.material.dispose()))})),t.abrupt("return",Promise.resolve(!0));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),EV(TV,"DisposeGeometry",function(){var t=_V(yV().mark((function t(e){return yV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((function(e){vV.DisposeMaterialProps(e).then((function(){t(!0)}))})):vV.DisposeMaterialProps(e.material).then((function(){t(!0)}))),t(!0)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),EV(TV,"DisposeMaterial",(function(t){return new Promise((function(e,n){t&&vV.DisposeMaterialProps(t).then((function(){e(!0)}))}))})),EV(TV,"RemoveFromScene",(function(t,e){return new Promise((function(n,r){var i,o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return gV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gV(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{var a=function(){var e=i.value;e instanceof mB&&(t.remove(e),Promise.all([vV.DisposeGeometry(e.geometry),vV.DisposeMaterial(e.material)]).then((function(){e instanceof TW&&e.instanceMatrix.dispose(),n(!0)})).catch((function(t){r(t)})))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}}))})),EV(TV,"DisposeMaterialProps",(function(t){return new Promise((function(e,n){t.map&&t.map.dispose(),t.lightMap&&t.lightMap.dispose(),t.bumpMap&&t.bumpMap.dispose(),t.normalMap&&t.normalMap.dispose(),t.specularMap&&t.specularMap.dispose(),t.envMap&&t.envMap.dispose(),t.alphaMap&&t.alphaMap.dispose(),t.aoMap&&t.aoMap.dispose(),t.emissiveMap&&t.emissiveMap.dispose(),t.gradientMap&&t.gradientMap.dispose(),t.displacementMap&&t.displacementMap.dispose(),t.metalnessMap&&t.metalnessMap.dispose(),t.roughnessMap&&t.roughnessMap.dispose(),t.dispose(),e(!0)}))}));var CV=function(t){return new Promise((function(e,n){fetch(t).then((function(t){t.ok||n(t.statusText),e(t.url)})).catch((function(t){console.log("error",t),n(t)}))}))};function kV(t,e,n,r,i,o){t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),r=parseFloat(r),i=parseFloat(i),o=parseFloat(o);var a=t/e,s=Math.min(r,t),l=s/a;return(l<i||l>o)&&(s=(l=Math.min(o,Math.max(i,e)))*a),[s=Math.round(s),l=Math.round(l)]}function RV(t){return RV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RV(t)}function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function LV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?NV(Object(n),!0).forEach((function(e){IV(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function IV(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==RV(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==RV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===RV(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var DV={autoRotateSpeed:0,sunAngle:0,sunHeight:30},jV={Weight:.015,Resolution:15,Radius:50,Samples:50,SquaredHeight:5,ShowSatellite:!0,InterpolatedUrl:"",Opacity:1,WaterWeight:.05,Iterations:75e3,WaterResolution:4,WaterSamples:50,WaterRadius:75,WaterOpacity:1,ShowBoundaries:!0,SatelliteScaleUp:!1},zV={Block:"",XColumn:0,YColumn:0,Bbox:null,InterpolatedData:[],BaseHeight:0,BoundaryElevationData:null},UV={basicState:zV,userSettings:jV,sceneSettings:DV,mapSettings:{SatelliteEnabled:!0,SatelliteTexture:null,InterpolatedUrl:"",WaterFlowUrl:""}},BV=new ba("ThreeJs User Settings Machine");BV.observer.subscribe({next:function(t){switch(t.value){case sa:UV=LV(LV({},UV),{},{userSettings:jV});break;case ua:var e=t.event.payload;UV=LV(LV({},UV),{},{userSettings:LV(LV({},UV.userSettings),{},{Weight:e.weight,Resolution:e.resolution,Samples:e.samples,Radius:e.radius,SquaredHeight:e.squaredHeight,ShowSatellite:e.showSatellite,InterpolatedUrl:e.interpolatedUrl,Opacity:e.opacity,WaterWeight:e.waterWeight,Iterations:e.iterations,WaterResolution:e.waterResolution,WaterOpacity:e.waterOpacity,WaterSamples:e.waterSamples,WaterRadius:e.waterRadius,ShowBoundaries:e.showBoundaries,SatelliteScaleUp:e.satelliteScaleUp})}),BV.service.send(pa)}}});var FV=new ba("ThreeJs Camera Settings Machine");FV.observer.subscribe({next:function(t){switch(t.value){case sa:UV=LV(LV({},UV),{},{sceneSettings:DV});break;case ua:var e=t.event.payload;UV=LV(LV({},UV),{},{sceneSettings:LV(LV({},UV.sceneSettings),{},{autoRotateSpeed:e.autoRotateSpeed,sunHeight:e.sunHeight,sunAngle:e.sunAngle})}),FV.service.send(pa)}}});var HV=new ba("ThreeJs Machine");HV.observer.subscribe({next:function(t){switch(t.value){case sa:UV=LV(LV({},UV),{},{basicState:LV(LV({},zV),{},{BoundaryElevationData:null})});break;case ca:if(!Fm.bbox||Fm.bbox.isUnset()){HV.service.send(ma);break}var e=t.event.payload,n={dealer:e.dealer,client:e.client,block:e.block,season:Number.parseInt(e.season),resolution:e.resolution,interpolation_weight:e.weight,max_samples:e.samples,type:"em",status:"clean",column:2,radius:e.radius},r=JSON.stringify(n),i=window.btoa(r),o="http://localhost:3001/api/v1/map/elevation-map?uid=".concat(i);fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){console.log("------------- RESPONSE",t);for(var e,n=t,r=n.interpolation_results.values,i=n.interpolation_results.x_column,o=n.interpolation_results.y_column,a=n.boundary_elevation_dto,s=1e8,l=0;l<r.length;l++)-100!==r[l]&&r[l]<s&&(s=r[l]);e=r.map((function(t){return-100===t||t<s?0:t-s})),console.log("BEFORE FORMAT: ",a);var u=function(t,e,n,r){for(var i=new AW({color:65280}),o=new AW({color:16711680}),a=[],s=[],l=[],u=[],c=[],h=[],f=0;f<e.length;f++){for(var d=e[f],p=n[f],m=[],v=[],g=0;g<d.exterior_ring.length;g++){var y=d.exterior_ring[g],b=Number.parseFloat(p.outer[g]),_=b<=.05?0:b-r,x=YV(UV.userSettings.SquaredHeight,_)+XV,w=GV(jv(t,y[0],y[1]),2),S=w[0],E=w[1];m.push(new mz(S,x,E)),v.push(_)}a.push((new KU).setFromPoints(m)),u.push(v);for(var M=0;M<d.interior_ring.length;M++){for(var T=d.interior_ring[M],A=p.inner[M],O=[],P=[],C=0;C<T.length;C++){var k=T[C],R=Number.parseFloat(A[C]),N=R<=.05?0:R-r,L=YV(UV.userSettings.SquaredHeight,N)+XV,I=GV(jv(t,k[0],k[1]),2),D=I[0],j=I[1];O.push(new mz(D,L,j)),P.push(N)}s.push((new KU).setFromPoints(O)),l.push(P)}}for(var z=0;z<a.length;z++)c.push(new NW(a[z],i)),h.push(u[z]);for(var U=0;U<s.length;U++)c.push(new NW(s[U],o)),h.push(l[U]);return{lines:c,values:h}}(Fm.bbox,Fm.boundary,a,s);console.log("FORMATTED BOUNDARIES INTO LINES",u.values);for(var c=-1e5,h=0;h<e.length;h++)e[h]>c&&(c=e[h]);UV=LV(LV({},UV),{},{basicState:LV(LV({},UV.basicState),{},{InterpolatedData:e,BaseHeight:c,XColumn:i,YColumn:o,BoundaryElevationData:u})}),HV.service.send(pa)})).catch((function(t){Ue("3D Error","Failed to load elevation data, trying to load satellite elevation."),console.log(t),UV=LV(LV({},UV),{},{basicState:LV(LV({},zV),{},{BoundaryElevationData:null})}),HV.service.send(ma)})).catch((function(t){Ue("3D Error","There was an error loading elevation data for this client."),UV=LV(LV({},UV),{},{basicState:LV(LV({},UV.basicState),{},{InterpolatedData:[],BaseHeight:0,XColumn:0,YColumn:0,BoundaryElevationData:null})}),HV.service.send(ma)}))}}});var WV=new ba("ThreeJs Satellite Machine");WV.observer.subscribe({next:function(t){switch(t.value){case sa:UV=LV({},UV);break;case ca:if(!Fm.bbox||Fm.bbox.isUnset()){WV.service.send(ma);break}var e=t.event.payload,n=e.block;if(!1===e.showSatellite){UV=LV(LV({},UV),{},{basicState:LV(LV({},UV.basicState),{},{Block:n,Bbox:e.bbox}),mapSettings:LV(LV({},UV.mapSettings),{},{SatelliteTexture:null})}),WV.service.send(pa);break}(UV.userSettings.SatelliteScaleUp?(r=e.bbox,i="https://api.mapbox.com/styles/v1",o="mapbox",a="satellite-v9",s="@2x?access_token=".concat("sk.eyJ1IjoibWlsdmVydG9uIiwiYSI6ImNrenRhaWd3cTB6anIyd3BrZ3Jzc2czbHMifQ.FvHS5P4tdvx44VsETgedmg","&attribution=false&logo=false"),u=(l=AV(kV(r.width/2,r.height/2,1,1280,1,1280),2))[0],c=l[1],h=function(t){var e=(t.min_x+t.max_x)/2,n=(t.min_y+t.max_y)/2;return[{min_x:t.min_x,min_y:n,max_x:e,max_y:t.max_y},{min_x:e,min_y:n,max_x:t.max_x,max_y:t.max_y},{min_x:t.min_x,min_y:t.min_y,max_x:e,max_y:n},{min_x:e,min_y:t.min_y,max_x:t.max_x,max_y:n}]}(r),f="".concat(i,"/").concat(o,"/").concat(a,"/static/[").concat(h[0].min_x,",").concat(h[0].min_y,",").concat(h[0].max_x,",").concat(h[0].max_y,"]/").concat(u,"x").concat(c).concat(s),d="".concat(i,"/").concat(o,"/").concat(a,"/static/[").concat(h[1].min_x,",").concat(h[1].min_y,",").concat(h[1].max_x,",").concat(h[1].max_y,"]/").concat(u,"x").concat(c).concat(s),p="".concat(i,"/").concat(o,"/").concat(a,"/static/[").concat(h[2].min_x,",").concat(h[2].min_y,",").concat(h[2].max_x,",").concat(h[2].max_y,"]/").concat(u,"x").concat(c).concat(s),m="".concat(i,"/").concat(o,"/").concat(a,"/static/[").concat(h[3].min_x,",").concat(h[3].min_y,",").concat(h[3].max_x,",").concat(h[3].max_y,"]/").concat(u,"x").concat(c).concat(s),v=[CV(f),CV(d),CV(p),CV(m)],new Promise((function(t,e){Promise.all(v).then((function(n){var r={topLeft:n[0],topRight:n[1],bottomLeft:n[2],bottomRight:n[3]},i={topLeft:PV(r.topLeft),topRight:PV(r.topRight),bottomLeft:PV(r.bottomLeft),bottomRight:PV(r.bottomRight)};Promise.all([i.topLeft,i.topRight,i.bottomLeft,i.bottomRight]).then((function(e){var n=AV(e,4),r=n[0],i=n[1],o=n[2],a=n[3],s=document.createElement("canvas"),l=s.getContext("2d");s.width=r.image.width+i.image.width,s.height=r.image.height+o.image.height,l.drawImage(r.image,0,0),l.drawImage(i.image,r.image.width,0),l.drawImage(o.image,0,r.image.height),l.drawImage(a.image,o.image.width,i.image.height);var u=new LW(s);console.log("------------ stitchedTexture",u),t(u)})).catch((function(t){return e(t)}))})).catch((function(t){console.log("error",t),e(t)}))}))):function(t){var e=AV(kV(t.width,t.height,1,1280,1,1280),2),n=e[0],r=e[1],i="".concat("https://api.mapbox.com/styles/v1","/").concat("mapbox","/").concat("satellite-v9","/static/[").concat(t.min_x,",").concat(t.min_y,",").concat(t.max_x,",").concat(t.max_y,"]/").concat(n,"x").concat(r,"@2x?access_token=").concat("sk.eyJ1IjoibWlsdmVydG9uIiwiYSI6ImNrenRhaWd3cTB6anIyd3BrZ3Jzc2czbHMifQ.FvHS5P4tdvx44VsETgedmg","&attribution=false&logo=false"),o=new QW;return new Promise((function(t,e){fetch(i).then((function(n){n.ok||e(n.statusText),o.load(n.url,(function(e){t(e)}))})).catch((function(t){console.log("error",t),e(t)}))}))}(e.bbox)).then((function(t){UV=LV(LV({},UV),{},{basicState:LV(LV({},UV.basicState),{},{Block:n,Bbox:e.bbox}),mapSettings:LV(LV({},UV.mapSettings),{},{SatelliteTexture:t})}),WV.service.send(pa)})).catch((function(t){console.log(t),Ue("3D Error","Failed to load satellite image."),UV=LV(LV({},UV),{},{basicState:LV({},UV.basicState),mapSettings:LV(LV({},UV.mapSettings),{},{SatelliteTexture:null})}),WV.service.send(ma)}))}var r,i,o,a,s,l,u,c,h,f,d,p,m,v}});var VV=new ba("ThreeJs Water Flow Machine");function GV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qV(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}VV.observer.subscribe({next:function(t){switch(t.value){case sa:UV=LV(LV({},UV),{},{mapSettings:LV(LV({},UV.mapSettings),{},{WaterFlowUrl:""})});break;case ca:if(!Fm.bbox||Fm.bbox.isUnset()){VV.service.send(ma);break}var e=t.event.payload,n={dealer:e.dealer,client:e.client,block:e.block,season:Number.parseInt(e.season),iterations:e.iterations,interpolation_weight:e.waterWeight,resolution:e.waterResolution,radius:e.waterRadius,samples:e.waterSamples},r=JSON.stringify(n),i=window.btoa(r),o="http://localhost:3001/api/v1/map/water-sim?uid=".concat(i);fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.arrayBuffer()})).then((function(t){var e=new Blob([t],{type:"image/png"});(new QW).crossOrigin="Anonymous";var n=URL.createObjectURL(e);UV=LV(LV({},UV),{},{mapSettings:LV(LV({},UV.mapSettings),{},{WaterFlowUrl:n})}),VV.service.send(pa)})).catch((function(t){Ue("3D Error","Failed to simulate water relief."),VV.service.send(ma)}))}}});var XV=2,ZV=function(t){for(var e=0;e<t.length;e++)if("Loaded"!==t[e].service.state.value)return!1;return!0},YV=function(t,e){return t<=1?e:e*e*t/100};const $V=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function KV(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return($V[255&t]+$V[t>>8&255]+$V[t>>16&255]+$V[t>>24&255]+"-"+$V[255&e]+$V[e>>8&255]+"-"+$V[e>>16&15|64]+$V[e>>24&255]+"-"+$V[63&n|128]+$V[n>>8&255]+"-"+$V[n>>16&255]+$V[n>>24&255]+$V[255&r]+$V[r>>8&255]+$V[r>>16&255]+$V[r>>24&255]).toLowerCase()}function JV(t,e,n){return Math.max(e,Math.min(n,t))}function QV(t,e,n){return(1-n)*t+n*e}function tG(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function eG(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}Math.PI,Math.PI;class nG{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=d,void(t[e+3]=p);if(c!==p||s!==h||l!==f||u!==d){let t=1-a;const e=s*h+l*f+u*d+c*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,l=l*t+f*i,u=u*t+d*i,c=c*t+p*i,t===1-a){const t=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=t,l*=t,u*=t,c*=t}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return t[e]=a*d+u*c+s*f-l*h,t[e+1]=s*d+u*h+l*c-a*f,t[e+2]=l*d+u*f+a*h-s*c,t[e+3]=u*d-a*c-s*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"YXZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"ZXY":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"ZYX":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"YZX":this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d;break;case"XZY":this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],l=e[2],u=e[6],c=e[10],h=n+a+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-s)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(u-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+u)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(s+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(JV(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class rG{constructor(t=0,e=0,n=0){rG.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(oG.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(oG.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,l=2*(o*r-a*n),u=2*(a*e-i*r),c=2*(i*n-o*e);return this.x=e+s*l+o*c-a*u,this.y=n+s*u+a*l-i*c,this.z=r+s*c+i*u-o*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return iG.copy(this).projectOnVector(t),this.sub(iG)}reflect(t){return this.sub(iG.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(JV(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iG=new rG,oG=new nG;class aG{constructor(t=new rG(1/0,1/0,1/0),e=new rG(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(lG.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(lG.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=lG.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,n=r.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,lG):lG.fromBufferAttribute(r,e),lG.applyMatrix4(t.matrixWorld),this.expandByPoint(lG);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),uG.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),uG.copy(n.boundingBox)),uG.applyMatrix4(t.matrixWorld),this.union(uG)}const r=t.children;for(let t=0,n=r.length;t<n;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,lG),lG.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(vG),gG.subVectors(this.max,vG),cG.subVectors(t.a,vG),hG.subVectors(t.b,vG),fG.subVectors(t.c,vG),dG.subVectors(hG,cG),pG.subVectors(fG,hG),mG.subVectors(cG,fG);let e=[0,-dG.z,dG.y,0,-pG.z,pG.y,0,-mG.z,mG.y,dG.z,0,-dG.x,pG.z,0,-pG.x,mG.z,0,-mG.x,-dG.y,dG.x,0,-pG.y,pG.x,0,-mG.y,mG.x,0];return!!_G(e,cG,hG,fG,gG)&&(e=[1,0,0,0,1,0,0,0,1],!!_G(e,cG,hG,fG,gG)&&(yG.crossVectors(dG,pG),e=[yG.x,yG.y,yG.z],_G(e,cG,hG,fG,gG)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lG).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(lG).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(sG[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),sG[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),sG[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),sG[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),sG[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),sG[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),sG[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),sG[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(sG)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const sG=[new rG,new rG,new rG,new rG,new rG,new rG,new rG,new rG],lG=new rG,uG=new aG,cG=new rG,hG=new rG,fG=new rG,dG=new rG,pG=new rG,mG=new rG,vG=new rG,gG=new rG,yG=new rG,bG=new rG;function _G(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){bG.fromArray(t,o);const a=i.x*Math.abs(bG.x)+i.y*Math.abs(bG.y)+i.z*Math.abs(bG.z),s=e.dot(bG),l=n.dot(bG),u=r.dot(bG);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const xG=new aG,wG=new rG,SG=new rG;class EG{constructor(t=new rG,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):xG.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;wG.subVectors(t,this.center);const e=wG.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(wG,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(SG.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(wG.copy(t.center).add(SG)),this.expandByPoint(wG.copy(t.center).sub(SG))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const MG=new rG,TG=new rG,AG=new rG,OG=new rG,PG=new rG,CG=new rG,kG=new rG;class RG{constructor(t=new rG,e=new rG(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,MG)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=MG.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(MG.copy(this.origin).addScaledVector(this.direction,e),MG.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){TG.copy(t).add(e).multiplyScalar(.5),AG.copy(e).sub(t).normalize(),OG.copy(this.origin).sub(TG);const i=.5*t.distanceTo(e),o=-this.direction.dot(AG),a=OG.dot(this.direction),s=-OG.dot(AG),l=OG.lengthSq(),u=Math.abs(1-o*o);let c,h,f,d;if(u>0)if(c=o*s-a,h=o*a-s,d=i*u,c>=0)if(h>=-d)if(h<=d){const t=1/u;c*=t,h*=t,f=c*(c+o*h+2*a)+h*(o*c+h+2*s)+l}else h=i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;else h=-i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;else h<=-d?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+l):h<=d?(c=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+l):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),f=-c*c+h*(h+2*s)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),f=-c*c+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(TG).addScaledVector(AG,h),f}intersectSphere(t,e){MG.subVectors(t.center,this.origin);const n=MG.dot(this.direction),r=MG.dot(MG)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,MG)}intersectTriangle(t,e,n,r,i){PG.subVectors(e,t),CG.subVectors(n,t),kG.crossVectors(PG,CG);let o,a=this.direction.dot(kG);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}OG.subVectors(this.origin,t);const s=o*this.direction.dot(CG.crossVectors(OG,CG));if(s<0)return null;const l=o*this.direction.dot(PG.cross(OG));if(l<0)return null;if(s+l>a)return null;const u=-o*OG.dot(kG);return u<0?null:this.at(u/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}const NG="srgb",LG="srgb-linear",IG="display-p3-linear",DG="linear",jG="srgb",zG="rec709",UG=7680;class BG{constructor(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m){BG.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m)}set(t,e,n,r,i,o,a,s,l,u,c,h,f,d,p,m){const v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new BG).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/FG.setFromMatrixColumn(t,0).length(),i=1/FG.setFromMatrixColumn(t,1).length(),o=1/FG.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-a*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*u,e[9]=i-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(WG,t,VG)}lookAt(t,e,n){const r=this.elements;return XG.subVectors(t,e),0===XG.lengthSq()&&(XG.z=1),XG.normalize(),GG.crossVectors(n,XG),0===GG.lengthSq()&&(1===Math.abs(n.z)?XG.x+=1e-4:XG.z+=1e-4,XG.normalize(),GG.crossVectors(n,XG)),GG.normalize(),qG.crossVectors(XG,GG),r[0]=GG.x,r[4]=qG.x,r[8]=XG.x,r[1]=GG.y,r[5]=qG.y,r[9]=XG.y,r[2]=GG.z,r[6]=qG.z,r[10]=XG.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],E=r[12],M=r[1],T=r[5],A=r[9],O=r[13],P=r[2],C=r[6],k=r[10],R=r[14],N=r[3],L=r[7],I=r[11],D=r[15];return i[0]=o*x+a*M+s*P+l*N,i[4]=o*w+a*T+s*C+l*L,i[8]=o*S+a*A+s*k+l*I,i[12]=o*E+a*O+s*R+l*D,i[1]=u*x+c*M+h*P+f*N,i[5]=u*w+c*T+h*C+f*L,i[9]=u*S+c*A+h*k+f*I,i[13]=u*E+c*O+h*R+f*D,i[2]=d*x+p*M+m*P+v*N,i[6]=d*w+p*T+m*C+v*L,i[10]=d*S+p*A+m*k+v*I,i[14]=d*E+p*O+m*R+v*D,i[3]=g*x+y*M+b*P+_*N,i[7]=g*w+y*T+b*C+_*L,i[11]=g*S+y*A+b*k+_*I,i[15]=g*E+y*O+b*R+_*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*l*h+i*o*h-r*o*f+r*l*u-i*s*u)+t[11]*(+e*l*c-e*a*f-i*o*c+n*o*f+i*a*u-n*l*u)+t[15]*(-r*a*u-e*s*c+e*a*h+r*o*c-n*o*h+n*s*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],g=c*m*l-p*h*l+p*s*f-a*m*f-c*s*v+a*h*v,y=d*h*l-u*m*l-d*s*f+o*m*f+u*s*v-o*h*v,b=u*p*l-d*c*l+d*a*f-o*p*f-u*a*v+o*c*v,_=d*c*s-u*p*s-d*a*h+o*p*h+u*a*m-o*c*m,x=e*g+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=g*w,t[1]=(p*h*i-c*m*i-p*r*f+n*m*f+c*r*v-n*h*v)*w,t[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*v+n*s*v)*w,t[3]=(c*s*i-a*h*i-c*r*l+n*h*l+a*r*f-n*s*f)*w,t[4]=y*w,t[5]=(u*m*i-d*h*i+d*r*f-e*m*f-u*r*v+e*h*v)*w,t[6]=(d*s*i-o*m*i-d*r*l+e*m*l+o*r*v-e*s*v)*w,t[7]=(o*h*i-u*s*i+u*r*l-e*h*l-o*r*f+e*s*f)*w,t[8]=b*w,t[9]=(d*c*i-u*p*i-d*n*f+e*p*f+u*n*v-e*c*v)*w,t[10]=(o*p*i-d*a*i+d*n*l-e*p*l-o*n*v+e*a*v)*w,t[11]=(u*a*i-o*c*i-u*n*l+e*c*l+o*n*f-e*a*f)*w,t[12]=_*w,t[13]=(u*p*r-d*c*r+d*n*h-e*p*h-u*n*m+e*c*m)*w,t[14]=(d*a*r-o*p*r-d*n*s+e*p*s+o*n*m-e*a*m)*w,t[15]=(o*c*r-u*a*r+u*n*s-e*c*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,l=i+i,u=o+o,c=a+a,h=i*l,f=i*u,d=i*c,p=o*u,m=o*c,v=a*c,g=s*l,y=s*u,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=FG.set(r[0],r[1],r[2]).length();const o=FG.set(r[4],r[5],r[6]).length(),a=FG.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],HG.copy(this);const s=1/i,l=1/o,u=1/a;return HG.elements[0]*=s,HG.elements[1]*=s,HG.elements[2]*=s,HG.elements[4]*=l,HG.elements[5]*=l,HG.elements[6]*=l,HG.elements[8]*=u,HG.elements[9]*=u,HG.elements[10]*=u,e.setFromRotationMatrix(HG),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o,a=2e3){const s=this.elements,l=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),h=(n+r)/(n-r);let f,d;if(2e3===a)f=-(o+i)/(o-i),d=-2*o*i/(o-i);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-i),d=-o*i/(o-i)}return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,o,a=2e3){const s=this.elements,l=1/(e-t),u=1/(n-r),c=1/(o-i),h=(e+t)*l,f=(n+r)*u;let d,p;if(2e3===a)d=(o+i)*c,p=-2*c;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);d=i*c,p=-1*c}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=p,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const FG=new rG,HG=new BG,WG=new rG(0,0,0),VG=new rG(1,1,1),GG=new rG,qG=new rG,XG=new rG;class ZG{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const YG=new BG,$G=new nG;class KG{constructor(t=0,e=0,n=0,r=KG.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(JV(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-JV(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(JV(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-JV(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(JV(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-JV(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return YG.makeRotationFromQuaternion(t),this.setFromRotationMatrix(YG,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return $G.setFromEuler(this),this.setFromQuaternion($G,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}KG.DEFAULT_ORDER="XYZ";class JG{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}class QG{constructor(t,e,n,r,i,o,a,s,l){QG.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,a,s,l)}set(t,e,n,r,i,o,a,s,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*x,i[6]=o*v+a*b+s*w,i[1]=l*p+u*g+c*_,i[4]=l*m+u*y+c*x,i[7]=l*v+u*b+c*w,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*x,i[8]=h*v+f*b+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*o*u-e*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=u*o-a*l,h=a*s-u*i,f=l*i-o*s,d=e*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=c*p,t[1]=(r*l-u*n)*p,t[2]=(a*n-r*o)*p,t[3]=h*p,t[4]=(u*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=f*p,t[7]=(n*s-l*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-r*l,r*s,-r*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(tq.makeScale(t,e)),this}rotate(t){return this.premultiply(tq.makeRotation(-t)),this}translate(t,e){return this.premultiply(tq.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const tq=new QG;let eq=0;const nq=new rG,rq=new nG,iq=new BG,oq=new rG,aq=new rG,sq=new rG,lq=new nG,uq=new rG(1,0,0),cq=new rG(0,1,0),hq=new rG(0,0,1),fq={type:"added"},dq={type:"removed"};class pq extends ZG{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eq++}),this.uuid=KV(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pq.DEFAULT_UP.clone();const t=new rG,e=new KG,n=new nG,r=new rG(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new BG},normalMatrix:{value:new QG}}),this.matrix=new BG,this.matrixWorld=new BG,this.matrixAutoUpdate=pq.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=pq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new JG,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return rq.setFromAxisAngle(t,e),this.quaternion.multiply(rq),this}rotateOnWorldAxis(t,e){return rq.setFromAxisAngle(t,e),this.quaternion.premultiply(rq),this}rotateX(t){return this.rotateOnAxis(uq,t)}rotateY(t){return this.rotateOnAxis(cq,t)}rotateZ(t){return this.rotateOnAxis(hq,t)}translateOnAxis(t,e){return nq.copy(t).applyQuaternion(this.quaternion),this.position.add(nq.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(uq,t)}translateY(t){return this.translateOnAxis(cq,t)}translateZ(t){return this.translateOnAxis(hq,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(iq.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?oq.copy(t):oq.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),aq.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?iq.lookAt(aq,oq,this.up):iq.lookAt(oq,aq,this.up),this.quaternion.setFromRotationMatrix(iq),r&&(iq.extractRotation(r.matrixWorld),rq.setFromRotationMatrix(iq),this.quaternion.premultiply(rq.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(fq)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(dq)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),iq.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),iq.multiply(t.parent.matrixWorld)),t.applyMatrix4(iq),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(aq,t,sq),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(aq,lq,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}pq.DEFAULT_UP=new rG(0,1,0),pq.DEFAULT_MATRIX_AUTO_UPDATE=!0,pq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mq=(new QG).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),vq=(new QG).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),gq={[LG]:{transfer:DG,primaries:zG,toReference:t=>t,fromReference:t=>t},[NG]:{transfer:jG,primaries:zG,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[IG]:{transfer:DG,primaries:"p3",toReference:t=>t.applyMatrix3(vq),fromReference:t=>t.applyMatrix3(mq)},"display-p3":{transfer:jG,primaries:"p3",toReference:t=>t.convertSRGBToLinear().applyMatrix3(vq),fromReference:t=>t.applyMatrix3(mq).convertLinearToSRGB()}},yq=new Set([LG,IG]),bq={enabled:!0,_workingColorSpace:LG,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!yq.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=gq[e].toReference;return(0,gq[n].fromReference)(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return gq[t].primaries},getTransfer:function(t){return""===t?DG:gq[t].transfer}};function _q(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function xq(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const wq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sq={h:0,s:0,l:0},Eq={h:0,s:0,l:0};function Mq(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Tq{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=NG){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,bq.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=bq.workingColorSpace){return this.r=t,this.g=e,this.b=n,bq.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=bq.workingColorSpace){if(t=function(t,e){return(t%e+e)%e}(t,1),e=JV(e,0,1),n=JV(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Mq(i,r,t+1/3),this.g=Mq(i,r,t),this.b=Mq(i,r,t-1/3)}return bq.toWorkingColorSpace(this,r),this}setStyle(t,e=NG){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=NG){const n=wq[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=_q(t.r),this.g=_q(t.g),this.b=_q(t.b),this}copyLinearToSRGB(t){return this.r=xq(t.r),this.g=xq(t.g),this.b=xq(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=NG){return bq.fromWorkingColorSpace(Aq.copy(this),t),65536*Math.round(JV(255*Aq.r,0,255))+256*Math.round(JV(255*Aq.g,0,255))+Math.round(JV(255*Aq.b,0,255))}getHexString(t=NG){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=bq.workingColorSpace){bq.fromWorkingColorSpace(Aq.copy(this),e);const n=Aq.r,r=Aq.g,i=Aq.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=u<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=l,t.l=u,t}getRGB(t,e=bq.workingColorSpace){return bq.fromWorkingColorSpace(Aq.copy(this),e),t.r=Aq.r,t.g=Aq.g,t.b=Aq.b,t}getStyle(t=NG){bq.fromWorkingColorSpace(Aq.copy(this),t);const e=Aq.r,n=Aq.g,r=Aq.b;return t!==NG?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(Sq),this.setHSL(Sq.h+t,Sq.s+e,Sq.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Sq),t.getHSL(Eq);const n=QV(Sq.h,Eq.h,e),r=QV(Sq.s,Eq.s,e),i=QV(Sq.l,Eq.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Aq=new Tq;Tq.NAMES=wq;let Oq=0;class Pq extends ZG{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Oq++}),this.uuid=KV(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tq(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=UG,this.stencilZFail=UG,this.stencilZPass=UG,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),100!==this.blendEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==UG&&(n.stencilFail=this.stencilFail),this.stencilZFail!==UG&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==UG&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Cq extends Pq{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tq(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}class kq{constructor(t=0,e=0){kq.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(JV(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}const Rq=new rG,Nq=new kq;class Lq{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Nq.fromBufferAttribute(this,e),Nq.applyMatrix3(t),this.setXY(e,Nq.x,Nq.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Rq.fromBufferAttribute(this,e),Rq.applyMatrix3(t),this.setXYZ(e,Rq.x,Rq.y,Rq.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Rq.fromBufferAttribute(this,e),Rq.applyMatrix4(t),this.setXYZ(e,Rq.x,Rq.y,Rq.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Rq.fromBufferAttribute(this,e),Rq.applyNormalMatrix(t),this.setXYZ(e,Rq.x,Rq.y,Rq.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Rq.fromBufferAttribute(this,e),Rq.transformDirection(t),this.setXYZ(e,Rq.x,Rq.y,Rq.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=tG(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=eG(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=tG(e,this.array)),e}setX(t,e){return this.normalized&&(e=eG(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=tG(e,this.array)),e}setY(t,e){return this.normalized&&(e=eG(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=tG(e,this.array)),e}setZ(t,e){return this.normalized&&(e=eG(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=tG(e,this.array)),e}setW(t,e){return this.normalized&&(e=eG(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=eG(e,this.array),n=eG(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=eG(e,this.array),n=eG(n,this.array),r=eG(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=eG(e,this.array),n=eG(n,this.array),r=eG(r,this.array),i=eG(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class Iq extends Lq{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Dq extends Lq{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class jq extends Lq{constructor(t,e,n){super(new Float32Array(t),e,n)}}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let zq=0;const Uq=new BG,Bq=new pq,Fq=new rG,Hq=new aG,Wq=new aG,Vq=new rG;class Gq extends ZG{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zq++}),this.uuid=KV(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?Dq:Iq)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new QG).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Uq.makeRotationFromQuaternion(t),this.applyMatrix4(Uq),this}rotateX(t){return Uq.makeRotationX(t),this.applyMatrix4(Uq),this}rotateY(t){return Uq.makeRotationY(t),this.applyMatrix4(Uq),this}rotateZ(t){return Uq.makeRotationZ(t),this.applyMatrix4(Uq),this}translate(t,e,n){return Uq.makeTranslation(t,e,n),this.applyMatrix4(Uq),this}scale(t,e,n){return Uq.makeScale(t,e,n),this.applyMatrix4(Uq),this}lookAt(t){return Bq.lookAt(t),Bq.updateMatrix(),this.applyMatrix4(Bq.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fq).negate(),this.translate(Fq.x,Fq.y,Fq.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new jq(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new aG);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new rG(-1/0,-1/0,-1/0),new rG(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Hq.setFromBufferAttribute(n),this.morphTargetsRelative?(Vq.addVectors(this.boundingBox.min,Hq.min),this.boundingBox.expandByPoint(Vq),Vq.addVectors(this.boundingBox.max,Hq.max),this.boundingBox.expandByPoint(Vq)):(this.boundingBox.expandByPoint(Hq.min),this.boundingBox.expandByPoint(Hq.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new EG);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new rG,1/0);if(t){const n=this.boundingSphere.center;if(Hq.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Wq.setFromBufferAttribute(n),this.morphTargetsRelative?(Vq.addVectors(Hq.min,Wq.min),Hq.expandByPoint(Vq),Vq.addVectors(Hq.max,Wq.max),Hq.expandByPoint(Vq)):(Hq.expandByPoint(Wq.min),Hq.expandByPoint(Wq.max))}Hq.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Vq.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Vq));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Vq.fromBufferAttribute(o,e),a&&(Fq.fromBufferAttribute(t,e),Vq.add(Fq)),r=Math.max(r,n.distanceToSquared(Vq))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Lq(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<a;t++)l[t]=new rG,u[t]=new rG;const c=new rG,h=new rG,f=new rG,d=new kq,p=new kq,m=new kq,v=new rG,g=new rG;function y(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),f.fromArray(r,3*n),d.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),f.sub(c),p.sub(d),m.sub(d);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),g.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(v),l[e].add(v),l[n].add(v),u[t].add(g),u[e].add(g),u[n].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)y(n[t+0],n[t+1],n[t+2])}const _=new rG,x=new rG,w=new rG,S=new rG;function E(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),x.crossVectors(S,e);const n=x.dot(u[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Lq(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new rG,i=new rG,o=new rG,a=new rG,s=new rG,l=new rG,u=new rG,c=new rG;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),d=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,f),i.fromBufferAttribute(e,d),o.fromBufferAttribute(e,p),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),a.add(u),s.add(u),l.add(u),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Vq.fromBufferAttribute(t,e),Vq.normalize(),t.setXYZ(e,Vq.x,Vq.y,Vq.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let i=0,l=e.length;i<l;i++){a=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new Lq(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Gq,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qq=new rG,Xq=new rG,Zq=new BG,Yq=new RG,$q=new EG;class Kq extends pq{constructor(t=new Gq,e=new Cq){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)qq.fromBufferAttribute(e,t-1),Xq.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=qq.distanceTo(Xq);t.setAttribute("lineDistance",new jq(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),$q.copy(n.boundingSphere),$q.applyMatrix4(r),$q.radius+=i,!1===t.ray.intersectsSphere($q))return;Zq.copy(r).invert(),Yq.copy(t.ray).applyMatrix4(Zq);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new rG,u=new rG,c=new rG,h=new rG,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(let n=Math.max(0,o.start),r=Math.min(d.count,o.start+o.count)-1;n<r;n+=f){const r=d.getX(n),i=d.getX(n+1);if(l.fromBufferAttribute(p,r),u.fromBufferAttribute(p,i),Yq.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(h);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=f){if(l.fromBufferAttribute(p,n),u.fromBufferAttribute(p,n+1),Yq.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const Jq=new rG,Qq=new rG;class tX extends Kq{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)Jq.fromBufferAttribute(e,t),Qq.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Jq.distanceTo(Qq);t.setAttribute("lineDistance",new jq(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}function eX(t){return eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eX(t)}function nX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==eX(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==eX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===eX(i)?i:String(i)),r)}var i}var rX=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=new Tq(r),i=new Tq(i);for(var o=n/2,a=e/n,s=e/2,l=[],u=[],c=0,h=0,f=-s;c<=n;c++,f+=a){l.push(-s,0,f,s,0,f),l.push(f,0,-s,f,0,s);var d=c===o?r:i;d.toArray(u,h),h+=3,d.toArray(u,h),h+=3,d.toArray(u,h),h+=3,d.toArray(u,h),h+=3}var p=new Gq;p.setAttribute("position",new jq(l,3)),p.setAttribute("color",new jq(u,4));var m=new Cq({vertexColors:!0,toneMapped:!0,opacity:.25,transparent:!0});this.geometry=p,this.material=m,this.mesh=new tX(p,m)}var e,n;return e=t,n=[{key:"UpdateColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4473924,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8947848;t=new Tq(t),e=new Tq(e);for(var n=this.geometry.attributes.position.count/2,r=[],i=0,o=0;i<=n;i++){var a=i===n?t:e;a.toArray(r,o),o+=3,a.toArray(r,o),o+=3,a.toArray(r,o),o+=3,a.toArray(r,o),o+=3}this.geometry.setAttribute("color",new jq(r,3))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}],n&&nX(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const iX={type:"change"},oX={type:"start"},aX={type:"end"},sX=new Vz,lX=new RB,uX=Math.cos(70*Uj);class cX extends Aj{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new mz,this.cursor=new mz,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",q),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",q),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(iX),n.update(),i=r.NONE},this.update=function(){const e=new mz,c=(new pz).setFromUnitVectors(t.up,new mz(0,1,0)),h=c.clone().invert(),f=new mz,d=new pz,p=new mz,m=2*Math.PI;return function(v=null){const g=n.object.position;e.copy(g).sub(n.target),e.applyQuaternion(c),a.setFromVector3(e),n.autoRotate&&i===r.NONE&&M(function(t){return null!==t?2*Math.PI/60*n.autoRotateSpeed*t:2*Math.PI/60/60*n.autoRotateSpeed}(v)),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let y=n.minAzimuthAngle,w=n.maxAzimuthAngle;isFinite(y)&&isFinite(w)&&(y<-Math.PI?y+=m:y>Math.PI&&(y-=m),w<-Math.PI?w+=m:w>Math.PI&&(w-=m),a.theta=y<=w?Math.max(y,Math.min(w,a.theta)):a.theta>(y+w)/2?Math.max(y,a.theta):Math.min(w,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&x||n.object.isOrthographicCamera?a.radius=N(a.radius):a.radius=N(a.radius*l),e.setFromSpherical(a),e.applyQuaternion(h),g.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),u.set(0,0,0));let S=!1;if(n.zoomToCursor&&x){let r=null;if(n.object.isPerspectiveCamera){const t=e.length();r=N(t*l);const i=t-r;n.object.position.addScaledVector(b,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const t=new mz(_.x,_.y,0);t.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),S=!0;const i=new mz(_.x,_.y,0);i.unproject(n.object),n.object.position.sub(i).add(t),n.object.updateMatrixWorld(),r=e.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(sX.origin.copy(n.object.position),sX.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(sX.direction))<uX?t.lookAt(n.target):(lX.setFromNormalAndCoplanarPoint(n.object.up,n.target),sX.intersectPlane(lX,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),S=!0);return l=1,x=!1,!!(S||f.distanceToSquared(n.object.position)>o||8*(1-d.dot(n.object.quaternion))>o||p.distanceToSquared(n.target)>0)&&(n.dispatchEvent(iX),f.copy(n.object.position),d.copy(n.object.quaternion),p.copy(n.target),S=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",X),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",V),n.domElement.removeEventListener("wheel",G),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",V),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",q),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const o=1e-6,a=new mV,s=new mV;let l=1;const u=new mz,c=new Fj,h=new Fj,f=new Fj,d=new Fj,p=new Fj,m=new Fj,v=new Fj,g=new Fj,y=new Fj,b=new mz,_=new Fj;let x=!1;const w=[],S={};function E(){return Math.pow(.95,n.zoomSpeed)}function M(t){s.theta-=t}function T(t){s.phi-=t}const A=function(){const t=new mz;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),u.add(t)}}(),O=function(){const t=new mz;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),u.add(t)}}(),P=function(){const t=new mz;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),A(2*e*a/i.clientHeight,n.object.matrix),O(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(A(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),O(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function C(t){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(t){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){if(!n.zoomToCursor)return;x=!0;const e=n.domElement.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top,o=e.width,a=e.height;_.x=r/o*2-1,_.y=-i/a*2+1,b.set(_.x,_.y,1).unproject(n.object).sub(n.object.position).normalize()}function N(t){return Math.max(n.minDistance,Math.min(n.maxDistance,t))}function L(t){c.set(t.clientX,t.clientY)}function I(t){d.set(t.clientX,t.clientY)}function D(){if(1===w.length)c.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);c.set(t,e)}}function j(){if(1===w.length)d.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);d.set(t,e)}}function z(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,n=Math.sqrt(t*t+e*e);v.set(0,n)}function U(t){if(1==w.length)h.set(t.pageX,t.pageY);else{const e=Y(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);h.set(n,r)}f.subVectors(h,c).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*f.x/e.clientHeight),T(2*Math.PI*f.y/e.clientHeight),c.copy(h)}function B(t){if(1===w.length)p.set(t.pageX,t.pageY);else{const e=Y(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);p.set(n,r)}m.subVectors(p,d).multiplyScalar(n.panSpeed),P(m.x,m.y),d.copy(p)}function F(t){const e=Y(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);g.set(0,o),y.set(0,Math.pow(g.y/v.y,n.zoomSpeed)),C(y.y),v.copy(g)}function H(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",W),n.domElement.addEventListener("pointerup",V)),function(t){w.push(t)}(t),"touch"===t.pointerType?function(t){switch(Z(t),w.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;D(),i=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;j(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&j(),i=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&D(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(oX)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case 1:if(!1===n.enableZoom)return;!function(t){R(t),v.set(t.clientX,t.clientY)}(t),i=r.DOLLY;break;case 0:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;I(t),i=r.PAN}else{if(!1===n.enableRotate)return;L(t),i=r.ROTATE}break;case 2:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;L(t),i=r.ROTATE}else{if(!1===n.enablePan)return;I(t),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(oX)}(t))}function W(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(Z(t),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;B(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&F(t),n.enablePan&&B(t)}(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&F(t),n.enableRotate&&U(t)}(t),n.update();break;default:i=r.NONE}}(t):function(t){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(t){h.set(t.clientX,t.clientY),f.subVectors(h,c).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*f.x/e.clientHeight),T(2*Math.PI*f.y/e.clientHeight),c.copy(h),n.update()}(t);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(t){g.set(t.clientX,t.clientY),y.subVectors(g,v),y.y>0?C(E()):y.y<0&&k(E()),v.copy(g),n.update()}(t);break;case r.PAN:if(!1===n.enablePan)return;!function(t){p.set(t.clientX,t.clientY),m.subVectors(p,d).multiplyScalar(n.panSpeed),P(m.x,m.y),d.copy(p),n.update()}(t)}}(t))}function V(t){!function(t){delete S[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",V)),n.dispatchEvent(aX),i=r.NONE}function G(t){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(t.preventDefault(),n.dispatchEvent(oX),function(t){R(t),t.deltaY<0?k(E()):t.deltaY>0&&C(E()),n.update()}(t),n.dispatchEvent(aX))}function q(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?M(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?M(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function X(t){!1!==n.enabled&&t.preventDefault()}function Z(t){let e=S[t.pointerId];void 0===e&&(e=new Fj,S[t.pointerId]=e),e.set(t.pageX,t.pageY)}function Y(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return S[e.pointerId]}n.domElement.addEventListener("contextmenu",X),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",G,{passive:!1}),this.update()}}class hX extends mB{constructor(){const t=hX.SkyShader,e=new wB({name:t.name,uniforms:xB.clone(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:1,depthWrite:!1});super(new gB(1,1,1),e),this.isSky=!0}}var fX;function dX(t){return dX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dX(t)}function pX(t){return function(t){if(Array.isArray(t))return vX(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mX(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mX(t,e){if(t){if("string"==typeof t)return vX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vX(t,e):void 0}}function vX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xX(r.key),r)}}function bX(t,e,n){return e&&yX(t.prototype,e),n&&yX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _X(t,e,n){return(e=xX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xX(t){var e=function(t,e){if("object"!==dX(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==dX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===dX(e)?e:String(e)}hX.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new mz},up:{value:new mz(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPosition );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\n\t\t}"};var wX=function(){function t(){var e=this;gX(this,t),_X(this,"scene",new gW),_X(this,"blockMesh",null),_X(this,"boundaries",[]),_X(this,"isInitialized",!1),_X(this,"sceneObjects",[]),_X(this,"gridHelper",null),_X(this,"sky",null),_X(this,"UpdateWithRenderer",(function(t,n,r){e.renderer=new vW({canvas:r,antialias:!0,logarithmicDepthBuffer:!0}),e.renderer.setSize(t,n),e.renderer.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),e.renderer.shadowMap.enabled=!0,e.renderer.sortObjects=!0,e.renderer.toneMappingExposure=1,e.renderer.toneMapping=jD,e.renderer.shadowMap.type=AD,e.camera=new EB(60,t/n,.1,5e4),e.camera.position.set(0,0,0),e.controls=new cX(e.camera,r),e.controls.target.set(0,0,0),e.isInitialized=!0,e.gridHelper=new rX(1e5,350,16777215,16777215),e.gridHelper.mesh.position.set(0,-50,0),e.scene.add(e.gridHelper.mesh),e.sky=new hX,e.sky.scale.setScalar(45e4);var i=e.sky.material.uniforms;i.turbidity.value=7,i.rayleigh.value=2,i.mieCoefficient.value=.001,i.mieDirectionalG.value=.995,e.UpdateSun(50,7),e.scene.add(e.sky),e.renderer.render(e.scene,e.camera)})),_X(this,"AddMeshOutline",(function(t,n){var r=new AW({color:0});r.lineWidth=10;var i=(new KU).setFromPoints([]),o=new NW(i,r);o.position.set(-n.width/2,n.height/2,0),o.rotation.x=Math.PI/2,t.add(o),e.sceneObjects.push(o)})),_X(this,"AddBoundaries",(function(t,n){e.boundaries=[];for(var r=0;r<n.length;r++)e.scene.add(n[r]),e.boundaries.push(n[r]),e.sceneObjects.push(n[r])})),_X(this,"RemoveBoundaries",(function(){var t;0!==e.boundaries.length&&((t=e.scene).remove.apply(t,pX(e.boundaries)),e.sceneObjects=e.sceneObjects.filter((function(t){return!e.boundaries.includes(t)})),e.boundaries=[])})),_X(this,"UpdateCameraPosition",(function(t){var n=function(t){for(var e=[],n=0;n<t.length;n++){for(var r=t[n],i=0,o=0,a=0;a<r.exterior_ring.length;a++){var s=r.exterior_ring[a];i+=s[0],o+=s[1]}e.push([i/r.exterior_ring.length,o/r.exterior_ring.length])}for(var l=0,u=0,c=0;c<e.length;c++){var h=e[c];l+=h[0],u+=h[1]}return[l/e.length,u/e.length]}(Fm.boundary),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||mX(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(jv(t,n[0],n[1]),2),i=r[0],o=r[1];e.camera.position.set(i,i+o,o),e.controls.target.set(i,0,o),e.controls.enablePan=!0,e.controls.panSpeed=1,e.controls.zoomSpeed=4,e.controls.enableDamping=!0,e.controls.enableZoom=!0,e.controls.autoRotate=!0,e.controls.autoRotateSpeed=UV.sceneSettings.autoRotateSpeed,e.controls.minZoom=-999999,e.controls.minDistance=-999999,e.controls.keyPanSpeed=100,e.controls.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},e.controls.update()})),this.scene=new gW,this.light=new sV(16119283,.6),this.light2=new aV(16777215,.8),this.light2.position.set(0,2,-50),this.light2.target.position.set(0,0,0),this.light2.castShadow=!0,this.light2.shadow.camera.near=.1,this.light2.shadow.camera.far=1e4,this.scene.add(this.light2),this.scene.add(this.light)}return bX(t,[{key:"UpdateScene",value:function(t){this.scene=t}},{key:"UpdateSun",value:function(t,e){var n=this.sky.material.uniforms,r=Bj(90-e),i=Bj(t);this.light2.position.setFromSphericalCoords(1,r,i),n.sunPosition.value.copy(this.light2.position),this.sky.material.uniforms=n;var o=new NU(2693394),a=new NU(16777215),s=this.normalize(e,0,10),l=this.normalize(e,2,100),u=(new NU).lerpColors(o,a,s);this.gridHelper.UpdateColors(u,u),this.gridHelper.material.opacity=l,this.light.intensity=.7*this.normalize(e,-10,5),this.light2.intensity=.8*this.normalize(e,-10,5);var c=new NU(7953730),h=new NU(16777215),f=this.normalize(e,0,10),d=(new NU).lerpColors(c,h,f);this.light2.color=d,this.light.color=d}},{key:"normalize",value:function(t,e,n){return e<0&&(n+=0-e,t+=0-e,e=0),t-=e,n-=e,Math.max(0,Math.min(1,t/n))}},{key:"CreateObjects",value:function(t){var e;(e=this.sceneObjects).push.apply(e,pX(t));for(var n=0;n<t.length;n++)this.scene.add(t[n])}},{key:"CreateObject",value:function(t){this.sceneObjects.push(t),this.scene.add(t)}},{key:"CreateMesh",value:function(t,e,n){var r=new mB(t,e);return r.position.set(n.width/2,0,n.height/2),r.scale.set(1,-1,-1),r.rotation.x=Math.PI/2,r.updateMatrixWorld(),r.castShadow=!0,r.receiveShadow=!0,this.blockMesh=r,this.scene.add(this.blockMesh),this.sceneObjects.push(this.blockMesh),r}},{key:"CreateMeshWithMaterial",value:function(t,e,n){var r=new mB(t,e);r.position.set(n.width/2,-25,n.height/2),r.scale.set(1,-1,-1),r.rotation.x=Math.PI/2,this.scene.add(r),this.sceneObjects.push(this.blockMesh)}},{key:"ClearScene",value:function(){var t=this;return new Promise((function(e,n){for(var r=0;r<t.sceneObjects.length;r++)t.scene.remove(t.sceneObjects[r]);t.sceneObjects=[],e(!0)}))}}]),t}(),SX=function(t){return t?1:0},EX=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UV.mapSettings.SatelliteTexture;return SX(""!==t)},MX=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UV.userSettings.InterpolatedUrl;return SX(""!==t)},TX=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UV.mapSettings.WaterFlowUrl;return SX(""!==t)},AX=bX((function t(){gX(this,t)}));fX=AX,_X(AX,"SatelliteMaterial",{texture:UV.mapSettings.SatelliteTexture,material:null}),_X(AX,"InterpolatedMaterial",{url:UV.userSettings.InterpolatedUrl,material:null}),_X(AX,"WaterMaterial",{url:UV.mapSettings.WaterFlowUrl,material:null}),_X(AX,"BaseEmptyMaterial",new DW({color:0,side:2,depthWrite:!0})),_X(AX,"GetAllMaterialsUpdated",(function(){var t=[fX.GetBaseSatelliteMaterial(UV.mapSettings.SatelliteTexture,EX()),fX.GetInterpolatedMaterial(UV.userSettings.InterpolatedUrl,MX()),fX.GetWaterMaterial(UV.mapSettings.WaterFlowUrl,TX())];return Promise.all(t)})),_X(AX,"GetBaseSatelliteMaterial",(function(t,e){return 0===e?fX.BaseEmptyMaterial:1===e?new Promise((function(e,n){if(t!==fX.SatelliteMaterial.texture){var r=new DW({map:t,color:16777215,side:2,depthWrite:!0});r.toneMapped=!1,fX.SatelliteMaterial.texture=t,fX.SatelliteMaterial.material=r,r.needsUpdate=!0,TV.DisposeMaterial(r).then((function(){e(r)}))}else e(fX.SatelliteMaterial.material)})):void 0})),_X(AX,"GetInterpolatedMaterial",(function(t,e){return 0===e?new DW({color:0,side:2,transparent:!0,depthWrite:!0,opacity:0}):1===e?new Promise((function(e,n){t!==fX.InterpolatedMaterial.url?(new QW).load(t,(function(n){var r=new DW({map:n,color:16777215,side:2,transparent:!0,depthWrite:!0,opacity:UV.userSettings.Opacity});r.toneMapped=!1,fX.InterpolatedMaterial.url=t,fX.InterpolatedMaterial.material=r,TV.DisposeMaterial(r).then((function(){e(fX.InterpolatedMaterial.material)}))})):e(fX.InterpolatedMaterial.material)})):void 0})),_X(AX,"GetWaterMaterial",(function(t,e){return 0===e?new DW({color:16777215,side:2,transparent:!0,depthWrite:!0,opacity:0}):1===e?new Promise((function(e,n){t!==fX.WaterMaterial.url?(new QW).load(t,(function(n){var r=new DW({map:n,color:16777215,transparent:!0,side:2,depthWrite:!0,opacity:UV.userSettings.WaterOpacity});r.toneMapped=!1,fX.WaterMaterial.url=t,fX.WaterMaterial.material=r,TV.DisposeMaterial(r).then((function(){e(r)}))})):e(fX.WaterMaterial.material)})):void 0}));var OX=function(t,e,n){if(console.log("RUNNING UpdateBoundariesWithScaledPositions"),n||e!==UV.userSettings.SquaredHeight)for(var r=0;r<t.boundaries.length;r++){for(var i,o,a=null===(i=UV.basicState.BoundaryElevationData)||void 0===i?void 0:i.values[r],s=null==t?void 0:t.boundaries[r],l=null==s||null===(o=s.geometry)||void 0===o||null===(o=o.attributes)||void 0===o||null===(o=o.position)||void 0===o?void 0:o.array,u=0,c=1;c<l.length;c+=3)l[c]=YV(UV.userSettings.SquaredHeight,a[u])+XV,u++;l.needsUpdate=!0,s.geometry.attributes.position.needsUpdate=!0}};function PX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return CX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CX(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const kX=function(t){var e=t.width,r=t.height,i=t.className,o=xa(WV),a=xa(HV),s=xa(BV),l=xa(VV),u=xa(FV),c=PX((0,n.useState)(new wX),2),h=c[0],f=c[1],d=PX((0,n.useState)(""),2),p=d[0],m=d[1],v=PX((0,n.useState)(UV.userSettings.WaterOpacity),2),g=v[0],y=v[1],b=PX((0,n.useState)(5),2),_=b[0],x=b[1],w=PX((0,n.useState)(!1),2),S=w[0],E=w[1];return(0,n.useEffect)((function(){try{var t=document.getElementById("three-js");h.UpdateWithRenderer(e,r,t),f(h)}catch(t){return console.log(t),function(){}}return function(){h.renderer.dispose()}}),[]),(0,n.useEffect)((function(){!function t(){h.renderer.render(h.scene,h.camera),requestAnimationFrame(t),h.controls.update()}()}),[h]),(0,n.useEffect)((function(){h.controls.autoRotateSpeed=UV.sceneSettings.autoRotateSpeed,h.UpdateSun(UV.sceneSettings.sunAngle,UV.sceneSettings.sunHeight)}),[u]),(0,n.useEffect)((function(){ZV([WV,HV])&&null!==h.blockMesh&&(function(t,e){if(""!==UV.userSettings.InterpolatedUrl){var n=t.blockMesh.material;n[1].opacity=UV.userSettings.Opacity,n[1].needsUpdate=!0}e!==UV.userSettings.InterpolatedUrl&&AX.GetAllMaterialsUpdated().then((function(e){t.blockMesh.material=e,t.blockMesh.material.needsUpdate=!0}))}(h,p),m(UV.userSettings.InterpolatedUrl))}),[s]),(0,n.useEffect)((function(){ZV([WV,HV])&&null!==h.blockMesh&&g!==UV.userSettings.WaterOpacity&&(function(t){""!==UV.mapSettings.WaterFlowUrl&&(t.blockMesh.material[2].opacity=UV.userSettings.WaterOpacity,t.blockMesh.material[2].needsUpdate=!0)}(h),y(UV.userSettings.WaterOpacity))}),[s]),(0,n.useEffect)((function(){ZV([WV,HV,VV])&&null!==h.blockMesh&&function(t){AX.GetAllMaterialsUpdated().then((function(e){t.blockMesh.material=e,t.blockMesh.material.needsUpdate=!0}))}(h)}),[l]),(0,n.useEffect)((function(){ZV([WV,HV])&&h.isInitialized&&null!==h.blockMesh&&(function(t,e){if(e!==UV.userSettings.SquaredHeight&&UV.basicState.InterpolatedData.length>0){for(var n=t.blockMesh.geometry.getAttribute("position"),r=0;r<n.count;r++)n.setZ(r,YV(UV.userSettings.SquaredHeight,UV.basicState.InterpolatedData[r]));n.needsUpdate=!0,t.blockMesh.geometry.attributes.position.needsUpdate=!0,t.blockMesh.geometry.computeVertexNormals()}}(h,_),x(UV.userSettings.SquaredHeight),null!==UV.basicState.BoundaryElevationData&&(UV.userSettings.ShowBoundaries||S)&&OX(h,_,!1))}),[s]),(0,n.useEffect)((function(){if(ZV([WV,HV])&&h.isInitialized&&null!==h.blockMesh&&null!==UV.basicState.BoundaryElevationData&&UV.userSettings.ShowBoundaries!==S){if(UV.userSettings.ShowBoundaries)return h.RemoveBoundaries(),h.AddBoundaries(Fm.bbox,UV.basicState.BoundaryElevationData.lines),OX(h,_,!0),void E(!0);h.RemoveBoundaries(),E(!1)}}),[s]),(0,n.useEffect)((function(){ZV([WV,HV])&&h.isInitialized&&h.ClearScene().then((function(){(function(t){return new Promise((function(e,n){var r=Fm.bbox,i=UV.basicState.InterpolatedData,o=UV.basicState.XColumn-1,a=UV.basicState.YColumn-1;(o<=0||a<=0)&&(o=r.width/UV.userSettings.Resolution,a=r.height/UV.userSettings.Resolution);var s=new zB(r.width,r.height,o,a);if(0===i.length)for(var l=0;l<s.attributes.position.count;l++)i[l]=0;for(var u=0;u<s.attributes.position.count;u++)s.attributes.position.setZ(u,YV(UV.userSettings.SquaredHeight,i[u]));s.computeVertexNormals(),s.computeTangents(),s.normalizeNormals(),s.addGroup(0,s.index.count,0),s.addGroup(0,s.index.count,1),s.addGroup(0,s.index.count,2),s.attributes.position.needsUpdate=!0,AX.GetAllMaterialsUpdated().then((function(n){var i=t.CreateMesh(s,n,r);t.AddMeshOutline(i,r),e("Done")})).catch((function(t){console.log(t),n(t)}))}))})(h).then((function(){if(h.UpdateCameraPosition(Fm.bbox),UV.userSettings.ShowBoundaries){var t;if(null===UV.basicState.BoundaryElevationData)return;h.AddBoundaries(Fm.bbox,null===(t=UV.basicState.BoundaryElevationData)||void 0===t?void 0:t.lines),OX(h,_,!0)}}))}))}),[o,a]),n.createElement("canvas",{id:"three-js",className:xe(i)+" justify-start"})},RX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75H12a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))})),NX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))})),LX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{d:"M15.75 8.25a.75.75 0 01.75.75c0 1.12-.492 2.126-1.27 2.812a.75.75 0 11-.992-1.124A2.243 2.243 0 0015 9a.75.75 0 01.75-.75z"}),n.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM4.575 15.6a8.25 8.25 0 009.348 4.425 1.966 1.966 0 00-1.84-1.275.983.983 0 01-.97-.822l-.073-.437c-.094-.565.25-1.11.8-1.267l.99-.282c.427-.123.783-.418.982-.816l.036-.073a1.453 1.453 0 012.328-.377L16.5 15h.628a2.25 2.25 0 011.983 1.186 8.25 8.25 0 00-6.345-12.4c.044.262.18.503.389.676l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 01-1.652.928l-.679-.906a1.125 1.125 0 00-1.906.172L4.575 15.6z",clipRule:"evenodd"}))})),IX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M8.5 3.528v4.644c0 .729-.29 1.428-.805 1.944l-1.217 1.216a8.75 8.75 0 013.55.621l.502.201a7.25 7.25 0 004.178.365l-2.403-2.403a2.75 2.75 0 01-.805-1.944V3.528a40.205 40.205 0 00-3 0zm4.5.084l.19.015a.75.75 0 10.12-1.495 41.364 41.364 0 00-6.62 0 .75.75 0 00.12 1.495L7 3.612v4.56c0 .331-.132.649-.366.883L2.6 13.09c-1.496 1.496-.817 4.15 1.403 4.475C5.961 17.852 7.963 18 10 18s4.039-.148 5.997-.436c2.22-.325 2.9-2.979 1.403-4.475l-4.034-4.034A1.25 1.25 0 0113 8.172v-4.56z",clipRule:"evenodd"}))}));var DX={loaded:n.createElement(LX,{key:"sstg",className:"h-5 w-5 mt-[2px] text-green-500"}),loading:n.createElement(LX,{key:"ssto",className:"h-5 w-5 mt-[2px] text-orange-500 animate-pulse"}),failed:n.createElement(LX,{key:"sstr",className:"h-5 w-5 mt-[2px] text-gray-500"}),empty:n.createElement(LX,{key:"sstg",className:"h-5 w-5 mt-[2px] text-gray-500"})},jX={loaded:n.createElement(yt,{key:"mstg",className:"h-5 w-5 mt-[2px] text-green-500"}),loading:n.createElement(yt,{key:"msto",className:"h-5 w-5 mt-[2px] text-orange-500 animate-pulse"}),failed:n.createElement(yt,{key:"mstr",className:"h-5 w-5 mt-[2px] text-gray-500"}),empty:n.createElement(yt,{key:"mstg",className:"h-5 w-5 mt-[2px] text-gray-500"})},zX={loaded:n.createElement(IX,{key:"wstg",className:"h-5 w-5 mt-[2px] text-green-500"}),loading:n.createElement(IX,{key:"wsto",className:"h-5 w-5 mt-[2px] text-orange-500 animate-pulse"}),failed:n.createElement(IX,{key:"wstr",className:"h-5 w-5 mt-[2px] text-gray-500"}),empty:n.createElement(IX,{key:"wstg",className:"h-5 w-5 mt-[2px] text-gray-500"})},UX=function(t){switch(t.service.state.event.type){case ma:return zX.failed;case pa:return zX.loaded;case da:return zX.loading;default:return zX.empty}};const BX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))})),FX=n.forwardRef((function({title:t,titleId:e,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":e},r),t?n.createElement("title",{id:e},t):null,n.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}));var HX=function(t){return n.createElement("div",{className:""+t.class},n.createElement("button",{onClick:function(e){return t.SetState(!t.State)},className:xe("my-2 w-full bg-gray-100 hover:bg-gray-200 border-b-[1px] border-gray-200")},n.createElement("div",{className:"flex py-2 align-middle justify-between"},n.createElement("div",{className:"flex ml-2 space-x-2"},t.State?n.createElement(BX,{className:xe("h-5 w-5 pt-1 text-gray-400 text-center")}):n.createElement(FX,{className:xe("h-5 w-5 pt-1 text-gray-400 text-center")}),n.createElement("legend",{className:"font-medium text-gray-900"},t.Title)),n.createElement("div",{className:"flex space-x-2 mr-2"},0===t.Machines.length?null:n.createElement(n.Fragment,null,n.createElement("p",null,"Status: "),t.Machines)))))};function WX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return VX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VX(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var GX=function(t){var e,r,i=xa(WV),o=xa(HV),a=ja.client,s=null===(e=a.unwrapOr(null))||void 0===e?void 0:e.block(),l=null===(r=a.unwrapOr(null))||void 0===r?void 0:r.season(),u=WX((0,n.useState)(!0),2),c=u[0],h=u[1],f=WX((0,n.useState)(!1),2),d=f[0],p=f[1],m=WX((0,n.useState)(UV.userSettings.Resolution),2),v=m[0],g=m[1],y=WX((0,n.useState)(UV.userSettings.Weight),2),b=y[0],_=y[1],x=WX((0,n.useState)(UV.userSettings.Samples),2),w=x[0],S=x[1],E=WX((0,n.useState)(UV.userSettings.Radius),2),M=E[0],T=E[1],A=WX((0,n.useState)(UV.userSettings.SquaredHeight),2),O=A[0],P=A[1],C=WX((0,n.useState)([jX.empty,DX.empty]),2),k=C[0],R=C[1];return(0,n.useEffect)((function(){if(void 0===s)return function(){p(!1)};BV.service.send({type:fa,payload:{resolution:v,weight:b,radius:M,samples:w,squaredHeight:O,showSatellite:UV.userSettings.ShowSatellite,interpolatedUrl:UV.userSettings.InterpolatedUrl,opacity:UV.userSettings.Opacity,waterWeight:UV.userSettings.WaterWeight,iterations:UV.userSettings.Iterations,waterResolution:UV.userSettings.WaterResolution,waterOpacity:UV.userSettings.WaterOpacity,showBoundaries:UV.userSettings.ShowBoundaries,satelliteScaleUp:UV.userSettings.SatelliteScaleUp}})}),[v,b,w,M,O]),(0,n.useEffect)((function(){var t=[jX.loading,DX.loading];return t[0]=function(t){switch(console.log("MOOOOOOOOOOOOO",t.service.state),t.service.state.event.type){case ma:return jX.failed;case pa:return jX.loaded;case da:return jX.loading;default:return jX.empty}}(HV),t[1]=function(t){switch(t.service.state.event.type){case ma:return DX.failed;case pa:return DX.loaded;case da:return DX.loading;default:return DX.empty}}(WV),R(t),HV.service.state.value===ca&&p(!0),WV.service.state.value===ca&&p(!0),HV.service.state.value===ha&&WV.service.state.value===ha||HV.service.state.value===sa||WV.service.state.value===sa?p(!1):void 0}),[i,o]),n.createElement(n.Fragment,null,n.createElement(HX,{Title:"Mesh Settings",Machines:k,State:c,SetState:h,class:""}),c?n.createElement("div",{className:"flex flex-col space-y-3"},n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex lbl-ring-outer mt-4 justify-between"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Squared Percentage of Height"),n.createElement("p",{className:"flex text-sm w-4 mr-2 space-between"},O),n.createElement("input",{className:"w-full flex",id:"scale",type:"range",min:0,max:200,value:O,onInput:function(t){P(parseFloat(t.target.value))},step:1})),t.simpleMode?null:n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"flex flex-row"},n.createElement("div",{className:"lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Mesh Resolution"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"meshResolution",name:"meshResolution",min:6,max:30,step:1,selected:v,setSelected:g})),n.createElement("div",{className:" lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Weight"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"weight",name:"weight",min:1e-7,max:2,step:.01,selected:b,setSelected:_}))),n.createElement("div",{className:"flex flex-row"},n.createElement("div",{className:"lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Radius"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"meshResolution",name:"meshResolution",min:5,max:1e3,step:1,selected:M,setSelected:T})),n.createElement("div",{className:" lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Samples"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"weight",name:"weight",min:5,max:1e3,step:1,selected:w,setSelected:S}))))),n.createElement(kg,{label:"Generate Mesh",isLoading:d,onClick:function(){var t,e;HV.reset(),HV.service.send({type:da,payload:{dealer:null===(t=a.unwrapOr(null))||void 0===t?void 0:t.dealer(),client:null===(e=a.unwrapOr(null))||void 0===e?void 0:e.client(),block:s,season:l,weight:UV.userSettings.Weight,resolution:UV.userSettings.Resolution,radius:UV.userSettings.Radius,samples:UV.userSettings.Samples}}),WV.reset(),WV.service.send({type:da,payload:{block:s,bbox:Fm.bbox,showSatellite:UV.userSettings.ShowSatellite}})},activeClass:"mt-7 p-2 text-normal bg-green-50 border-green-500 text-green-900 w-full",inactiveClass:"mt-7 p-2 text-normal w-full"})):null)};function qX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return XX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XX(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const ZX=function(){var t,e;_a([Fa]);var r=xa(km),i=xa(WV),o=xa(HV),a=xa(VV),s=qX((0,n.useState)([1400,900]),2),l=(s[0],s[1]),u=(0,n.useRef)(null),c=qX((0,n.useState)({width:window.innerWidth,height:window.innerHeight}),2),h=c[0],f=c[1],d=ja.client,p=null===(t=d.unwrapOr(null))||void 0===t?void 0:t.block(),m=null===(e=d.unwrapOr(null))||void 0===e?void 0:e.season(),v=qX((0,n.useState)(UV.userSettings.Opacity),2),g=v[0],y=v[1],b=qX((0,n.useState)(!1),2),_=b[0],x=b[1],w=qX((0,n.useState)(!0),2),S=w[0],E=w[1],M=qX((0,n.useState)(UV.userSettings.ShowBoundaries),2),T=M[0],A=M[1],O=qX((0,n.useState)(UV.userSettings.ShowSatellite),2),P=O[0],C=O[1],k=qX((0,n.useState)(UV.userSettings.SatelliteScaleUp),2),R=k[0],N=(k[1],qX((0,n.useState)(Date.now()),2)),L=N[0],I=(N[1],qX((0,n.useState)(UV.userSettings.WaterWeight),2)),D=I[0],j=I[1],z=qX((0,n.useState)(UV.userSettings.Iterations),2),U=z[0],B=z[1],F=qX((0,n.useState)(UV.userSettings.WaterSamples),2),H=F[0],W=F[1],V=qX((0,n.useState)(UV.userSettings.WaterRadius),2),G=V[0],q=V[1],X=qX((0,n.useState)(UV.userSettings.WaterResolution),2),Z=X[0],Y=X[1],$=qX((0,n.useState)(UV.userSettings.WaterOpacity),2),K=$[0],J=$[1],Q=dl.toolbarState.mapMenu,tt=qX((0,n.useState)(!1),2),et=tt[0],nt=tt[1],rt=qX((0,n.useState)(!0),2),it=rt[0],ot=rt[1],at=qX((0,n.useState)(!1),2),st=at[0],lt=at[1],ut=qX((0,n.useState)(UV.sceneSettings.autoRotateSpeed),2),ct=ut[0],ht=ut[1],ft=qX((0,n.useState)(UV.sceneSettings.sunAngle),2),dt=ft[0],pt=ft[1],mt=qX((0,n.useState)(UV.sceneSettings.sunHeight),2),vt=mt[0],gt=mt[1],yt=qX((0,n.useState)([]),2),bt=yt[0],_t=yt[1],xt=qX((0,n.useState)({menuName:"NA",menuType:-1}),2),wt=xt[0],St=xt[1],Et=qX((0,n.useState)(!0),2),Mt=Et[0],Tt=Et[1],At=[{menuName:Gs.Default,menuType:0},{menuName:Gs.Gradient,menuType:1},{menuName:Gs.BlackAndWhite,menuType:2}],Ot=qX((0,n.useState)(At[0]),2),Pt=Ot[0],Ct=Ot[1],kt=function(t){switch(t.menuName){case Gs.Default:return Gs.Default;case Gs.Gradient:return Gs.Gradient;case Gs.BlackAndWhite:return Gs.BlackAndWhite;default:return Gs.Default}};(0,n.useEffect)((function(){FV.service.send({type:fa,payload:{autoRotateSpeed:ct,sunAngle:dt,sunHeight:vt}})}),[ct,dt,vt]);var Rt=function(t,e){e(parseFloat(t.target.value))};return(0,n.useEffect)((function(){var t=[zX.loading];return t[0]=UX(VV),"Empty"===VV.service.state.value&&x(!1),_t(t),"Loading"===VV.service.state.value&&x(!0),"Loaded"===VV.service.state.value&&x(!1),_t(t)}),[L,a]),(0,n.useEffect)((function(){var t,e=null===(t=Ds.maps.soilMapUrls[wt.menuName])||void 0===t?void 0:t.url(kt(Pt));void 0===e&&(e=""),BV.service.send({type:fa,payload:{weight:UV.userSettings.Weight,resolution:UV.userSettings.Resolution,radius:UV.userSettings.Radius,samples:UV.userSettings.Samples,squaredHeight:UV.userSettings.SquaredHeight,showSatellite:P,interpolatedUrl:e,opacity:g,waterWeight:D,iterations:U,waterResolution:Z,waterOpacity:K,waterSamples:H,waterRadius:G,showBoundaries:T,satelliteScaleUp:R}})}),[wt,g,D,U,Z,K,T,R,Pt]),(0,n.useEffect)((function(){var t,e;UV.basicState.Bbox!==Fm.bbox&&(WV.reset(),WV.service.send({type:da,payload:{block:p,bbox:Fm.bbox,showSatellite:P}}),HV.reset(),HV.service.send({type:da,payload:{dealer:null===(t=d.unwrapOr(null))||void 0===t?void 0:t.dealer(),client:null===(e=d.unwrapOr(null))||void 0===e?void 0:e.client(),block:p,season:m,weight:UV.userSettings.Weight,resolution:UV.userSettings.Resolution,radius:UV.userSettings.Radius,samples:UV.userSettings.Samples}}),VV.reset())}),[r]),(0,n.useEffect)((function(){WV.reset(),WV.service.send({type:da,payload:{block:p,bbox:Fm.bbox,showSatellite:P}})}),[P]),(0,n.useEffect)((function(){var t;if(ZV([WV,HV])){var e=null===(t=Ds.maps.soilMapUrls[wt.menuName])||void 0===t?void 0:t.url(kt(Pt));void 0===e&&(e=""),BV.service.send({type:fa,payload:{weight:UV.userSettings.Weight,resolution:UV.userSettings.Resolution,radius:UV.userSettings.Radius,samples:UV.userSettings.Samples,squaredHeight:UV.userSettings.SquaredHeight,showSatellite:P,interpolatedUrl:e,opacity:g,waterWeight:UV.userSettings.WaterWeight,iterations:UV.userSettings.Iterations,waterResolution:UV.userSettings.WaterResolution,waterOpacity:UV.userSettings.WaterOpacity,waterSamples:UV.userSettings.WaterSamples,waterRadius:UV.userSettings.WaterRadius,showBoundaries:T}})}}),[i,o]),(0,n.useEffect)((function(){return l([u.current.clientWidth,u.current.clientHeight])}),[h]),(0,n.useEffect)((function(){var t=function(){f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),n.createElement("div",{className:"overflow-hidden w-full h-full"},n.createElement("div",{className:"flex overflow-hidden flex-col justify-between text-gray-700 h-full w-screen relative space-x-4"},n.createElement("header",{className:"flex bg-gray-100 h-20 w-screen min-h-[75px] top-16 sticky"},n.createElement("button",{className:"flex items-center justify-center bg-gray-100 h-full w-[4.5rem]",onClick:function(t){return E(!S)}},S?n.createElement(RX,{className:"flex bg-gray-50 hover:bg-gray-200 p-5 w-[4.5rem] drop-shadow-md h-full justify-center"}):n.createElement(NX,{className:"flex hover:bg-gray-200 p-5 w-[4.5rem] h-full justify-center"})),n.createElement("h1",{className:"flex self-center mb-1 ml-6 font-medium text-2xl "},p||"No Client"),n.createElement("div",{className:"flex absolute overflow-y-scroll scroll-auto flex-col drop-shadow-sm min-w-[375px] max-h-[800px] max-w-[500px] mt-[4.6rem]"},n.createElement("div",{className:xe("border-r-[1px] border-b-[1px] border-gray-200 p-4 bg-gray-50",S?"":"hidden")},n.createElement("div",{className:"flex justify-between align-middle"},n.createElement(HX,{class:"w-full",Title:"General Settings",Machines:[],State:it,SetState:ot}),n.createElement("button",{className:"p-2 my-2 w-[8rem] border-l-[1px] border-b-[1px] border-gray-200 bg-gray-100 hover:bg-gray-200",onClick:function(t){return Tt(!Mt)}},n.createElement("legend",{className:"text-gray-700 text-sm font-medium"},Mt?"Simple":"Advanced"))),it?n.createElement("div",{className:"w-full mt-4"},n.createElement("div",{className:"flex flex-row m-0 w-full justify-between"},n.createElement("div",{className:"lbl-ring-outer mb-1 w-1/2"},n.createElement("label",{htmlFor:"map",className:"lbl-sm lbl-ring-inner"},"Map Variant"),n.createElement(wl,{name:"map",className:"text-xs w-full rounded border-gray-200",menu:At,selected:Pt,setSelected:Ct})),n.createElement("div",{className:"lbl-ring-outer mb-1 w-52"},n.createElement("label",{htmlFor:"map",className:"lbl-sm lbl-ring-inner"},"Map"),n.createElement(wl,{name:"map",className:"text-xs w-full rounded border-gray-200",menu:Q,selected:wt,setSelected:St}))),n.createElement("div",{className:"lbl-ring-outer mb-1"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Map Opacity"),n.createElement("input",{className:"w-full",id:"opacity",type:"range",min:0,max:1,value:g,onInput:function(t){return Rt(t,y)},step:.001})),n.createElement("div",{className:"lbl-ring-outer mb-1 flex justify-between items-center"},n.createElement("label",{htmlFor:"difference",className:"text-sm"},"Show Boundaries"),n.createElement("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:T,onChange:function(t){return A(!T)}})),n.createElement("div",{className:"flex space-x-2"},n.createElement("div",{className:"lbl-ring-outer w-full mb-1 flex justify-between items-center"},n.createElement("label",{htmlFor:"difference",className:"text-sm"},"Show Satellite"),n.createElement("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:P,onChange:function(t){C(!P)}}))),n.createElement("div",null)):null,n.createElement(HX,{class:"w-full",Title:"Scene Settings",Machines:[],State:st,SetState:lt}),st?n.createElement("div",{className:"w-full mt-4"},n.createElement("div",{className:"lbl-ring-outer mb-1"},n.createElement("label",{htmlFor:"difference",className:"bg-gray-100 lbl-sm lbl-ring-inner"},"Camera Rotation Speed"),n.createElement("input",{className:"w-full",id:"waterOpacity",type:"range",min:0,max:2,value:ct,onInput:function(t){return Rt(t,ht)},step:.001})),n.createElement("div",{className:"lbl-ring-outer mb-1"},n.createElement("label",{htmlFor:"difference",className:"bg-gray-100 lbl-sm lbl-ring-inner"},"Sun Height"),n.createElement("input",{className:"w-full",id:"waterOpacity",type:"range",min:-1,max:45,value:vt,onInput:function(t){return Rt(t,gt)},step:.05})),n.createElement("div",{className:"lbl-ring-outer mb-1"},n.createElement("label",{htmlFor:"difference",className:"bg-gray-100 lbl-sm lbl-ring-inner"},"Sun Angle"),n.createElement("input",{className:"w-full",id:"waterOpacity",type:"range",min:-180,max:180,value:dt,onInput:function(t){return Rt(t,pt)},step:.05}))):null,n.createElement(GX,{simpleMode:Mt}),n.createElement(HX,{class:"",Title:"Water Relief Settings",Machines:bt,State:et,SetState:nt}),et?n.createElement("div",{className:"w-full mt-4"},n.createElement("div",{className:"lbl-ring-outer"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Iterations"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"iterations",name:"iterations",min:5e3,max:4e5,step:1,selected:U,setSelected:B})),n.createElement("div",{className:"flex flex-row"},n.createElement("div",{className:"lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Water Resolution"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"waterWeight",name:"waterWeight",min:1,max:50,step:1,selected:Z,setSelected:Y})),n.createElement("div",{className:"lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Weight"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"waterWeight",name:"waterWeight",min:1e-7,max:2,step:.01,selected:D,setSelected:j}))),Mt?null:n.createElement("div",{className:"flex flex-row"},n.createElement("div",{className:"lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Radius"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"meshResolution",name:"meshResolution",min:5,max:1e3,step:1,selected:G,setSelected:q})),n.createElement("div",{className:" lbl-ring-outer w-1/2"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Interpolation Samples"),n.createElement(Ol,{className:"text-xs w-full rounded border-gray-200",id:"weight",name:"weight",min:5,max:1e3,step:1,selected:H,setSelected:W}))),n.createElement("div",{className:"lbl-ring-outer mb-4"},n.createElement("label",{htmlFor:"difference",className:"lbl-sm lbl-ring-inner"},"Water Relief Opacity"),n.createElement("input",{className:"w-full",id:"waterOpacity",type:"range",min:0,max:1,value:K,onInput:function(t){return Rt(t,J)},step:.001}))):null,n.createElement(kg,{label:"Simulate Water Relief",isLoading:_,onClick:function(){!function(){var t,e;VV.reset(),VV.service.send({type:da,payload:{dealer:null===(t=d.unwrapOr(null))||void 0===t?void 0:t.dealer(),client:null===(e=d.unwrapOr(null))||void 0===e?void 0:e.client(),block:p,season:m,iterations:U,waterWeight:D,waterResolution:Z,waterSamples:H,waterRadius:G}});var n=[zX.loading];n[0]=UX(VV),_t(n),x(!0)}()},activeClass:"mt-2 p-2 text-normal bg-green-50 border-blue-500 text-blue-900 w-full",inactiveClass:"mt-2 p-2 text-normal w-full"})))),n.createElement("div",{id:"threeJsDiv",ref:u,className:"flex h-full w-full bg-gray-100 overflow-y-hidden"},n.createElement(kX,{className:"flex h-full w-full bg-blue-50",width:.9*h.width,height:.95*h.height}))))};var YX={data:null,error:null},$X=new ba("Network Soil Fusion Machine");$X.observer.subscribe({next:function(t){switch(t.value){case sa:YX={data:null,error:null};break;case ca:var e=t.event.payload;if(!e.isJust)return void $X.service.send({type:ma});var n=(e=e.value).getSoilFusionData();if(!n)return console.warn("No soil fusion meta data found"),void $X.service.send({type:ma});fetch("http://localhost:3001/api/v1/data/csv/".concat(n.uid),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Network response was not ok, status: ".concat(t.status," ").concat(t.statusText));return t.json()})).then((function(t){YX.data={csv:t,meta:n},$X.service.send({type:pa})})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),YX.error=t.message,$X.service.send({type:ma})}))}}}),$X.observer.subscribe({next:function(t){t.event.type===pa&&(Ds.data.soilFusion={type:ps.SoilFusion,csv:YX.data.csv},em.reset(),em.service.send(da))}});var KX={data:null,error:null},JX=new ba("Ping Machine");JX.observer.subscribe({next:function(t){switch(t.value){case sa:KX={data:null,error:null};break;case ua:fetch("http://localhost:3001/api/v1/core/check").then((function(t){if(!t.ok)throw console.log(t),new Error("Network response was not ok, status: ".concat(t.status," ").concat(t.statusText))})).then((function(t){KX.data=t,JX.service.send({type:pa})})).catch((function(t){console.error("There has been a problem with your fetch operation:",t),KX.error=t.message,JX.service.send({type:ma})}))}t.event.type===ma&&Ue("Ping Machine","Could not ping the server")}}),Object.defineProperty(Array.prototype,"first",{value:function(){return this.find(Boolean)}});const QX=function(){var t=X();return(0,n.useEffect)((function(){Ne.next(t)}),[t]),(0,n.useEffect)((function(){var t=function(){JX.service.send({type:fa}),ka.service.send({type:da})},e=setInterval(t,6e4);return t(),function(){return clearInterval(e)}}),[]),(0,n.useEffect)((function(){var t,e,n=(t=za.observer.subscribe({next:function(t){}}),e=qo(Fa.observer).subscribe({next:function(t){t.event.type===va&&(console.log("[GLOBAL] Received metaClientMachine reset, resetting all other machines"),em.reset(),js.reset(),zs.reset(),Us.reset(),pl.reset(),ml.reset(),Us.reset(),zs.reset(),dm.reset(),pm.reset(),hm.reset(),cm.reset(),fm.reset(),fm.reset(),pm.reset(),hm.reset(),cm.reset(),dm.reset(),bm.reset(),ys.reset(),Es.reset(),$X.reset()),t.event.type===pa&&(console.log("[GLOBAL] Received metaClientMachine success, sending load to 4 machines, metas: ",ja.metas.length),ys.service.send(da,{payload:ja.client}),Es.service.send(da,{payload:ja.client}),$X.service.send(da,{payload:ja.client}),zs.service.send(da),Us.service.send(da))}}),function(){t.unsubscribe(),e.unsubscribe()});return za.reset(),za.service.send({type:fa,payload:{loadCache:!0}}),za.service.send({type:fa,payload:{loadRemote:!0}}),function(){n()}}),[]),n.createElement(Et.Provider,{value:St},n.createElement("div",{className:"App h-full"},n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading...")},n.createElement(st,null,n.createElement(ot,{path:"/",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Home...")},n.createElement(ED,null)))}),n.createElement(ot,{path:"/audit",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Audit...")},n.createElement(as,null)))}),n.createElement(ot,{path:"/import",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Import...")},n.createElement(Jg,null)))}),n.createElement(ot,{path:"/export",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Export...")},n.createElement(_g,null)))}),n.createElement(ot,{path:"/soil",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Soil...")},n.createElement($m,null)))}),n.createElement(ot,{path:"/photos",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Photos...")},n.createElement(vg,null)))}),n.createElement(ot,{path:"/stats",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Stats...")},n.createElement(ug,null)))}),n.createElement(ot,{path:"/maps3d",element:n.createElement(Dy,null,n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading Maps3D...")},n.createElement(ZX,null)))})))))};var tZ=i(745),eZ=document.querySelector("#root");(0,tZ.s)(eZ).render(n.createElement(sy,null,n.createElement(QX,null)))})()})();